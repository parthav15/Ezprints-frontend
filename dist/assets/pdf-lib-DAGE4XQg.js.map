{"version":3,"file":"pdf-lib-DAGE4XQg.js","sources":["../../node_modules/pdf-lib/es/utils/base64.js","../../node_modules/pdf-lib/es/utils/strings.js","../../node_modules/pdf-lib/es/utils/arrays.js","../../node_modules/pdf-lib/es/utils/async.js","../../node_modules/pdf-lib/es/utils/unicode.js","../../node_modules/pdf-lib/es/utils/numbers.js","../../node_modules/pdf-lib/es/utils/errors.js","../../node_modules/pdf-lib/es/utils/objects.js","../../node_modules/pdf-lib/es/utils/validators.js","../../node_modules/pdf-lib/es/utils/pdfDocEncoding.js","../../node_modules/pdf-lib/es/utils/Cache.js","../../node_modules/pdf-lib/es/core/errors.js","../../node_modules/pdf-lib/es/core/syntax/CharCodes.js","../../node_modules/pdf-lib/es/core/document/PDFHeader.js","../../node_modules/pdf-lib/es/core/objects/PDFObject.js","../../node_modules/pdf-lib/es/core/objects/PDFNumber.js","../../node_modules/pdf-lib/es/core/objects/PDFArray.js","../../node_modules/pdf-lib/es/core/objects/PDFBool.js","../../node_modules/pdf-lib/es/core/syntax/Delimiters.js","../../node_modules/pdf-lib/es/core/syntax/Whitespace.js","../../node_modules/pdf-lib/es/core/syntax/Irregular.js","../../node_modules/pdf-lib/es/core/objects/PDFName.js","../../node_modules/pdf-lib/es/core/objects/PDFNull.js","../../node_modules/pdf-lib/es/core/objects/PDFDict.js","../../node_modules/pdf-lib/es/core/objects/PDFStream.js","../../node_modules/pdf-lib/es/core/objects/PDFRawStream.js","../../node_modules/pdf-lib/es/core/objects/PDFRef.js","../../node_modules/pdf-lib/es/core/operators/PDFOperator.js","../../node_modules/pdf-lib/es/core/operators/PDFOperatorNames.js","../../node_modules/pdf-lib/es/core/structures/PDFFlateStream.js","../../node_modules/pdf-lib/es/core/structures/PDFContentStream.js","../../node_modules/pdf-lib/es/utils/rng.js","../../node_modules/pdf-lib/es/core/PDFContext.js","../../node_modules/pdf-lib/es/core/structures/PDFPageLeaf.js","../../node_modules/pdf-lib/es/core/PDFObjectCopier.js","../../node_modules/pdf-lib/es/core/document/PDFCrossRefSection.js","../../node_modules/pdf-lib/es/core/document/PDFTrailer.js","../../node_modules/pdf-lib/es/core/document/PDFTrailerDict.js","../../node_modules/pdf-lib/es/core/structures/PDFObjectStream.js","../../node_modules/pdf-lib/es/core/writers/PDFWriter.js","../../node_modules/pdf-lib/es/core/objects/PDFInvalidObject.js","../../node_modules/pdf-lib/es/core/structures/PDFCrossRefStream.js","../../node_modules/pdf-lib/es/core/writers/PDFStreamWriter.js","../../node_modules/pdf-lib/es/core/objects/PDFHexString.js","../../node_modules/pdf-lib/es/core/embedders/StandardFontEmbedder.js","../../node_modules/pdf-lib/es/core/embedders/CMap.js","../../node_modules/pdf-lib/es/core/embedders/FontFlags.js","../../node_modules/pdf-lib/es/core/objects/PDFString.js","../../node_modules/pdf-lib/es/core/embedders/CustomFontEmbedder.js","../../node_modules/pdf-lib/es/core/embedders/CustomFontSubsetEmbedder.js","../../node_modules/pdf-lib/es/core/embedders/FileEmbedder.js","../../node_modules/pdf-lib/es/core/embedders/JpegEmbedder.js","../../node_modules/pdf-lib/es/utils/png.js","../../node_modules/pdf-lib/es/core/embedders/PngEmbedder.js","../../node_modules/pdf-lib/es/core/streams/Stream.js","../../node_modules/pdf-lib/es/core/streams/DecodeStream.js","../../node_modules/pdf-lib/es/core/streams/Ascii85Stream.js","../../node_modules/pdf-lib/es/core/streams/AsciiHexStream.js","../../node_modules/pdf-lib/es/core/streams/FlateStream.js","../../node_modules/pdf-lib/es/core/streams/LZWStream.js","../../node_modules/pdf-lib/es/core/streams/RunLengthStream.js","../../node_modules/pdf-lib/es/core/streams/decode.js","../../node_modules/pdf-lib/es/core/embedders/PDFPageEmbedder.js","../../node_modules/pdf-lib/es/core/interactive/ViewerPreferences.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroField.js","../../node_modules/pdf-lib/es/core/annotation/BorderStyle.js","../../node_modules/pdf-lib/es/core/annotation/PDFAnnotation.js","../../node_modules/pdf-lib/es/core/annotation/AppearanceCharacteristics.js","../../node_modules/pdf-lib/es/core/annotation/PDFWidgetAnnotation.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroTerminal.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroButton.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroCheckBox.js","../../node_modules/pdf-lib/es/core/acroform/flags.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroChoice.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroComboBox.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroNonTerminal.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroSignature.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroText.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroPushButton.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroRadioButton.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroListBox.js","../../node_modules/pdf-lib/es/core/acroform/utils.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroForm.js","../../node_modules/pdf-lib/es/core/structures/PDFCatalog.js","../../node_modules/pdf-lib/es/core/structures/PDFPageTree.js","../../node_modules/pdf-lib/es/core/syntax/Numeric.js","../../node_modules/pdf-lib/es/core/parser/BaseParser.js","../../node_modules/pdf-lib/es/core/parser/ByteStream.js","../../node_modules/pdf-lib/es/core/syntax/Keywords.js","../../node_modules/pdf-lib/es/core/parser/PDFObjectParser.js","../../node_modules/pdf-lib/es/core/parser/PDFObjectStreamParser.js","../../node_modules/pdf-lib/es/core/parser/PDFXRefStreamParser.js","../../node_modules/pdf-lib/es/core/parser/PDFParser.js","../../node_modules/pdf-lib/es/core/annotation/flags.js","../../node_modules/pdf-lib/es/api/objects.js","../../node_modules/pdf-lib/es/api/rotations.js","../../node_modules/pdf-lib/es/api/operators.js","../../node_modules/pdf-lib/es/api/colors.js","../../node_modules/pdf-lib/es/api/svgPath.js","../../node_modules/pdf-lib/es/api/operations.js","../../node_modules/pdf-lib/es/api/errors.js","../../node_modules/pdf-lib/es/api/text/alignment.js","../../node_modules/pdf-lib/es/api/text/layout.js","../../node_modules/pdf-lib/es/api/form/appearances.js","../../node_modules/pdf-lib/es/api/PDFEmbeddedPage.js","../../node_modules/pdf-lib/es/api/PDFFont.js","../../node_modules/pdf-lib/es/api/PDFImage.js","../../node_modules/pdf-lib/es/api/image/alignment.js","../../node_modules/pdf-lib/es/api/form/PDFField.js","../../node_modules/pdf-lib/es/api/form/PDFCheckBox.js","../../node_modules/pdf-lib/es/api/form/PDFDropdown.js","../../node_modules/pdf-lib/es/api/form/PDFOptionList.js","../../node_modules/pdf-lib/es/api/form/PDFRadioGroup.js","../../node_modules/pdf-lib/es/api/form/PDFSignature.js","../../node_modules/pdf-lib/es/api/form/PDFTextField.js","../../node_modules/pdf-lib/es/api/StandardFonts.js","../../node_modules/pdf-lib/es/api/form/PDFForm.js","../../node_modules/pdf-lib/es/api/sizes.js","../../node_modules/pdf-lib/es/api/PDFDocumentOptions.js","../../node_modules/pdf-lib/es/api/PDFEmbeddedFile.js","../../node_modules/pdf-lib/es/api/PDFJavaScript.js","../../node_modules/pdf-lib/es/core/embedders/JavaScriptEmbedder.js","../../node_modules/pdf-lib/es/api/PDFDocument.js","../../node_modules/pdf-lib/es/api/PDFPageOptions.js","../../node_modules/pdf-lib/es/api/PDFPage.js","../../node_modules/pdf-lib/es/api/form/PDFButton.js"],"sourcesContent":["/*\n * The `chars`, `lookup`, `encode`, and `decode` members of this file are\n * licensed under the following:\n *\n *     base64-arraybuffer\n *     https://github.com/niklasvh/base64-arraybuffer\n *\n *     Copyright (c) 2012 Niklas von Hertzen\n *     Licensed under the MIT license.\n *\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport var encodeToBase64 = function (bytes) {\n    var base64 = '';\n    var len = bytes.length;\n    for (var i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport var decodeFromBase64 = function (base64) {\n    var bufferLength = base64.length * 0.75;\n    var len = base64.length;\n    var i;\n    var p = 0;\n    var encoded1;\n    var encoded2;\n    var encoded3;\n    var encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var bytes = new Uint8Array(bufferLength);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return bytes;\n};\n// This regex is designed to be as flexible as possible. It will parse certain\n// invalid data URIs.\nvar DATA_URI_PREFIX_REGEX = /^(data)?:?([\\w\\/\\+]+)?;?(charset=[\\w-]+|base64)?.*,/i;\n/**\n * If the `dataUri` input is a data URI, then the data URI prefix must not be\n * longer than 100 characters, or this function will fail to decode it.\n *\n * @param dataUri a base64 data URI or plain base64 string\n * @returns a Uint8Array containing the decoded input\n */\nexport var decodeFromBase64DataUri = function (dataUri) {\n    var trimmedUri = dataUri.trim();\n    var prefix = trimmedUri.substring(0, 100);\n    var res = prefix.match(DATA_URI_PREFIX_REGEX);\n    // Assume it's not a data URI - just a plain base64 string\n    if (!res)\n        return decodeFromBase64(trimmedUri);\n    // Remove the data URI prefix and parse the remainder as a base64 string\n    var fullMatch = res[0];\n    var data = trimmedUri.substring(fullMatch.length);\n    return decodeFromBase64(data);\n};\n//# sourceMappingURL=base64.js.map","export var toCharCode = function (character) { return character.charCodeAt(0); };\nexport var toCodePoint = function (character) { return character.codePointAt(0); };\nexport var toHexStringOfMinLength = function (num, minLength) {\n    return padStart(num.toString(16), minLength, '0').toUpperCase();\n};\nexport var toHexString = function (num) { return toHexStringOfMinLength(num, 2); };\nexport var charFromCode = function (code) { return String.fromCharCode(code); };\nexport var charFromHexCode = function (hex) { return charFromCode(parseInt(hex, 16)); };\nexport var padStart = function (value, length, padChar) {\n    var padding = '';\n    for (var idx = 0, len = length - value.length; idx < len; idx++) {\n        padding += padChar;\n    }\n    return padding + value;\n};\nexport var copyStringIntoBuffer = function (str, buffer, offset) {\n    var length = str.length;\n    for (var idx = 0; idx < length; idx++) {\n        buffer[offset++] = str.charCodeAt(idx);\n    }\n    return length;\n};\nexport var addRandomSuffix = function (prefix, suffixLength) {\n    if (suffixLength === void 0) { suffixLength = 4; }\n    return prefix + \"-\" + Math.floor(Math.random() * Math.pow(10, suffixLength));\n};\nexport var escapeRegExp = function (str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n};\nexport var cleanText = function (text) {\n    return text.replace(/\\t|\\u0085|\\u2028|\\u2029/g, '    ').replace(/[\\b\\v]/g, '');\n};\nexport var escapedNewlineChars = ['\\\\n', '\\\\f', '\\\\r', '\\\\u000B'];\nexport var newlineChars = ['\\n', '\\f', '\\r', '\\u000B'];\nexport var isNewlineChar = function (text) { return /^[\\n\\f\\r\\u000B]$/.test(text); };\nexport var lineSplit = function (text) { return text.split(/[\\n\\f\\r\\u000B]/); };\nexport var mergeLines = function (text) {\n    return text.replace(/[\\n\\f\\r\\u000B]/g, ' ');\n};\n// JavaScript's String.charAt() method doesn work on strings containing UTF-16\n// characters (with high and low surrogate pairs), such as ðŸ’© (poo emoji). This\n// `charAtIndex()` function does.\n//\n// Credit: https://github.com/mathiasbynens/String.prototype.at/blob/master/at.js#L14-L48\nexport var charAtIndex = function (text, index) {\n    // Get the first code unit and code unit value\n    var cuFirst = text.charCodeAt(index);\n    var cuSecond;\n    var nextIndex = index + 1;\n    var length = 1;\n    if (\n    // Check if it's the start of a surrogate pair.\n    cuFirst >= 0xd800 &&\n        cuFirst <= 0xdbff && // high surrogate\n        text.length > nextIndex // there is a next code unit\n    ) {\n        cuSecond = text.charCodeAt(nextIndex);\n        if (cuSecond >= 0xdc00 && cuSecond <= 0xdfff)\n            length = 2; // low surrogate\n    }\n    return [text.slice(index, index + length), length];\n};\nexport var charSplit = function (text) {\n    var chars = [];\n    for (var idx = 0, len = text.length; idx < len;) {\n        var _a = charAtIndex(text, idx), c = _a[0], cLen = _a[1];\n        chars.push(c);\n        idx += cLen;\n    }\n    return chars;\n};\nvar buildWordBreakRegex = function (wordBreaks) {\n    var newlineCharUnion = escapedNewlineChars.join('|');\n    var escapedRules = ['$'];\n    for (var idx = 0, len = wordBreaks.length; idx < len; idx++) {\n        var wordBreak = wordBreaks[idx];\n        if (isNewlineChar(wordBreak)) {\n            throw new TypeError(\"`wordBreak` must not include \" + newlineCharUnion);\n        }\n        escapedRules.push(wordBreak === '' ? '.' : escapeRegExp(wordBreak));\n    }\n    var breakRules = escapedRules.join('|');\n    return new RegExp(\"(\" + newlineCharUnion + \")|((.*?)(\" + breakRules + \"))\", 'gm');\n};\nexport var breakTextIntoLines = function (text, wordBreaks, maxWidth, computeWidthOfText) {\n    var regex = buildWordBreakRegex(wordBreaks);\n    var words = cleanText(text).match(regex);\n    var currLine = '';\n    var currWidth = 0;\n    var lines = [];\n    var pushCurrLine = function () {\n        if (currLine !== '')\n            lines.push(currLine);\n        currLine = '';\n        currWidth = 0;\n    };\n    for (var idx = 0, len = words.length; idx < len; idx++) {\n        var word = words[idx];\n        if (isNewlineChar(word)) {\n            pushCurrLine();\n        }\n        else {\n            var width = computeWidthOfText(word);\n            if (currWidth + width > maxWidth)\n                pushCurrLine();\n            currLine += word;\n            currWidth += width;\n        }\n    }\n    pushCurrLine();\n    return lines;\n};\n// See section \"7.9.4 Dates\" of the PDF specification\nvar dateRegex = /^D:(\\d\\d\\d\\d)(\\d\\d)?(\\d\\d)?(\\d\\d)?(\\d\\d)?(\\d\\d)?([+\\-Z])?(\\d\\d)?'?(\\d\\d)?'?$/;\nexport var parseDate = function (dateStr) {\n    var match = dateStr.match(dateRegex);\n    if (!match)\n        return undefined;\n    var year = match[1], _a = match[2], month = _a === void 0 ? '01' : _a, _b = match[3], day = _b === void 0 ? '01' : _b, _c = match[4], hours = _c === void 0 ? '00' : _c, _d = match[5], mins = _d === void 0 ? '00' : _d, _e = match[6], secs = _e === void 0 ? '00' : _e, _f = match[7], offsetSign = _f === void 0 ? 'Z' : _f, _g = match[8], offsetHours = _g === void 0 ? '00' : _g, _h = match[9], offsetMins = _h === void 0 ? '00' : _h;\n    // http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15\n    var tzOffset = offsetSign === 'Z' ? 'Z' : \"\" + offsetSign + offsetHours + \":\" + offsetMins;\n    var date = new Date(year + \"-\" + month + \"-\" + day + \"T\" + hours + \":\" + mins + \":\" + secs + tzOffset);\n    return date;\n};\nexport var findLastMatch = function (value, regex) {\n    var _a;\n    var position = 0;\n    var lastMatch;\n    while (position < value.length) {\n        var match = value.substring(position).match(regex);\n        if (!match)\n            return { match: lastMatch, pos: position };\n        lastMatch = match;\n        position += ((_a = match.index) !== null && _a !== void 0 ? _a : 0) + match[0].length;\n    }\n    return { match: lastMatch, pos: position };\n};\n//# sourceMappingURL=strings.js.map","import { decodeFromBase64DataUri } from \"./base64\";\nimport { charFromCode } from \"./strings\";\nexport var last = function (array) { return array[array.length - 1]; };\n// export const dropLast = <T>(array: T[]): T[] =>\n// array.slice(0, array.length - 1);\nexport var typedArrayFor = function (value) {\n    if (value instanceof Uint8Array)\n        return value;\n    var length = value.length;\n    var typedArray = new Uint8Array(length);\n    for (var idx = 0; idx < length; idx++) {\n        typedArray[idx] = value.charCodeAt(idx);\n    }\n    return typedArray;\n};\nexport var mergeIntoTypedArray = function () {\n    var arrays = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        arrays[_i] = arguments[_i];\n    }\n    var arrayCount = arrays.length;\n    var typedArrays = [];\n    for (var idx = 0; idx < arrayCount; idx++) {\n        var element = arrays[idx];\n        typedArrays[idx] =\n            element instanceof Uint8Array ? element : typedArrayFor(element);\n    }\n    var totalSize = 0;\n    for (var idx = 0; idx < arrayCount; idx++) {\n        totalSize += arrays[idx].length;\n    }\n    var merged = new Uint8Array(totalSize);\n    var offset = 0;\n    for (var arrIdx = 0; arrIdx < arrayCount; arrIdx++) {\n        var arr = typedArrays[arrIdx];\n        for (var byteIdx = 0, arrLen = arr.length; byteIdx < arrLen; byteIdx++) {\n            merged[offset++] = arr[byteIdx];\n        }\n    }\n    return merged;\n};\nexport var mergeUint8Arrays = function (arrays) {\n    var totalSize = 0;\n    for (var idx = 0, len = arrays.length; idx < len; idx++) {\n        totalSize += arrays[idx].length;\n    }\n    var mergedBuffer = new Uint8Array(totalSize);\n    var offset = 0;\n    for (var idx = 0, len = arrays.length; idx < len; idx++) {\n        var array = arrays[idx];\n        mergedBuffer.set(array, offset);\n        offset += array.length;\n    }\n    return mergedBuffer;\n};\nexport var arrayAsString = function (array) {\n    var str = '';\n    for (var idx = 0, len = array.length; idx < len; idx++) {\n        str += charFromCode(array[idx]);\n    }\n    return str;\n};\nexport var byAscendingId = function (a, b) { return a.id - b.id; };\nexport var sortedUniq = function (array, indexer) {\n    var uniq = [];\n    for (var idx = 0, len = array.length; idx < len; idx++) {\n        var curr = array[idx];\n        var prev = array[idx - 1];\n        if (idx === 0 || indexer(curr) !== indexer(prev)) {\n            uniq.push(curr);\n        }\n    }\n    return uniq;\n};\n// Arrays and TypedArrays in JS both have .reverse() methods, which would seem\n// to negate the need for this function. However, not all runtimes support this\n// method (e.g. React Native). This function compensates for that fact.\nexport var reverseArray = function (array) {\n    var arrayLen = array.length;\n    for (var idx = 0, len = Math.floor(arrayLen / 2); idx < len; idx++) {\n        var leftIdx = idx;\n        var rightIdx = arrayLen - idx - 1;\n        var temp = array[idx];\n        array[leftIdx] = array[rightIdx];\n        array[rightIdx] = temp;\n    }\n    return array;\n};\nexport var sum = function (array) {\n    var total = 0;\n    for (var idx = 0, len = array.length; idx < len; idx++) {\n        total += array[idx];\n    }\n    return total;\n};\nexport var range = function (start, end) {\n    var arr = new Array(end - start);\n    for (var idx = 0, len = arr.length; idx < len; idx++) {\n        arr[idx] = start + idx;\n    }\n    return arr;\n};\nexport var pluckIndices = function (arr, indices) {\n    var plucked = new Array(indices.length);\n    for (var idx = 0, len = indices.length; idx < len; idx++) {\n        plucked[idx] = arr[indices[idx]];\n    }\n    return plucked;\n};\nexport var canBeConvertedToUint8Array = function (input) {\n    return input instanceof Uint8Array ||\n        input instanceof ArrayBuffer ||\n        typeof input === 'string';\n};\nexport var toUint8Array = function (input) {\n    if (typeof input === 'string') {\n        return decodeFromBase64DataUri(input);\n    }\n    else if (input instanceof ArrayBuffer) {\n        return new Uint8Array(input);\n    }\n    else if (input instanceof Uint8Array) {\n        return input;\n    }\n    else {\n        throw new TypeError('`input` must be one of `string | ArrayBuffer | Uint8Array`');\n    }\n};\n//# sourceMappingURL=arrays.js.map","/**\n * Returns a Promise that resolves after at least one tick of the\n * Macro Task Queue occurs.\n */\nexport var waitForTick = function () {\n    return new Promise(function (resolve) {\n        setTimeout(function () { return resolve(); }, 0);\n    });\n};\n//# sourceMappingURL=async.js.map","import { toHexString } from \"./strings\";\n/**\n * Encodes a string to UTF-8.\n *\n * @param input The string to be encoded.\n * @param byteOrderMark Whether or not a byte order marker (BOM) should be added\n *                      to the start of the encoding. (default `true`)\n * @returns A Uint8Array containing the UTF-8 encoding of the input string.\n *\n * -----------------------------------------------------------------------------\n *\n * JavaScript strings are composed of Unicode code points. Code points are\n * integers in the range 0 to 1,114,111 (0x10FFFF). When serializing a string,\n * it must be encoded as a sequence of words. A word is typically 8, 16, or 32\n * bytes in size. As such, Unicode defines three encoding forms: UTF-8, UTF-16,\n * and UTF-32. These encoding forms are described in the Unicode standard [1].\n * This function implements the UTF-8 encoding form.\n *\n * -----------------------------------------------------------------------------\n *\n * In UTF-8, each code point is mapped to a sequence of 1, 2, 3, or 4 bytes.\n * Note that the logic which defines this mapping is slightly convoluted, and\n * not as straightforward as the mapping logic for UTF-16 or UTF-32. The UTF-8\n * mapping logic is as follows [2]:\n *\n * â€¢ If a code point is in the range U+0000..U+007F, then view it as a 7-bit\n *   integer: 0bxxxxxxx. Map the code point to 1 byte with the first high order\n *   bit set to 0:\n *\n *       b1=0b0xxxxxxx\n *\n * â€¢ If a code point is in the range U+0080..U+07FF, then view it as an 11-bit\n *   integer: 0byyyyyxxxxxx. Map the code point to 2 bytes with the first 5 bits\n *   of the code point stored in the first byte, and the last 6 bits stored in\n *   the second byte:\n *\n *       b1=0b110yyyyy    b2=0b10xxxxxx\n *\n * â€¢ If a code point is in the range U+0800..U+FFFF, then view it as a 16-bit\n *   integer, 0bzzzzyyyyyyxxxxxx. Map the code point to 3 bytes with the first\n *   4 bits stored in the first byte, the next 6 bits stored in the second byte,\n *   and the last 6 bits in the third byte:\n *\n *       b1=0b1110zzzz    b2=0b10yyyyyy    b3=0b10xxxxxx\n *\n * â€¢ If a code point is in the range U+10000...U+10FFFF, then view it as a\n *   21-bit integer, 0bvvvzzzzzzyyyyyyxxxxxx. Map the code point to 4 bytes with\n *   the first 3 bits stored in the first byte, the next 6 bits stored in the\n *   second byte, the next 6 bits stored in the third byte, and the last 6 bits\n *   stored in the fourth byte:\n *\n *       b1=0b11110xxx    b2=0b10zzzzzz    b3=0b10yyyyyy    b4=0b10xxxxxx\n *\n * -----------------------------------------------------------------------------\n *\n * It is important to note, when iterating through the code points of a string\n * in JavaScript, that if a character is encoded as a surrogate pair it will\n * increase the string's length by 2 instead of 1 [4]. For example:\n *\n * ```\n * > 'a'.length\n * 1\n * > 'ðŸ’©'.length\n * 2\n * > 'èªž'.length\n * 1\n * > 'aðŸ’©èªž'.length\n * 4\n * ```\n *\n * The results of the above example are explained by the fact that the\n * characters 'a' and 'èªž' are not represented by surrogate pairs, but 'ðŸ’©' is.\n *\n * Because of this idiosyncrasy in JavaScript's string implementation and APIs,\n * we must \"jump\" an extra index after encoding a character as a surrogate\n * pair. In practice, this means we must increment the index of our for loop by\n * 2 if we encode a surrogate pair, and 1 in all other cases.\n *\n * -----------------------------------------------------------------------------\n *\n * References:\n *   - [1] https://www.unicode.org/versions/Unicode12.0.0/UnicodeStandard-12.0.pdf\n *         3.9  Unicode Encoding Forms - UTF-8\n *   - [2] http://www.herongyang.com/Unicode/UTF-8-UTF-8-Encoding.html\n *   - [3] http://www.herongyang.com/Unicode/UTF-8-UTF-8-Encoding-Algorithm.html\n *   - [4] https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/length#Description\n *\n */\nexport var utf8Encode = function (input, byteOrderMark) {\n    if (byteOrderMark === void 0) { byteOrderMark = true; }\n    var encoded = [];\n    if (byteOrderMark)\n        encoded.push(0xef, 0xbb, 0xbf);\n    for (var idx = 0, len = input.length; idx < len;) {\n        var codePoint = input.codePointAt(idx);\n        // One byte encoding\n        if (codePoint < 0x80) {\n            var byte1 = codePoint & 0x7f;\n            encoded.push(byte1);\n            idx += 1;\n        }\n        // Two byte encoding\n        else if (codePoint < 0x0800) {\n            var byte1 = ((codePoint >> 6) & 0x1f) | 0xc0;\n            var byte2 = (codePoint & 0x3f) | 0x80;\n            encoded.push(byte1, byte2);\n            idx += 1;\n        }\n        // Three byte encoding\n        else if (codePoint < 0x010000) {\n            var byte1 = ((codePoint >> 12) & 0x0f) | 0xe0;\n            var byte2 = ((codePoint >> 6) & 0x3f) | 0x80;\n            var byte3 = (codePoint & 0x3f) | 0x80;\n            encoded.push(byte1, byte2, byte3);\n            idx += 1;\n        }\n        // Four byte encoding (surrogate pair)\n        else if (codePoint < 0x110000) {\n            var byte1 = ((codePoint >> 18) & 0x07) | 0xf0;\n            var byte2 = ((codePoint >> 12) & 0x3f) | 0x80;\n            var byte3 = ((codePoint >> 6) & 0x3f) | 0x80;\n            var byte4 = ((codePoint >> 0) & 0x3f) | 0x80;\n            encoded.push(byte1, byte2, byte3, byte4);\n            idx += 2;\n        }\n        // Should never reach this case\n        else\n            throw new Error(\"Invalid code point: 0x\" + toHexString(codePoint));\n    }\n    return new Uint8Array(encoded);\n};\n/**\n * Encodes a string to UTF-16.\n *\n * @param input The string to be encoded.\n * @param byteOrderMark Whether or not a byte order marker (BOM) should be added\n *                      to the start of the encoding. (default `true`)\n * @returns A Uint16Array containing the UTF-16 encoding of the input string.\n *\n * -----------------------------------------------------------------------------\n *\n * JavaScript strings are composed of Unicode code points. Code points are\n * integers in the range 0 to 1,114,111 (0x10FFFF). When serializing a string,\n * it must be encoded as a sequence of words. A word is typically 8, 16, or 32\n * bytes in size. As such, Unicode defines three encoding forms: UTF-8, UTF-16,\n * and UTF-32. These encoding forms are described in the Unicode standard [1].\n * This function implements the UTF-16 encoding form.\n *\n * -----------------------------------------------------------------------------\n *\n * In UTF-16, each code point is mapped to one or two 16-bit integers. The\n * UTF-16 mapping logic is as follows [2]:\n *\n * â€¢ If a code point is in the range U+0000..U+FFFF, then map the code point to\n *   a 16-bit integer with the most significant byte first.\n *\n * â€¢ If a code point is in the range U+10000..U+10000, then map the code point\n *   to two 16-bit integers. The first integer should contain the high surrogate\n *   and the second integer should contain the low surrogate. Both surrogates\n *   should be written with the most significant byte first.\n *\n * -----------------------------------------------------------------------------\n *\n * It is important to note, when iterating through the code points of a string\n * in JavaScript, that if a character is encoded as a surrogate pair it will\n * increase the string's length by 2 instead of 1 [4]. For example:\n *\n * ```\n * > 'a'.length\n * 1\n * > 'ðŸ’©'.length\n * 2\n * > 'èªž'.length\n * 1\n * > 'aðŸ’©èªž'.length\n * 4\n * ```\n *\n * The results of the above example are explained by the fact that the\n * characters 'a' and 'èªž' are not represented by surrogate pairs, but 'ðŸ’©' is.\n *\n * Because of this idiosyncrasy in JavaScript's string implementation and APIs,\n * we must \"jump\" an extra index after encoding a character as a surrogate\n * pair. In practice, this means we must increment the index of our for loop by\n * 2 if we encode a surrogate pair, and 1 in all other cases.\n *\n * -----------------------------------------------------------------------------\n *\n * References:\n *   - [1] https://www.unicode.org/versions/Unicode12.0.0/UnicodeStandard-12.0.pdf\n *         3.9  Unicode Encoding Forms - UTF-8\n *   - [2] http://www.herongyang.com/Unicode/UTF-16-UTF-16-Encoding.html\n *   - [3] https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/length#Description\n *\n */\nexport var utf16Encode = function (input, byteOrderMark) {\n    if (byteOrderMark === void 0) { byteOrderMark = true; }\n    var encoded = [];\n    if (byteOrderMark)\n        encoded.push(0xfeff);\n    for (var idx = 0, len = input.length; idx < len;) {\n        var codePoint = input.codePointAt(idx);\n        // Two byte encoding\n        if (codePoint < 0x010000) {\n            encoded.push(codePoint);\n            idx += 1;\n        }\n        // Four byte encoding (surrogate pair)\n        else if (codePoint < 0x110000) {\n            encoded.push(highSurrogate(codePoint), lowSurrogate(codePoint));\n            idx += 2;\n        }\n        // Should never reach this case\n        else\n            throw new Error(\"Invalid code point: 0x\" + toHexString(codePoint));\n    }\n    return new Uint16Array(encoded);\n};\n/**\n * Returns `true` if the `codePoint` is within the\n * Basic Multilingual Plane (BMP). Code points inside the BMP are not encoded\n * with surrogate pairs.\n * @param codePoint The code point to be evaluated.\n *\n * Reference: https://en.wikipedia.org/wiki/UTF-16#Description\n */\nexport var isWithinBMP = function (codePoint) {\n    return codePoint >= 0 && codePoint <= 0xffff;\n};\n/**\n * Returns `true` if the given `codePoint` is valid and must be represented\n * with a surrogate pair when encoded.\n * @param codePoint The code point to be evaluated.\n *\n * Reference: https://en.wikipedia.org/wiki/UTF-16#Description\n */\nexport var hasSurrogates = function (codePoint) {\n    return codePoint >= 0x010000 && codePoint <= 0x10ffff;\n};\n// From Unicode 3.0 spec, section 3.7:\n//   http://unicode.org/versions/Unicode3.0.0/ch03.pdf\nexport var highSurrogate = function (codePoint) {\n    return Math.floor((codePoint - 0x10000) / 0x400) + 0xd800;\n};\n// From Unicode 3.0 spec, section 3.7:\n//   http://unicode.org/versions/Unicode3.0.0/ch03.pdf\nexport var lowSurrogate = function (codePoint) {\n    return ((codePoint - 0x10000) % 0x400) + 0xdc00;\n};\nvar ByteOrder;\n(function (ByteOrder) {\n    ByteOrder[\"BigEndian\"] = \"BigEndian\";\n    ByteOrder[\"LittleEndian\"] = \"LittleEndian\";\n})(ByteOrder || (ByteOrder = {}));\nvar REPLACEMENT = 'ï¿½'.codePointAt(0);\n/**\n * Decodes a Uint8Array of data to a string using UTF-16.\n *\n * Note that this function attempts to recover from erronous input by\n * inserting the replacement character (ï¿½) to mark invalid code points\n * and surrogate pairs.\n *\n * @param input A Uint8Array containing UTF-16 encoded data\n * @param byteOrderMark Whether or not a byte order marker (BOM) should be read\n *                      at the start of the encoding. (default `true`)\n * @returns The decoded string.\n */\nexport var utf16Decode = function (input, byteOrderMark) {\n    if (byteOrderMark === void 0) { byteOrderMark = true; }\n    // Need at least 2 bytes of data in UTF-16 encodings\n    if (input.length <= 1)\n        return String.fromCodePoint(REPLACEMENT);\n    var byteOrder = byteOrderMark ? readBOM(input) : ByteOrder.BigEndian;\n    // Skip byte order mark if needed\n    var idx = byteOrderMark ? 2 : 0;\n    var codePoints = [];\n    while (input.length - idx >= 2) {\n        var first = decodeValues(input[idx++], input[idx++], byteOrder);\n        if (isHighSurrogate(first)) {\n            if (input.length - idx < 2) {\n                // Need at least 2 bytes left for the low surrogate that is required\n                codePoints.push(REPLACEMENT);\n            }\n            else {\n                var second = decodeValues(input[idx++], input[idx++], byteOrder);\n                if (isLowSurrogate(second)) {\n                    codePoints.push(first, second);\n                }\n                else {\n                    // Low surrogates should always follow high surrogates\n                    codePoints.push(REPLACEMENT);\n                }\n            }\n        }\n        else if (isLowSurrogate(first)) {\n            // High surrogates should always come first since `decodeValues()`\n            // accounts for the byte ordering\n            idx += 2;\n            codePoints.push(REPLACEMENT);\n        }\n        else {\n            codePoints.push(first);\n        }\n    }\n    // There shouldn't be extra byte(s) left over\n    if (idx < input.length)\n        codePoints.push(REPLACEMENT);\n    return String.fromCodePoint.apply(String, codePoints);\n};\n/**\n * Returns `true` if the given `codePoint` is a high surrogate.\n * @param codePoint The code point to be evaluated.\n *\n * Reference: https://en.wikipedia.org/wiki/UTF-16#Description\n */\nvar isHighSurrogate = function (codePoint) {\n    return codePoint >= 0xd800 && codePoint <= 0xdbff;\n};\n/**\n * Returns `true` if the given `codePoint` is a low surrogate.\n * @param codePoint The code point to be evaluated.\n *\n * Reference: https://en.wikipedia.org/wiki/UTF-16#Description\n */\nvar isLowSurrogate = function (codePoint) {\n    return codePoint >= 0xdc00 && codePoint <= 0xdfff;\n};\n/**\n * Decodes the given utf-16 values first and second using the specified\n * byte order.\n * @param first The first byte of the encoding.\n * @param second The second byte of the encoding.\n * @param byteOrder The byte order of the encoding.\n * Reference: https://en.wikipedia.org/wiki/UTF-16#Examples\n */\nvar decodeValues = function (first, second, byteOrder) {\n    // Append the binary representation of the preceding byte by shifting the\n    // first one 8 to the left and than applying a bitwise or-operator to append\n    // the second one.\n    if (byteOrder === ByteOrder.LittleEndian)\n        return (second << 8) | first;\n    if (byteOrder === ByteOrder.BigEndian)\n        return (first << 8) | second;\n    throw new Error(\"Invalid byteOrder: \" + byteOrder);\n};\n/**\n * Returns whether the given array contains a byte order mark for the\n * UTF-16BE or UTF-16LE encoding. If it has neither, BigEndian is assumed.\n *\n * Reference: https://en.wikipedia.org/wiki/Byte_order_mark#UTF-16\n *\n * @param bytes The byte array to be evaluated.\n */\n// prettier-ignore\nvar readBOM = function (bytes) { return (hasUtf16BigEndianBOM(bytes) ? ByteOrder.BigEndian\n    : hasUtf16LittleEndianBOM(bytes) ? ByteOrder.LittleEndian\n        : ByteOrder.BigEndian); };\nvar hasUtf16BigEndianBOM = function (bytes) {\n    return bytes[0] === 0xfe && bytes[1] === 0xff;\n};\nvar hasUtf16LittleEndianBOM = function (bytes) {\n    return bytes[0] === 0xff && bytes[1] === 0xfe;\n};\nexport var hasUtf16BOM = function (bytes) {\n    return hasUtf16BigEndianBOM(bytes) || hasUtf16LittleEndianBOM(bytes);\n};\n//# sourceMappingURL=unicode.js.map","// tslint:disable radix\n/**\n * Converts a number to its string representation in decimal. This function\n * differs from simply converting a number to a string with `.toString()`\n * because this function's output string will **not** contain exponential\n * notation.\n *\n * Credit: https://stackoverflow.com/a/46545519\n */\nexport var numberToString = function (num) {\n    var numStr = String(num);\n    if (Math.abs(num) < 1.0) {\n        var e = parseInt(num.toString().split('e-')[1]);\n        if (e) {\n            var negative = num < 0;\n            if (negative)\n                num *= -1;\n            num *= Math.pow(10, e - 1);\n            numStr = '0.' + new Array(e).join('0') + num.toString().substring(2);\n            if (negative)\n                numStr = '-' + numStr;\n        }\n    }\n    else {\n        var e = parseInt(num.toString().split('+')[1]);\n        if (e > 20) {\n            e -= 20;\n            num /= Math.pow(10, e);\n            numStr = num.toString() + new Array(e + 1).join('0');\n        }\n    }\n    return numStr;\n};\nexport var sizeInBytes = function (n) { return Math.ceil(n.toString(2).length / 8); };\n/**\n * Converts a number into its constituent bytes and returns them as\n * a number[].\n *\n * Returns most significant byte as first element in array. It may be necessary\n * to call .reverse() to get the bits in the desired order.\n *\n * Example:\n *   bytesFor(0x02A41E) => [ 0b10, 0b10100100, 0b11110 ]\n *\n * Credit for algorithm: https://stackoverflow.com/a/1936865\n */\nexport var bytesFor = function (n) {\n    var bytes = new Uint8Array(sizeInBytes(n));\n    for (var i = 1; i <= bytes.length; i++) {\n        bytes[i - 1] = n >> ((bytes.length - i) * 8);\n    }\n    return bytes;\n};\n//# sourceMappingURL=numbers.js.map","export var error = function (msg) {\n    throw new Error(msg);\n};\n//# sourceMappingURL=errors.js.map","import { FontNames } from '@pdf-lib/standard-fonts';\nexport var values = function (obj) { return Object.keys(obj).map(function (k) { return obj[k]; }); };\nexport var StandardFontValues = values(FontNames);\nexport var isStandardFont = function (input) {\n    return StandardFontValues.includes(input);\n};\nexport var rectanglesAreEqual = function (a, b) { return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height; };\n//# sourceMappingURL=objects.js.map","/* tslint:disable:ban-types */\nimport { values as objectValues } from \"./objects\";\nexport var backtick = function (val) { return \"`\" + val + \"`\"; };\nexport var singleQuote = function (val) { return \"'\" + val + \"'\"; };\n// prettier-ignore\nvar formatValue = function (value) {\n    var type = typeof value;\n    if (type === 'string')\n        return singleQuote(value);\n    else if (type === 'undefined')\n        return backtick(value);\n    else\n        return value;\n};\nexport var createValueErrorMsg = function (value, valueName, values) {\n    var allowedValues = new Array(values.length);\n    for (var idx = 0, len = values.length; idx < len; idx++) {\n        var v = values[idx];\n        allowedValues[idx] = formatValue(v);\n    }\n    var joinedValues = allowedValues.join(' or ');\n    // prettier-ignore\n    return backtick(valueName) + \" must be one of \" + joinedValues + \", but was actually \" + formatValue(value);\n};\nexport var assertIsOneOf = function (value, valueName, allowedValues) {\n    if (!Array.isArray(allowedValues)) {\n        allowedValues = objectValues(allowedValues);\n    }\n    for (var idx = 0, len = allowedValues.length; idx < len; idx++) {\n        if (value === allowedValues[idx])\n            return;\n    }\n    throw new TypeError(createValueErrorMsg(value, valueName, allowedValues));\n};\nexport var assertIsOneOfOrUndefined = function (value, valueName, allowedValues) {\n    if (!Array.isArray(allowedValues)) {\n        allowedValues = objectValues(allowedValues);\n    }\n    assertIsOneOf(value, valueName, allowedValues.concat(undefined));\n};\nexport var assertIsSubset = function (values, valueName, allowedValues) {\n    if (!Array.isArray(allowedValues)) {\n        allowedValues = objectValues(allowedValues);\n    }\n    for (var idx = 0, len = values.length; idx < len; idx++) {\n        assertIsOneOf(values[idx], valueName, allowedValues);\n    }\n};\nexport var getType = function (val) {\n    if (val === null)\n        return 'null';\n    if (val === undefined)\n        return 'undefined';\n    if (typeof val === 'string')\n        return 'string';\n    if (isNaN(val))\n        return 'NaN';\n    if (typeof val === 'number')\n        return 'number';\n    if (typeof val === 'boolean')\n        return 'boolean';\n    if (typeof val === 'symbol')\n        return 'symbol';\n    if (typeof val === 'bigint')\n        return 'bigint';\n    if (val.constructor && val.constructor.name)\n        return val.constructor.name;\n    if (val.name)\n        return val.name;\n    if (val.constructor)\n        return String(val.constructor);\n    return String(val);\n};\nexport var isType = function (value, type) {\n    if (type === 'null')\n        return value === null;\n    if (type === 'undefined')\n        return value === undefined;\n    if (type === 'string')\n        return typeof value === 'string';\n    if (type === 'number')\n        return typeof value === 'number' && !isNaN(value);\n    if (type === 'boolean')\n        return typeof value === 'boolean';\n    if (type === 'symbol')\n        return typeof value === 'symbol';\n    if (type === 'bigint')\n        return typeof value === 'bigint';\n    if (type === Date)\n        return value instanceof Date;\n    if (type === Array)\n        return value instanceof Array;\n    if (type === Uint8Array)\n        return value instanceof Uint8Array;\n    if (type === ArrayBuffer)\n        return value instanceof ArrayBuffer;\n    if (type === Function)\n        return value instanceof Function;\n    return value instanceof type[0];\n};\nexport var createTypeErrorMsg = function (value, valueName, types) {\n    var allowedTypes = new Array(types.length);\n    for (var idx = 0, len = types.length; idx < len; idx++) {\n        var type = types[idx];\n        if (type === 'null')\n            allowedTypes[idx] = backtick('null');\n        if (type === 'undefined')\n            allowedTypes[idx] = backtick('undefined');\n        if (type === 'string')\n            allowedTypes[idx] = backtick('string');\n        else if (type === 'number')\n            allowedTypes[idx] = backtick('number');\n        else if (type === 'boolean')\n            allowedTypes[idx] = backtick('boolean');\n        else if (type === 'symbol')\n            allowedTypes[idx] = backtick('symbol');\n        else if (type === 'bigint')\n            allowedTypes[idx] = backtick('bigint');\n        else if (type === Array)\n            allowedTypes[idx] = backtick('Array');\n        else if (type === Uint8Array)\n            allowedTypes[idx] = backtick('Uint8Array');\n        else if (type === ArrayBuffer)\n            allowedTypes[idx] = backtick('ArrayBuffer');\n        else\n            allowedTypes[idx] = backtick(type[1]);\n    }\n    var joinedTypes = allowedTypes.join(' or ');\n    // prettier-ignore\n    return backtick(valueName) + \" must be of type \" + joinedTypes + \", but was actually of type \" + backtick(getType(value));\n};\nexport var assertIs = function (value, valueName, types) {\n    for (var idx = 0, len = types.length; idx < len; idx++) {\n        if (isType(value, types[idx]))\n            return;\n    }\n    throw new TypeError(createTypeErrorMsg(value, valueName, types));\n};\nexport var assertOrUndefined = function (value, valueName, types) {\n    assertIs(value, valueName, types.concat('undefined'));\n};\nexport var assertEachIs = function (values, valueName, types) {\n    for (var idx = 0, len = values.length; idx < len; idx++) {\n        assertIs(values[idx], valueName, types);\n    }\n};\nexport var assertRange = function (value, valueName, min, max) {\n    assertIs(value, valueName, ['number']);\n    assertIs(min, 'min', ['number']);\n    assertIs(max, 'max', ['number']);\n    max = Math.max(min, max);\n    if (value < min || value > max) {\n        // prettier-ignore\n        throw new Error(backtick(valueName) + \" must be at least \" + min + \" and at most \" + max + \", but was actually \" + value);\n    }\n};\nexport var assertRangeOrUndefined = function (value, valueName, min, max) {\n    assertIs(value, valueName, ['number', 'undefined']);\n    if (typeof value === 'number')\n        assertRange(value, valueName, min, max);\n};\nexport var assertMultiple = function (value, valueName, multiplier) {\n    assertIs(value, valueName, ['number']);\n    if (value % multiplier !== 0) {\n        // prettier-ignore\n        throw new Error(backtick(valueName) + \" must be a multiple of \" + multiplier + \", but was actually \" + value);\n    }\n};\nexport var assertInteger = function (value, valueName) {\n    if (!Number.isInteger(value)) {\n        throw new Error(backtick(valueName) + \" must be an integer, but was actually \" + value);\n    }\n};\nexport var assertPositive = function (value, valueName) {\n    if (![1, 0].includes(Math.sign(value))) {\n        // prettier-ignore\n        throw new Error(backtick(valueName) + \" must be a positive number or 0, but was actually \" + value);\n    }\n};\n//# sourceMappingURL=validators.js.map","import { toCharCode } from \"./strings\";\n// Mapping from PDFDocEncoding to Unicode code point\nvar pdfDocEncodingToUnicode = new Uint16Array(256);\n// Initialize the code points which are the same\nfor (var idx = 0; idx < 256; idx++) {\n    pdfDocEncodingToUnicode[idx] = idx;\n}\n// Set differences (see \"Table D.2 â€“ PDFDocEncoding Character Set\" of the PDF spec)\npdfDocEncodingToUnicode[0x16] = toCharCode('\\u0017'); // SYNCRONOUS IDLE\npdfDocEncodingToUnicode[0x18] = toCharCode('\\u02D8'); // BREVE\npdfDocEncodingToUnicode[0x19] = toCharCode('\\u02C7'); // CARON\npdfDocEncodingToUnicode[0x1a] = toCharCode('\\u02C6'); // MODIFIER LETTER CIRCUMFLEX ACCENT\npdfDocEncodingToUnicode[0x1b] = toCharCode('\\u02D9'); // DOT ABOVE\npdfDocEncodingToUnicode[0x1c] = toCharCode('\\u02DD'); // DOUBLE ACUTE ACCENT\npdfDocEncodingToUnicode[0x1d] = toCharCode('\\u02DB'); // OGONEK\npdfDocEncodingToUnicode[0x1e] = toCharCode('\\u02DA'); // RING ABOVE\npdfDocEncodingToUnicode[0x1f] = toCharCode('\\u02DC'); // SMALL TILDE\npdfDocEncodingToUnicode[0x7f] = toCharCode('\\uFFFD'); // REPLACEMENT CHARACTER (box with questionmark)\npdfDocEncodingToUnicode[0x80] = toCharCode('\\u2022'); // BULLET\npdfDocEncodingToUnicode[0x81] = toCharCode('\\u2020'); // DAGGER\npdfDocEncodingToUnicode[0x82] = toCharCode('\\u2021'); // DOUBLE DAGGER\npdfDocEncodingToUnicode[0x83] = toCharCode('\\u2026'); // HORIZONTAL ELLIPSIS\npdfDocEncodingToUnicode[0x84] = toCharCode('\\u2014'); // EM DASH\npdfDocEncodingToUnicode[0x85] = toCharCode('\\u2013'); // EN DASH\npdfDocEncodingToUnicode[0x86] = toCharCode('\\u0192'); // LATIN SMALL LETTER SCRIPT F\npdfDocEncodingToUnicode[0x87] = toCharCode('\\u2044'); // FRACTION SLASH (solidus)\npdfDocEncodingToUnicode[0x88] = toCharCode('\\u2039'); // SINGLE LEFT-POINTING ANGLE QUOTATION MARK\npdfDocEncodingToUnicode[0x89] = toCharCode('\\u203A'); // SINGLE RIGHT-POINTING ANGLE QUOTATION MARK\npdfDocEncodingToUnicode[0x8a] = toCharCode('\\u2212'); // MINUS SIGN\npdfDocEncodingToUnicode[0x8b] = toCharCode('\\u2030'); // PER MILLE SIGN\npdfDocEncodingToUnicode[0x8c] = toCharCode('\\u201E'); // DOUBLE LOW-9 QUOTATION MARK (quotedblbase)\npdfDocEncodingToUnicode[0x8d] = toCharCode('\\u201C'); // LEFT DOUBLE QUOTATION MARK (quotedblleft)\npdfDocEncodingToUnicode[0x8e] = toCharCode('\\u201D'); // RIGHT DOUBLE QUOTATION MARK (quotedblright)\npdfDocEncodingToUnicode[0x8f] = toCharCode('\\u2018'); // LEFT SINGLE QUOTATION MARK (quoteleft)\npdfDocEncodingToUnicode[0x90] = toCharCode('\\u2019'); // RIGHT SINGLE QUOTATION MARK (quoteright)\npdfDocEncodingToUnicode[0x91] = toCharCode('\\u201A'); // SINGLE LOW-9 QUOTATION MARK (quotesinglbase)\npdfDocEncodingToUnicode[0x92] = toCharCode('\\u2122'); // TRADE MARK SIGN\npdfDocEncodingToUnicode[0x93] = toCharCode('\\uFB01'); // LATIN SMALL LIGATURE FI\npdfDocEncodingToUnicode[0x94] = toCharCode('\\uFB02'); // LATIN SMALL LIGATURE FL\npdfDocEncodingToUnicode[0x95] = toCharCode('\\u0141'); // LATIN CAPITAL LETTER L WITH STROKE\npdfDocEncodingToUnicode[0x96] = toCharCode('\\u0152'); // LATIN CAPITAL LIGATURE OE\npdfDocEncodingToUnicode[0x97] = toCharCode('\\u0160'); // LATIN CAPITAL LETTER S WITH CARON\npdfDocEncodingToUnicode[0x98] = toCharCode('\\u0178'); // LATIN CAPITAL LETTER Y WITH DIAERESIS\npdfDocEncodingToUnicode[0x99] = toCharCode('\\u017D'); // LATIN CAPITAL LETTER Z WITH CARON\npdfDocEncodingToUnicode[0x9a] = toCharCode('\\u0131'); // LATIN SMALL LETTER DOTLESS I\npdfDocEncodingToUnicode[0x9b] = toCharCode('\\u0142'); // LATIN SMALL LETTER L WITH STROKE\npdfDocEncodingToUnicode[0x9c] = toCharCode('\\u0153'); // LATIN SMALL LIGATURE OE\npdfDocEncodingToUnicode[0x9d] = toCharCode('\\u0161'); // LATIN SMALL LETTER S WITH CARON\npdfDocEncodingToUnicode[0x9e] = toCharCode('\\u017E'); // LATIN SMALL LETTER Z WITH CARON\npdfDocEncodingToUnicode[0x9f] = toCharCode('\\uFFFD'); // REPLACEMENT CHARACTER (box with questionmark)\npdfDocEncodingToUnicode[0xa0] = toCharCode('\\u20AC'); // EURO SIGN\npdfDocEncodingToUnicode[0xad] = toCharCode('\\uFFFD'); // REPLACEMENT CHARACTER (box with questionmark)\n/**\n * Decode a byte array into a string using PDFDocEncoding.\n *\n * @param bytes a byte array (decimal representation) containing a string\n *              encoded with PDFDocEncoding.\n */\nexport var pdfDocEncodingDecode = function (bytes) {\n    var codePoints = new Array(bytes.length);\n    for (var idx = 0, len = bytes.length; idx < len; idx++) {\n        codePoints[idx] = pdfDocEncodingToUnicode[bytes[idx]];\n    }\n    return String.fromCodePoint.apply(String, codePoints);\n};\n//# sourceMappingURL=pdfDocEncoding.js.map","var Cache = /** @class */ (function () {\n    function Cache(populate) {\n        this.populate = populate;\n        this.value = undefined;\n    }\n    Cache.prototype.getValue = function () {\n        return this.value;\n    };\n    Cache.prototype.access = function () {\n        if (!this.value)\n            this.value = this.populate();\n        return this.value;\n    };\n    Cache.prototype.invalidate = function () {\n        this.value = undefined;\n    };\n    Cache.populatedBy = function (populate) { return new Cache(populate); };\n    return Cache;\n}());\nexport default Cache;\n//# sourceMappingURL=Cache.js.map","import { __extends } from \"tslib\";\nimport { arrayAsString } from \"../utils\";\nvar MethodNotImplementedError = /** @class */ (function (_super) {\n    __extends(MethodNotImplementedError, _super);\n    function MethodNotImplementedError(className, methodName) {\n        var _this = this;\n        var msg = \"Method \" + className + \".\" + methodName + \"() not implemented\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MethodNotImplementedError;\n}(Error));\nexport { MethodNotImplementedError };\nvar PrivateConstructorError = /** @class */ (function (_super) {\n    __extends(PrivateConstructorError, _super);\n    function PrivateConstructorError(className) {\n        var _this = this;\n        var msg = \"Cannot construct \" + className + \" - it has a private constructor\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return PrivateConstructorError;\n}(Error));\nexport { PrivateConstructorError };\nvar UnexpectedObjectTypeError = /** @class */ (function (_super) {\n    __extends(UnexpectedObjectTypeError, _super);\n    function UnexpectedObjectTypeError(expected, actual) {\n        var _this = this;\n        var name = function (t) { var _a, _b; return (_a = t === null || t === void 0 ? void 0 : t.name) !== null && _a !== void 0 ? _a : (_b = t === null || t === void 0 ? void 0 : t.constructor) === null || _b === void 0 ? void 0 : _b.name; };\n        var expectedTypes = Array.isArray(expected)\n            ? expected.map(name)\n            : [name(expected)];\n        var msg = \"Expected instance of \" + expectedTypes.join(' or ') + \", \" +\n            (\"but got instance of \" + (actual ? name(actual) : actual));\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return UnexpectedObjectTypeError;\n}(Error));\nexport { UnexpectedObjectTypeError };\nvar UnsupportedEncodingError = /** @class */ (function (_super) {\n    __extends(UnsupportedEncodingError, _super);\n    function UnsupportedEncodingError(encoding) {\n        var _this = this;\n        var msg = encoding + \" stream encoding not supported\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return UnsupportedEncodingError;\n}(Error));\nexport { UnsupportedEncodingError };\nvar ReparseError = /** @class */ (function (_super) {\n    __extends(ReparseError, _super);\n    function ReparseError(className, methodName) {\n        var _this = this;\n        var msg = \"Cannot call \" + className + \".\" + methodName + \"() more than once\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return ReparseError;\n}(Error));\nexport { ReparseError };\nvar MissingCatalogError = /** @class */ (function (_super) {\n    __extends(MissingCatalogError, _super);\n    function MissingCatalogError(ref) {\n        var _this = this;\n        var msg = \"Missing catalog (ref=\" + ref + \")\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingCatalogError;\n}(Error));\nexport { MissingCatalogError };\nvar MissingPageContentsEmbeddingError = /** @class */ (function (_super) {\n    __extends(MissingPageContentsEmbeddingError, _super);\n    function MissingPageContentsEmbeddingError() {\n        var _this = this;\n        var msg = \"Can't embed page with missing Contents\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingPageContentsEmbeddingError;\n}(Error));\nexport { MissingPageContentsEmbeddingError };\nvar UnrecognizedStreamTypeError = /** @class */ (function (_super) {\n    __extends(UnrecognizedStreamTypeError, _super);\n    function UnrecognizedStreamTypeError(stream) {\n        var _a, _b, _c;\n        var _this = this;\n        var streamType = (_c = (_b = (_a = stream === null || stream === void 0 ? void 0 : stream.contructor) === null || _a === void 0 ? void 0 : _a.name) !== null && _b !== void 0 ? _b : stream === null || stream === void 0 ? void 0 : stream.name) !== null && _c !== void 0 ? _c : stream;\n        var msg = \"Unrecognized stream type: \" + streamType;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return UnrecognizedStreamTypeError;\n}(Error));\nexport { UnrecognizedStreamTypeError };\nvar PageEmbeddingMismatchedContextError = /** @class */ (function (_super) {\n    __extends(PageEmbeddingMismatchedContextError, _super);\n    function PageEmbeddingMismatchedContextError() {\n        var _this = this;\n        var msg = \"Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return PageEmbeddingMismatchedContextError;\n}(Error));\nexport { PageEmbeddingMismatchedContextError };\nvar PDFArrayIsNotRectangleError = /** @class */ (function (_super) {\n    __extends(PDFArrayIsNotRectangleError, _super);\n    function PDFArrayIsNotRectangleError(size) {\n        var _this = this;\n        var msg = \"Attempted to convert PDFArray with \" + size + \" elements to rectangle, but must have exactly 4 elements.\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return PDFArrayIsNotRectangleError;\n}(Error));\nexport { PDFArrayIsNotRectangleError };\nvar InvalidPDFDateStringError = /** @class */ (function (_super) {\n    __extends(InvalidPDFDateStringError, _super);\n    function InvalidPDFDateStringError(value) {\n        var _this = this;\n        var msg = \"Attempted to convert \\\"\" + value + \"\\\" to a date, but it does not match the PDF date string format.\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidPDFDateStringError;\n}(Error));\nexport { InvalidPDFDateStringError };\nvar InvalidTargetIndexError = /** @class */ (function (_super) {\n    __extends(InvalidTargetIndexError, _super);\n    function InvalidTargetIndexError(targetIndex, Count) {\n        var _this = this;\n        var msg = \"Invalid targetIndex specified: targetIndex=\" + targetIndex + \" must be less than Count=\" + Count;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidTargetIndexError;\n}(Error));\nexport { InvalidTargetIndexError };\nvar CorruptPageTreeError = /** @class */ (function (_super) {\n    __extends(CorruptPageTreeError, _super);\n    function CorruptPageTreeError(targetIndex, operation) {\n        var _this = this;\n        var msg = \"Failed to \" + operation + \" at targetIndex=\" + targetIndex + \" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return CorruptPageTreeError;\n}(Error));\nexport { CorruptPageTreeError };\nvar IndexOutOfBoundsError = /** @class */ (function (_super) {\n    __extends(IndexOutOfBoundsError, _super);\n    function IndexOutOfBoundsError(index, min, max) {\n        var _this = this;\n        var msg = \"index should be at least \" + min + \" and at most \" + max + \", but was actually \" + index;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return IndexOutOfBoundsError;\n}(Error));\nexport { IndexOutOfBoundsError };\nvar InvalidAcroFieldValueError = /** @class */ (function (_super) {\n    __extends(InvalidAcroFieldValueError, _super);\n    function InvalidAcroFieldValueError() {\n        var _this = this;\n        var msg = \"Attempted to set invalid field value\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidAcroFieldValueError;\n}(Error));\nexport { InvalidAcroFieldValueError };\nvar MultiSelectValueError = /** @class */ (function (_super) {\n    __extends(MultiSelectValueError, _super);\n    function MultiSelectValueError() {\n        var _this = this;\n        var msg = \"Attempted to select multiple values for single-select field\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MultiSelectValueError;\n}(Error));\nexport { MultiSelectValueError };\nvar MissingDAEntryError = /** @class */ (function (_super) {\n    __extends(MissingDAEntryError, _super);\n    function MissingDAEntryError(fieldName) {\n        var _this = this;\n        var msg = \"No /DA (default appearance) entry found for field: \" + fieldName;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingDAEntryError;\n}(Error));\nexport { MissingDAEntryError };\nvar MissingTfOperatorError = /** @class */ (function (_super) {\n    __extends(MissingTfOperatorError, _super);\n    function MissingTfOperatorError(fieldName) {\n        var _this = this;\n        var msg = \"No Tf operator found for DA of field: \" + fieldName;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingTfOperatorError;\n}(Error));\nexport { MissingTfOperatorError };\nvar NumberParsingError = /** @class */ (function (_super) {\n    __extends(NumberParsingError, _super);\n    function NumberParsingError(pos, value) {\n        var _this = this;\n        var msg = \"Failed to parse number \" +\n            (\"(line:\" + pos.line + \" col:\" + pos.column + \" offset=\" + pos.offset + \"): \\\"\" + value + \"\\\"\");\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return NumberParsingError;\n}(Error));\nexport { NumberParsingError };\nvar PDFParsingError = /** @class */ (function (_super) {\n    __extends(PDFParsingError, _super);\n    function PDFParsingError(pos, details) {\n        var _this = this;\n        var msg = \"Failed to parse PDF document \" +\n            (\"(line:\" + pos.line + \" col:\" + pos.column + \" offset=\" + pos.offset + \"): \" + details);\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return PDFParsingError;\n}(Error));\nexport { PDFParsingError };\nvar NextByteAssertionError = /** @class */ (function (_super) {\n    __extends(NextByteAssertionError, _super);\n    function NextByteAssertionError(pos, expectedByte, actualByte) {\n        var _this = this;\n        var msg = \"Expected next byte to be \" + expectedByte + \" but it was actually \" + actualByte;\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return NextByteAssertionError;\n}(PDFParsingError));\nexport { NextByteAssertionError };\nvar PDFObjectParsingError = /** @class */ (function (_super) {\n    __extends(PDFObjectParsingError, _super);\n    function PDFObjectParsingError(pos, byte) {\n        var _this = this;\n        var msg = \"Failed to parse PDF object starting with the following byte: \" + byte;\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return PDFObjectParsingError;\n}(PDFParsingError));\nexport { PDFObjectParsingError };\nvar PDFInvalidObjectParsingError = /** @class */ (function (_super) {\n    __extends(PDFInvalidObjectParsingError, _super);\n    function PDFInvalidObjectParsingError(pos) {\n        var _this = this;\n        var msg = \"Failed to parse invalid PDF object\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return PDFInvalidObjectParsingError;\n}(PDFParsingError));\nexport { PDFInvalidObjectParsingError };\nvar PDFStreamParsingError = /** @class */ (function (_super) {\n    __extends(PDFStreamParsingError, _super);\n    function PDFStreamParsingError(pos) {\n        var _this = this;\n        var msg = \"Failed to parse PDF stream\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return PDFStreamParsingError;\n}(PDFParsingError));\nexport { PDFStreamParsingError };\nvar UnbalancedParenthesisError = /** @class */ (function (_super) {\n    __extends(UnbalancedParenthesisError, _super);\n    function UnbalancedParenthesisError(pos) {\n        var _this = this;\n        var msg = \"Failed to parse PDF literal string due to unbalanced parenthesis\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return UnbalancedParenthesisError;\n}(PDFParsingError));\nexport { UnbalancedParenthesisError };\nvar StalledParserError = /** @class */ (function (_super) {\n    __extends(StalledParserError, _super);\n    function StalledParserError(pos) {\n        var _this = this;\n        var msg = \"Parser stalled\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return StalledParserError;\n}(PDFParsingError));\nexport { StalledParserError };\nvar MissingPDFHeaderError = /** @class */ (function (_super) {\n    __extends(MissingPDFHeaderError, _super);\n    function MissingPDFHeaderError(pos) {\n        var _this = this;\n        var msg = \"No PDF header found\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return MissingPDFHeaderError;\n}(PDFParsingError));\nexport { MissingPDFHeaderError };\nvar MissingKeywordError = /** @class */ (function (_super) {\n    __extends(MissingKeywordError, _super);\n    function MissingKeywordError(pos, keyword) {\n        var _this = this;\n        var msg = \"Did not find expected keyword '\" + arrayAsString(keyword) + \"'\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return MissingKeywordError;\n}(PDFParsingError));\nexport { MissingKeywordError };\n//# sourceMappingURL=errors.js.map","var CharCodes;\n(function (CharCodes) {\n    CharCodes[CharCodes[\"Null\"] = 0] = \"Null\";\n    CharCodes[CharCodes[\"Backspace\"] = 8] = \"Backspace\";\n    CharCodes[CharCodes[\"Tab\"] = 9] = \"Tab\";\n    CharCodes[CharCodes[\"Newline\"] = 10] = \"Newline\";\n    CharCodes[CharCodes[\"FormFeed\"] = 12] = \"FormFeed\";\n    CharCodes[CharCodes[\"CarriageReturn\"] = 13] = \"CarriageReturn\";\n    CharCodes[CharCodes[\"Space\"] = 32] = \"Space\";\n    CharCodes[CharCodes[\"ExclamationPoint\"] = 33] = \"ExclamationPoint\";\n    CharCodes[CharCodes[\"Hash\"] = 35] = \"Hash\";\n    CharCodes[CharCodes[\"Percent\"] = 37] = \"Percent\";\n    CharCodes[CharCodes[\"LeftParen\"] = 40] = \"LeftParen\";\n    CharCodes[CharCodes[\"RightParen\"] = 41] = \"RightParen\";\n    CharCodes[CharCodes[\"Plus\"] = 43] = \"Plus\";\n    CharCodes[CharCodes[\"Minus\"] = 45] = \"Minus\";\n    CharCodes[CharCodes[\"Dash\"] = 45] = \"Dash\";\n    CharCodes[CharCodes[\"Period\"] = 46] = \"Period\";\n    CharCodes[CharCodes[\"ForwardSlash\"] = 47] = \"ForwardSlash\";\n    CharCodes[CharCodes[\"Zero\"] = 48] = \"Zero\";\n    CharCodes[CharCodes[\"One\"] = 49] = \"One\";\n    CharCodes[CharCodes[\"Two\"] = 50] = \"Two\";\n    CharCodes[CharCodes[\"Three\"] = 51] = \"Three\";\n    CharCodes[CharCodes[\"Four\"] = 52] = \"Four\";\n    CharCodes[CharCodes[\"Five\"] = 53] = \"Five\";\n    CharCodes[CharCodes[\"Six\"] = 54] = \"Six\";\n    CharCodes[CharCodes[\"Seven\"] = 55] = \"Seven\";\n    CharCodes[CharCodes[\"Eight\"] = 56] = \"Eight\";\n    CharCodes[CharCodes[\"Nine\"] = 57] = \"Nine\";\n    CharCodes[CharCodes[\"LessThan\"] = 60] = \"LessThan\";\n    CharCodes[CharCodes[\"GreaterThan\"] = 62] = \"GreaterThan\";\n    CharCodes[CharCodes[\"A\"] = 65] = \"A\";\n    CharCodes[CharCodes[\"D\"] = 68] = \"D\";\n    CharCodes[CharCodes[\"E\"] = 69] = \"E\";\n    CharCodes[CharCodes[\"F\"] = 70] = \"F\";\n    CharCodes[CharCodes[\"O\"] = 79] = \"O\";\n    CharCodes[CharCodes[\"P\"] = 80] = \"P\";\n    CharCodes[CharCodes[\"R\"] = 82] = \"R\";\n    CharCodes[CharCodes[\"LeftSquareBracket\"] = 91] = \"LeftSquareBracket\";\n    CharCodes[CharCodes[\"BackSlash\"] = 92] = \"BackSlash\";\n    CharCodes[CharCodes[\"RightSquareBracket\"] = 93] = \"RightSquareBracket\";\n    CharCodes[CharCodes[\"a\"] = 97] = \"a\";\n    CharCodes[CharCodes[\"b\"] = 98] = \"b\";\n    CharCodes[CharCodes[\"d\"] = 100] = \"d\";\n    CharCodes[CharCodes[\"e\"] = 101] = \"e\";\n    CharCodes[CharCodes[\"f\"] = 102] = \"f\";\n    CharCodes[CharCodes[\"i\"] = 105] = \"i\";\n    CharCodes[CharCodes[\"j\"] = 106] = \"j\";\n    CharCodes[CharCodes[\"l\"] = 108] = \"l\";\n    CharCodes[CharCodes[\"m\"] = 109] = \"m\";\n    CharCodes[CharCodes[\"n\"] = 110] = \"n\";\n    CharCodes[CharCodes[\"o\"] = 111] = \"o\";\n    CharCodes[CharCodes[\"r\"] = 114] = \"r\";\n    CharCodes[CharCodes[\"s\"] = 115] = \"s\";\n    CharCodes[CharCodes[\"t\"] = 116] = \"t\";\n    CharCodes[CharCodes[\"u\"] = 117] = \"u\";\n    CharCodes[CharCodes[\"x\"] = 120] = \"x\";\n    CharCodes[CharCodes[\"LeftCurly\"] = 123] = \"LeftCurly\";\n    CharCodes[CharCodes[\"RightCurly\"] = 125] = \"RightCurly\";\n    CharCodes[CharCodes[\"Tilde\"] = 126] = \"Tilde\";\n})(CharCodes || (CharCodes = {}));\nexport default CharCodes;\n//# sourceMappingURL=CharCodes.js.map","import CharCodes from \"../syntax/CharCodes\";\nimport { charFromCode, copyStringIntoBuffer } from \"../../utils\";\nvar PDFHeader = /** @class */ (function () {\n    function PDFHeader(major, minor) {\n        this.major = String(major);\n        this.minor = String(minor);\n    }\n    PDFHeader.prototype.toString = function () {\n        var bc = charFromCode(129);\n        return \"%PDF-\" + this.major + \".\" + this.minor + \"\\n%\" + bc + bc + bc + bc;\n    };\n    PDFHeader.prototype.sizeInBytes = function () {\n        return 12 + this.major.length + this.minor.length;\n    };\n    PDFHeader.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.Percent;\n        buffer[offset++] = CharCodes.P;\n        buffer[offset++] = CharCodes.D;\n        buffer[offset++] = CharCodes.F;\n        buffer[offset++] = CharCodes.Dash;\n        offset += copyStringIntoBuffer(this.major, buffer, offset);\n        buffer[offset++] = CharCodes.Period;\n        offset += copyStringIntoBuffer(this.minor, buffer, offset);\n        buffer[offset++] = CharCodes.Newline;\n        buffer[offset++] = CharCodes.Percent;\n        buffer[offset++] = 129;\n        buffer[offset++] = 129;\n        buffer[offset++] = 129;\n        buffer[offset++] = 129;\n        return offset - initialOffset;\n    };\n    PDFHeader.forVersion = function (major, minor) {\n        return new PDFHeader(major, minor);\n    };\n    return PDFHeader;\n}());\nexport default PDFHeader;\n//# sourceMappingURL=PDFHeader.js.map","import { MethodNotImplementedError } from \"../errors\";\nvar PDFObject = /** @class */ (function () {\n    function PDFObject() {\n    }\n    PDFObject.prototype.clone = function (_context) {\n        throw new MethodNotImplementedError(this.constructor.name, 'clone');\n    };\n    PDFObject.prototype.toString = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'toString');\n    };\n    PDFObject.prototype.sizeInBytes = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'sizeInBytes');\n    };\n    PDFObject.prototype.copyBytesInto = function (_buffer, _offset) {\n        throw new MethodNotImplementedError(this.constructor.name, 'copyBytesInto');\n    };\n    return PDFObject;\n}());\nexport default PDFObject;\n//# sourceMappingURL=PDFObject.js.map","import { __extends } from \"tslib\";\nimport { copyStringIntoBuffer, numberToString } from \"../../utils/index\";\nimport PDFObject from \"./PDFObject\";\nvar PDFNumber = /** @class */ (function (_super) {\n    __extends(PDFNumber, _super);\n    function PDFNumber(value) {\n        var _this = _super.call(this) || this;\n        _this.numberValue = value;\n        _this.stringValue = numberToString(value);\n        return _this;\n    }\n    PDFNumber.prototype.asNumber = function () {\n        return this.numberValue;\n    };\n    /** @deprecated in favor of [[PDFNumber.asNumber]] */\n    PDFNumber.prototype.value = function () {\n        return this.numberValue;\n    };\n    PDFNumber.prototype.clone = function () {\n        return PDFNumber.of(this.numberValue);\n    };\n    PDFNumber.prototype.toString = function () {\n        return this.stringValue;\n    };\n    PDFNumber.prototype.sizeInBytes = function () {\n        return this.stringValue.length;\n    };\n    PDFNumber.prototype.copyBytesInto = function (buffer, offset) {\n        offset += copyStringIntoBuffer(this.stringValue, buffer, offset);\n        return this.stringValue.length;\n    };\n    PDFNumber.of = function (value) { return new PDFNumber(value); };\n    return PDFNumber;\n}(PDFObject));\nexport default PDFNumber;\n//# sourceMappingURL=PDFNumber.js.map","import { __extends, __spreadArrays } from \"tslib\";\nimport PDFNumber from \"./PDFNumber\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { PDFArrayIsNotRectangleError } from \"../errors\";\nvar PDFArray = /** @class */ (function (_super) {\n    __extends(PDFArray, _super);\n    function PDFArray(context) {\n        var _this = _super.call(this) || this;\n        _this.array = [];\n        _this.context = context;\n        return _this;\n    }\n    PDFArray.prototype.size = function () {\n        return this.array.length;\n    };\n    PDFArray.prototype.push = function (object) {\n        this.array.push(object);\n    };\n    PDFArray.prototype.insert = function (index, object) {\n        this.array.splice(index, 0, object);\n    };\n    PDFArray.prototype.indexOf = function (object) {\n        var index = this.array.indexOf(object);\n        return index === -1 ? undefined : index;\n    };\n    PDFArray.prototype.remove = function (index) {\n        this.array.splice(index, 1);\n    };\n    PDFArray.prototype.set = function (idx, object) {\n        this.array[idx] = object;\n    };\n    PDFArray.prototype.get = function (index) {\n        return this.array[index];\n    };\n    PDFArray.prototype.lookupMaybe = function (index) {\n        var _a;\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        return (_a = this.context).lookupMaybe.apply(_a, __spreadArrays([this.get(index)], types));\n    };\n    PDFArray.prototype.lookup = function (index) {\n        var _a;\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        return (_a = this.context).lookup.apply(_a, __spreadArrays([this.get(index)], types));\n    };\n    PDFArray.prototype.asRectangle = function () {\n        if (this.size() !== 4)\n            throw new PDFArrayIsNotRectangleError(this.size());\n        var lowerLeftX = this.lookup(0, PDFNumber).asNumber();\n        var lowerLeftY = this.lookup(1, PDFNumber).asNumber();\n        var upperRightX = this.lookup(2, PDFNumber).asNumber();\n        var upperRightY = this.lookup(3, PDFNumber).asNumber();\n        var x = lowerLeftX;\n        var y = lowerLeftY;\n        var width = upperRightX - lowerLeftX;\n        var height = upperRightY - lowerLeftY;\n        return { x: x, y: y, width: width, height: height };\n    };\n    PDFArray.prototype.asArray = function () {\n        return this.array.slice();\n    };\n    PDFArray.prototype.clone = function (context) {\n        var clone = PDFArray.withContext(context || this.context);\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            clone.push(this.array[idx]);\n        }\n        return clone;\n    };\n    PDFArray.prototype.toString = function () {\n        var arrayString = '[ ';\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            arrayString += this.get(idx).toString();\n            arrayString += ' ';\n        }\n        arrayString += ']';\n        return arrayString;\n    };\n    PDFArray.prototype.sizeInBytes = function () {\n        var size = 3;\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            size += this.get(idx).sizeInBytes() + 1;\n        }\n        return size;\n    };\n    PDFArray.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.LeftSquareBracket;\n        buffer[offset++] = CharCodes.Space;\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            offset += this.get(idx).copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n        }\n        buffer[offset++] = CharCodes.RightSquareBracket;\n        return offset - initialOffset;\n    };\n    PDFArray.prototype.scalePDFNumbers = function (x, y) {\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            var el = this.lookup(idx);\n            if (el instanceof PDFNumber) {\n                var factor = idx % 2 === 0 ? x : y;\n                this.set(idx, PDFNumber.of(el.asNumber() * factor));\n            }\n        }\n    };\n    PDFArray.withContext = function (context) { return new PDFArray(context); };\n    return PDFArray;\n}(PDFObject));\nexport default PDFArray;\n//# sourceMappingURL=PDFArray.js.map","import { __extends } from \"tslib\";\nimport { PrivateConstructorError } from \"../errors\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar ENFORCER = {};\nvar PDFBool = /** @class */ (function (_super) {\n    __extends(PDFBool, _super);\n    function PDFBool(enforcer, value) {\n        var _this = this;\n        if (enforcer !== ENFORCER)\n            throw new PrivateConstructorError('PDFBool');\n        _this = _super.call(this) || this;\n        _this.value = value;\n        return _this;\n    }\n    PDFBool.prototype.asBoolean = function () {\n        return this.value;\n    };\n    PDFBool.prototype.clone = function () {\n        return this;\n    };\n    PDFBool.prototype.toString = function () {\n        return String(this.value);\n    };\n    PDFBool.prototype.sizeInBytes = function () {\n        return this.value ? 4 : 5;\n    };\n    PDFBool.prototype.copyBytesInto = function (buffer, offset) {\n        if (this.value) {\n            buffer[offset++] = CharCodes.t;\n            buffer[offset++] = CharCodes.r;\n            buffer[offset++] = CharCodes.u;\n            buffer[offset++] = CharCodes.e;\n            return 4;\n        }\n        else {\n            buffer[offset++] = CharCodes.f;\n            buffer[offset++] = CharCodes.a;\n            buffer[offset++] = CharCodes.l;\n            buffer[offset++] = CharCodes.s;\n            buffer[offset++] = CharCodes.e;\n            return 5;\n        }\n    };\n    PDFBool.True = new PDFBool(ENFORCER, true);\n    PDFBool.False = new PDFBool(ENFORCER, false);\n    return PDFBool;\n}(PDFObject));\nexport default PDFBool;\n//# sourceMappingURL=PDFBool.js.map","import CharCodes from \"./CharCodes\";\nexport var IsDelimiter = new Uint8Array(256);\nIsDelimiter[CharCodes.LeftParen] = 1;\nIsDelimiter[CharCodes.RightParen] = 1;\nIsDelimiter[CharCodes.LessThan] = 1;\nIsDelimiter[CharCodes.GreaterThan] = 1;\nIsDelimiter[CharCodes.LeftSquareBracket] = 1;\nIsDelimiter[CharCodes.RightSquareBracket] = 1;\nIsDelimiter[CharCodes.LeftCurly] = 1;\nIsDelimiter[CharCodes.RightCurly] = 1;\nIsDelimiter[CharCodes.ForwardSlash] = 1;\nIsDelimiter[CharCodes.Percent] = 1;\n//# sourceMappingURL=Delimiters.js.map","import CharCodes from \"./CharCodes\";\nexport var IsWhitespace = new Uint8Array(256);\nIsWhitespace[CharCodes.Null] = 1;\nIsWhitespace[CharCodes.Tab] = 1;\nIsWhitespace[CharCodes.Newline] = 1;\nIsWhitespace[CharCodes.FormFeed] = 1;\nIsWhitespace[CharCodes.CarriageReturn] = 1;\nIsWhitespace[CharCodes.Space] = 1;\n//# sourceMappingURL=Whitespace.js.map","import CharCodes from \"./CharCodes\";\nimport { IsDelimiter } from \"./Delimiters\";\nimport { IsWhitespace } from \"./Whitespace\";\nexport var IsIrregular = new Uint8Array(256);\nfor (var idx = 0, len = 256; idx < len; idx++) {\n    IsIrregular[idx] = IsWhitespace[idx] || IsDelimiter[idx] ? 1 : 0;\n}\nIsIrregular[CharCodes.Hash] = 1;\n//# sourceMappingURL=Irregular.js.map","import { __extends } from \"tslib\";\nimport { PrivateConstructorError } from \"../errors\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { IsIrregular } from \"../syntax/Irregular\";\nimport { charFromHexCode, copyStringIntoBuffer, toCharCode, toHexString, } from \"../../utils\";\nvar decodeName = function (name) {\n    return name.replace(/#([\\dABCDEF]{2})/g, function (_, hex) { return charFromHexCode(hex); });\n};\nvar isRegularChar = function (charCode) {\n    return charCode >= CharCodes.ExclamationPoint &&\n        charCode <= CharCodes.Tilde &&\n        !IsIrregular[charCode];\n};\nvar ENFORCER = {};\nvar pool = new Map();\nvar PDFName = /** @class */ (function (_super) {\n    __extends(PDFName, _super);\n    function PDFName(enforcer, name) {\n        var _this = this;\n        if (enforcer !== ENFORCER)\n            throw new PrivateConstructorError('PDFName');\n        _this = _super.call(this) || this;\n        var encodedName = '/';\n        for (var idx = 0, len = name.length; idx < len; idx++) {\n            var character = name[idx];\n            var code = toCharCode(character);\n            encodedName += isRegularChar(code) ? character : \"#\" + toHexString(code);\n        }\n        _this.encodedName = encodedName;\n        return _this;\n    }\n    PDFName.prototype.asBytes = function () {\n        var bytes = [];\n        var hex = '';\n        var escaped = false;\n        var pushByte = function (byte) {\n            if (byte !== undefined)\n                bytes.push(byte);\n            escaped = false;\n        };\n        for (var idx = 1, len = this.encodedName.length; idx < len; idx++) {\n            var char = this.encodedName[idx];\n            var byte = toCharCode(char);\n            var nextChar = this.encodedName[idx + 1];\n            if (!escaped) {\n                if (byte === CharCodes.Hash)\n                    escaped = true;\n                else\n                    pushByte(byte);\n            }\n            else {\n                if ((byte >= CharCodes.Zero && byte <= CharCodes.Nine) ||\n                    (byte >= CharCodes.a && byte <= CharCodes.f) ||\n                    (byte >= CharCodes.A && byte <= CharCodes.F)) {\n                    hex += char;\n                    if (hex.length === 2 ||\n                        !((nextChar >= '0' && nextChar <= '9') ||\n                            (nextChar >= 'a' && nextChar <= 'f') ||\n                            (nextChar >= 'A' && nextChar <= 'F'))) {\n                        pushByte(parseInt(hex, 16));\n                        hex = '';\n                    }\n                }\n                else {\n                    pushByte(byte);\n                }\n            }\n        }\n        return new Uint8Array(bytes);\n    };\n    // TODO: This should probably use `utf8Decode()`\n    // TODO: Polyfill Array.from?\n    PDFName.prototype.decodeText = function () {\n        var bytes = this.asBytes();\n        return String.fromCharCode.apply(String, Array.from(bytes));\n    };\n    PDFName.prototype.asString = function () {\n        return this.encodedName;\n    };\n    /** @deprecated in favor of [[PDFName.asString]] */\n    PDFName.prototype.value = function () {\n        return this.encodedName;\n    };\n    PDFName.prototype.clone = function () {\n        return this;\n    };\n    PDFName.prototype.toString = function () {\n        return this.encodedName;\n    };\n    PDFName.prototype.sizeInBytes = function () {\n        return this.encodedName.length;\n    };\n    PDFName.prototype.copyBytesInto = function (buffer, offset) {\n        offset += copyStringIntoBuffer(this.encodedName, buffer, offset);\n        return this.encodedName.length;\n    };\n    PDFName.of = function (name) {\n        var decodedValue = decodeName(name);\n        var instance = pool.get(decodedValue);\n        if (!instance) {\n            instance = new PDFName(ENFORCER, decodedValue);\n            pool.set(decodedValue, instance);\n        }\n        return instance;\n    };\n    /* tslint:disable member-ordering */\n    PDFName.Length = PDFName.of('Length');\n    PDFName.FlateDecode = PDFName.of('FlateDecode');\n    PDFName.Resources = PDFName.of('Resources');\n    PDFName.Font = PDFName.of('Font');\n    PDFName.XObject = PDFName.of('XObject');\n    PDFName.ExtGState = PDFName.of('ExtGState');\n    PDFName.Contents = PDFName.of('Contents');\n    PDFName.Type = PDFName.of('Type');\n    PDFName.Parent = PDFName.of('Parent');\n    PDFName.MediaBox = PDFName.of('MediaBox');\n    PDFName.Page = PDFName.of('Page');\n    PDFName.Annots = PDFName.of('Annots');\n    PDFName.TrimBox = PDFName.of('TrimBox');\n    PDFName.ArtBox = PDFName.of('ArtBox');\n    PDFName.BleedBox = PDFName.of('BleedBox');\n    PDFName.CropBox = PDFName.of('CropBox');\n    PDFName.Rotate = PDFName.of('Rotate');\n    PDFName.Title = PDFName.of('Title');\n    PDFName.Author = PDFName.of('Author');\n    PDFName.Subject = PDFName.of('Subject');\n    PDFName.Creator = PDFName.of('Creator');\n    PDFName.Keywords = PDFName.of('Keywords');\n    PDFName.Producer = PDFName.of('Producer');\n    PDFName.CreationDate = PDFName.of('CreationDate');\n    PDFName.ModDate = PDFName.of('ModDate');\n    return PDFName;\n}(PDFObject));\nexport default PDFName;\n//# sourceMappingURL=PDFName.js.map","import { __extends } from \"tslib\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar PDFNull = /** @class */ (function (_super) {\n    __extends(PDFNull, _super);\n    function PDFNull() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFNull.prototype.asNull = function () {\n        return null;\n    };\n    PDFNull.prototype.clone = function () {\n        return this;\n    };\n    PDFNull.prototype.toString = function () {\n        return 'null';\n    };\n    PDFNull.prototype.sizeInBytes = function () {\n        return 4;\n    };\n    PDFNull.prototype.copyBytesInto = function (buffer, offset) {\n        buffer[offset++] = CharCodes.n;\n        buffer[offset++] = CharCodes.u;\n        buffer[offset++] = CharCodes.l;\n        buffer[offset++] = CharCodes.l;\n        return 4;\n    };\n    return PDFNull;\n}(PDFObject));\nexport default new PDFNull();\n//# sourceMappingURL=PDFNull.js.map","import { __extends, __spreadArrays } from \"tslib\";\nimport PDFName from \"./PDFName\";\nimport PDFNull from \"./PDFNull\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar PDFDict = /** @class */ (function (_super) {\n    __extends(PDFDict, _super);\n    function PDFDict(map, context) {\n        var _this = _super.call(this) || this;\n        _this.dict = map;\n        _this.context = context;\n        return _this;\n    }\n    PDFDict.prototype.keys = function () {\n        return Array.from(this.dict.keys());\n    };\n    PDFDict.prototype.values = function () {\n        return Array.from(this.dict.values());\n    };\n    PDFDict.prototype.entries = function () {\n        return Array.from(this.dict.entries());\n    };\n    PDFDict.prototype.set = function (key, value) {\n        this.dict.set(key, value);\n    };\n    PDFDict.prototype.get = function (key, \n    // TODO: `preservePDFNull` is for backwards compatibility. Should be\n    // removed in next breaking API change.\n    preservePDFNull) {\n        if (preservePDFNull === void 0) { preservePDFNull = false; }\n        var value = this.dict.get(key);\n        if (value === PDFNull && !preservePDFNull)\n            return undefined;\n        return value;\n    };\n    PDFDict.prototype.has = function (key) {\n        var value = this.dict.get(key);\n        return value !== undefined && value !== PDFNull;\n    };\n    PDFDict.prototype.lookupMaybe = function (key) {\n        var _a;\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        // TODO: `preservePDFNull` is for backwards compatibility. Should be\n        // removed in next breaking API change.\n        var preservePDFNull = types.includes(PDFNull);\n        var value = (_a = this.context).lookupMaybe.apply(_a, __spreadArrays([this.get(key, preservePDFNull)], types));\n        if (value === PDFNull && !preservePDFNull)\n            return undefined;\n        return value;\n    };\n    PDFDict.prototype.lookup = function (key) {\n        var _a;\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        // TODO: `preservePDFNull` is for backwards compatibility. Should be\n        // removed in next breaking API change.\n        var preservePDFNull = types.includes(PDFNull);\n        var value = (_a = this.context).lookup.apply(_a, __spreadArrays([this.get(key, preservePDFNull)], types));\n        if (value === PDFNull && !preservePDFNull)\n            return undefined;\n        return value;\n    };\n    PDFDict.prototype.delete = function (key) {\n        return this.dict.delete(key);\n    };\n    PDFDict.prototype.asMap = function () {\n        return new Map(this.dict);\n    };\n    /** Generate a random key that doesn't exist in current key set */\n    PDFDict.prototype.uniqueKey = function (tag) {\n        if (tag === void 0) { tag = ''; }\n        var existingKeys = this.keys();\n        var key = PDFName.of(this.context.addRandomSuffix(tag, 10));\n        while (existingKeys.includes(key)) {\n            key = PDFName.of(this.context.addRandomSuffix(tag, 10));\n        }\n        return key;\n    };\n    PDFDict.prototype.clone = function (context) {\n        var clone = PDFDict.withContext(context || this.context);\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            clone.set(key, value);\n        }\n        return clone;\n    };\n    PDFDict.prototype.toString = function () {\n        var dictString = '<<\\n';\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            dictString += key.toString() + ' ' + value.toString() + '\\n';\n        }\n        dictString += '>>';\n        return dictString;\n    };\n    PDFDict.prototype.sizeInBytes = function () {\n        var size = 5;\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            size += key.sizeInBytes() + value.sizeInBytes() + 2;\n        }\n        return size;\n    };\n    PDFDict.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.LessThan;\n        buffer[offset++] = CharCodes.LessThan;\n        buffer[offset++] = CharCodes.Newline;\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            offset += key.copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n            offset += value.copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Newline;\n        }\n        buffer[offset++] = CharCodes.GreaterThan;\n        buffer[offset++] = CharCodes.GreaterThan;\n        return offset - initialOffset;\n    };\n    PDFDict.withContext = function (context) { return new PDFDict(new Map(), context); };\n    PDFDict.fromMapWithContext = function (map, context) {\n        return new PDFDict(map, context);\n    };\n    return PDFDict;\n}(PDFObject));\nexport default PDFDict;\n//# sourceMappingURL=PDFDict.js.map","import { __extends } from \"tslib\";\nimport { MethodNotImplementedError } from \"../errors\";\nimport PDFName from \"./PDFName\";\nimport PDFNumber from \"./PDFNumber\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar PDFStream = /** @class */ (function (_super) {\n    __extends(PDFStream, _super);\n    function PDFStream(dict) {\n        var _this = _super.call(this) || this;\n        _this.dict = dict;\n        return _this;\n    }\n    PDFStream.prototype.clone = function (_context) {\n        throw new MethodNotImplementedError(this.constructor.name, 'clone');\n    };\n    PDFStream.prototype.getContentsString = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'getContentsString');\n    };\n    PDFStream.prototype.getContents = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'getContents');\n    };\n    PDFStream.prototype.getContentsSize = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'getContentsSize');\n    };\n    PDFStream.prototype.updateDict = function () {\n        var contentsSize = this.getContentsSize();\n        this.dict.set(PDFName.Length, PDFNumber.of(contentsSize));\n    };\n    PDFStream.prototype.sizeInBytes = function () {\n        this.updateDict();\n        return this.dict.sizeInBytes() + this.getContentsSize() + 18;\n    };\n    PDFStream.prototype.toString = function () {\n        this.updateDict();\n        var streamString = this.dict.toString();\n        streamString += '\\nstream\\n';\n        streamString += this.getContentsString();\n        streamString += '\\nendstream';\n        return streamString;\n    };\n    PDFStream.prototype.copyBytesInto = function (buffer, offset) {\n        this.updateDict();\n        var initialOffset = offset;\n        offset += this.dict.copyBytesInto(buffer, offset);\n        buffer[offset++] = CharCodes.Newline;\n        buffer[offset++] = CharCodes.s;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.a;\n        buffer[offset++] = CharCodes.m;\n        buffer[offset++] = CharCodes.Newline;\n        var contents = this.getContents();\n        for (var idx = 0, len = contents.length; idx < len; idx++) {\n            buffer[offset++] = contents[idx];\n        }\n        buffer[offset++] = CharCodes.Newline;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.n;\n        buffer[offset++] = CharCodes.d;\n        buffer[offset++] = CharCodes.s;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.a;\n        buffer[offset++] = CharCodes.m;\n        return offset - initialOffset;\n    };\n    return PDFStream;\n}(PDFObject));\nexport default PDFStream;\n//# sourceMappingURL=PDFStream.js.map","import { __extends } from \"tslib\";\nimport PDFStream from \"./PDFStream\";\nimport { arrayAsString } from \"../../utils\";\nvar PDFRawStream = /** @class */ (function (_super) {\n    __extends(PDFRawStream, _super);\n    function PDFRawStream(dict, contents) {\n        var _this = _super.call(this, dict) || this;\n        _this.contents = contents;\n        return _this;\n    }\n    PDFRawStream.prototype.asUint8Array = function () {\n        return this.contents.slice();\n    };\n    PDFRawStream.prototype.clone = function (context) {\n        return PDFRawStream.of(this.dict.clone(context), this.contents.slice());\n    };\n    PDFRawStream.prototype.getContentsString = function () {\n        return arrayAsString(this.contents);\n    };\n    PDFRawStream.prototype.getContents = function () {\n        return this.contents;\n    };\n    PDFRawStream.prototype.getContentsSize = function () {\n        return this.contents.length;\n    };\n    PDFRawStream.of = function (dict, contents) {\n        return new PDFRawStream(dict, contents);\n    };\n    return PDFRawStream;\n}(PDFStream));\nexport default PDFRawStream;\n//# sourceMappingURL=PDFRawStream.js.map","import { __extends } from \"tslib\";\nimport { PrivateConstructorError } from \"../errors\";\nimport PDFObject from \"./PDFObject\";\nimport { copyStringIntoBuffer } from \"../../utils\";\nvar ENFORCER = {};\nvar pool = new Map();\nvar PDFRef = /** @class */ (function (_super) {\n    __extends(PDFRef, _super);\n    function PDFRef(enforcer, objectNumber, generationNumber) {\n        var _this = this;\n        if (enforcer !== ENFORCER)\n            throw new PrivateConstructorError('PDFRef');\n        _this = _super.call(this) || this;\n        _this.objectNumber = objectNumber;\n        _this.generationNumber = generationNumber;\n        _this.tag = objectNumber + \" \" + generationNumber + \" R\";\n        return _this;\n    }\n    PDFRef.prototype.clone = function () {\n        return this;\n    };\n    PDFRef.prototype.toString = function () {\n        return this.tag;\n    };\n    PDFRef.prototype.sizeInBytes = function () {\n        return this.tag.length;\n    };\n    PDFRef.prototype.copyBytesInto = function (buffer, offset) {\n        offset += copyStringIntoBuffer(this.tag, buffer, offset);\n        return this.tag.length;\n    };\n    PDFRef.of = function (objectNumber, generationNumber) {\n        if (generationNumber === void 0) { generationNumber = 0; }\n        var tag = objectNumber + \" \" + generationNumber + \" R\";\n        var instance = pool.get(tag);\n        if (!instance) {\n            instance = new PDFRef(ENFORCER, objectNumber, generationNumber);\n            pool.set(tag, instance);\n        }\n        return instance;\n    };\n    return PDFRef;\n}(PDFObject));\nexport default PDFRef;\n//# sourceMappingURL=PDFRef.js.map","import PDFObject from \"../objects/PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer } from \"../../utils\";\nvar PDFOperator = /** @class */ (function () {\n    function PDFOperator(name, args) {\n        this.name = name;\n        this.args = args || [];\n    }\n    PDFOperator.prototype.clone = function (context) {\n        var args = new Array(this.args.length);\n        for (var idx = 0, len = args.length; idx < len; idx++) {\n            var arg = this.args[idx];\n            args[idx] = arg instanceof PDFObject ? arg.clone(context) : arg;\n        }\n        return PDFOperator.of(this.name, args);\n    };\n    PDFOperator.prototype.toString = function () {\n        var value = '';\n        for (var idx = 0, len = this.args.length; idx < len; idx++) {\n            value += String(this.args[idx]) + ' ';\n        }\n        value += this.name;\n        return value;\n    };\n    PDFOperator.prototype.sizeInBytes = function () {\n        var size = 0;\n        for (var idx = 0, len = this.args.length; idx < len; idx++) {\n            var arg = this.args[idx];\n            size += (arg instanceof PDFObject ? arg.sizeInBytes() : arg.length) + 1;\n        }\n        size += this.name.length;\n        return size;\n    };\n    PDFOperator.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        for (var idx = 0, len = this.args.length; idx < len; idx++) {\n            var arg = this.args[idx];\n            if (arg instanceof PDFObject) {\n                offset += arg.copyBytesInto(buffer, offset);\n            }\n            else {\n                offset += copyStringIntoBuffer(arg, buffer, offset);\n            }\n            buffer[offset++] = CharCodes.Space;\n        }\n        offset += copyStringIntoBuffer(this.name, buffer, offset);\n        return offset - initialOffset;\n    };\n    PDFOperator.of = function (name, args) {\n        return new PDFOperator(name, args);\n    };\n    return PDFOperator;\n}());\nexport default PDFOperator;\n//# sourceMappingURL=PDFOperator.js.map","var PDFOperatorNames;\n(function (PDFOperatorNames) {\n    // Non Stroking Color Operators\n    PDFOperatorNames[\"NonStrokingColor\"] = \"sc\";\n    PDFOperatorNames[\"NonStrokingColorN\"] = \"scn\";\n    PDFOperatorNames[\"NonStrokingColorRgb\"] = \"rg\";\n    PDFOperatorNames[\"NonStrokingColorGray\"] = \"g\";\n    PDFOperatorNames[\"NonStrokingColorCmyk\"] = \"k\";\n    PDFOperatorNames[\"NonStrokingColorspace\"] = \"cs\";\n    // Stroking Color Operators\n    PDFOperatorNames[\"StrokingColor\"] = \"SC\";\n    PDFOperatorNames[\"StrokingColorN\"] = \"SCN\";\n    PDFOperatorNames[\"StrokingColorRgb\"] = \"RG\";\n    PDFOperatorNames[\"StrokingColorGray\"] = \"G\";\n    PDFOperatorNames[\"StrokingColorCmyk\"] = \"K\";\n    PDFOperatorNames[\"StrokingColorspace\"] = \"CS\";\n    // Marked Content Operators\n    PDFOperatorNames[\"BeginMarkedContentSequence\"] = \"BDC\";\n    PDFOperatorNames[\"BeginMarkedContent\"] = \"BMC\";\n    PDFOperatorNames[\"EndMarkedContent\"] = \"EMC\";\n    PDFOperatorNames[\"MarkedContentPointWithProps\"] = \"DP\";\n    PDFOperatorNames[\"MarkedContentPoint\"] = \"MP\";\n    PDFOperatorNames[\"DrawObject\"] = \"Do\";\n    // Graphics State Operators\n    PDFOperatorNames[\"ConcatTransformationMatrix\"] = \"cm\";\n    PDFOperatorNames[\"PopGraphicsState\"] = \"Q\";\n    PDFOperatorNames[\"PushGraphicsState\"] = \"q\";\n    PDFOperatorNames[\"SetFlatness\"] = \"i\";\n    PDFOperatorNames[\"SetGraphicsStateParams\"] = \"gs\";\n    PDFOperatorNames[\"SetLineCapStyle\"] = \"J\";\n    PDFOperatorNames[\"SetLineDashPattern\"] = \"d\";\n    PDFOperatorNames[\"SetLineJoinStyle\"] = \"j\";\n    PDFOperatorNames[\"SetLineMiterLimit\"] = \"M\";\n    PDFOperatorNames[\"SetLineWidth\"] = \"w\";\n    PDFOperatorNames[\"SetTextMatrix\"] = \"Tm\";\n    PDFOperatorNames[\"SetRenderingIntent\"] = \"ri\";\n    // Graphics Operators\n    PDFOperatorNames[\"AppendRectangle\"] = \"re\";\n    PDFOperatorNames[\"BeginInlineImage\"] = \"BI\";\n    PDFOperatorNames[\"BeginInlineImageData\"] = \"ID\";\n    PDFOperatorNames[\"EndInlineImage\"] = \"EI\";\n    PDFOperatorNames[\"ClipEvenOdd\"] = \"W*\";\n    PDFOperatorNames[\"ClipNonZero\"] = \"W\";\n    PDFOperatorNames[\"CloseAndStroke\"] = \"s\";\n    PDFOperatorNames[\"CloseFillEvenOddAndStroke\"] = \"b*\";\n    PDFOperatorNames[\"CloseFillNonZeroAndStroke\"] = \"b\";\n    PDFOperatorNames[\"ClosePath\"] = \"h\";\n    PDFOperatorNames[\"AppendBezierCurve\"] = \"c\";\n    PDFOperatorNames[\"CurveToReplicateFinalPoint\"] = \"y\";\n    PDFOperatorNames[\"CurveToReplicateInitialPoint\"] = \"v\";\n    PDFOperatorNames[\"EndPath\"] = \"n\";\n    PDFOperatorNames[\"FillEvenOddAndStroke\"] = \"B*\";\n    PDFOperatorNames[\"FillEvenOdd\"] = \"f*\";\n    PDFOperatorNames[\"FillNonZeroAndStroke\"] = \"B\";\n    PDFOperatorNames[\"FillNonZero\"] = \"f\";\n    PDFOperatorNames[\"LegacyFillNonZero\"] = \"F\";\n    PDFOperatorNames[\"LineTo\"] = \"l\";\n    PDFOperatorNames[\"MoveTo\"] = \"m\";\n    PDFOperatorNames[\"ShadingFill\"] = \"sh\";\n    PDFOperatorNames[\"StrokePath\"] = \"S\";\n    // Text Operators\n    PDFOperatorNames[\"BeginText\"] = \"BT\";\n    PDFOperatorNames[\"EndText\"] = \"ET\";\n    PDFOperatorNames[\"MoveText\"] = \"Td\";\n    PDFOperatorNames[\"MoveTextSetLeading\"] = \"TD\";\n    PDFOperatorNames[\"NextLine\"] = \"T*\";\n    PDFOperatorNames[\"SetCharacterSpacing\"] = \"Tc\";\n    PDFOperatorNames[\"SetFontAndSize\"] = \"Tf\";\n    PDFOperatorNames[\"SetTextHorizontalScaling\"] = \"Tz\";\n    PDFOperatorNames[\"SetTextLineHeight\"] = \"TL\";\n    PDFOperatorNames[\"SetTextRenderingMode\"] = \"Tr\";\n    PDFOperatorNames[\"SetTextRise\"] = \"Ts\";\n    PDFOperatorNames[\"SetWordSpacing\"] = \"Tw\";\n    PDFOperatorNames[\"ShowText\"] = \"Tj\";\n    PDFOperatorNames[\"ShowTextAdjusted\"] = \"TJ\";\n    PDFOperatorNames[\"ShowTextLine\"] = \"'\";\n    PDFOperatorNames[\"ShowTextLineAndSpace\"] = \"\\\"\";\n    // Type3 Font Operators\n    PDFOperatorNames[\"Type3D0\"] = \"d0\";\n    PDFOperatorNames[\"Type3D1\"] = \"d1\";\n    // Compatibility Section Operators\n    PDFOperatorNames[\"BeginCompatibilitySection\"] = \"BX\";\n    PDFOperatorNames[\"EndCompatibilitySection\"] = \"EX\";\n})(PDFOperatorNames || (PDFOperatorNames = {}));\nexport default PDFOperatorNames;\n//# sourceMappingURL=PDFOperatorNames.js.map","import { __extends } from \"tslib\";\nimport pako from 'pako';\nimport { MethodNotImplementedError } from \"../errors\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFStream from \"../objects/PDFStream\";\nimport { Cache } from \"../../utils\";\nvar PDFFlateStream = /** @class */ (function (_super) {\n    __extends(PDFFlateStream, _super);\n    function PDFFlateStream(dict, encode) {\n        var _this = _super.call(this, dict) || this;\n        _this.computeContents = function () {\n            var unencodedContents = _this.getUnencodedContents();\n            return _this.encode ? pako.deflate(unencodedContents) : unencodedContents;\n        };\n        _this.encode = encode;\n        if (encode)\n            dict.set(PDFName.of('Filter'), PDFName.of('FlateDecode'));\n        _this.contentsCache = Cache.populatedBy(_this.computeContents);\n        return _this;\n    }\n    PDFFlateStream.prototype.getContents = function () {\n        return this.contentsCache.access();\n    };\n    PDFFlateStream.prototype.getContentsSize = function () {\n        return this.contentsCache.access().length;\n    };\n    PDFFlateStream.prototype.getUnencodedContents = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'getUnencodedContents');\n    };\n    return PDFFlateStream;\n}(PDFStream));\nexport default PDFFlateStream;\n//# sourceMappingURL=PDFFlateStream.js.map","import { __extends } from \"tslib\";\nimport PDFFlateStream from \"./PDFFlateStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar PDFContentStream = /** @class */ (function (_super) {\n    __extends(PDFContentStream, _super);\n    function PDFContentStream(dict, operators, encode) {\n        if (encode === void 0) { encode = true; }\n        var _this = _super.call(this, dict, encode) || this;\n        _this.operators = operators;\n        return _this;\n    }\n    PDFContentStream.prototype.push = function () {\n        var _a;\n        var operators = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operators[_i] = arguments[_i];\n        }\n        (_a = this.operators).push.apply(_a, operators);\n    };\n    PDFContentStream.prototype.clone = function (context) {\n        var operators = new Array(this.operators.length);\n        for (var idx = 0, len = this.operators.length; idx < len; idx++) {\n            operators[idx] = this.operators[idx].clone(context);\n        }\n        var _a = this, dict = _a.dict, encode = _a.encode;\n        return PDFContentStream.of(dict.clone(context), operators, encode);\n    };\n    PDFContentStream.prototype.getContentsString = function () {\n        var value = '';\n        for (var idx = 0, len = this.operators.length; idx < len; idx++) {\n            value += this.operators[idx] + \"\\n\";\n        }\n        return value;\n    };\n    PDFContentStream.prototype.getUnencodedContents = function () {\n        var buffer = new Uint8Array(this.getUnencodedContentsSize());\n        var offset = 0;\n        for (var idx = 0, len = this.operators.length; idx < len; idx++) {\n            offset += this.operators[idx].copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Newline;\n        }\n        return buffer;\n    };\n    PDFContentStream.prototype.getUnencodedContentsSize = function () {\n        var size = 0;\n        for (var idx = 0, len = this.operators.length; idx < len; idx++) {\n            size += this.operators[idx].sizeInBytes() + 1;\n        }\n        return size;\n    };\n    PDFContentStream.of = function (dict, operators, encode) {\n        if (encode === void 0) { encode = true; }\n        return new PDFContentStream(dict, operators, encode);\n    };\n    return PDFContentStream;\n}(PDFFlateStream));\nexport default PDFContentStream;\n//# sourceMappingURL=PDFContentStream.js.map","/**\n * Generates a pseudo random number. Although it is not cryptographically secure\n * and uniformly distributed, it is not a concern for the intended use-case,\n * which is to generate distinct numbers.\n *\n * Credit: https://stackoverflow.com/a/19303725/10254049\n */\nvar SimpleRNG = /** @class */ (function () {\n    function SimpleRNG(seed) {\n        this.seed = seed;\n    }\n    SimpleRNG.prototype.nextInt = function () {\n        var x = Math.sin(this.seed++) * 10000;\n        return x - Math.floor(x);\n    };\n    SimpleRNG.withSeed = function (seed) { return new SimpleRNG(seed); };\n    return SimpleRNG;\n}());\nexport { SimpleRNG };\n//# sourceMappingURL=rng.js.map","import { __assign } from \"tslib\";\nimport pako from 'pako';\nimport PDFHeader from \"./document/PDFHeader\";\nimport { UnexpectedObjectTypeError } from \"./errors\";\nimport PDFArray from \"./objects/PDFArray\";\nimport PDFBool from \"./objects/PDFBool\";\nimport PDFDict from \"./objects/PDFDict\";\nimport PDFName from \"./objects/PDFName\";\nimport PDFNull from \"./objects/PDFNull\";\nimport PDFNumber from \"./objects/PDFNumber\";\nimport PDFObject from \"./objects/PDFObject\";\nimport PDFRawStream from \"./objects/PDFRawStream\";\nimport PDFRef from \"./objects/PDFRef\";\nimport PDFOperator from \"./operators/PDFOperator\";\nimport Ops from \"./operators/PDFOperatorNames\";\nimport PDFContentStream from \"./structures/PDFContentStream\";\nimport { typedArrayFor } from \"../utils\";\nimport { SimpleRNG } from \"../utils/rng\";\nvar byAscendingObjectNumber = function (_a, _b) {\n    var a = _a[0];\n    var b = _b[0];\n    return a.objectNumber - b.objectNumber;\n};\nvar PDFContext = /** @class */ (function () {\n    function PDFContext() {\n        this.largestObjectNumber = 0;\n        this.header = PDFHeader.forVersion(1, 7);\n        this.trailerInfo = {};\n        this.indirectObjects = new Map();\n        this.rng = SimpleRNG.withSeed(1);\n    }\n    PDFContext.prototype.assign = function (ref, object) {\n        this.indirectObjects.set(ref, object);\n        if (ref.objectNumber > this.largestObjectNumber) {\n            this.largestObjectNumber = ref.objectNumber;\n        }\n    };\n    PDFContext.prototype.nextRef = function () {\n        this.largestObjectNumber += 1;\n        return PDFRef.of(this.largestObjectNumber);\n    };\n    PDFContext.prototype.register = function (object) {\n        var ref = this.nextRef();\n        this.assign(ref, object);\n        return ref;\n    };\n    PDFContext.prototype.delete = function (ref) {\n        return this.indirectObjects.delete(ref);\n    };\n    PDFContext.prototype.lookupMaybe = function (ref) {\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        // TODO: `preservePDFNull` is for backwards compatibility. Should be\n        // removed in next breaking API change.\n        var preservePDFNull = types.includes(PDFNull);\n        var result = ref instanceof PDFRef ? this.indirectObjects.get(ref) : ref;\n        if (!result || (result === PDFNull && !preservePDFNull))\n            return undefined;\n        for (var idx = 0, len = types.length; idx < len; idx++) {\n            var type = types[idx];\n            if (type === PDFNull) {\n                if (result === PDFNull)\n                    return result;\n            }\n            else {\n                if (result instanceof type)\n                    return result;\n            }\n        }\n        throw new UnexpectedObjectTypeError(types, result);\n    };\n    PDFContext.prototype.lookup = function (ref) {\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        var result = ref instanceof PDFRef ? this.indirectObjects.get(ref) : ref;\n        if (types.length === 0)\n            return result;\n        for (var idx = 0, len = types.length; idx < len; idx++) {\n            var type = types[idx];\n            if (type === PDFNull) {\n                if (result === PDFNull)\n                    return result;\n            }\n            else {\n                if (result instanceof type)\n                    return result;\n            }\n        }\n        throw new UnexpectedObjectTypeError(types, result);\n    };\n    PDFContext.prototype.getObjectRef = function (pdfObject) {\n        var entries = Array.from(this.indirectObjects.entries());\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], ref = _a[0], object = _a[1];\n            if (object === pdfObject) {\n                return ref;\n            }\n        }\n        return undefined;\n    };\n    PDFContext.prototype.enumerateIndirectObjects = function () {\n        return Array.from(this.indirectObjects.entries()).sort(byAscendingObjectNumber);\n    };\n    PDFContext.prototype.obj = function (literal) {\n        if (literal instanceof PDFObject) {\n            return literal;\n        }\n        else if (literal === null || literal === undefined) {\n            return PDFNull;\n        }\n        else if (typeof literal === 'string') {\n            return PDFName.of(literal);\n        }\n        else if (typeof literal === 'number') {\n            return PDFNumber.of(literal);\n        }\n        else if (typeof literal === 'boolean') {\n            return literal ? PDFBool.True : PDFBool.False;\n        }\n        else if (Array.isArray(literal)) {\n            var array = PDFArray.withContext(this);\n            for (var idx = 0, len = literal.length; idx < len; idx++) {\n                array.push(this.obj(literal[idx]));\n            }\n            return array;\n        }\n        else {\n            var dict = PDFDict.withContext(this);\n            var keys = Object.keys(literal);\n            for (var idx = 0, len = keys.length; idx < len; idx++) {\n                var key = keys[idx];\n                var value = literal[key];\n                if (value !== undefined)\n                    dict.set(PDFName.of(key), this.obj(value));\n            }\n            return dict;\n        }\n    };\n    PDFContext.prototype.stream = function (contents, dict) {\n        if (dict === void 0) { dict = {}; }\n        return PDFRawStream.of(this.obj(dict), typedArrayFor(contents));\n    };\n    PDFContext.prototype.flateStream = function (contents, dict) {\n        if (dict === void 0) { dict = {}; }\n        return this.stream(pako.deflate(typedArrayFor(contents)), __assign(__assign({}, dict), { Filter: 'FlateDecode' }));\n    };\n    PDFContext.prototype.contentStream = function (operators, dict) {\n        if (dict === void 0) { dict = {}; }\n        return PDFContentStream.of(this.obj(dict), operators);\n    };\n    PDFContext.prototype.formXObject = function (operators, dict) {\n        if (dict === void 0) { dict = {}; }\n        return this.contentStream(operators, __assign(__assign({ BBox: this.obj([0, 0, 0, 0]), Matrix: this.obj([1, 0, 0, 1, 0, 0]) }, dict), { Type: 'XObject', Subtype: 'Form' }));\n    };\n    /*\n     * Reference to PDFContentStream that contains a single PDFOperator: `q`.\n     * Used by [[PDFPageLeaf]] instances to ensure that when content streams are\n     * added to a modified PDF, they start in the default, unchanged graphics\n     * state.\n     */\n    PDFContext.prototype.getPushGraphicsStateContentStream = function () {\n        if (this.pushGraphicsStateContentStreamRef) {\n            return this.pushGraphicsStateContentStreamRef;\n        }\n        var dict = this.obj({});\n        var op = PDFOperator.of(Ops.PushGraphicsState);\n        var stream = PDFContentStream.of(dict, [op]);\n        this.pushGraphicsStateContentStreamRef = this.register(stream);\n        return this.pushGraphicsStateContentStreamRef;\n    };\n    /*\n     * Reference to PDFContentStream that contains a single PDFOperator: `Q`.\n     * Used by [[PDFPageLeaf]] instances to ensure that when content streams are\n     * added to a modified PDF, they start in the default, unchanged graphics\n     * state.\n     */\n    PDFContext.prototype.getPopGraphicsStateContentStream = function () {\n        if (this.popGraphicsStateContentStreamRef) {\n            return this.popGraphicsStateContentStreamRef;\n        }\n        var dict = this.obj({});\n        var op = PDFOperator.of(Ops.PopGraphicsState);\n        var stream = PDFContentStream.of(dict, [op]);\n        this.popGraphicsStateContentStreamRef = this.register(stream);\n        return this.popGraphicsStateContentStreamRef;\n    };\n    PDFContext.prototype.addRandomSuffix = function (prefix, suffixLength) {\n        if (suffixLength === void 0) { suffixLength = 4; }\n        return prefix + \"-\" + Math.floor(this.rng.nextInt() * Math.pow(10, suffixLength));\n    };\n    PDFContext.create = function () { return new PDFContext(); };\n    return PDFContext;\n}());\nexport default PDFContext;\n//# sourceMappingURL=PDFContext.js.map","import { __extends } from \"tslib\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFStream from \"../objects/PDFStream\";\nvar PDFPageLeaf = /** @class */ (function (_super) {\n    __extends(PDFPageLeaf, _super);\n    function PDFPageLeaf(map, context, autoNormalizeCTM) {\n        if (autoNormalizeCTM === void 0) { autoNormalizeCTM = true; }\n        var _this = _super.call(this, map, context) || this;\n        _this.normalized = false;\n        _this.autoNormalizeCTM = autoNormalizeCTM;\n        return _this;\n    }\n    PDFPageLeaf.prototype.clone = function (context) {\n        var clone = PDFPageLeaf.fromMapWithContext(new Map(), context || this.context, this.autoNormalizeCTM);\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            clone.set(key, value);\n        }\n        return clone;\n    };\n    PDFPageLeaf.prototype.Parent = function () {\n        return this.lookupMaybe(PDFName.Parent, PDFDict);\n    };\n    PDFPageLeaf.prototype.Contents = function () {\n        return this.lookup(PDFName.of('Contents'));\n    };\n    PDFPageLeaf.prototype.Annots = function () {\n        return this.lookupMaybe(PDFName.Annots, PDFArray);\n    };\n    PDFPageLeaf.prototype.BleedBox = function () {\n        return this.lookupMaybe(PDFName.BleedBox, PDFArray);\n    };\n    PDFPageLeaf.prototype.TrimBox = function () {\n        return this.lookupMaybe(PDFName.TrimBox, PDFArray);\n    };\n    PDFPageLeaf.prototype.ArtBox = function () {\n        return this.lookupMaybe(PDFName.ArtBox, PDFArray);\n    };\n    PDFPageLeaf.prototype.Resources = function () {\n        var dictOrRef = this.getInheritableAttribute(PDFName.Resources);\n        return this.context.lookupMaybe(dictOrRef, PDFDict);\n    };\n    PDFPageLeaf.prototype.MediaBox = function () {\n        var arrayOrRef = this.getInheritableAttribute(PDFName.MediaBox);\n        return this.context.lookup(arrayOrRef, PDFArray);\n    };\n    PDFPageLeaf.prototype.CropBox = function () {\n        var arrayOrRef = this.getInheritableAttribute(PDFName.CropBox);\n        return this.context.lookupMaybe(arrayOrRef, PDFArray);\n    };\n    PDFPageLeaf.prototype.Rotate = function () {\n        var numberOrRef = this.getInheritableAttribute(PDFName.Rotate);\n        return this.context.lookupMaybe(numberOrRef, PDFNumber);\n    };\n    PDFPageLeaf.prototype.getInheritableAttribute = function (name) {\n        var attribute;\n        this.ascend(function (node) {\n            if (!attribute)\n                attribute = node.get(name);\n        });\n        return attribute;\n    };\n    PDFPageLeaf.prototype.setParent = function (parentRef) {\n        this.set(PDFName.Parent, parentRef);\n    };\n    PDFPageLeaf.prototype.addContentStream = function (contentStreamRef) {\n        var Contents = this.normalizedEntries().Contents || this.context.obj([]);\n        this.set(PDFName.Contents, Contents);\n        Contents.push(contentStreamRef);\n    };\n    PDFPageLeaf.prototype.wrapContentStreams = function (startStream, endStream) {\n        var Contents = this.Contents();\n        if (Contents instanceof PDFArray) {\n            Contents.insert(0, startStream);\n            Contents.push(endStream);\n            return true;\n        }\n        return false;\n    };\n    PDFPageLeaf.prototype.addAnnot = function (annotRef) {\n        var Annots = this.normalizedEntries().Annots;\n        Annots.push(annotRef);\n    };\n    PDFPageLeaf.prototype.removeAnnot = function (annotRef) {\n        var Annots = this.normalizedEntries().Annots;\n        var index = Annots.indexOf(annotRef);\n        if (index !== undefined) {\n            Annots.remove(index);\n        }\n    };\n    PDFPageLeaf.prototype.setFontDictionary = function (name, fontDictRef) {\n        var Font = this.normalizedEntries().Font;\n        Font.set(name, fontDictRef);\n    };\n    PDFPageLeaf.prototype.newFontDictionaryKey = function (tag) {\n        var Font = this.normalizedEntries().Font;\n        return Font.uniqueKey(tag);\n    };\n    PDFPageLeaf.prototype.newFontDictionary = function (tag, fontDictRef) {\n        var key = this.newFontDictionaryKey(tag);\n        this.setFontDictionary(key, fontDictRef);\n        return key;\n    };\n    PDFPageLeaf.prototype.setXObject = function (name, xObjectRef) {\n        var XObject = this.normalizedEntries().XObject;\n        XObject.set(name, xObjectRef);\n    };\n    PDFPageLeaf.prototype.newXObjectKey = function (tag) {\n        var XObject = this.normalizedEntries().XObject;\n        return XObject.uniqueKey(tag);\n    };\n    PDFPageLeaf.prototype.newXObject = function (tag, xObjectRef) {\n        var key = this.newXObjectKey(tag);\n        this.setXObject(key, xObjectRef);\n        return key;\n    };\n    PDFPageLeaf.prototype.setExtGState = function (name, extGStateRef) {\n        var ExtGState = this.normalizedEntries().ExtGState;\n        ExtGState.set(name, extGStateRef);\n    };\n    PDFPageLeaf.prototype.newExtGStateKey = function (tag) {\n        var ExtGState = this.normalizedEntries().ExtGState;\n        return ExtGState.uniqueKey(tag);\n    };\n    PDFPageLeaf.prototype.newExtGState = function (tag, extGStateRef) {\n        var key = this.newExtGStateKey(tag);\n        this.setExtGState(key, extGStateRef);\n        return key;\n    };\n    PDFPageLeaf.prototype.ascend = function (visitor) {\n        visitor(this);\n        var Parent = this.Parent();\n        if (Parent)\n            Parent.ascend(visitor);\n    };\n    PDFPageLeaf.prototype.normalize = function () {\n        if (this.normalized)\n            return;\n        var context = this.context;\n        var contentsRef = this.get(PDFName.Contents);\n        var contents = this.context.lookup(contentsRef);\n        if (contents instanceof PDFStream) {\n            this.set(PDFName.Contents, context.obj([contentsRef]));\n        }\n        if (this.autoNormalizeCTM) {\n            this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(), this.context.getPopGraphicsStateContentStream());\n        }\n        // TODO: Clone `Resources` if it is inherited\n        var dictOrRef = this.getInheritableAttribute(PDFName.Resources);\n        var Resources = context.lookupMaybe(dictOrRef, PDFDict) || context.obj({});\n        this.set(PDFName.Resources, Resources);\n        // TODO: Clone `Font` if it is inherited\n        var Font = Resources.lookupMaybe(PDFName.Font, PDFDict) || context.obj({});\n        Resources.set(PDFName.Font, Font);\n        // TODO: Clone `XObject` if it is inherited\n        var XObject = Resources.lookupMaybe(PDFName.XObject, PDFDict) || context.obj({});\n        Resources.set(PDFName.XObject, XObject);\n        // TODO: Clone `ExtGState` if it is inherited\n        var ExtGState = Resources.lookupMaybe(PDFName.ExtGState, PDFDict) || context.obj({});\n        Resources.set(PDFName.ExtGState, ExtGState);\n        var Annots = this.Annots() || context.obj([]);\n        this.set(PDFName.Annots, Annots);\n        this.normalized = true;\n    };\n    PDFPageLeaf.prototype.normalizedEntries = function () {\n        this.normalize();\n        var Annots = this.Annots();\n        var Resources = this.Resources();\n        var Contents = this.Contents();\n        return {\n            Annots: Annots,\n            Resources: Resources,\n            Contents: Contents,\n            Font: Resources.lookup(PDFName.Font, PDFDict),\n            XObject: Resources.lookup(PDFName.XObject, PDFDict),\n            ExtGState: Resources.lookup(PDFName.ExtGState, PDFDict),\n        };\n    };\n    PDFPageLeaf.InheritableEntries = [\n        'Resources',\n        'MediaBox',\n        'CropBox',\n        'Rotate',\n    ];\n    PDFPageLeaf.withContextAndParent = function (context, parent) {\n        var dict = new Map();\n        dict.set(PDFName.Type, PDFName.Page);\n        dict.set(PDFName.Parent, parent);\n        dict.set(PDFName.Resources, context.obj({}));\n        dict.set(PDFName.MediaBox, context.obj([0, 0, 612, 792]));\n        return new PDFPageLeaf(dict, context, false);\n    };\n    PDFPageLeaf.fromMapWithContext = function (map, context, autoNormalizeCTM) {\n        if (autoNormalizeCTM === void 0) { autoNormalizeCTM = true; }\n        return new PDFPageLeaf(map, context, autoNormalizeCTM);\n    };\n    return PDFPageLeaf;\n}(PDFDict));\nexport default PDFPageLeaf;\n//# sourceMappingURL=PDFPageLeaf.js.map","import PDFArray from \"./objects/PDFArray\";\nimport PDFDict from \"./objects/PDFDict\";\nimport PDFName from \"./objects/PDFName\";\nimport PDFRef from \"./objects/PDFRef\";\nimport PDFStream from \"./objects/PDFStream\";\nimport PDFPageLeaf from \"./structures/PDFPageLeaf\";\n/**\n * PDFObjectCopier copies PDFObjects from a src context to a dest context.\n * The primary use case for this is to copy pages between PDFs.\n *\n * _Copying_ an object with a PDFObjectCopier is different from _cloning_ an\n * object with its [[PDFObject.clone]] method:\n *\n * ```\n *   const src: PDFContext = ...\n *   const dest: PDFContext = ...\n *   const originalObject: PDFObject = ...\n *   const copiedObject = PDFObjectCopier.for(src, dest).copy(originalObject);\n *   const clonedObject = originalObject.clone();\n * ```\n *\n * Copying an object is equivalent to cloning it and then copying over any other\n * objects that it references. Note that only dictionaries, arrays, and streams\n * (or structures build from them) can contain indirect references to other\n * objects. Copying a PDFObject that is not a dictionary, array, or stream is\n * supported, but is equivalent to cloning it.\n */\nvar PDFObjectCopier = /** @class */ (function () {\n    function PDFObjectCopier(src, dest) {\n        var _this = this;\n        this.traversedObjects = new Map();\n        // prettier-ignore\n        this.copy = function (object) { return (object instanceof PDFPageLeaf ? _this.copyPDFPage(object)\n            : object instanceof PDFDict ? _this.copyPDFDict(object)\n                : object instanceof PDFArray ? _this.copyPDFArray(object)\n                    : object instanceof PDFStream ? _this.copyPDFStream(object)\n                        : object instanceof PDFRef ? _this.copyPDFIndirectObject(object)\n                            : object.clone()); };\n        this.copyPDFPage = function (originalPage) {\n            var clonedPage = originalPage.clone();\n            // Move any entries that the originalPage is inheriting from its parent\n            // tree nodes directly into originalPage so they are preserved during\n            // the copy.\n            var InheritableEntries = PDFPageLeaf.InheritableEntries;\n            for (var idx = 0, len = InheritableEntries.length; idx < len; idx++) {\n                var key = PDFName.of(InheritableEntries[idx]);\n                var value = clonedPage.getInheritableAttribute(key);\n                if (!clonedPage.get(key) && value)\n                    clonedPage.set(key, value);\n            }\n            // Remove the parent reference to prevent the whole donor document's page\n            // tree from being copied when we only need a single page.\n            clonedPage.delete(PDFName.of('Parent'));\n            return _this.copyPDFDict(clonedPage);\n        };\n        this.copyPDFDict = function (originalDict) {\n            if (_this.traversedObjects.has(originalDict)) {\n                return _this.traversedObjects.get(originalDict);\n            }\n            var clonedDict = originalDict.clone(_this.dest);\n            _this.traversedObjects.set(originalDict, clonedDict);\n            var entries = originalDict.entries();\n            for (var idx = 0, len = entries.length; idx < len; idx++) {\n                var _a = entries[idx], key = _a[0], value = _a[1];\n                clonedDict.set(key, _this.copy(value));\n            }\n            return clonedDict;\n        };\n        this.copyPDFArray = function (originalArray) {\n            if (_this.traversedObjects.has(originalArray)) {\n                return _this.traversedObjects.get(originalArray);\n            }\n            var clonedArray = originalArray.clone(_this.dest);\n            _this.traversedObjects.set(originalArray, clonedArray);\n            for (var idx = 0, len = originalArray.size(); idx < len; idx++) {\n                var value = originalArray.get(idx);\n                clonedArray.set(idx, _this.copy(value));\n            }\n            return clonedArray;\n        };\n        this.copyPDFStream = function (originalStream) {\n            if (_this.traversedObjects.has(originalStream)) {\n                return _this.traversedObjects.get(originalStream);\n            }\n            var clonedStream = originalStream.clone(_this.dest);\n            _this.traversedObjects.set(originalStream, clonedStream);\n            var entries = originalStream.dict.entries();\n            for (var idx = 0, len = entries.length; idx < len; idx++) {\n                var _a = entries[idx], key = _a[0], value = _a[1];\n                clonedStream.dict.set(key, _this.copy(value));\n            }\n            return clonedStream;\n        };\n        this.copyPDFIndirectObject = function (ref) {\n            var alreadyMapped = _this.traversedObjects.has(ref);\n            if (!alreadyMapped) {\n                var newRef = _this.dest.nextRef();\n                _this.traversedObjects.set(ref, newRef);\n                var dereferencedValue = _this.src.lookup(ref);\n                if (dereferencedValue) {\n                    var cloned = _this.copy(dereferencedValue);\n                    _this.dest.assign(newRef, cloned);\n                }\n            }\n            return _this.traversedObjects.get(ref);\n        };\n        this.src = src;\n        this.dest = dest;\n    }\n    PDFObjectCopier.for = function (src, dest) {\n        return new PDFObjectCopier(src, dest);\n    };\n    return PDFObjectCopier;\n}());\nexport default PDFObjectCopier;\n//# sourceMappingURL=PDFObjectCopier.js.map","import PDFRef from \"../objects/PDFRef\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, padStart } from \"../../utils\";\n/**\n * Entries should be added using the [[addEntry]] and [[addDeletedEntry]]\n * methods **in order of ascending object number**.\n */\nvar PDFCrossRefSection = /** @class */ (function () {\n    function PDFCrossRefSection(firstEntry) {\n        this.subsections = firstEntry ? [[firstEntry]] : [];\n        this.chunkIdx = 0;\n        this.chunkLength = firstEntry ? 1 : 0;\n    }\n    PDFCrossRefSection.prototype.addEntry = function (ref, offset) {\n        this.append({ ref: ref, offset: offset, deleted: false });\n    };\n    PDFCrossRefSection.prototype.addDeletedEntry = function (ref, nextFreeObjectNumber) {\n        this.append({ ref: ref, offset: nextFreeObjectNumber, deleted: true });\n    };\n    PDFCrossRefSection.prototype.toString = function () {\n        var section = \"xref\\n\";\n        for (var rangeIdx = 0, rangeLen = this.subsections.length; rangeIdx < rangeLen; rangeIdx++) {\n            var range = this.subsections[rangeIdx];\n            section += range[0].ref.objectNumber + \" \" + range.length + \"\\n\";\n            for (var entryIdx = 0, entryLen = range.length; entryIdx < entryLen; entryIdx++) {\n                var entry = range[entryIdx];\n                section += padStart(String(entry.offset), 10, '0');\n                section += ' ';\n                section += padStart(String(entry.ref.generationNumber), 5, '0');\n                section += ' ';\n                section += entry.deleted ? 'f' : 'n';\n                section += ' \\n';\n            }\n        }\n        return section;\n    };\n    PDFCrossRefSection.prototype.sizeInBytes = function () {\n        var size = 5;\n        for (var idx = 0, len = this.subsections.length; idx < len; idx++) {\n            var subsection = this.subsections[idx];\n            var subsectionLength = subsection.length;\n            var firstEntry = subsection[0];\n            size += 2;\n            size += String(firstEntry.ref.objectNumber).length;\n            size += String(subsectionLength).length;\n            size += 20 * subsectionLength;\n        }\n        return size;\n    };\n    PDFCrossRefSection.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.x;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.f;\n        buffer[offset++] = CharCodes.Newline;\n        offset += this.copySubsectionsIntoBuffer(this.subsections, buffer, offset);\n        return offset - initialOffset;\n    };\n    PDFCrossRefSection.prototype.copySubsectionsIntoBuffer = function (subsections, buffer, offset) {\n        var initialOffset = offset;\n        var length = subsections.length;\n        for (var idx = 0; idx < length; idx++) {\n            var subsection = this.subsections[idx];\n            var firstObjectNumber = String(subsection[0].ref.objectNumber);\n            offset += copyStringIntoBuffer(firstObjectNumber, buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n            var rangeLength = String(subsection.length);\n            offset += copyStringIntoBuffer(rangeLength, buffer, offset);\n            buffer[offset++] = CharCodes.Newline;\n            offset += this.copyEntriesIntoBuffer(subsection, buffer, offset);\n        }\n        return offset - initialOffset;\n    };\n    PDFCrossRefSection.prototype.copyEntriesIntoBuffer = function (entries, buffer, offset) {\n        var length = entries.length;\n        for (var idx = 0; idx < length; idx++) {\n            var entry = entries[idx];\n            var entryOffset = padStart(String(entry.offset), 10, '0');\n            offset += copyStringIntoBuffer(entryOffset, buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n            var entryGen = padStart(String(entry.ref.generationNumber), 5, '0');\n            offset += copyStringIntoBuffer(entryGen, buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n            buffer[offset++] = entry.deleted ? CharCodes.f : CharCodes.n;\n            buffer[offset++] = CharCodes.Space;\n            buffer[offset++] = CharCodes.Newline;\n        }\n        return 20 * length;\n    };\n    PDFCrossRefSection.prototype.append = function (currEntry) {\n        if (this.chunkLength === 0) {\n            this.subsections.push([currEntry]);\n            this.chunkIdx = 0;\n            this.chunkLength = 1;\n            return;\n        }\n        var chunk = this.subsections[this.chunkIdx];\n        var prevEntry = chunk[this.chunkLength - 1];\n        if (currEntry.ref.objectNumber - prevEntry.ref.objectNumber > 1) {\n            this.subsections.push([currEntry]);\n            this.chunkIdx += 1;\n            this.chunkLength = 1;\n        }\n        else {\n            chunk.push(currEntry);\n            this.chunkLength += 1;\n        }\n    };\n    PDFCrossRefSection.create = function () {\n        return new PDFCrossRefSection({\n            ref: PDFRef.of(0, 65535),\n            offset: 0,\n            deleted: true,\n        });\n    };\n    PDFCrossRefSection.createEmpty = function () { return new PDFCrossRefSection(); };\n    return PDFCrossRefSection;\n}());\nexport default PDFCrossRefSection;\n//# sourceMappingURL=PDFCrossRefSection.js.map","import CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer } from \"../../utils\";\nvar PDFTrailer = /** @class */ (function () {\n    function PDFTrailer(lastXRefOffset) {\n        this.lastXRefOffset = String(lastXRefOffset);\n    }\n    PDFTrailer.prototype.toString = function () {\n        return \"startxref\\n\" + this.lastXRefOffset + \"\\n%%EOF\";\n    };\n    PDFTrailer.prototype.sizeInBytes = function () {\n        return 16 + this.lastXRefOffset.length;\n    };\n    PDFTrailer.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.s;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.a;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.x;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.f;\n        buffer[offset++] = CharCodes.Newline;\n        offset += copyStringIntoBuffer(this.lastXRefOffset, buffer, offset);\n        buffer[offset++] = CharCodes.Newline;\n        buffer[offset++] = CharCodes.Percent;\n        buffer[offset++] = CharCodes.Percent;\n        buffer[offset++] = CharCodes.E;\n        buffer[offset++] = CharCodes.O;\n        buffer[offset++] = CharCodes.F;\n        return offset - initialOffset;\n    };\n    PDFTrailer.forLastCrossRefSectionOffset = function (offset) {\n        return new PDFTrailer(offset);\n    };\n    return PDFTrailer;\n}());\nexport default PDFTrailer;\n//# sourceMappingURL=PDFTrailer.js.map","import CharCodes from \"../syntax/CharCodes\";\nvar PDFTrailerDict = /** @class */ (function () {\n    function PDFTrailerDict(dict) {\n        this.dict = dict;\n    }\n    PDFTrailerDict.prototype.toString = function () {\n        return \"trailer\\n\" + this.dict.toString();\n    };\n    PDFTrailerDict.prototype.sizeInBytes = function () {\n        return 8 + this.dict.sizeInBytes();\n    };\n    PDFTrailerDict.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.a;\n        buffer[offset++] = CharCodes.i;\n        buffer[offset++] = CharCodes.l;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.Newline;\n        offset += this.dict.copyBytesInto(buffer, offset);\n        return offset - initialOffset;\n    };\n    PDFTrailerDict.of = function (dict) { return new PDFTrailerDict(dict); };\n    return PDFTrailerDict;\n}());\nexport default PDFTrailerDict;\n//# sourceMappingURL=PDFTrailerDict.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFFlateStream from \"./PDFFlateStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, last } from \"../../utils\";\nvar PDFObjectStream = /** @class */ (function (_super) {\n    __extends(PDFObjectStream, _super);\n    function PDFObjectStream(context, objects, encode) {\n        if (encode === void 0) { encode = true; }\n        var _this = _super.call(this, context.obj({}), encode) || this;\n        _this.objects = objects;\n        _this.offsets = _this.computeObjectOffsets();\n        _this.offsetsString = _this.computeOffsetsString();\n        _this.dict.set(PDFName.of('Type'), PDFName.of('ObjStm'));\n        _this.dict.set(PDFName.of('N'), PDFNumber.of(_this.objects.length));\n        _this.dict.set(PDFName.of('First'), PDFNumber.of(_this.offsetsString.length));\n        return _this;\n    }\n    PDFObjectStream.prototype.getObjectsCount = function () {\n        return this.objects.length;\n    };\n    PDFObjectStream.prototype.clone = function (context) {\n        return PDFObjectStream.withContextAndObjects(context || this.dict.context, this.objects.slice(), this.encode);\n    };\n    PDFObjectStream.prototype.getContentsString = function () {\n        var value = this.offsetsString;\n        for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n            var _a = this.objects[idx], object = _a[1];\n            value += object + \"\\n\";\n        }\n        return value;\n    };\n    PDFObjectStream.prototype.getUnencodedContents = function () {\n        var buffer = new Uint8Array(this.getUnencodedContentsSize());\n        var offset = copyStringIntoBuffer(this.offsetsString, buffer, 0);\n        for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n            var _a = this.objects[idx], object = _a[1];\n            offset += object.copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Newline;\n        }\n        return buffer;\n    };\n    PDFObjectStream.prototype.getUnencodedContentsSize = function () {\n        return (this.offsetsString.length +\n            last(this.offsets)[1] +\n            last(this.objects)[1].sizeInBytes() +\n            1);\n    };\n    PDFObjectStream.prototype.computeOffsetsString = function () {\n        var offsetsString = '';\n        for (var idx = 0, len = this.offsets.length; idx < len; idx++) {\n            var _a = this.offsets[idx], objectNumber = _a[0], offset = _a[1];\n            offsetsString += objectNumber + \" \" + offset + \" \";\n        }\n        return offsetsString;\n    };\n    PDFObjectStream.prototype.computeObjectOffsets = function () {\n        var offset = 0;\n        var offsets = new Array(this.objects.length);\n        for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n            var _a = this.objects[idx], ref = _a[0], object = _a[1];\n            offsets[idx] = [ref.objectNumber, offset];\n            offset += object.sizeInBytes() + 1; // '\\n'\n        }\n        return offsets;\n    };\n    PDFObjectStream.withContextAndObjects = function (context, objects, encode) {\n        if (encode === void 0) { encode = true; }\n        return new PDFObjectStream(context, objects, encode);\n    };\n    return PDFObjectStream;\n}(PDFFlateStream));\nexport default PDFObjectStream;\n//# sourceMappingURL=PDFObjectStream.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFCrossRefSection from \"../document/PDFCrossRefSection\";\nimport PDFHeader from \"../document/PDFHeader\";\nimport PDFTrailer from \"../document/PDFTrailer\";\nimport PDFTrailerDict from \"../document/PDFTrailerDict\";\nimport PDFObjectStream from \"../structures/PDFObjectStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, waitForTick } from \"../../utils\";\nvar PDFWriter = /** @class */ (function () {\n    function PDFWriter(context, objectsPerTick) {\n        var _this = this;\n        this.parsedObjects = 0;\n        this.shouldWaitForTick = function (n) {\n            _this.parsedObjects += n;\n            return _this.parsedObjects % _this.objectsPerTick === 0;\n        };\n        this.context = context;\n        this.objectsPerTick = objectsPerTick;\n    }\n    PDFWriter.prototype.serializeToBuffer = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, size, header, indirectObjects, xref, trailerDict, trailer, offset, buffer, idx, len, _b, ref, object, objectNumber, generationNumber, n;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, this.computeBufferSize()];\n                    case 1:\n                        _a = _c.sent(), size = _a.size, header = _a.header, indirectObjects = _a.indirectObjects, xref = _a.xref, trailerDict = _a.trailerDict, trailer = _a.trailer;\n                        offset = 0;\n                        buffer = new Uint8Array(size);\n                        offset += header.copyBytesInto(buffer, offset);\n                        buffer[offset++] = CharCodes.Newline;\n                        buffer[offset++] = CharCodes.Newline;\n                        idx = 0, len = indirectObjects.length;\n                        _c.label = 2;\n                    case 2:\n                        if (!(idx < len)) return [3 /*break*/, 5];\n                        _b = indirectObjects[idx], ref = _b[0], object = _b[1];\n                        objectNumber = String(ref.objectNumber);\n                        offset += copyStringIntoBuffer(objectNumber, buffer, offset);\n                        buffer[offset++] = CharCodes.Space;\n                        generationNumber = String(ref.generationNumber);\n                        offset += copyStringIntoBuffer(generationNumber, buffer, offset);\n                        buffer[offset++] = CharCodes.Space;\n                        buffer[offset++] = CharCodes.o;\n                        buffer[offset++] = CharCodes.b;\n                        buffer[offset++] = CharCodes.j;\n                        buffer[offset++] = CharCodes.Newline;\n                        offset += object.copyBytesInto(buffer, offset);\n                        buffer[offset++] = CharCodes.Newline;\n                        buffer[offset++] = CharCodes.e;\n                        buffer[offset++] = CharCodes.n;\n                        buffer[offset++] = CharCodes.d;\n                        buffer[offset++] = CharCodes.o;\n                        buffer[offset++] = CharCodes.b;\n                        buffer[offset++] = CharCodes.j;\n                        buffer[offset++] = CharCodes.Newline;\n                        buffer[offset++] = CharCodes.Newline;\n                        n = object instanceof PDFObjectStream ? object.getObjectsCount() : 1;\n                        if (!this.shouldWaitForTick(n)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, waitForTick()];\n                    case 3:\n                        _c.sent();\n                        _c.label = 4;\n                    case 4:\n                        idx++;\n                        return [3 /*break*/, 2];\n                    case 5:\n                        if (xref) {\n                            offset += xref.copyBytesInto(buffer, offset);\n                            buffer[offset++] = CharCodes.Newline;\n                        }\n                        if (trailerDict) {\n                            offset += trailerDict.copyBytesInto(buffer, offset);\n                            buffer[offset++] = CharCodes.Newline;\n                            buffer[offset++] = CharCodes.Newline;\n                        }\n                        offset += trailer.copyBytesInto(buffer, offset);\n                        return [2 /*return*/, buffer];\n                }\n            });\n        });\n    };\n    PDFWriter.prototype.computeIndirectObjectSize = function (_a) {\n        var ref = _a[0], object = _a[1];\n        var refSize = ref.sizeInBytes() + 3; // 'R' -> 'obj\\n'\n        var objectSize = object.sizeInBytes() + 9; // '\\nendobj\\n\\n'\n        return refSize + objectSize;\n    };\n    PDFWriter.prototype.createTrailerDict = function () {\n        return this.context.obj({\n            Size: this.context.largestObjectNumber + 1,\n            Root: this.context.trailerInfo.Root,\n            Encrypt: this.context.trailerInfo.Encrypt,\n            Info: this.context.trailerInfo.Info,\n            ID: this.context.trailerInfo.ID,\n        });\n    };\n    PDFWriter.prototype.computeBufferSize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var header, size, xref, indirectObjects, idx, len, indirectObject, ref, xrefOffset, trailerDict, trailer;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        header = PDFHeader.forVersion(1, 7);\n                        size = header.sizeInBytes() + 2;\n                        xref = PDFCrossRefSection.create();\n                        indirectObjects = this.context.enumerateIndirectObjects();\n                        idx = 0, len = indirectObjects.length;\n                        _a.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        indirectObject = indirectObjects[idx];\n                        ref = indirectObject[0];\n                        xref.addEntry(ref, size);\n                        size += this.computeIndirectObjectSize(indirectObject);\n                        if (!this.shouldWaitForTick(1)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, waitForTick()];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        xrefOffset = size;\n                        size += xref.sizeInBytes() + 1; // '\\n'\n                        trailerDict = PDFTrailerDict.of(this.createTrailerDict());\n                        size += trailerDict.sizeInBytes() + 2; // '\\n\\n'\n                        trailer = PDFTrailer.forLastCrossRefSectionOffset(xrefOffset);\n                        size += trailer.sizeInBytes();\n                        return [2 /*return*/, { size: size, header: header, indirectObjects: indirectObjects, xref: xref, trailerDict: trailerDict, trailer: trailer }];\n                }\n            });\n        });\n    };\n    PDFWriter.forContext = function (context, objectsPerTick) {\n        return new PDFWriter(context, objectsPerTick);\n    };\n    return PDFWriter;\n}());\nexport default PDFWriter;\n//# sourceMappingURL=PDFWriter.js.map","import { __extends } from \"tslib\";\nimport PDFObject from \"./PDFObject\";\nvar PDFInvalidObject = /** @class */ (function (_super) {\n    __extends(PDFInvalidObject, _super);\n    function PDFInvalidObject(data) {\n        var _this = _super.call(this) || this;\n        _this.data = data;\n        return _this;\n    }\n    PDFInvalidObject.prototype.clone = function () {\n        return PDFInvalidObject.of(this.data.slice());\n    };\n    PDFInvalidObject.prototype.toString = function () {\n        return \"PDFInvalidObject(\" + this.data.length + \" bytes)\";\n    };\n    PDFInvalidObject.prototype.sizeInBytes = function () {\n        return this.data.length;\n    };\n    PDFInvalidObject.prototype.copyBytesInto = function (buffer, offset) {\n        var length = this.data.length;\n        for (var idx = 0; idx < length; idx++) {\n            buffer[offset++] = this.data[idx];\n        }\n        return length;\n    };\n    PDFInvalidObject.of = function (data) { return new PDFInvalidObject(data); };\n    return PDFInvalidObject;\n}(PDFObject));\nexport default PDFInvalidObject;\n//# sourceMappingURL=PDFInvalidObject.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFFlateStream from \"./PDFFlateStream\";\nimport { bytesFor, Cache, reverseArray, sizeInBytes, sum } from \"../../utils\";\nexport var EntryType;\n(function (EntryType) {\n    EntryType[EntryType[\"Deleted\"] = 0] = \"Deleted\";\n    EntryType[EntryType[\"Uncompressed\"] = 1] = \"Uncompressed\";\n    EntryType[EntryType[\"Compressed\"] = 2] = \"Compressed\";\n})(EntryType || (EntryType = {}));\n/**\n * Entries should be added using the [[addDeletedEntry]],\n * [[addUncompressedEntry]], and [[addCompressedEntry]] methods\n * **in order of ascending object number**.\n */\nvar PDFCrossRefStream = /** @class */ (function (_super) {\n    __extends(PDFCrossRefStream, _super);\n    function PDFCrossRefStream(dict, entries, encode) {\n        if (encode === void 0) { encode = true; }\n        var _this = _super.call(this, dict, encode) || this;\n        // Returns an array of integer pairs for each subsection of the cross ref\n        // section, where each integer pair represents:\n        //   firstObjectNumber(OfSection), length(OfSection)\n        _this.computeIndex = function () {\n            var subsections = [];\n            var subsectionLength = 0;\n            for (var idx = 0, len = _this.entries.length; idx < len; idx++) {\n                var currEntry = _this.entries[idx];\n                var prevEntry = _this.entries[idx - 1];\n                if (idx === 0) {\n                    subsections.push(currEntry.ref.objectNumber);\n                }\n                else if (currEntry.ref.objectNumber - prevEntry.ref.objectNumber > 1) {\n                    subsections.push(subsectionLength);\n                    subsections.push(currEntry.ref.objectNumber);\n                    subsectionLength = 0;\n                }\n                subsectionLength += 1;\n            }\n            subsections.push(subsectionLength);\n            return subsections;\n        };\n        _this.computeEntryTuples = function () {\n            var entryTuples = new Array(_this.entries.length);\n            for (var idx = 0, len = _this.entries.length; idx < len; idx++) {\n                var entry = _this.entries[idx];\n                if (entry.type === EntryType.Deleted) {\n                    var type = entry.type, nextFreeObjectNumber = entry.nextFreeObjectNumber, ref = entry.ref;\n                    entryTuples[idx] = [type, nextFreeObjectNumber, ref.generationNumber];\n                }\n                if (entry.type === EntryType.Uncompressed) {\n                    var type = entry.type, offset = entry.offset, ref = entry.ref;\n                    entryTuples[idx] = [type, offset, ref.generationNumber];\n                }\n                if (entry.type === EntryType.Compressed) {\n                    var type = entry.type, objectStreamRef = entry.objectStreamRef, index = entry.index;\n                    entryTuples[idx] = [type, objectStreamRef.objectNumber, index];\n                }\n            }\n            return entryTuples;\n        };\n        _this.computeMaxEntryByteWidths = function () {\n            var entryTuples = _this.entryTuplesCache.access();\n            var widths = [0, 0, 0];\n            for (var idx = 0, len = entryTuples.length; idx < len; idx++) {\n                var _a = entryTuples[idx], first = _a[0], second = _a[1], third = _a[2];\n                var firstSize = sizeInBytes(first);\n                var secondSize = sizeInBytes(second);\n                var thirdSize = sizeInBytes(third);\n                if (firstSize > widths[0])\n                    widths[0] = firstSize;\n                if (secondSize > widths[1])\n                    widths[1] = secondSize;\n                if (thirdSize > widths[2])\n                    widths[2] = thirdSize;\n            }\n            return widths;\n        };\n        _this.entries = entries || [];\n        _this.entryTuplesCache = Cache.populatedBy(_this.computeEntryTuples);\n        _this.maxByteWidthsCache = Cache.populatedBy(_this.computeMaxEntryByteWidths);\n        _this.indexCache = Cache.populatedBy(_this.computeIndex);\n        dict.set(PDFName.of('Type'), PDFName.of('XRef'));\n        return _this;\n    }\n    PDFCrossRefStream.prototype.addDeletedEntry = function (ref, nextFreeObjectNumber) {\n        var type = EntryType.Deleted;\n        this.entries.push({ type: type, ref: ref, nextFreeObjectNumber: nextFreeObjectNumber });\n        this.entryTuplesCache.invalidate();\n        this.maxByteWidthsCache.invalidate();\n        this.indexCache.invalidate();\n        this.contentsCache.invalidate();\n    };\n    PDFCrossRefStream.prototype.addUncompressedEntry = function (ref, offset) {\n        var type = EntryType.Uncompressed;\n        this.entries.push({ type: type, ref: ref, offset: offset });\n        this.entryTuplesCache.invalidate();\n        this.maxByteWidthsCache.invalidate();\n        this.indexCache.invalidate();\n        this.contentsCache.invalidate();\n    };\n    PDFCrossRefStream.prototype.addCompressedEntry = function (ref, objectStreamRef, index) {\n        var type = EntryType.Compressed;\n        this.entries.push({ type: type, ref: ref, objectStreamRef: objectStreamRef, index: index });\n        this.entryTuplesCache.invalidate();\n        this.maxByteWidthsCache.invalidate();\n        this.indexCache.invalidate();\n        this.contentsCache.invalidate();\n    };\n    PDFCrossRefStream.prototype.clone = function (context) {\n        var _a = this, dict = _a.dict, entries = _a.entries, encode = _a.encode;\n        return PDFCrossRefStream.of(dict.clone(context), entries.slice(), encode);\n    };\n    PDFCrossRefStream.prototype.getContentsString = function () {\n        var entryTuples = this.entryTuplesCache.access();\n        var byteWidths = this.maxByteWidthsCache.access();\n        var value = '';\n        for (var entryIdx = 0, entriesLen = entryTuples.length; entryIdx < entriesLen; entryIdx++) {\n            var _a = entryTuples[entryIdx], first = _a[0], second = _a[1], third = _a[2];\n            var firstBytes = reverseArray(bytesFor(first));\n            var secondBytes = reverseArray(bytesFor(second));\n            var thirdBytes = reverseArray(bytesFor(third));\n            for (var idx = byteWidths[0] - 1; idx >= 0; idx--) {\n                value += (firstBytes[idx] || 0).toString(2);\n            }\n            for (var idx = byteWidths[1] - 1; idx >= 0; idx--) {\n                value += (secondBytes[idx] || 0).toString(2);\n            }\n            for (var idx = byteWidths[2] - 1; idx >= 0; idx--) {\n                value += (thirdBytes[idx] || 0).toString(2);\n            }\n        }\n        return value;\n    };\n    PDFCrossRefStream.prototype.getUnencodedContents = function () {\n        var entryTuples = this.entryTuplesCache.access();\n        var byteWidths = this.maxByteWidthsCache.access();\n        var buffer = new Uint8Array(this.getUnencodedContentsSize());\n        var offset = 0;\n        for (var entryIdx = 0, entriesLen = entryTuples.length; entryIdx < entriesLen; entryIdx++) {\n            var _a = entryTuples[entryIdx], first = _a[0], second = _a[1], third = _a[2];\n            var firstBytes = reverseArray(bytesFor(first));\n            var secondBytes = reverseArray(bytesFor(second));\n            var thirdBytes = reverseArray(bytesFor(third));\n            for (var idx = byteWidths[0] - 1; idx >= 0; idx--) {\n                buffer[offset++] = firstBytes[idx] || 0;\n            }\n            for (var idx = byteWidths[1] - 1; idx >= 0; idx--) {\n                buffer[offset++] = secondBytes[idx] || 0;\n            }\n            for (var idx = byteWidths[2] - 1; idx >= 0; idx--) {\n                buffer[offset++] = thirdBytes[idx] || 0;\n            }\n        }\n        return buffer;\n    };\n    PDFCrossRefStream.prototype.getUnencodedContentsSize = function () {\n        var byteWidths = this.maxByteWidthsCache.access();\n        var entryWidth = sum(byteWidths);\n        return entryWidth * this.entries.length;\n    };\n    PDFCrossRefStream.prototype.updateDict = function () {\n        _super.prototype.updateDict.call(this);\n        var byteWidths = this.maxByteWidthsCache.access();\n        var index = this.indexCache.access();\n        var context = this.dict.context;\n        this.dict.set(PDFName.of('W'), context.obj(byteWidths));\n        this.dict.set(PDFName.of('Index'), context.obj(index));\n    };\n    PDFCrossRefStream.create = function (dict, encode) {\n        if (encode === void 0) { encode = true; }\n        var stream = new PDFCrossRefStream(dict, [], encode);\n        stream.addDeletedEntry(PDFRef.of(0, 65535), 0);\n        return stream;\n    };\n    PDFCrossRefStream.of = function (dict, entries, encode) {\n        if (encode === void 0) { encode = true; }\n        return new PDFCrossRefStream(dict, entries, encode);\n    };\n    return PDFCrossRefStream;\n}(PDFFlateStream));\nexport default PDFCrossRefStream;\n//# sourceMappingURL=PDFCrossRefStream.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport PDFHeader from \"../document/PDFHeader\";\nimport PDFTrailer from \"../document/PDFTrailer\";\nimport PDFInvalidObject from \"../objects/PDFInvalidObject\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFStream from \"../objects/PDFStream\";\nimport PDFCrossRefStream from \"../structures/PDFCrossRefStream\";\nimport PDFObjectStream from \"../structures/PDFObjectStream\";\nimport PDFWriter from \"./PDFWriter\";\nimport { last, waitForTick } from \"../../utils\";\nvar PDFStreamWriter = /** @class */ (function (_super) {\n    __extends(PDFStreamWriter, _super);\n    function PDFStreamWriter(context, objectsPerTick, encodeStreams, objectsPerStream) {\n        var _this = _super.call(this, context, objectsPerTick) || this;\n        _this.encodeStreams = encodeStreams;\n        _this.objectsPerStream = objectsPerStream;\n        return _this;\n    }\n    PDFStreamWriter.prototype.computeBufferSize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var objectNumber, header, size, xrefStream, uncompressedObjects, compressedObjects, objectStreamRefs, indirectObjects, idx, len, indirectObject, ref, object, shouldNotCompress, chunk, objectStreamRef, idx, len, chunk, ref, objectStream, xrefStreamRef, xrefOffset, trailer;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        objectNumber = this.context.largestObjectNumber + 1;\n                        header = PDFHeader.forVersion(1, 7);\n                        size = header.sizeInBytes() + 2;\n                        xrefStream = PDFCrossRefStream.create(this.createTrailerDict(), this.encodeStreams);\n                        uncompressedObjects = [];\n                        compressedObjects = [];\n                        objectStreamRefs = [];\n                        indirectObjects = this.context.enumerateIndirectObjects();\n                        idx = 0, len = indirectObjects.length;\n                        _a.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 6];\n                        indirectObject = indirectObjects[idx];\n                        ref = indirectObject[0], object = indirectObject[1];\n                        shouldNotCompress = ref === this.context.trailerInfo.Encrypt ||\n                            object instanceof PDFStream ||\n                            object instanceof PDFInvalidObject ||\n                            ref.generationNumber !== 0;\n                        if (!shouldNotCompress) return [3 /*break*/, 4];\n                        uncompressedObjects.push(indirectObject);\n                        xrefStream.addUncompressedEntry(ref, size);\n                        size += this.computeIndirectObjectSize(indirectObject);\n                        if (!this.shouldWaitForTick(1)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, waitForTick()];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3: return [3 /*break*/, 5];\n                    case 4:\n                        chunk = last(compressedObjects);\n                        objectStreamRef = last(objectStreamRefs);\n                        if (!chunk || chunk.length % this.objectsPerStream === 0) {\n                            chunk = [];\n                            compressedObjects.push(chunk);\n                            objectStreamRef = PDFRef.of(objectNumber++);\n                            objectStreamRefs.push(objectStreamRef);\n                        }\n                        xrefStream.addCompressedEntry(ref, objectStreamRef, chunk.length);\n                        chunk.push(indirectObject);\n                        _a.label = 5;\n                    case 5:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 6:\n                        idx = 0, len = compressedObjects.length;\n                        _a.label = 7;\n                    case 7:\n                        if (!(idx < len)) return [3 /*break*/, 10];\n                        chunk = compressedObjects[idx];\n                        ref = objectStreamRefs[idx];\n                        objectStream = PDFObjectStream.withContextAndObjects(this.context, chunk, this.encodeStreams);\n                        xrefStream.addUncompressedEntry(ref, size);\n                        size += this.computeIndirectObjectSize([ref, objectStream]);\n                        uncompressedObjects.push([ref, objectStream]);\n                        if (!this.shouldWaitForTick(chunk.length)) return [3 /*break*/, 9];\n                        return [4 /*yield*/, waitForTick()];\n                    case 8:\n                        _a.sent();\n                        _a.label = 9;\n                    case 9:\n                        idx++;\n                        return [3 /*break*/, 7];\n                    case 10:\n                        xrefStreamRef = PDFRef.of(objectNumber++);\n                        xrefStream.dict.set(PDFName.of('Size'), PDFNumber.of(objectNumber));\n                        xrefStream.addUncompressedEntry(xrefStreamRef, size);\n                        xrefOffset = size;\n                        size += this.computeIndirectObjectSize([xrefStreamRef, xrefStream]);\n                        uncompressedObjects.push([xrefStreamRef, xrefStream]);\n                        trailer = PDFTrailer.forLastCrossRefSectionOffset(xrefOffset);\n                        size += trailer.sizeInBytes();\n                        return [2 /*return*/, { size: size, header: header, indirectObjects: uncompressedObjects, trailer: trailer }];\n                }\n            });\n        });\n    };\n    PDFStreamWriter.forContext = function (context, objectsPerTick, encodeStreams, objectsPerStream) {\n        if (encodeStreams === void 0) { encodeStreams = true; }\n        if (objectsPerStream === void 0) { objectsPerStream = 50; }\n        return new PDFStreamWriter(context, objectsPerTick, encodeStreams, objectsPerStream);\n    };\n    return PDFStreamWriter;\n}(PDFWriter));\nexport default PDFStreamWriter;\n//# sourceMappingURL=PDFStreamWriter.js.map","import { __extends } from \"tslib\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, toHexStringOfMinLength, utf16Decode, utf16Encode, pdfDocEncodingDecode, parseDate, hasUtf16BOM, } from \"../../utils\";\nimport { InvalidPDFDateStringError } from \"../errors\";\nvar PDFHexString = /** @class */ (function (_super) {\n    __extends(PDFHexString, _super);\n    function PDFHexString(value) {\n        var _this = _super.call(this) || this;\n        _this.value = value;\n        return _this;\n    }\n    PDFHexString.prototype.asBytes = function () {\n        // Append a zero if the number of digits is odd. See PDF spec 7.3.4.3\n        var hex = this.value + (this.value.length % 2 === 1 ? '0' : '');\n        var hexLength = hex.length;\n        var bytes = new Uint8Array(hex.length / 2);\n        var hexOffset = 0;\n        var bytesOffset = 0;\n        // Interpret each pair of hex digits as a single byte\n        while (hexOffset < hexLength) {\n            var byte = parseInt(hex.substring(hexOffset, hexOffset + 2), 16);\n            bytes[bytesOffset] = byte;\n            hexOffset += 2;\n            bytesOffset += 1;\n        }\n        return bytes;\n    };\n    PDFHexString.prototype.decodeText = function () {\n        var bytes = this.asBytes();\n        if (hasUtf16BOM(bytes))\n            return utf16Decode(bytes);\n        return pdfDocEncodingDecode(bytes);\n    };\n    PDFHexString.prototype.decodeDate = function () {\n        var text = this.decodeText();\n        var date = parseDate(text);\n        if (!date)\n            throw new InvalidPDFDateStringError(text);\n        return date;\n    };\n    PDFHexString.prototype.asString = function () {\n        return this.value;\n    };\n    PDFHexString.prototype.clone = function () {\n        return PDFHexString.of(this.value);\n    };\n    PDFHexString.prototype.toString = function () {\n        return \"<\" + this.value + \">\";\n    };\n    PDFHexString.prototype.sizeInBytes = function () {\n        return this.value.length + 2;\n    };\n    PDFHexString.prototype.copyBytesInto = function (buffer, offset) {\n        buffer[offset++] = CharCodes.LessThan;\n        offset += copyStringIntoBuffer(this.value, buffer, offset);\n        buffer[offset++] = CharCodes.GreaterThan;\n        return this.value.length + 2;\n    };\n    PDFHexString.of = function (value) { return new PDFHexString(value); };\n    PDFHexString.fromText = function (value) {\n        var encoded = utf16Encode(value);\n        var hex = '';\n        for (var idx = 0, len = encoded.length; idx < len; idx++) {\n            hex += toHexStringOfMinLength(encoded[idx], 4);\n        }\n        return new PDFHexString(hex);\n    };\n    return PDFHexString;\n}(PDFObject));\nexport default PDFHexString;\n//# sourceMappingURL=PDFHexString.js.map","import { Encodings, Font, FontNames, } from '@pdf-lib/standard-fonts';\nimport PDFHexString from \"../objects/PDFHexString\";\nimport { toCodePoint, toHexString } from \"../../utils\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/foliojs/pdfkit/blob/f91bdd61c164a72ea06be1a43dc0a412afc3925f/lib/font/afm.coffee\n */\nvar StandardFontEmbedder = /** @class */ (function () {\n    function StandardFontEmbedder(fontName, customName) {\n        // prettier-ignore\n        this.encoding = (fontName === FontNames.ZapfDingbats ? Encodings.ZapfDingbats\n            : fontName === FontNames.Symbol ? Encodings.Symbol\n                : Encodings.WinAnsi);\n        this.font = Font.load(fontName);\n        this.fontName = this.font.FontName;\n        this.customName = customName;\n    }\n    /**\n     * Encode the JavaScript string into this font. (JavaScript encodes strings in\n     * Unicode, but standard fonts use either WinAnsi, ZapfDingbats, or Symbol\n     * encodings)\n     */\n    StandardFontEmbedder.prototype.encodeText = function (text) {\n        var glyphs = this.encodeTextAsGlyphs(text);\n        var hexCodes = new Array(glyphs.length);\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            hexCodes[idx] = toHexString(glyphs[idx].code);\n        }\n        return PDFHexString.of(hexCodes.join(''));\n    };\n    StandardFontEmbedder.prototype.widthOfTextAtSize = function (text, size) {\n        var glyphs = this.encodeTextAsGlyphs(text);\n        var totalWidth = 0;\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            var left = glyphs[idx].name;\n            var right = (glyphs[idx + 1] || {}).name;\n            var kernAmount = this.font.getXAxisKerningForPair(left, right) || 0;\n            totalWidth += this.widthOfGlyph(left) + kernAmount;\n        }\n        var scale = size / 1000;\n        return totalWidth * scale;\n    };\n    StandardFontEmbedder.prototype.heightOfFontAtSize = function (size, options) {\n        if (options === void 0) { options = {}; }\n        var _a = options.descender, descender = _a === void 0 ? true : _a;\n        var _b = this.font, Ascender = _b.Ascender, Descender = _b.Descender, FontBBox = _b.FontBBox;\n        var yTop = Ascender || FontBBox[3];\n        var yBottom = Descender || FontBBox[1];\n        var height = yTop - yBottom;\n        if (!descender)\n            height += Descender || 0;\n        return (height / 1000) * size;\n    };\n    StandardFontEmbedder.prototype.sizeOfFontAtHeight = function (height) {\n        var _a = this.font, Ascender = _a.Ascender, Descender = _a.Descender, FontBBox = _a.FontBBox;\n        var yTop = Ascender || FontBBox[3];\n        var yBottom = Descender || FontBBox[1];\n        return (1000 * height) / (yTop - yBottom);\n    };\n    StandardFontEmbedder.prototype.embedIntoContext = function (context, ref) {\n        var fontDict = context.obj({\n            Type: 'Font',\n            Subtype: 'Type1',\n            BaseFont: this.customName || this.fontName,\n            Encoding: this.encoding === Encodings.WinAnsi ? 'WinAnsiEncoding' : undefined,\n        });\n        if (ref) {\n            context.assign(ref, fontDict);\n            return ref;\n        }\n        else {\n            return context.register(fontDict);\n        }\n    };\n    StandardFontEmbedder.prototype.widthOfGlyph = function (glyphName) {\n        // Default to 250 if font doesn't specify a width\n        return this.font.getWidthOfGlyph(glyphName) || 250;\n    };\n    StandardFontEmbedder.prototype.encodeTextAsGlyphs = function (text) {\n        var codePoints = Array.from(text);\n        var glyphs = new Array(codePoints.length);\n        for (var idx = 0, len = codePoints.length; idx < len; idx++) {\n            var codePoint = toCodePoint(codePoints[idx]);\n            glyphs[idx] = this.encoding.encodeUnicodeCodePoint(codePoint);\n        }\n        return glyphs;\n    };\n    StandardFontEmbedder.for = function (fontName, customName) {\n        return new StandardFontEmbedder(fontName, customName);\n    };\n    return StandardFontEmbedder;\n}());\nexport default StandardFontEmbedder;\n//# sourceMappingURL=StandardFontEmbedder.js.map","import { toHexString, toHexStringOfMinLength } from \"../../utils\";\nimport { hasSurrogates, highSurrogate, isWithinBMP, lowSurrogate, } from \"../../utils/unicode\";\n/** `glyphs` should be an array of unique glyphs */\nexport var createCmap = function (glyphs, glyphId) {\n    var bfChars = new Array(glyphs.length);\n    for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n        var glyph = glyphs[idx];\n        var id = cmapHexFormat(cmapHexString(glyphId(glyph)));\n        var unicode = cmapHexFormat.apply(void 0, glyph.codePoints.map(cmapCodePointFormat));\n        bfChars[idx] = [id, unicode];\n    }\n    return fillCmapTemplate(bfChars);\n};\n/* =============================== Templates ================================ */\nvar fillCmapTemplate = function (bfChars) { return \"/CIDInit /ProcSet findresource begin\\n12 dict begin\\nbegincmap\\n/CIDSystemInfo <<\\n  /Registry (Adobe)\\n  /Ordering (UCS)\\n  /Supplement 0\\n>> def\\n/CMapName /Adobe-Identity-UCS def\\n/CMapType 2 def\\n1 begincodespacerange\\n<0000><ffff>\\nendcodespacerange\\n\" + bfChars.length + \" beginbfchar\\n\" + bfChars.map(function (_a) {\n    var glyphId = _a[0], codePoint = _a[1];\n    return glyphId + \" \" + codePoint;\n}).join('\\n') + \"\\nendbfchar\\nendcmap\\nCMapName currentdict /CMap defineresource pop\\nend\\nend\"; };\n/* =============================== Utilities ================================ */\nvar cmapHexFormat = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"<\" + values.join('') + \">\";\n};\nvar cmapHexString = function (value) { return toHexStringOfMinLength(value, 4); };\nvar cmapCodePointFormat = function (codePoint) {\n    if (isWithinBMP(codePoint))\n        return cmapHexString(codePoint);\n    if (hasSurrogates(codePoint)) {\n        var hs = highSurrogate(codePoint);\n        var ls = lowSurrogate(codePoint);\n        return \"\" + cmapHexString(hs) + cmapHexString(ls);\n    }\n    var hex = toHexString(codePoint);\n    var msg = \"0x\" + hex + \" is not a valid UTF-8 or UTF-16 codepoint.\";\n    throw new Error(msg);\n};\n//# sourceMappingURL=CMap.js.map","// prettier-ignore\nvar makeFontFlags = function (options) {\n    var flags = 0;\n    var flipBit = function (bit) { flags |= (1 << (bit - 1)); };\n    if (options.fixedPitch)\n        flipBit(1);\n    if (options.serif)\n        flipBit(2);\n    if (options.symbolic)\n        flipBit(3);\n    if (options.script)\n        flipBit(4);\n    if (options.nonsymbolic)\n        flipBit(6);\n    if (options.italic)\n        flipBit(7);\n    if (options.allCap)\n        flipBit(17);\n    if (options.smallCap)\n        flipBit(18);\n    if (options.forceBold)\n        flipBit(19);\n    return flags;\n};\n// From: https://github.com/foliojs/pdfkit/blob/83f5f7243172a017adcf6a7faa5547c55982c57b/lib/font/embedded.js#L123-L129\nexport var deriveFontFlags = function (font) {\n    var familyClass = font['OS/2'] ? font['OS/2'].sFamilyClass : 0;\n    var flags = makeFontFlags({\n        fixedPitch: font.post.isFixedPitch,\n        serif: 1 <= familyClass && familyClass <= 7,\n        symbolic: true,\n        script: familyClass === 10,\n        italic: font.head.macStyle.italic,\n    });\n    return flags;\n};\n//# sourceMappingURL=FontFlags.js.map","import { __extends } from \"tslib\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, padStart, utf16Decode, pdfDocEncodingDecode, toCharCode, parseDate, hasUtf16BOM, } from \"../../utils\";\nimport { InvalidPDFDateStringError } from \"../errors\";\nvar PDFString = /** @class */ (function (_super) {\n    __extends(PDFString, _super);\n    function PDFString(value) {\n        var _this = _super.call(this) || this;\n        _this.value = value;\n        return _this;\n    }\n    PDFString.prototype.asBytes = function () {\n        var bytes = [];\n        var octal = '';\n        var escaped = false;\n        var pushByte = function (byte) {\n            if (byte !== undefined)\n                bytes.push(byte);\n            escaped = false;\n        };\n        for (var idx = 0, len = this.value.length; idx < len; idx++) {\n            var char = this.value[idx];\n            var byte = toCharCode(char);\n            var nextChar = this.value[idx + 1];\n            if (!escaped) {\n                if (byte === CharCodes.BackSlash)\n                    escaped = true;\n                else\n                    pushByte(byte);\n            }\n            else {\n                if (byte === CharCodes.Newline)\n                    pushByte();\n                else if (byte === CharCodes.CarriageReturn)\n                    pushByte();\n                else if (byte === CharCodes.n)\n                    pushByte(CharCodes.Newline);\n                else if (byte === CharCodes.r)\n                    pushByte(CharCodes.CarriageReturn);\n                else if (byte === CharCodes.t)\n                    pushByte(CharCodes.Tab);\n                else if (byte === CharCodes.b)\n                    pushByte(CharCodes.Backspace);\n                else if (byte === CharCodes.f)\n                    pushByte(CharCodes.FormFeed);\n                else if (byte === CharCodes.LeftParen)\n                    pushByte(CharCodes.LeftParen);\n                else if (byte === CharCodes.RightParen)\n                    pushByte(CharCodes.RightParen);\n                else if (byte === CharCodes.Backspace)\n                    pushByte(CharCodes.BackSlash);\n                else if (byte >= CharCodes.Zero && byte <= CharCodes.Seven) {\n                    octal += char;\n                    if (octal.length === 3 || !(nextChar >= '0' && nextChar <= '7')) {\n                        pushByte(parseInt(octal, 8));\n                        octal = '';\n                    }\n                }\n                else {\n                    pushByte(byte);\n                }\n            }\n        }\n        return new Uint8Array(bytes);\n    };\n    PDFString.prototype.decodeText = function () {\n        var bytes = this.asBytes();\n        if (hasUtf16BOM(bytes))\n            return utf16Decode(bytes);\n        return pdfDocEncodingDecode(bytes);\n    };\n    PDFString.prototype.decodeDate = function () {\n        var text = this.decodeText();\n        var date = parseDate(text);\n        if (!date)\n            throw new InvalidPDFDateStringError(text);\n        return date;\n    };\n    PDFString.prototype.asString = function () {\n        return this.value;\n    };\n    PDFString.prototype.clone = function () {\n        return PDFString.of(this.value);\n    };\n    PDFString.prototype.toString = function () {\n        return \"(\" + this.value + \")\";\n    };\n    PDFString.prototype.sizeInBytes = function () {\n        return this.value.length + 2;\n    };\n    PDFString.prototype.copyBytesInto = function (buffer, offset) {\n        buffer[offset++] = CharCodes.LeftParen;\n        offset += copyStringIntoBuffer(this.value, buffer, offset);\n        buffer[offset++] = CharCodes.RightParen;\n        return this.value.length + 2;\n    };\n    // The PDF spec allows newlines and parens to appear directly within a literal\n    // string. These character _may_ be escaped. But they do not _have_ to be. So\n    // for simplicity, we will not bother escaping them.\n    PDFString.of = function (value) { return new PDFString(value); };\n    PDFString.fromDate = function (date) {\n        var year = padStart(String(date.getUTCFullYear()), 4, '0');\n        var month = padStart(String(date.getUTCMonth() + 1), 2, '0');\n        var day = padStart(String(date.getUTCDate()), 2, '0');\n        var hours = padStart(String(date.getUTCHours()), 2, '0');\n        var mins = padStart(String(date.getUTCMinutes()), 2, '0');\n        var secs = padStart(String(date.getUTCSeconds()), 2, '0');\n        return new PDFString(\"D:\" + year + month + day + hours + mins + secs + \"Z\");\n    };\n    return PDFString;\n}(PDFObject));\nexport default PDFString;\n//# sourceMappingURL=PDFString.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { createCmap } from \"./CMap\";\nimport { deriveFontFlags } from \"./FontFlags\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFString from \"../objects/PDFString\";\nimport { byAscendingId, Cache, sortedUniq, toHexStringOfMinLength, } from \"../../utils\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/jpeg.coffee\n */\nvar CustomFontEmbedder = /** @class */ (function () {\n    function CustomFontEmbedder(font, fontData, customName, fontFeatures) {\n        var _this = this;\n        this.allGlyphsInFontSortedById = function () {\n            var glyphs = new Array(_this.font.characterSet.length);\n            for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n                var codePoint = _this.font.characterSet[idx];\n                glyphs[idx] = _this.font.glyphForCodePoint(codePoint);\n            }\n            return sortedUniq(glyphs.sort(byAscendingId), function (g) { return g.id; });\n        };\n        this.font = font;\n        this.scale = 1000 / this.font.unitsPerEm;\n        this.fontData = fontData;\n        this.fontName = this.font.postscriptName || 'Font';\n        this.customName = customName;\n        this.fontFeatures = fontFeatures;\n        this.baseFontName = '';\n        this.glyphCache = Cache.populatedBy(this.allGlyphsInFontSortedById);\n    }\n    CustomFontEmbedder.for = function (fontkit, fontData, customName, fontFeatures) {\n        return __awaiter(this, void 0, void 0, function () {\n            var font;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, fontkit.create(fontData)];\n                    case 1:\n                        font = _a.sent();\n                        return [2 /*return*/, new CustomFontEmbedder(font, fontData, customName, fontFeatures)];\n                }\n            });\n        });\n    };\n    /**\n     * Encode the JavaScript string into this font. (JavaScript encodes strings in\n     * Unicode, but embedded fonts use their own custom encodings)\n     */\n    CustomFontEmbedder.prototype.encodeText = function (text) {\n        var glyphs = this.font.layout(text, this.fontFeatures).glyphs;\n        var hexCodes = new Array(glyphs.length);\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            hexCodes[idx] = toHexStringOfMinLength(glyphs[idx].id, 4);\n        }\n        return PDFHexString.of(hexCodes.join(''));\n    };\n    // The advanceWidth takes into account kerning automatically, so we don't\n    // have to do that manually like we do for the standard fonts.\n    CustomFontEmbedder.prototype.widthOfTextAtSize = function (text, size) {\n        var glyphs = this.font.layout(text, this.fontFeatures).glyphs;\n        var totalWidth = 0;\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            totalWidth += glyphs[idx].advanceWidth * this.scale;\n        }\n        var scale = size / 1000;\n        return totalWidth * scale;\n    };\n    CustomFontEmbedder.prototype.heightOfFontAtSize = function (size, options) {\n        if (options === void 0) { options = {}; }\n        var _a = options.descender, descender = _a === void 0 ? true : _a;\n        var _b = this.font, ascent = _b.ascent, descent = _b.descent, bbox = _b.bbox;\n        var yTop = (ascent || bbox.maxY) * this.scale;\n        var yBottom = (descent || bbox.minY) * this.scale;\n        var height = yTop - yBottom;\n        if (!descender)\n            height -= Math.abs(descent) || 0;\n        return (height / 1000) * size;\n    };\n    CustomFontEmbedder.prototype.sizeOfFontAtHeight = function (height) {\n        var _a = this.font, ascent = _a.ascent, descent = _a.descent, bbox = _a.bbox;\n        var yTop = (ascent || bbox.maxY) * this.scale;\n        var yBottom = (descent || bbox.minY) * this.scale;\n        return (1000 * height) / (yTop - yBottom);\n    };\n    CustomFontEmbedder.prototype.embedIntoContext = function (context, ref) {\n        this.baseFontName =\n            this.customName || context.addRandomSuffix(this.fontName);\n        return this.embedFontDict(context, ref);\n    };\n    CustomFontEmbedder.prototype.embedFontDict = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var cidFontDictRef, unicodeCMapRef, fontDict;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.embedCIDFontDict(context)];\n                    case 1:\n                        cidFontDictRef = _a.sent();\n                        unicodeCMapRef = this.embedUnicodeCmap(context);\n                        fontDict = context.obj({\n                            Type: 'Font',\n                            Subtype: 'Type0',\n                            BaseFont: this.baseFontName,\n                            Encoding: 'Identity-H',\n                            DescendantFonts: [cidFontDictRef],\n                            ToUnicode: unicodeCMapRef,\n                        });\n                        if (ref) {\n                            context.assign(ref, fontDict);\n                            return [2 /*return*/, ref];\n                        }\n                        else {\n                            return [2 /*return*/, context.register(fontDict)];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.isCFF = function () {\n        return this.font.cff;\n    };\n    CustomFontEmbedder.prototype.embedCIDFontDict = function (context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fontDescriptorRef, cidFontDict;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.embedFontDescriptor(context)];\n                    case 1:\n                        fontDescriptorRef = _a.sent();\n                        cidFontDict = context.obj({\n                            Type: 'Font',\n                            Subtype: this.isCFF() ? 'CIDFontType0' : 'CIDFontType2',\n                            CIDToGIDMap: 'Identity',\n                            BaseFont: this.baseFontName,\n                            CIDSystemInfo: {\n                                Registry: PDFString.of('Adobe'),\n                                Ordering: PDFString.of('Identity'),\n                                Supplement: 0,\n                            },\n                            FontDescriptor: fontDescriptorRef,\n                            W: this.computeWidths(),\n                        });\n                        return [2 /*return*/, context.register(cidFontDict)];\n                }\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.embedFontDescriptor = function (context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fontStreamRef, scale, _a, italicAngle, ascent, descent, capHeight, xHeight, _b, minX, minY, maxX, maxY, fontDescriptor;\n            var _c;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0: return [4 /*yield*/, this.embedFontStream(context)];\n                    case 1:\n                        fontStreamRef = _d.sent();\n                        scale = this.scale;\n                        _a = this.font, italicAngle = _a.italicAngle, ascent = _a.ascent, descent = _a.descent, capHeight = _a.capHeight, xHeight = _a.xHeight;\n                        _b = this.font.bbox, minX = _b.minX, minY = _b.minY, maxX = _b.maxX, maxY = _b.maxY;\n                        fontDescriptor = context.obj((_c = {\n                                Type: 'FontDescriptor',\n                                FontName: this.baseFontName,\n                                Flags: deriveFontFlags(this.font),\n                                FontBBox: [minX * scale, minY * scale, maxX * scale, maxY * scale],\n                                ItalicAngle: italicAngle,\n                                Ascent: ascent * scale,\n                                Descent: descent * scale,\n                                CapHeight: (capHeight || ascent) * scale,\n                                XHeight: (xHeight || 0) * scale,\n                                // Not sure how to compute/find this, nor is anybody else really:\n                                // https://stackoverflow.com/questions/35485179/stemv-value-of-the-truetype-font\n                                StemV: 0\n                            },\n                            _c[this.isCFF() ? 'FontFile3' : 'FontFile2'] = fontStreamRef,\n                            _c));\n                        return [2 /*return*/, context.register(fontDescriptor)];\n                }\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.serializeFont = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.fontData];\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.embedFontStream = function (context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fontStream, _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _b = (_a = context).flateStream;\n                        return [4 /*yield*/, this.serializeFont()];\n                    case 1:\n                        fontStream = _b.apply(_a, [_c.sent(), {\n                                Subtype: this.isCFF() ? 'CIDFontType0C' : undefined,\n                            }]);\n                        return [2 /*return*/, context.register(fontStream)];\n                }\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.embedUnicodeCmap = function (context) {\n        var cmap = createCmap(this.glyphCache.access(), this.glyphId.bind(this));\n        var cmapStream = context.flateStream(cmap);\n        return context.register(cmapStream);\n    };\n    CustomFontEmbedder.prototype.glyphId = function (glyph) {\n        return glyph ? glyph.id : -1;\n    };\n    CustomFontEmbedder.prototype.computeWidths = function () {\n        var glyphs = this.glyphCache.access();\n        var widths = [];\n        var currSection = [];\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            var currGlyph = glyphs[idx];\n            var prevGlyph = glyphs[idx - 1];\n            var currGlyphId = this.glyphId(currGlyph);\n            var prevGlyphId = this.glyphId(prevGlyph);\n            if (idx === 0) {\n                widths.push(currGlyphId);\n            }\n            else if (currGlyphId - prevGlyphId !== 1) {\n                widths.push(currSection);\n                widths.push(currGlyphId);\n                currSection = [];\n            }\n            currSection.push(currGlyph.advanceWidth * this.scale);\n        }\n        widths.push(currSection);\n        return widths;\n    };\n    return CustomFontEmbedder;\n}());\nexport default CustomFontEmbedder;\n//# sourceMappingURL=CustomFontEmbedder.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport CustomFontEmbedder from \"./CustomFontEmbedder\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport { Cache, mergeUint8Arrays, toHexStringOfMinLength } from \"../../utils\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/jpeg.coffee\n */\nvar CustomFontSubsetEmbedder = /** @class */ (function (_super) {\n    __extends(CustomFontSubsetEmbedder, _super);\n    function CustomFontSubsetEmbedder(font, fontData, customFontName, fontFeatures) {\n        var _this = _super.call(this, font, fontData, customFontName, fontFeatures) || this;\n        _this.subset = _this.font.createSubset();\n        _this.glyphs = [];\n        _this.glyphCache = Cache.populatedBy(function () { return _this.glyphs; });\n        _this.glyphIdMap = new Map();\n        return _this;\n    }\n    CustomFontSubsetEmbedder.for = function (fontkit, fontData, customFontName, fontFeatures) {\n        return __awaiter(this, void 0, void 0, function () {\n            var font;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, fontkit.create(fontData)];\n                    case 1:\n                        font = _a.sent();\n                        return [2 /*return*/, new CustomFontSubsetEmbedder(font, fontData, customFontName, fontFeatures)];\n                }\n            });\n        });\n    };\n    CustomFontSubsetEmbedder.prototype.encodeText = function (text) {\n        var glyphs = this.font.layout(text, this.fontFeatures).glyphs;\n        var hexCodes = new Array(glyphs.length);\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            var glyph = glyphs[idx];\n            var subsetGlyphId = this.subset.includeGlyph(glyph);\n            this.glyphs[subsetGlyphId - 1] = glyph;\n            this.glyphIdMap.set(glyph.id, subsetGlyphId);\n            hexCodes[idx] = toHexStringOfMinLength(subsetGlyphId, 4);\n        }\n        this.glyphCache.invalidate();\n        return PDFHexString.of(hexCodes.join(''));\n    };\n    CustomFontSubsetEmbedder.prototype.isCFF = function () {\n        return this.subset.cff;\n    };\n    CustomFontSubsetEmbedder.prototype.glyphId = function (glyph) {\n        return glyph ? this.glyphIdMap.get(glyph.id) : -1;\n    };\n    CustomFontSubsetEmbedder.prototype.serializeFont = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var parts = [];\n            _this.subset\n                .encodeStream()\n                .on('data', function (bytes) { return parts.push(bytes); })\n                .on('end', function () { return resolve(mergeUint8Arrays(parts)); })\n                .on('error', function (err) { return reject(err); });\n        });\n    };\n    return CustomFontSubsetEmbedder;\n}(CustomFontEmbedder));\nexport default CustomFontSubsetEmbedder;\n//# sourceMappingURL=CustomFontSubsetEmbedder.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\n/**\n * From the PDF-A3 specification, section **3.1. Requirements - General**.\n * See:\n * * https://www.pdfa.org/wp-content/uploads/2018/10/PDF20_AN002-AF.pdf\n */\nexport var AFRelationship;\n(function (AFRelationship) {\n    AFRelationship[\"Source\"] = \"Source\";\n    AFRelationship[\"Data\"] = \"Data\";\n    AFRelationship[\"Alternative\"] = \"Alternative\";\n    AFRelationship[\"Supplement\"] = \"Supplement\";\n    AFRelationship[\"EncryptedPayload\"] = \"EncryptedPayload\";\n    AFRelationship[\"FormData\"] = \"EncryptedPayload\";\n    AFRelationship[\"Schema\"] = \"Schema\";\n    AFRelationship[\"Unspecified\"] = \"Unspecified\";\n})(AFRelationship || (AFRelationship = {}));\nvar FileEmbedder = /** @class */ (function () {\n    function FileEmbedder(fileData, fileName, options) {\n        if (options === void 0) { options = {}; }\n        this.fileData = fileData;\n        this.fileName = fileName;\n        this.options = options;\n    }\n    FileEmbedder.for = function (bytes, fileName, options) {\n        if (options === void 0) { options = {}; }\n        return new FileEmbedder(bytes, fileName, options);\n    };\n    FileEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, mimeType, description, creationDate, modificationDate, afRelationship, embeddedFileStream, embeddedFileStreamRef, fileSpecDict;\n            return __generator(this, function (_b) {\n                _a = this.options, mimeType = _a.mimeType, description = _a.description, creationDate = _a.creationDate, modificationDate = _a.modificationDate, afRelationship = _a.afRelationship;\n                embeddedFileStream = context.flateStream(this.fileData, {\n                    Type: 'EmbeddedFile',\n                    Subtype: mimeType !== null && mimeType !== void 0 ? mimeType : undefined,\n                    Params: {\n                        Size: this.fileData.length,\n                        CreationDate: creationDate\n                            ? PDFString.fromDate(creationDate)\n                            : undefined,\n                        ModDate: modificationDate\n                            ? PDFString.fromDate(modificationDate)\n                            : undefined,\n                    },\n                });\n                embeddedFileStreamRef = context.register(embeddedFileStream);\n                fileSpecDict = context.obj({\n                    Type: 'Filespec',\n                    F: PDFString.of(this.fileName),\n                    UF: PDFHexString.fromText(this.fileName),\n                    EF: { F: embeddedFileStreamRef },\n                    Desc: description ? PDFHexString.fromText(description) : undefined,\n                    AFRelationship: afRelationship !== null && afRelationship !== void 0 ? afRelationship : undefined,\n                });\n                if (ref) {\n                    context.assign(ref, fileSpecDict);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(fileSpecDict)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return FileEmbedder;\n}());\nexport default FileEmbedder;\n//# sourceMappingURL=FileEmbedder.js.map","import { __awaiter, __generator } from \"tslib\";\n// prettier-ignore\nvar MARKERS = [\n    0xffc0, 0xffc1, 0xffc2,\n    0xffc3, 0xffc5, 0xffc6,\n    0xffc7, 0xffc8, 0xffc9,\n    0xffca, 0xffcb, 0xffcc,\n    0xffcd, 0xffce, 0xffcf,\n];\nvar ColorSpace;\n(function (ColorSpace) {\n    ColorSpace[\"DeviceGray\"] = \"DeviceGray\";\n    ColorSpace[\"DeviceRGB\"] = \"DeviceRGB\";\n    ColorSpace[\"DeviceCMYK\"] = \"DeviceCMYK\";\n})(ColorSpace || (ColorSpace = {}));\nvar ChannelToColorSpace = {\n    1: ColorSpace.DeviceGray,\n    3: ColorSpace.DeviceRGB,\n    4: ColorSpace.DeviceCMYK,\n};\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/foliojs/pdfkit/blob/a6af76467ce06bd6a2af4aa7271ccac9ff152a7d/lib/image/jpeg.js\n */\nvar JpegEmbedder = /** @class */ (function () {\n    function JpegEmbedder(imageData, bitsPerComponent, width, height, colorSpace) {\n        this.imageData = imageData;\n        this.bitsPerComponent = bitsPerComponent;\n        this.width = width;\n        this.height = height;\n        this.colorSpace = colorSpace;\n    }\n    JpegEmbedder.for = function (imageData) {\n        return __awaiter(this, void 0, void 0, function () {\n            var dataView, soi, pos, marker, bitsPerComponent, height, width, channelByte, channelName, colorSpace;\n            return __generator(this, function (_a) {\n                dataView = new DataView(imageData.buffer);\n                soi = dataView.getUint16(0);\n                if (soi !== 0xffd8)\n                    throw new Error('SOI not found in JPEG');\n                pos = 2;\n                while (pos < dataView.byteLength) {\n                    marker = dataView.getUint16(pos);\n                    pos += 2;\n                    if (MARKERS.includes(marker))\n                        break;\n                    pos += dataView.getUint16(pos);\n                }\n                if (!MARKERS.includes(marker))\n                    throw new Error('Invalid JPEG');\n                pos += 2;\n                bitsPerComponent = dataView.getUint8(pos++);\n                height = dataView.getUint16(pos);\n                pos += 2;\n                width = dataView.getUint16(pos);\n                pos += 2;\n                channelByte = dataView.getUint8(pos++);\n                channelName = ChannelToColorSpace[channelByte];\n                if (!channelName)\n                    throw new Error('Unknown JPEG channel.');\n                colorSpace = channelName;\n                return [2 /*return*/, new JpegEmbedder(imageData, bitsPerComponent, width, height, colorSpace)];\n            });\n        });\n    };\n    JpegEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var xObject;\n            return __generator(this, function (_a) {\n                xObject = context.stream(this.imageData, {\n                    Type: 'XObject',\n                    Subtype: 'Image',\n                    BitsPerComponent: this.bitsPerComponent,\n                    Width: this.width,\n                    Height: this.height,\n                    ColorSpace: this.colorSpace,\n                    Filter: 'DCTDecode',\n                    // CMYK JPEG streams in PDF are typically stored complemented,\n                    // with 1 as 'off' and 0 as 'on' (PDF 32000-1:2008, 8.6.4.4).\n                    //\n                    // Standalone CMYK JPEG (usually exported by Photoshop) are\n                    // stored inverse, with 0 as 'off' and 1 as 'on', like RGB.\n                    //\n                    // Applying a swap here as a hedge that most bytes passing\n                    // through this method will benefit from it.\n                    Decode: this.colorSpace === ColorSpace.DeviceCMYK\n                        ? [1, 0, 1, 0, 1, 0, 1, 0]\n                        : undefined,\n                });\n                if (ref) {\n                    context.assign(ref, xObject);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(xObject)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return JpegEmbedder;\n}());\nexport default JpegEmbedder;\n//# sourceMappingURL=JpegEmbedder.js.map","import UPNG from '@pdf-lib/upng';\nvar getImageType = function (ctype) {\n    if (ctype === 0)\n        return PngType.Greyscale;\n    if (ctype === 2)\n        return PngType.Truecolour;\n    if (ctype === 3)\n        return PngType.IndexedColour;\n    if (ctype === 4)\n        return PngType.GreyscaleWithAlpha;\n    if (ctype === 6)\n        return PngType.TruecolourWithAlpha;\n    throw new Error(\"Unknown color type: \" + ctype);\n};\nvar splitAlphaChannel = function (rgbaChannel) {\n    var pixelCount = Math.floor(rgbaChannel.length / 4);\n    var rgbChannel = new Uint8Array(pixelCount * 3);\n    var alphaChannel = new Uint8Array(pixelCount * 1);\n    var rgbaOffset = 0;\n    var rgbOffset = 0;\n    var alphaOffset = 0;\n    while (rgbaOffset < rgbaChannel.length) {\n        rgbChannel[rgbOffset++] = rgbaChannel[rgbaOffset++];\n        rgbChannel[rgbOffset++] = rgbaChannel[rgbaOffset++];\n        rgbChannel[rgbOffset++] = rgbaChannel[rgbaOffset++];\n        alphaChannel[alphaOffset++] = rgbaChannel[rgbaOffset++];\n    }\n    return { rgbChannel: rgbChannel, alphaChannel: alphaChannel };\n};\nexport var PngType;\n(function (PngType) {\n    PngType[\"Greyscale\"] = \"Greyscale\";\n    PngType[\"Truecolour\"] = \"Truecolour\";\n    PngType[\"IndexedColour\"] = \"IndexedColour\";\n    PngType[\"GreyscaleWithAlpha\"] = \"GreyscaleWithAlpha\";\n    PngType[\"TruecolourWithAlpha\"] = \"TruecolourWithAlpha\";\n})(PngType || (PngType = {}));\nvar PNG = /** @class */ (function () {\n    function PNG(pngData) {\n        var upng = UPNG.decode(pngData);\n        var frames = UPNG.toRGBA8(upng);\n        if (frames.length > 1)\n            throw new Error(\"Animated PNGs are not supported\");\n        var frame = new Uint8Array(frames[0]);\n        var _a = splitAlphaChannel(frame), rgbChannel = _a.rgbChannel, alphaChannel = _a.alphaChannel;\n        this.rgbChannel = rgbChannel;\n        var hasAlphaValues = alphaChannel.some(function (a) { return a < 255; });\n        if (hasAlphaValues)\n            this.alphaChannel = alphaChannel;\n        this.type = getImageType(upng.ctype);\n        this.width = upng.width;\n        this.height = upng.height;\n        this.bitsPerComponent = 8;\n    }\n    PNG.load = function (pngData) { return new PNG(pngData); };\n    return PNG;\n}());\nexport { PNG };\n//# sourceMappingURL=png.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { PNG } from \"../../utils/png\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/png.coffee\n */\nvar PngEmbedder = /** @class */ (function () {\n    function PngEmbedder(png) {\n        this.image = png;\n        this.bitsPerComponent = png.bitsPerComponent;\n        this.width = png.width;\n        this.height = png.height;\n        this.colorSpace = 'DeviceRGB';\n    }\n    PngEmbedder.for = function (imageData) {\n        return __awaiter(this, void 0, void 0, function () {\n            var png;\n            return __generator(this, function (_a) {\n                png = PNG.load(imageData);\n                return [2 /*return*/, new PngEmbedder(png)];\n            });\n        });\n    };\n    PngEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var SMask, xObject;\n            return __generator(this, function (_a) {\n                SMask = this.embedAlphaChannel(context);\n                xObject = context.flateStream(this.image.rgbChannel, {\n                    Type: 'XObject',\n                    Subtype: 'Image',\n                    BitsPerComponent: this.image.bitsPerComponent,\n                    Width: this.image.width,\n                    Height: this.image.height,\n                    ColorSpace: this.colorSpace,\n                    SMask: SMask,\n                });\n                if (ref) {\n                    context.assign(ref, xObject);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(xObject)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    PngEmbedder.prototype.embedAlphaChannel = function (context) {\n        if (!this.image.alphaChannel)\n            return undefined;\n        var xObject = context.flateStream(this.image.alphaChannel, {\n            Type: 'XObject',\n            Subtype: 'Image',\n            Height: this.image.height,\n            Width: this.image.width,\n            BitsPerComponent: this.image.bitsPerComponent,\n            ColorSpace: 'DeviceGray',\n            Decode: [0, 1],\n        });\n        return context.register(xObject);\n    };\n    return PngEmbedder;\n}());\nexport default PngEmbedder;\n//# sourceMappingURL=PngEmbedder.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The Stream class contained in this file is a TypeScript port of the\n * JavaScript Stream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nvar Stream = /** @class */ (function () {\n    function Stream(buffer, start, length) {\n        this.bytes = buffer;\n        this.start = start || 0;\n        this.pos = this.start;\n        this.end = !!start && !!length ? start + length : this.bytes.length;\n    }\n    Object.defineProperty(Stream.prototype, \"length\", {\n        get: function () {\n            return this.end - this.start;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Stream.prototype, \"isEmpty\", {\n        get: function () {\n            return this.length === 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Stream.prototype.getByte = function () {\n        if (this.pos >= this.end) {\n            return -1;\n        }\n        return this.bytes[this.pos++];\n    };\n    Stream.prototype.getUint16 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        if (b0 === -1 || b1 === -1) {\n            return -1;\n        }\n        return (b0 << 8) + b1;\n    };\n    Stream.prototype.getInt32 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        var b2 = this.getByte();\n        var b3 = this.getByte();\n        return (b0 << 24) + (b1 << 16) + (b2 << 8) + b3;\n    };\n    // Returns subarray of original buffer, should only be read.\n    Stream.prototype.getBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var bytes = this.bytes;\n        var pos = this.pos;\n        var strEnd = this.end;\n        if (!length) {\n            var subarray = bytes.subarray(pos, strEnd);\n            // `this.bytes` is always a `Uint8Array` here.\n            return forceClamped ? new Uint8ClampedArray(subarray) : subarray;\n        }\n        else {\n            var end = pos + length;\n            if (end > strEnd) {\n                end = strEnd;\n            }\n            this.pos = end;\n            var subarray = bytes.subarray(pos, end);\n            // `this.bytes` is always a `Uint8Array` here.\n            return forceClamped ? new Uint8ClampedArray(subarray) : subarray;\n        }\n    };\n    Stream.prototype.peekByte = function () {\n        var peekedByte = this.getByte();\n        this.pos--;\n        return peekedByte;\n    };\n    Stream.prototype.peekBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var bytes = this.getBytes(length, forceClamped);\n        this.pos -= bytes.length;\n        return bytes;\n    };\n    Stream.prototype.skip = function (n) {\n        if (!n) {\n            n = 1;\n        }\n        this.pos += n;\n    };\n    Stream.prototype.reset = function () {\n        this.pos = this.start;\n    };\n    Stream.prototype.moveStart = function () {\n        this.start = this.pos;\n    };\n    Stream.prototype.makeSubStream = function (start, length) {\n        return new Stream(this.bytes, start, length);\n    };\n    Stream.prototype.decode = function () {\n        return this.bytes;\n    };\n    return Stream;\n}());\nexport default Stream;\n//# sourceMappingURL=Stream.js.map","import { MethodNotImplementedError } from \"../errors\";\nimport Stream from \"./Stream\";\n/*\n * Copyright 2012 Mozilla Foundation\n *\n * The DecodeStream class contained in this file is a TypeScript port of the\n * JavaScript DecodeStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\n// Lots of DecodeStreams are created whose buffers are never used.  For these\n// we share a single empty buffer. This is (a) space-efficient and (b) avoids\n// having special cases that would be required if we used |null| for an empty\n// buffer.\nvar emptyBuffer = new Uint8Array(0);\n/**\n * Super class for the decoding streams\n */\nvar DecodeStream = /** @class */ (function () {\n    function DecodeStream(maybeMinBufferLength) {\n        this.pos = 0;\n        this.bufferLength = 0;\n        this.eof = false;\n        this.buffer = emptyBuffer;\n        this.minBufferLength = 512;\n        if (maybeMinBufferLength) {\n            // Compute the first power of two that is as big as maybeMinBufferLength.\n            while (this.minBufferLength < maybeMinBufferLength) {\n                this.minBufferLength *= 2;\n            }\n        }\n    }\n    Object.defineProperty(DecodeStream.prototype, \"isEmpty\", {\n        get: function () {\n            while (!this.eof && this.bufferLength === 0) {\n                this.readBlock();\n            }\n            return this.bufferLength === 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DecodeStream.prototype.getByte = function () {\n        var pos = this.pos;\n        while (this.bufferLength <= pos) {\n            if (this.eof) {\n                return -1;\n            }\n            this.readBlock();\n        }\n        return this.buffer[this.pos++];\n    };\n    DecodeStream.prototype.getUint16 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        if (b0 === -1 || b1 === -1) {\n            return -1;\n        }\n        return (b0 << 8) + b1;\n    };\n    DecodeStream.prototype.getInt32 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        var b2 = this.getByte();\n        var b3 = this.getByte();\n        return (b0 << 24) + (b1 << 16) + (b2 << 8) + b3;\n    };\n    DecodeStream.prototype.getBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var end;\n        var pos = this.pos;\n        if (length) {\n            this.ensureBuffer(pos + length);\n            end = pos + length;\n            while (!this.eof && this.bufferLength < end) {\n                this.readBlock();\n            }\n            var bufEnd = this.bufferLength;\n            if (end > bufEnd) {\n                end = bufEnd;\n            }\n        }\n        else {\n            while (!this.eof) {\n                this.readBlock();\n            }\n            end = this.bufferLength;\n        }\n        this.pos = end;\n        var subarray = this.buffer.subarray(pos, end);\n        // `this.buffer` is either a `Uint8Array` or `Uint8ClampedArray` here.\n        return forceClamped && !(subarray instanceof Uint8ClampedArray)\n            ? new Uint8ClampedArray(subarray)\n            : subarray;\n    };\n    DecodeStream.prototype.peekByte = function () {\n        var peekedByte = this.getByte();\n        this.pos--;\n        return peekedByte;\n    };\n    DecodeStream.prototype.peekBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var bytes = this.getBytes(length, forceClamped);\n        this.pos -= bytes.length;\n        return bytes;\n    };\n    DecodeStream.prototype.skip = function (n) {\n        if (!n) {\n            n = 1;\n        }\n        this.pos += n;\n    };\n    DecodeStream.prototype.reset = function () {\n        this.pos = 0;\n    };\n    DecodeStream.prototype.makeSubStream = function (start, length /* dict */) {\n        var end = start + length;\n        while (this.bufferLength <= end && !this.eof) {\n            this.readBlock();\n        }\n        return new Stream(this.buffer, start, length /* dict */);\n    };\n    DecodeStream.prototype.decode = function () {\n        while (!this.eof)\n            this.readBlock();\n        return this.buffer.subarray(0, this.bufferLength);\n    };\n    DecodeStream.prototype.readBlock = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'readBlock');\n    };\n    DecodeStream.prototype.ensureBuffer = function (requested) {\n        var buffer = this.buffer;\n        if (requested <= buffer.byteLength) {\n            return buffer;\n        }\n        var size = this.minBufferLength;\n        while (size < requested) {\n            size *= 2;\n        }\n        var buffer2 = new Uint8Array(size);\n        buffer2.set(buffer);\n        return (this.buffer = buffer2);\n    };\n    return DecodeStream;\n}());\nexport default DecodeStream;\n//# sourceMappingURL=DecodeStream.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The Ascii85Stream class contained in this file is a TypeScript port of the\n * JavaScript Ascii85Stream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nimport { __extends } from \"tslib\";\nimport DecodeStream from \"./DecodeStream\";\nvar isSpace = function (ch) {\n    return ch === 0x20 || ch === 0x09 || ch === 0x0d || ch === 0x0a;\n};\nvar Ascii85Stream = /** @class */ (function (_super) {\n    __extends(Ascii85Stream, _super);\n    function Ascii85Stream(stream, maybeLength) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        _this.input = new Uint8Array(5);\n        // Most streams increase in size when decoded, but Ascii85 streams\n        // typically shrink by ~20%.\n        if (maybeLength) {\n            maybeLength = 0.8 * maybeLength;\n        }\n        return _this;\n    }\n    Ascii85Stream.prototype.readBlock = function () {\n        var TILDA_CHAR = 0x7e; // '~'\n        var Z_LOWER_CHAR = 0x7a; // 'z'\n        var EOF = -1;\n        var stream = this.stream;\n        var c = stream.getByte();\n        while (isSpace(c)) {\n            c = stream.getByte();\n        }\n        if (c === EOF || c === TILDA_CHAR) {\n            this.eof = true;\n            return;\n        }\n        var bufferLength = this.bufferLength;\n        var buffer;\n        var i;\n        // special code for z\n        if (c === Z_LOWER_CHAR) {\n            buffer = this.ensureBuffer(bufferLength + 4);\n            for (i = 0; i < 4; ++i) {\n                buffer[bufferLength + i] = 0;\n            }\n            this.bufferLength += 4;\n        }\n        else {\n            var input = this.input;\n            input[0] = c;\n            for (i = 1; i < 5; ++i) {\n                c = stream.getByte();\n                while (isSpace(c)) {\n                    c = stream.getByte();\n                }\n                input[i] = c;\n                if (c === EOF || c === TILDA_CHAR) {\n                    break;\n                }\n            }\n            buffer = this.ensureBuffer(bufferLength + i - 1);\n            this.bufferLength += i - 1;\n            // partial ending;\n            if (i < 5) {\n                for (; i < 5; ++i) {\n                    input[i] = 0x21 + 84;\n                }\n                this.eof = true;\n            }\n            var t = 0;\n            for (i = 0; i < 5; ++i) {\n                t = t * 85 + (input[i] - 0x21);\n            }\n            for (i = 3; i >= 0; --i) {\n                buffer[bufferLength + i] = t & 0xff;\n                t >>= 8;\n            }\n        }\n    };\n    return Ascii85Stream;\n}(DecodeStream));\nexport default Ascii85Stream;\n//# sourceMappingURL=Ascii85Stream.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The AsciiHexStream class contained in this file is a TypeScript port of the\n * JavaScript AsciiHexStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nimport { __extends } from \"tslib\";\nimport DecodeStream from \"./DecodeStream\";\nvar AsciiHexStream = /** @class */ (function (_super) {\n    __extends(AsciiHexStream, _super);\n    function AsciiHexStream(stream, maybeLength) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        _this.firstDigit = -1;\n        // Most streams increase in size when decoded, but AsciiHex streams shrink\n        // by 50%.\n        if (maybeLength) {\n            maybeLength = 0.5 * maybeLength;\n        }\n        return _this;\n    }\n    AsciiHexStream.prototype.readBlock = function () {\n        var UPSTREAM_BLOCK_SIZE = 8000;\n        var bytes = this.stream.getBytes(UPSTREAM_BLOCK_SIZE);\n        if (!bytes.length) {\n            this.eof = true;\n            return;\n        }\n        var maxDecodeLength = (bytes.length + 1) >> 1;\n        var buffer = this.ensureBuffer(this.bufferLength + maxDecodeLength);\n        var bufferLength = this.bufferLength;\n        var firstDigit = this.firstDigit;\n        for (var i = 0, ii = bytes.length; i < ii; i++) {\n            var ch = bytes[i];\n            var digit = void 0;\n            if (ch >= 0x30 && ch <= 0x39) {\n                // '0'-'9'\n                digit = ch & 0x0f;\n            }\n            else if ((ch >= 0x41 && ch <= 0x46) || (ch >= 0x61 && ch <= 0x66)) {\n                // 'A'-'Z', 'a'-'z'\n                digit = (ch & 0x0f) + 9;\n            }\n            else if (ch === 0x3e) {\n                // '>'\n                this.eof = true;\n                break;\n            }\n            else {\n                // probably whitespace\n                continue; // ignoring\n            }\n            if (firstDigit < 0) {\n                firstDigit = digit;\n            }\n            else {\n                buffer[bufferLength++] = (firstDigit << 4) | digit;\n                firstDigit = -1;\n            }\n        }\n        if (firstDigit >= 0 && this.eof) {\n            // incomplete byte\n            buffer[bufferLength++] = firstDigit << 4;\n            firstDigit = -1;\n        }\n        this.firstDigit = firstDigit;\n        this.bufferLength = bufferLength;\n    };\n    return AsciiHexStream;\n}(DecodeStream));\nexport default AsciiHexStream;\n//# sourceMappingURL=AsciiHexStream.js.map","/*\n * Copyright 1996-2003 Glyph & Cog, LLC\n *\n * The flate stream implementation contained in this file is a JavaScript port\n * of XPDF's implementation, made available under the Apache 2.0 open source\n * license.\n */\nimport { __extends } from \"tslib\";\n/*\n * Copyright 2012 Mozilla Foundation\n *\n * The FlateStream class contained in this file is a TypeScript port of the\n * JavaScript FlateStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\n/* tslint:disable  no-conditional-assignment */\nimport DecodeStream from \"./DecodeStream\";\n// prettier-ignore\nvar codeLenCodeMap = new Int32Array([\n    16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15\n]);\n// prettier-ignore\nvar lengthDecode = new Int32Array([\n    0x00003, 0x00004, 0x00005, 0x00006, 0x00007, 0x00008, 0x00009, 0x0000a,\n    0x1000b, 0x1000d, 0x1000f, 0x10011, 0x20013, 0x20017, 0x2001b, 0x2001f,\n    0x30023, 0x3002b, 0x30033, 0x3003b, 0x40043, 0x40053, 0x40063, 0x40073,\n    0x50083, 0x500a3, 0x500c3, 0x500e3, 0x00102, 0x00102, 0x00102\n]);\n// prettier-ignore\nvar distDecode = new Int32Array([\n    0x00001, 0x00002, 0x00003, 0x00004, 0x10005, 0x10007, 0x20009, 0x2000d,\n    0x30011, 0x30019, 0x40021, 0x40031, 0x50041, 0x50061, 0x60081, 0x600c1,\n    0x70101, 0x70181, 0x80201, 0x80301, 0x90401, 0x90601, 0xa0801, 0xa0c01,\n    0xb1001, 0xb1801, 0xc2001, 0xc3001, 0xd4001, 0xd6001\n]);\n// prettier-ignore\nvar fixedLitCodeTab = [new Int32Array([\n        0x70100, 0x80050, 0x80010, 0x80118, 0x70110, 0x80070, 0x80030, 0x900c0,\n        0x70108, 0x80060, 0x80020, 0x900a0, 0x80000, 0x80080, 0x80040, 0x900e0,\n        0x70104, 0x80058, 0x80018, 0x90090, 0x70114, 0x80078, 0x80038, 0x900d0,\n        0x7010c, 0x80068, 0x80028, 0x900b0, 0x80008, 0x80088, 0x80048, 0x900f0,\n        0x70102, 0x80054, 0x80014, 0x8011c, 0x70112, 0x80074, 0x80034, 0x900c8,\n        0x7010a, 0x80064, 0x80024, 0x900a8, 0x80004, 0x80084, 0x80044, 0x900e8,\n        0x70106, 0x8005c, 0x8001c, 0x90098, 0x70116, 0x8007c, 0x8003c, 0x900d8,\n        0x7010e, 0x8006c, 0x8002c, 0x900b8, 0x8000c, 0x8008c, 0x8004c, 0x900f8,\n        0x70101, 0x80052, 0x80012, 0x8011a, 0x70111, 0x80072, 0x80032, 0x900c4,\n        0x70109, 0x80062, 0x80022, 0x900a4, 0x80002, 0x80082, 0x80042, 0x900e4,\n        0x70105, 0x8005a, 0x8001a, 0x90094, 0x70115, 0x8007a, 0x8003a, 0x900d4,\n        0x7010d, 0x8006a, 0x8002a, 0x900b4, 0x8000a, 0x8008a, 0x8004a, 0x900f4,\n        0x70103, 0x80056, 0x80016, 0x8011e, 0x70113, 0x80076, 0x80036, 0x900cc,\n        0x7010b, 0x80066, 0x80026, 0x900ac, 0x80006, 0x80086, 0x80046, 0x900ec,\n        0x70107, 0x8005e, 0x8001e, 0x9009c, 0x70117, 0x8007e, 0x8003e, 0x900dc,\n        0x7010f, 0x8006e, 0x8002e, 0x900bc, 0x8000e, 0x8008e, 0x8004e, 0x900fc,\n        0x70100, 0x80051, 0x80011, 0x80119, 0x70110, 0x80071, 0x80031, 0x900c2,\n        0x70108, 0x80061, 0x80021, 0x900a2, 0x80001, 0x80081, 0x80041, 0x900e2,\n        0x70104, 0x80059, 0x80019, 0x90092, 0x70114, 0x80079, 0x80039, 0x900d2,\n        0x7010c, 0x80069, 0x80029, 0x900b2, 0x80009, 0x80089, 0x80049, 0x900f2,\n        0x70102, 0x80055, 0x80015, 0x8011d, 0x70112, 0x80075, 0x80035, 0x900ca,\n        0x7010a, 0x80065, 0x80025, 0x900aa, 0x80005, 0x80085, 0x80045, 0x900ea,\n        0x70106, 0x8005d, 0x8001d, 0x9009a, 0x70116, 0x8007d, 0x8003d, 0x900da,\n        0x7010e, 0x8006d, 0x8002d, 0x900ba, 0x8000d, 0x8008d, 0x8004d, 0x900fa,\n        0x70101, 0x80053, 0x80013, 0x8011b, 0x70111, 0x80073, 0x80033, 0x900c6,\n        0x70109, 0x80063, 0x80023, 0x900a6, 0x80003, 0x80083, 0x80043, 0x900e6,\n        0x70105, 0x8005b, 0x8001b, 0x90096, 0x70115, 0x8007b, 0x8003b, 0x900d6,\n        0x7010d, 0x8006b, 0x8002b, 0x900b6, 0x8000b, 0x8008b, 0x8004b, 0x900f6,\n        0x70103, 0x80057, 0x80017, 0x8011f, 0x70113, 0x80077, 0x80037, 0x900ce,\n        0x7010b, 0x80067, 0x80027, 0x900ae, 0x80007, 0x80087, 0x80047, 0x900ee,\n        0x70107, 0x8005f, 0x8001f, 0x9009e, 0x70117, 0x8007f, 0x8003f, 0x900de,\n        0x7010f, 0x8006f, 0x8002f, 0x900be, 0x8000f, 0x8008f, 0x8004f, 0x900fe,\n        0x70100, 0x80050, 0x80010, 0x80118, 0x70110, 0x80070, 0x80030, 0x900c1,\n        0x70108, 0x80060, 0x80020, 0x900a1, 0x80000, 0x80080, 0x80040, 0x900e1,\n        0x70104, 0x80058, 0x80018, 0x90091, 0x70114, 0x80078, 0x80038, 0x900d1,\n        0x7010c, 0x80068, 0x80028, 0x900b1, 0x80008, 0x80088, 0x80048, 0x900f1,\n        0x70102, 0x80054, 0x80014, 0x8011c, 0x70112, 0x80074, 0x80034, 0x900c9,\n        0x7010a, 0x80064, 0x80024, 0x900a9, 0x80004, 0x80084, 0x80044, 0x900e9,\n        0x70106, 0x8005c, 0x8001c, 0x90099, 0x70116, 0x8007c, 0x8003c, 0x900d9,\n        0x7010e, 0x8006c, 0x8002c, 0x900b9, 0x8000c, 0x8008c, 0x8004c, 0x900f9,\n        0x70101, 0x80052, 0x80012, 0x8011a, 0x70111, 0x80072, 0x80032, 0x900c5,\n        0x70109, 0x80062, 0x80022, 0x900a5, 0x80002, 0x80082, 0x80042, 0x900e5,\n        0x70105, 0x8005a, 0x8001a, 0x90095, 0x70115, 0x8007a, 0x8003a, 0x900d5,\n        0x7010d, 0x8006a, 0x8002a, 0x900b5, 0x8000a, 0x8008a, 0x8004a, 0x900f5,\n        0x70103, 0x80056, 0x80016, 0x8011e, 0x70113, 0x80076, 0x80036, 0x900cd,\n        0x7010b, 0x80066, 0x80026, 0x900ad, 0x80006, 0x80086, 0x80046, 0x900ed,\n        0x70107, 0x8005e, 0x8001e, 0x9009d, 0x70117, 0x8007e, 0x8003e, 0x900dd,\n        0x7010f, 0x8006e, 0x8002e, 0x900bd, 0x8000e, 0x8008e, 0x8004e, 0x900fd,\n        0x70100, 0x80051, 0x80011, 0x80119, 0x70110, 0x80071, 0x80031, 0x900c3,\n        0x70108, 0x80061, 0x80021, 0x900a3, 0x80001, 0x80081, 0x80041, 0x900e3,\n        0x70104, 0x80059, 0x80019, 0x90093, 0x70114, 0x80079, 0x80039, 0x900d3,\n        0x7010c, 0x80069, 0x80029, 0x900b3, 0x80009, 0x80089, 0x80049, 0x900f3,\n        0x70102, 0x80055, 0x80015, 0x8011d, 0x70112, 0x80075, 0x80035, 0x900cb,\n        0x7010a, 0x80065, 0x80025, 0x900ab, 0x80005, 0x80085, 0x80045, 0x900eb,\n        0x70106, 0x8005d, 0x8001d, 0x9009b, 0x70116, 0x8007d, 0x8003d, 0x900db,\n        0x7010e, 0x8006d, 0x8002d, 0x900bb, 0x8000d, 0x8008d, 0x8004d, 0x900fb,\n        0x70101, 0x80053, 0x80013, 0x8011b, 0x70111, 0x80073, 0x80033, 0x900c7,\n        0x70109, 0x80063, 0x80023, 0x900a7, 0x80003, 0x80083, 0x80043, 0x900e7,\n        0x70105, 0x8005b, 0x8001b, 0x90097, 0x70115, 0x8007b, 0x8003b, 0x900d7,\n        0x7010d, 0x8006b, 0x8002b, 0x900b7, 0x8000b, 0x8008b, 0x8004b, 0x900f7,\n        0x70103, 0x80057, 0x80017, 0x8011f, 0x70113, 0x80077, 0x80037, 0x900cf,\n        0x7010b, 0x80067, 0x80027, 0x900af, 0x80007, 0x80087, 0x80047, 0x900ef,\n        0x70107, 0x8005f, 0x8001f, 0x9009f, 0x70117, 0x8007f, 0x8003f, 0x900df,\n        0x7010f, 0x8006f, 0x8002f, 0x900bf, 0x8000f, 0x8008f, 0x8004f, 0x900ff\n    ]), 9];\n// prettier-ignore\nvar fixedDistCodeTab = [new Int32Array([\n        0x50000, 0x50010, 0x50008, 0x50018, 0x50004, 0x50014, 0x5000c, 0x5001c,\n        0x50002, 0x50012, 0x5000a, 0x5001a, 0x50006, 0x50016, 0x5000e, 0x00000,\n        0x50001, 0x50011, 0x50009, 0x50019, 0x50005, 0x50015, 0x5000d, 0x5001d,\n        0x50003, 0x50013, 0x5000b, 0x5001b, 0x50007, 0x50017, 0x5000f, 0x00000\n    ]), 5];\nvar FlateStream = /** @class */ (function (_super) {\n    __extends(FlateStream, _super);\n    function FlateStream(stream, maybeLength) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        var cmf = stream.getByte();\n        var flg = stream.getByte();\n        if (cmf === -1 || flg === -1) {\n            throw new Error(\"Invalid header in flate stream: \" + cmf + \", \" + flg);\n        }\n        if ((cmf & 0x0f) !== 0x08) {\n            throw new Error(\"Unknown compression method in flate stream: \" + cmf + \", \" + flg);\n        }\n        if (((cmf << 8) + flg) % 31 !== 0) {\n            throw new Error(\"Bad FCHECK in flate stream: \" + cmf + \", \" + flg);\n        }\n        if (flg & 0x20) {\n            throw new Error(\"FDICT bit set in flate stream: \" + cmf + \", \" + flg);\n        }\n        _this.codeSize = 0;\n        _this.codeBuf = 0;\n        return _this;\n    }\n    FlateStream.prototype.readBlock = function () {\n        var buffer;\n        var len;\n        var str = this.stream;\n        // read block header\n        var hdr = this.getBits(3);\n        if (hdr & 1) {\n            this.eof = true;\n        }\n        hdr >>= 1;\n        if (hdr === 0) {\n            // uncompressed block\n            var b = void 0;\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad block header in flate stream');\n            }\n            var blockLen = b;\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad block header in flate stream');\n            }\n            blockLen |= b << 8;\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad block header in flate stream');\n            }\n            var check = b;\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad block header in flate stream');\n            }\n            check |= b << 8;\n            if (check !== (~blockLen & 0xffff) && (blockLen !== 0 || check !== 0)) {\n                // Ignoring error for bad \"empty\" block (see issue 1277)\n                throw new Error('Bad uncompressed block length in flate stream');\n            }\n            this.codeBuf = 0;\n            this.codeSize = 0;\n            var bufferLength = this.bufferLength;\n            buffer = this.ensureBuffer(bufferLength + blockLen);\n            var end = bufferLength + blockLen;\n            this.bufferLength = end;\n            if (blockLen === 0) {\n                if (str.peekByte() === -1) {\n                    this.eof = true;\n                }\n            }\n            else {\n                for (var n = bufferLength; n < end; ++n) {\n                    if ((b = str.getByte()) === -1) {\n                        this.eof = true;\n                        break;\n                    }\n                    buffer[n] = b;\n                }\n            }\n            return;\n        }\n        var litCodeTable;\n        var distCodeTable;\n        if (hdr === 1) {\n            // compressed block, fixed codes\n            litCodeTable = fixedLitCodeTab;\n            distCodeTable = fixedDistCodeTab;\n        }\n        else if (hdr === 2) {\n            // compressed block, dynamic codes\n            var numLitCodes = this.getBits(5) + 257;\n            var numDistCodes = this.getBits(5) + 1;\n            var numCodeLenCodes = this.getBits(4) + 4;\n            // build the code lengths code table\n            var codeLenCodeLengths = new Uint8Array(codeLenCodeMap.length);\n            var i = void 0;\n            for (i = 0; i < numCodeLenCodes; ++i) {\n                codeLenCodeLengths[codeLenCodeMap[i]] = this.getBits(3);\n            }\n            var codeLenCodeTab = this.generateHuffmanTable(codeLenCodeLengths);\n            // build the literal and distance code tables\n            len = 0;\n            i = 0;\n            var codes = numLitCodes + numDistCodes;\n            var codeLengths = new Uint8Array(codes);\n            var bitsLength = void 0;\n            var bitsOffset = void 0;\n            var what = void 0;\n            while (i < codes) {\n                var code = this.getCode(codeLenCodeTab);\n                if (code === 16) {\n                    bitsLength = 2;\n                    bitsOffset = 3;\n                    what = len;\n                }\n                else if (code === 17) {\n                    bitsLength = 3;\n                    bitsOffset = 3;\n                    what = len = 0;\n                }\n                else if (code === 18) {\n                    bitsLength = 7;\n                    bitsOffset = 11;\n                    what = len = 0;\n                }\n                else {\n                    codeLengths[i++] = len = code;\n                    continue;\n                }\n                var repeatLength = this.getBits(bitsLength) + bitsOffset;\n                while (repeatLength-- > 0) {\n                    codeLengths[i++] = what;\n                }\n            }\n            litCodeTable = this.generateHuffmanTable(codeLengths.subarray(0, numLitCodes));\n            distCodeTable = this.generateHuffmanTable(codeLengths.subarray(numLitCodes, codes));\n        }\n        else {\n            throw new Error('Unknown block type in flate stream');\n        }\n        buffer = this.buffer;\n        var limit = buffer ? buffer.length : 0;\n        var pos = this.bufferLength;\n        while (true) {\n            var code1 = this.getCode(litCodeTable);\n            if (code1 < 256) {\n                if (pos + 1 >= limit) {\n                    buffer = this.ensureBuffer(pos + 1);\n                    limit = buffer.length;\n                }\n                buffer[pos++] = code1;\n                continue;\n            }\n            if (code1 === 256) {\n                this.bufferLength = pos;\n                return;\n            }\n            code1 -= 257;\n            code1 = lengthDecode[code1];\n            var code2 = code1 >> 16;\n            if (code2 > 0) {\n                code2 = this.getBits(code2);\n            }\n            len = (code1 & 0xffff) + code2;\n            code1 = this.getCode(distCodeTable);\n            code1 = distDecode[code1];\n            code2 = code1 >> 16;\n            if (code2 > 0) {\n                code2 = this.getBits(code2);\n            }\n            var dist = (code1 & 0xffff) + code2;\n            if (pos + len >= limit) {\n                buffer = this.ensureBuffer(pos + len);\n                limit = buffer.length;\n            }\n            for (var k = 0; k < len; ++k, ++pos) {\n                buffer[pos] = buffer[pos - dist];\n            }\n        }\n    };\n    FlateStream.prototype.getBits = function (bits) {\n        var str = this.stream;\n        var codeSize = this.codeSize;\n        var codeBuf = this.codeBuf;\n        var b;\n        while (codeSize < bits) {\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad encoding in flate stream');\n            }\n            codeBuf |= b << codeSize;\n            codeSize += 8;\n        }\n        b = codeBuf & ((1 << bits) - 1);\n        this.codeBuf = codeBuf >> bits;\n        this.codeSize = codeSize -= bits;\n        return b;\n    };\n    FlateStream.prototype.getCode = function (table) {\n        var str = this.stream;\n        var codes = table[0];\n        var maxLen = table[1];\n        var codeSize = this.codeSize;\n        var codeBuf = this.codeBuf;\n        var b;\n        while (codeSize < maxLen) {\n            if ((b = str.getByte()) === -1) {\n                // premature end of stream. code might however still be valid.\n                // codeSize < codeLen check below guards against incomplete codeVal.\n                break;\n            }\n            codeBuf |= b << codeSize;\n            codeSize += 8;\n        }\n        var code = codes[codeBuf & ((1 << maxLen) - 1)];\n        if (typeof codes === 'number') {\n            console.log('FLATE:', code);\n        }\n        var codeLen = code >> 16;\n        var codeVal = code & 0xffff;\n        if (codeLen < 1 || codeSize < codeLen) {\n            throw new Error('Bad encoding in flate stream');\n        }\n        this.codeBuf = codeBuf >> codeLen;\n        this.codeSize = codeSize - codeLen;\n        return codeVal;\n    };\n    FlateStream.prototype.generateHuffmanTable = function (lengths) {\n        var n = lengths.length;\n        // find max code length\n        var maxLen = 0;\n        var i;\n        for (i = 0; i < n; ++i) {\n            if (lengths[i] > maxLen) {\n                maxLen = lengths[i];\n            }\n        }\n        // build the table\n        var size = 1 << maxLen;\n        var codes = new Int32Array(size);\n        for (var len = 1, code = 0, skip = 2; len <= maxLen; ++len, code <<= 1, skip <<= 1) {\n            for (var val = 0; val < n; ++val) {\n                if (lengths[val] === len) {\n                    // bit-reverse the code\n                    var code2 = 0;\n                    var t = code;\n                    for (i = 0; i < len; ++i) {\n                        code2 = (code2 << 1) | (t & 1);\n                        t >>= 1;\n                    }\n                    // fill the table entries\n                    for (i = code2; i < size; i += skip) {\n                        codes[i] = (len << 16) | val;\n                    }\n                    ++code;\n                }\n            }\n        }\n        return [codes, maxLen];\n    };\n    return FlateStream;\n}(DecodeStream));\nexport default FlateStream;\n//# sourceMappingURL=FlateStream.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The LZWStream class contained in this file is a TypeScript port of the\n * JavaScript LZWStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nimport { __extends } from \"tslib\";\nimport DecodeStream from \"./DecodeStream\";\nvar LZWStream = /** @class */ (function (_super) {\n    __extends(LZWStream, _super);\n    function LZWStream(stream, maybeLength, earlyChange) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        _this.cachedData = 0;\n        _this.bitsCached = 0;\n        var maxLzwDictionarySize = 4096;\n        var lzwState = {\n            earlyChange: earlyChange,\n            codeLength: 9,\n            nextCode: 258,\n            dictionaryValues: new Uint8Array(maxLzwDictionarySize),\n            dictionaryLengths: new Uint16Array(maxLzwDictionarySize),\n            dictionaryPrevCodes: new Uint16Array(maxLzwDictionarySize),\n            currentSequence: new Uint8Array(maxLzwDictionarySize),\n            currentSequenceLength: 0,\n        };\n        for (var i = 0; i < 256; ++i) {\n            lzwState.dictionaryValues[i] = i;\n            lzwState.dictionaryLengths[i] = 1;\n        }\n        _this.lzwState = lzwState;\n        return _this;\n    }\n    LZWStream.prototype.readBlock = function () {\n        var blockSize = 512;\n        var estimatedDecodedSize = blockSize * 2;\n        var decodedSizeDelta = blockSize;\n        var i;\n        var j;\n        var q;\n        var lzwState = this.lzwState;\n        if (!lzwState) {\n            return; // eof was found\n        }\n        var earlyChange = lzwState.earlyChange;\n        var nextCode = lzwState.nextCode;\n        var dictionaryValues = lzwState.dictionaryValues;\n        var dictionaryLengths = lzwState.dictionaryLengths;\n        var dictionaryPrevCodes = lzwState.dictionaryPrevCodes;\n        var codeLength = lzwState.codeLength;\n        var prevCode = lzwState.prevCode;\n        var currentSequence = lzwState.currentSequence;\n        var currentSequenceLength = lzwState.currentSequenceLength;\n        var decodedLength = 0;\n        var currentBufferLength = this.bufferLength;\n        var buffer = this.ensureBuffer(this.bufferLength + estimatedDecodedSize);\n        for (i = 0; i < blockSize; i++) {\n            var code = this.readBits(codeLength);\n            var hasPrev = currentSequenceLength > 0;\n            if (!code || code < 256) {\n                currentSequence[0] = code;\n                currentSequenceLength = 1;\n            }\n            else if (code >= 258) {\n                if (code < nextCode) {\n                    currentSequenceLength = dictionaryLengths[code];\n                    for (j = currentSequenceLength - 1, q = code; j >= 0; j--) {\n                        currentSequence[j] = dictionaryValues[q];\n                        q = dictionaryPrevCodes[q];\n                    }\n                }\n                else {\n                    currentSequence[currentSequenceLength++] = currentSequence[0];\n                }\n            }\n            else if (code === 256) {\n                codeLength = 9;\n                nextCode = 258;\n                currentSequenceLength = 0;\n                continue;\n            }\n            else {\n                this.eof = true;\n                delete this.lzwState;\n                break;\n            }\n            if (hasPrev) {\n                dictionaryPrevCodes[nextCode] = prevCode;\n                dictionaryLengths[nextCode] = dictionaryLengths[prevCode] + 1;\n                dictionaryValues[nextCode] = currentSequence[0];\n                nextCode++;\n                codeLength =\n                    (nextCode + earlyChange) & (nextCode + earlyChange - 1)\n                        ? codeLength\n                        : Math.min(Math.log(nextCode + earlyChange) / 0.6931471805599453 + 1, 12) | 0;\n            }\n            prevCode = code;\n            decodedLength += currentSequenceLength;\n            if (estimatedDecodedSize < decodedLength) {\n                do {\n                    estimatedDecodedSize += decodedSizeDelta;\n                } while (estimatedDecodedSize < decodedLength);\n                buffer = this.ensureBuffer(this.bufferLength + estimatedDecodedSize);\n            }\n            for (j = 0; j < currentSequenceLength; j++) {\n                buffer[currentBufferLength++] = currentSequence[j];\n            }\n        }\n        lzwState.nextCode = nextCode;\n        lzwState.codeLength = codeLength;\n        lzwState.prevCode = prevCode;\n        lzwState.currentSequenceLength = currentSequenceLength;\n        this.bufferLength = currentBufferLength;\n    };\n    LZWStream.prototype.readBits = function (n) {\n        var bitsCached = this.bitsCached;\n        var cachedData = this.cachedData;\n        while (bitsCached < n) {\n            var c = this.stream.getByte();\n            if (c === -1) {\n                this.eof = true;\n                return null;\n            }\n            cachedData = (cachedData << 8) | c;\n            bitsCached += 8;\n        }\n        this.bitsCached = bitsCached -= n;\n        this.cachedData = cachedData;\n        return (cachedData >>> bitsCached) & ((1 << n) - 1);\n    };\n    return LZWStream;\n}(DecodeStream));\nexport default LZWStream;\n//# sourceMappingURL=LZWStream.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The RunLengthStream class contained in this file is a TypeScript port of the\n * JavaScript RunLengthStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nimport { __extends } from \"tslib\";\nimport DecodeStream from \"./DecodeStream\";\nvar RunLengthStream = /** @class */ (function (_super) {\n    __extends(RunLengthStream, _super);\n    function RunLengthStream(stream, maybeLength) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        return _this;\n    }\n    RunLengthStream.prototype.readBlock = function () {\n        // The repeatHeader has following format. The first byte defines type of run\n        // and amount of bytes to repeat/copy: n = 0 through 127 - copy next n bytes\n        // (in addition to the second byte from the header), n = 129 through 255 -\n        // duplicate the second byte from the header (257 - n) times, n = 128 - end.\n        var repeatHeader = this.stream.getBytes(2);\n        if (!repeatHeader || repeatHeader.length < 2 || repeatHeader[0] === 128) {\n            this.eof = true;\n            return;\n        }\n        var buffer;\n        var bufferLength = this.bufferLength;\n        var n = repeatHeader[0];\n        if (n < 128) {\n            // copy n bytes\n            buffer = this.ensureBuffer(bufferLength + n + 1);\n            buffer[bufferLength++] = repeatHeader[1];\n            if (n > 0) {\n                var source = this.stream.getBytes(n);\n                buffer.set(source, bufferLength);\n                bufferLength += n;\n            }\n        }\n        else {\n            n = 257 - n;\n            var b = repeatHeader[1];\n            buffer = this.ensureBuffer(bufferLength + n + 1);\n            for (var i = 0; i < n; i++) {\n                buffer[bufferLength++] = b;\n            }\n        }\n        this.bufferLength = bufferLength;\n    };\n    return RunLengthStream;\n}(DecodeStream));\nexport default RunLengthStream;\n//# sourceMappingURL=RunLengthStream.js.map","import { UnexpectedObjectTypeError, UnsupportedEncodingError, } from \"../errors\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport Ascii85Stream from \"./Ascii85Stream\";\nimport AsciiHexStream from \"./AsciiHexStream\";\nimport FlateStream from \"./FlateStream\";\nimport LZWStream from \"./LZWStream\";\nimport RunLengthStream from \"./RunLengthStream\";\nimport Stream from \"./Stream\";\nvar decodeStream = function (stream, encoding, params) {\n    if (encoding === PDFName.of('FlateDecode')) {\n        return new FlateStream(stream);\n    }\n    if (encoding === PDFName.of('LZWDecode')) {\n        var earlyChange = 1;\n        if (params instanceof PDFDict) {\n            var EarlyChange = params.lookup(PDFName.of('EarlyChange'));\n            if (EarlyChange instanceof PDFNumber) {\n                earlyChange = EarlyChange.asNumber();\n            }\n        }\n        return new LZWStream(stream, undefined, earlyChange);\n    }\n    if (encoding === PDFName.of('ASCII85Decode')) {\n        return new Ascii85Stream(stream);\n    }\n    if (encoding === PDFName.of('ASCIIHexDecode')) {\n        return new AsciiHexStream(stream);\n    }\n    if (encoding === PDFName.of('RunLengthDecode')) {\n        return new RunLengthStream(stream);\n    }\n    throw new UnsupportedEncodingError(encoding.asString());\n};\nexport var decodePDFRawStream = function (_a) {\n    var dict = _a.dict, contents = _a.contents;\n    var stream = new Stream(contents);\n    var Filter = dict.lookup(PDFName.of('Filter'));\n    var DecodeParms = dict.lookup(PDFName.of('DecodeParms'));\n    if (Filter instanceof PDFName) {\n        stream = decodeStream(stream, Filter, DecodeParms);\n    }\n    else if (Filter instanceof PDFArray) {\n        for (var idx = 0, len = Filter.size(); idx < len; idx++) {\n            stream = decodeStream(stream, Filter.lookup(idx, PDFName), DecodeParms && DecodeParms.lookupMaybe(idx, PDFDict));\n        }\n    }\n    else if (!!Filter) {\n        throw new UnexpectedObjectTypeError([PDFName, PDFArray], Filter);\n    }\n    return stream;\n};\n//# sourceMappingURL=decode.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { MissingPageContentsEmbeddingError, UnrecognizedStreamTypeError, } from \"../errors\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRawStream from \"../objects/PDFRawStream\";\nimport PDFStream from \"../objects/PDFStream\";\nimport { decodePDFRawStream } from \"../streams/decode\";\nimport PDFContentStream from \"../structures/PDFContentStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { mergeIntoTypedArray } from \"../../utils\";\nvar fullPageBoundingBox = function (page) {\n    var mediaBox = page.MediaBox();\n    var width = mediaBox.lookup(2, PDFNumber).asNumber() -\n        mediaBox.lookup(0, PDFNumber).asNumber();\n    var height = mediaBox.lookup(3, PDFNumber).asNumber() -\n        mediaBox.lookup(1, PDFNumber).asNumber();\n    return { left: 0, bottom: 0, right: width, top: height };\n};\n// Returns the identity matrix, modified to position the content of the given\n// bounding box at (0, 0).\nvar boundingBoxAdjustedMatrix = function (bb) { return [1, 0, 0, 1, -bb.left, -bb.bottom]; };\nvar PDFPageEmbedder = /** @class */ (function () {\n    function PDFPageEmbedder(page, boundingBox, transformationMatrix) {\n        this.page = page;\n        var bb = boundingBox !== null && boundingBox !== void 0 ? boundingBox : fullPageBoundingBox(page);\n        this.width = bb.right - bb.left;\n        this.height = bb.top - bb.bottom;\n        this.boundingBox = bb;\n        this.transformationMatrix = transformationMatrix !== null && transformationMatrix !== void 0 ? transformationMatrix : boundingBoxAdjustedMatrix(bb);\n    }\n    PDFPageEmbedder.for = function (page, boundingBox, transformationMatrix) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new PDFPageEmbedder(page, boundingBox, transformationMatrix)];\n            });\n        });\n    };\n    PDFPageEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, Contents, Resources, decodedContents, _b, left, bottom, right, top, xObject;\n            return __generator(this, function (_c) {\n                _a = this.page.normalizedEntries(), Contents = _a.Contents, Resources = _a.Resources;\n                if (!Contents)\n                    throw new MissingPageContentsEmbeddingError();\n                decodedContents = this.decodeContents(Contents);\n                _b = this.boundingBox, left = _b.left, bottom = _b.bottom, right = _b.right, top = _b.top;\n                xObject = context.flateStream(decodedContents, {\n                    Type: 'XObject',\n                    Subtype: 'Form',\n                    FormType: 1,\n                    BBox: [left, bottom, right, top],\n                    Matrix: this.transformationMatrix,\n                    Resources: Resources,\n                });\n                if (ref) {\n                    context.assign(ref, xObject);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(xObject)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    // `contents` is an array of streams which are merged to include them in the XObject.\n    // This methods extracts each stream and joins them with a newline character.\n    PDFPageEmbedder.prototype.decodeContents = function (contents) {\n        var newline = Uint8Array.of(CharCodes.Newline);\n        var decodedContents = [];\n        for (var idx = 0, len = contents.size(); idx < len; idx++) {\n            var stream = contents.lookup(idx, PDFStream);\n            var content = void 0;\n            if (stream instanceof PDFRawStream) {\n                content = decodePDFRawStream(stream).decode();\n            }\n            else if (stream instanceof PDFContentStream) {\n                content = stream.getUnencodedContents();\n            }\n            else {\n                throw new UnrecognizedStreamTypeError(stream);\n            }\n            decodedContents.push(content, newline);\n        }\n        return mergeIntoTypedArray.apply(void 0, decodedContents);\n    };\n    return PDFPageEmbedder;\n}());\nexport default PDFPageEmbedder;\n//# sourceMappingURL=PDFPageEmbedder.js.map","import PDFArray from \"../objects/PDFArray\";\nimport PDFBool from \"../objects/PDFBool\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport { assertEachIs, assertInteger, assertIsOneOf, assertRange, } from \"../../utils\";\nvar asEnum = function (rawValue, enumType) {\n    if (rawValue === undefined)\n        return undefined;\n    return enumType[rawValue];\n};\nexport var NonFullScreenPageMode;\n(function (NonFullScreenPageMode) {\n    /**\n     * After exiting FullScreen mode, neither the document outline nor thumbnail\n     * images should be visible.\n     */\n    NonFullScreenPageMode[\"UseNone\"] = \"UseNone\";\n    /** After exiting FullScreen mode, the document outline should be visible. */\n    NonFullScreenPageMode[\"UseOutlines\"] = \"UseOutlines\";\n    /** After exiting FullScreen mode, thumbnail images should be visible. */\n    NonFullScreenPageMode[\"UseThumbs\"] = \"UseThumbs\";\n    /**\n     * After exiting FullScreen mode, the optional content group panel should be\n     * visible.\n     */\n    NonFullScreenPageMode[\"UseOC\"] = \"UseOC\";\n})(NonFullScreenPageMode || (NonFullScreenPageMode = {}));\nexport var ReadingDirection;\n(function (ReadingDirection) {\n    /** The predominant reading order is Left to Right. */\n    ReadingDirection[\"L2R\"] = \"L2R\";\n    /**\n     * The predominant reading order is Right to left (including vertical writing\n     * systems, such as Chinese, Japanese and Korean).\n     */\n    ReadingDirection[\"R2L\"] = \"R2L\";\n})(ReadingDirection || (ReadingDirection = {}));\nexport var PrintScaling;\n(function (PrintScaling) {\n    /** No page scaling. */\n    PrintScaling[\"None\"] = \"None\";\n    /* Use the PDF reader's default print scaling. */\n    PrintScaling[\"AppDefault\"] = \"AppDefault\";\n})(PrintScaling || (PrintScaling = {}));\nexport var Duplex;\n(function (Duplex) {\n    /** The PDF reader should print single-sided. */\n    Duplex[\"Simplex\"] = \"Simplex\";\n    /**\n     * The PDF reader should print double sided and flip on the short edge of the\n     * sheet.\n     */\n    Duplex[\"DuplexFlipShortEdge\"] = \"DuplexFlipShortEdge\";\n    /**\n     * The PDF reader should print double sided and flip on the long edge of the\n     * sheet.\n     */\n    Duplex[\"DuplexFlipLongEdge\"] = \"DuplexFlipLongEdge\";\n})(Duplex || (Duplex = {}));\nvar ViewerPreferences = /** @class */ (function () {\n    /** @ignore */\n    function ViewerPreferences(dict) {\n        this.dict = dict;\n    }\n    ViewerPreferences.prototype.lookupBool = function (key) {\n        var returnObj = this.dict.lookup(PDFName.of(key));\n        if (returnObj instanceof PDFBool)\n            return returnObj;\n        return undefined;\n    };\n    ViewerPreferences.prototype.lookupName = function (key) {\n        var returnObj = this.dict.lookup(PDFName.of(key));\n        if (returnObj instanceof PDFName)\n            return returnObj;\n        return undefined;\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.HideToolbar = function () {\n        return this.lookupBool('HideToolbar');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.HideMenubar = function () {\n        return this.lookupBool('HideMenubar');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.HideWindowUI = function () {\n        return this.lookupBool('HideWindowUI');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.FitWindow = function () {\n        return this.lookupBool('FitWindow');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.CenterWindow = function () {\n        return this.lookupBool('CenterWindow');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.DisplayDocTitle = function () {\n        return this.lookupBool('DisplayDocTitle');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.NonFullScreenPageMode = function () {\n        return this.lookupName('NonFullScreenPageMode');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.Direction = function () {\n        return this.lookupName('Direction');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.PrintScaling = function () {\n        return this.lookupName('PrintScaling');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.Duplex = function () {\n        return this.lookupName('Duplex');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.PickTrayByPDFSize = function () {\n        return this.lookupBool('PickTrayByPDFSize');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.PrintPageRange = function () {\n        var PrintPageRange = this.dict.lookup(PDFName.of('PrintPageRange'));\n        if (PrintPageRange instanceof PDFArray)\n            return PrintPageRange;\n        return undefined;\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.NumCopies = function () {\n        var NumCopies = this.dict.lookup(PDFName.of('NumCopies'));\n        if (NumCopies instanceof PDFNumber)\n            return NumCopies;\n        return undefined;\n    };\n    /**\n     * Returns `true` if PDF readers should hide the toolbar menus when displaying\n     * this document.\n     * @returns Whether or not toolbars should be hidden.\n     */\n    ViewerPreferences.prototype.getHideToolbar = function () {\n        var _a, _b;\n        return (_b = (_a = this.HideToolbar()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if PDF readers should hide the menu bar when displaying this\n     * document.\n     * @returns Whether or not the menu bar should be hidden.\n     */\n    ViewerPreferences.prototype.getHideMenubar = function () {\n        var _a, _b;\n        return (_b = (_a = this.HideMenubar()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if PDF readers should hide the user interface elements in\n     * the document's window (such as scroll bars and navigation controls),\n     * leaving only the document's contents displayed.\n     * @returns Whether or not user interface elements should be hidden.\n     */\n    ViewerPreferences.prototype.getHideWindowUI = function () {\n        var _a, _b;\n        return (_b = (_a = this.HideWindowUI()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if PDF readers should resize the document's window to fit\n     * the size of the first displayed page.\n     * @returns Whether or not the window should be resized to fit.\n     */\n    ViewerPreferences.prototype.getFitWindow = function () {\n        var _a, _b;\n        return (_b = (_a = this.FitWindow()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if PDF readers should position the document's window in the\n     * center of the screen.\n     * @returns Whether or not to center the document window.\n     */\n    ViewerPreferences.prototype.getCenterWindow = function () {\n        var _a, _b;\n        return (_b = (_a = this.CenterWindow()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if the window's title bar should display the document\n     * `Title`, taken from the document metadata (see [[PDFDocument.getTitle]]).\n     * Returns `false` if the title bar should instead display the filename of the\n     * PDF file.\n     * @returns Whether to display the document title.\n     */\n    ViewerPreferences.prototype.getDisplayDocTitle = function () {\n        var _a, _b;\n        return (_b = (_a = this.DisplayDocTitle()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns the page mode, which tells the PDF reader how to display the\n     * document after exiting full-screen mode.\n     * @returns The page mode after exiting full-screen mode.\n     */\n    ViewerPreferences.prototype.getNonFullScreenPageMode = function () {\n        var _a, _b;\n        var mode = (_a = this.NonFullScreenPageMode()) === null || _a === void 0 ? void 0 : _a.decodeText();\n        return (_b = asEnum(mode, NonFullScreenPageMode)) !== null && _b !== void 0 ? _b : NonFullScreenPageMode.UseNone;\n    };\n    /**\n     * Returns the predominant reading order for text.\n     * @returns The text reading order.\n     */\n    ViewerPreferences.prototype.getReadingDirection = function () {\n        var _a, _b;\n        var direction = (_a = this.Direction()) === null || _a === void 0 ? void 0 : _a.decodeText();\n        return (_b = asEnum(direction, ReadingDirection)) !== null && _b !== void 0 ? _b : ReadingDirection.L2R;\n    };\n    /**\n     * Returns the page scaling option that the PDF reader should select when the\n     * print dialog is displayed.\n     * @returns The page scaling option.\n     */\n    ViewerPreferences.prototype.getPrintScaling = function () {\n        var _a, _b;\n        var scaling = (_a = this.PrintScaling()) === null || _a === void 0 ? void 0 : _a.decodeText();\n        return (_b = asEnum(scaling, PrintScaling)) !== null && _b !== void 0 ? _b : PrintScaling.AppDefault;\n    };\n    /**\n     * Returns the paper handling option that should be used when printing the\n     * file from the print dialog.\n     * @returns The paper handling option.\n     */\n    ViewerPreferences.prototype.getDuplex = function () {\n        var _a;\n        var duplex = (_a = this.Duplex()) === null || _a === void 0 ? void 0 : _a.decodeText();\n        return asEnum(duplex, Duplex);\n    };\n    /**\n     * Returns `true` if the PDF page size should be used to select the input\n     * paper tray.\n     * @returns Whether or not the PDF page size should be used to select the\n     *          input paper tray.\n     */\n    ViewerPreferences.prototype.getPickTrayByPDFSize = function () {\n        var _a;\n        return (_a = this.PickTrayByPDFSize()) === null || _a === void 0 ? void 0 : _a.asBoolean();\n    };\n    /**\n     * Returns an array of page number ranges, which are the values used to\n     * initialize the print dialog box when the file is printed. Each range\n     * specifies the first (`start`) and last (`end`) pages in a sub-range of\n     * pages to be printed. The first page of the PDF file is denoted by 0.\n     * For example:\n     * ```js\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * const includesPage3 = viewerPrefs\n     *   .getPrintRanges()\n     *   .some(pr => pr.start =< 2 && pr.end >= 2)\n     * if (includesPage3) console.log('printRange includes page 3')\n     * ```\n     * @returns An array of objects, each with the properties `start` and `end`,\n     *          denoting page indices. If not, specified an empty array is\n     *          returned.\n     */\n    ViewerPreferences.prototype.getPrintPageRange = function () {\n        var rng = this.PrintPageRange();\n        if (!rng)\n            return [];\n        var pageRanges = [];\n        for (var i = 0; i < rng.size(); i += 2) {\n            // Despite the spec clearly stating that \"The first page of the PDF file\n            // shall be donoted by 1\", several test PDFs (spec 1.7) created in\n            // Acrobat XI 11.0 and also read with Reader DC 2020.013 indicate this is\n            // actually a 0 based index.\n            var start = rng.lookup(i, PDFNumber).asNumber();\n            var end = rng.lookup(i + 1, PDFNumber).asNumber();\n            pageRanges.push({ start: start, end: end });\n        }\n        return pageRanges;\n    };\n    /**\n     * Returns the number of copies to be printed when the print dialog is opened\n     * for this document.\n     * @returns The default number of copies to be printed.\n     */\n    ViewerPreferences.prototype.getNumCopies = function () {\n        var _a, _b;\n        return (_b = (_a = this.NumCopies()) === null || _a === void 0 ? void 0 : _a.asNumber()) !== null && _b !== void 0 ? _b : 1;\n    };\n    /**\n     * Choose whether the PDF reader's toolbars should be hidden while the\n     * document is active.\n     * @param hideToolbar `true` if the toolbar should be hidden.\n     */\n    ViewerPreferences.prototype.setHideToolbar = function (hideToolbar) {\n        var HideToolbar = this.dict.context.obj(hideToolbar);\n        this.dict.set(PDFName.of('HideToolbar'), HideToolbar);\n    };\n    /**\n     * Choose whether the PDF reader's menu bar should be hidden while the\n     * document is active.\n     * @param hideMenubar `true` if the menu bar should be hidden.\n     */\n    ViewerPreferences.prototype.setHideMenubar = function (hideMenubar) {\n        var HideMenubar = this.dict.context.obj(hideMenubar);\n        this.dict.set(PDFName.of('HideMenubar'), HideMenubar);\n    };\n    /**\n     * Choose whether the PDF reader should hide user interface elements in the\n     * document's window (such as scroll bars and navigation controls), leaving\n     * only the document's contents displayed.\n     * @param hideWindowUI `true` if the user interface elements should be hidden.\n     */\n    ViewerPreferences.prototype.setHideWindowUI = function (hideWindowUI) {\n        var HideWindowUI = this.dict.context.obj(hideWindowUI);\n        this.dict.set(PDFName.of('HideWindowUI'), HideWindowUI);\n    };\n    /**\n     * Choose whether the PDF reader should resize the document's window to fit\n     * the size of the first displayed page.\n     * @param fitWindow `true` if the window should be resized.\n     */\n    ViewerPreferences.prototype.setFitWindow = function (fitWindow) {\n        var FitWindow = this.dict.context.obj(fitWindow);\n        this.dict.set(PDFName.of('FitWindow'), FitWindow);\n    };\n    /**\n     * Choose whether the PDF reader should position the document's window in the\n     * center of the screen.\n     * @param centerWindow `true` if the window should be centered.\n     */\n    ViewerPreferences.prototype.setCenterWindow = function (centerWindow) {\n        var CenterWindow = this.dict.context.obj(centerWindow);\n        this.dict.set(PDFName.of('CenterWindow'), CenterWindow);\n    };\n    /**\n     * Choose whether the window's title bar should display the document `Title`\n     * taken from the document metadata (see [[PDFDocument.setTitle]]). If\n     * `false`, the title bar should instead display the PDF filename.\n     * @param displayTitle `true` if the document title should be displayed.\n     */\n    ViewerPreferences.prototype.setDisplayDocTitle = function (displayTitle) {\n        var DisplayDocTitle = this.dict.context.obj(displayTitle);\n        this.dict.set(PDFName.of('DisplayDocTitle'), DisplayDocTitle);\n    };\n    /**\n     * Choose how the PDF reader should display the document upon exiting\n     * full-screen mode. This entry is meaningful only if the value of the\n     * `PageMode` entry in the document's [[PDFCatalog]] is `FullScreen`.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument, NonFullScreenPageMode, PDFName } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * // Set the PageMode\n     * pdfDoc.catalog.set(PDFName.of('PageMode'),PDFName.of('FullScreen'))\n     *\n     * // Set what happens when full-screen is closed\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * viewerPrefs.setNonFullScreenPageMode(NonFullScreenPageMode.UseOutlines)\n     * ```\n     *\n     * @param nonFullScreenPageMode How the document should be displayed upon\n     *                              exiting full screen mode.\n     */\n    ViewerPreferences.prototype.setNonFullScreenPageMode = function (nonFullScreenPageMode) {\n        assertIsOneOf(nonFullScreenPageMode, 'nonFullScreenPageMode', NonFullScreenPageMode);\n        var mode = PDFName.of(nonFullScreenPageMode);\n        this.dict.set(PDFName.of('NonFullScreenPageMode'), mode);\n    };\n    /**\n     * Choose the predominant reading order for text.\n     *\n     * This entry has no direct effect on the document's contents or page\n     * numbering, but may be used to determine the relative positioning of pages\n     * when displayed side by side or printed n-up.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument, ReadingDirection } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * viewerPrefs.setReadingDirection(ReadingDirection.R2L)\n     * ```\n     *\n     * @param readingDirection The reading order for text.\n     */\n    ViewerPreferences.prototype.setReadingDirection = function (readingDirection) {\n        assertIsOneOf(readingDirection, 'readingDirection', ReadingDirection);\n        var direction = PDFName.of(readingDirection);\n        this.dict.set(PDFName.of('Direction'), direction);\n    };\n    /**\n     * Choose the page scaling option that should be selected when a print dialog\n     * is displayed for this document.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument, PrintScaling } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * viewerPrefs.setPrintScaling(PrintScaling.None)\n     * ```\n     *\n     * @param printScaling The print scaling option.\n     */\n    ViewerPreferences.prototype.setPrintScaling = function (printScaling) {\n        assertIsOneOf(printScaling, 'printScaling', PrintScaling);\n        var scaling = PDFName.of(printScaling);\n        this.dict.set(PDFName.of('PrintScaling'), scaling);\n    };\n    /**\n     * Choose the paper handling option that should be selected by default in the\n     * print dialog.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument, Duplex } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * viewerPrefs.setDuplex(Duplex.DuplexFlipShortEdge)\n     * ```\n     *\n     * @param duplex The double or single sided printing option.\n     */\n    ViewerPreferences.prototype.setDuplex = function (duplex) {\n        assertIsOneOf(duplex, 'duplex', Duplex);\n        var dup = PDFName.of(duplex);\n        this.dict.set(PDFName.of('Duplex'), dup);\n    };\n    /**\n     * Choose whether the PDF document's page size should be used to select the\n     * input paper tray when printing. This setting influences only the preset\n     * values used to populate the print dialog presented by a PDF reader.\n     *\n     * If PickTrayByPDFSize is true, the check box in the print dialog associated\n     * with input paper tray should be checked. This setting has no effect on\n     * operating systems that do not provide the ability to pick the input tray\n     * by size.\n     *\n     * @param pickTrayByPDFSize `true` if the document's page size should be used\n     *                          to select the input paper tray.\n     */\n    ViewerPreferences.prototype.setPickTrayByPDFSize = function (pickTrayByPDFSize) {\n        var PickTrayByPDFSize = this.dict.context.obj(pickTrayByPDFSize);\n        this.dict.set(PDFName.of('PickTrayByPDFSize'), PickTrayByPDFSize);\n    };\n    /**\n     * Choose the page numbers used to initialize the print dialog box when the\n     * file is printed. The first page of the PDF file is denoted by 0.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     *\n     * // We can set the default print range to only the first page\n     * viewerPrefs.setPrintPageRange({ start: 0, end: 0 })\n     *\n     * // Or we can supply noncontiguous ranges (e.g. pages 1, 3, and 5-7)\n     * viewerPrefs.setPrintPageRange([\n     *   { start: 0, end: 0 },\n     *   { start: 2, end: 2 },\n     *   { start: 4, end: 6 },\n     * ])\n     * ```\n     *\n     * @param printPageRange An object or array of objects, each with the\n     *                       properties `start` and `end`, denoting a range of\n     *                       page indices.\n     */\n    ViewerPreferences.prototype.setPrintPageRange = function (printPageRange) {\n        if (!Array.isArray(printPageRange))\n            printPageRange = [printPageRange];\n        var flatRange = [];\n        for (var idx = 0, len = printPageRange.length; idx < len; idx++) {\n            flatRange.push(printPageRange[idx].start);\n            flatRange.push(printPageRange[idx].end);\n        }\n        assertEachIs(flatRange, 'printPageRange', ['number']);\n        var pageRanges = this.dict.context.obj(flatRange);\n        this.dict.set(PDFName.of('PrintPageRange'), pageRanges);\n    };\n    /**\n     * Choose the default number of copies to be printed when the print dialog is\n     * opened for this file.\n     * @param numCopies The default number of copies.\n     */\n    ViewerPreferences.prototype.setNumCopies = function (numCopies) {\n        assertRange(numCopies, 'numCopies', 1, Number.MAX_VALUE);\n        assertInteger(numCopies, 'numCopies');\n        var NumCopies = this.dict.context.obj(numCopies);\n        this.dict.set(PDFName.of('NumCopies'), NumCopies);\n    };\n    /** @ignore */\n    ViewerPreferences.fromDict = function (dict) {\n        return new ViewerPreferences(dict);\n    };\n    /** @ignore */\n    ViewerPreferences.create = function (context) {\n        var dict = context.obj({});\n        return new ViewerPreferences(dict);\n    };\n    return ViewerPreferences;\n}());\nexport default ViewerPreferences;\n//# sourceMappingURL=ViewerPreferences.js.map","import PDFDict from \"../objects/PDFDict\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFRef from \"../objects/PDFRef\";\nimport { findLastMatch } from \"../../utils\";\nimport { MissingDAEntryError, MissingTfOperatorError } from \"../errors\";\n// Examples:\n//   `/Helv 12 Tf` -> ['Helv', '12']\n//   `/HeBo 8.00 Tf` -> ['HeBo', '8.00']\n//   `/HeBo Tf` -> ['HeBo', undefined]\nvar tfRegex = /\\/([^\\0\\t\\n\\f\\r\\ ]+)[\\0\\t\\n\\f\\r\\ ]*(\\d*\\.\\d+|\\d+)?[\\0\\t\\n\\f\\r\\ ]+Tf/;\nvar PDFAcroField = /** @class */ (function () {\n    function PDFAcroField(dict, ref) {\n        this.dict = dict;\n        this.ref = ref;\n    }\n    PDFAcroField.prototype.T = function () {\n        return this.dict.lookupMaybe(PDFName.of('T'), PDFString, PDFHexString);\n    };\n    PDFAcroField.prototype.Ff = function () {\n        var numberOrRef = this.getInheritableAttribute(PDFName.of('Ff'));\n        return this.dict.context.lookupMaybe(numberOrRef, PDFNumber);\n    };\n    PDFAcroField.prototype.V = function () {\n        var valueOrRef = this.getInheritableAttribute(PDFName.of('V'));\n        return this.dict.context.lookup(valueOrRef);\n    };\n    PDFAcroField.prototype.Kids = function () {\n        return this.dict.lookupMaybe(PDFName.of('Kids'), PDFArray);\n    };\n    // Parent(): PDFDict | undefined {\n    //   return this.dict.lookupMaybe(PDFName.of('Parent'), PDFDict);\n    // }\n    PDFAcroField.prototype.DA = function () {\n        var da = this.dict.lookup(PDFName.of('DA'));\n        if (da instanceof PDFString || da instanceof PDFHexString)\n            return da;\n        return undefined;\n    };\n    PDFAcroField.prototype.setKids = function (kids) {\n        this.dict.set(PDFName.of('Kids'), this.dict.context.obj(kids));\n    };\n    PDFAcroField.prototype.getParent = function () {\n        // const parent = this.Parent();\n        // if (!parent) return undefined;\n        // return new PDFAcroField(parent);\n        var parentRef = this.dict.get(PDFName.of('Parent'));\n        if (parentRef instanceof PDFRef) {\n            var parent_1 = this.dict.lookup(PDFName.of('Parent'), PDFDict);\n            return new PDFAcroField(parent_1, parentRef);\n        }\n        return undefined;\n    };\n    PDFAcroField.prototype.setParent = function (parent) {\n        if (!parent)\n            this.dict.delete(PDFName.of('Parent'));\n        else\n            this.dict.set(PDFName.of('Parent'), parent);\n    };\n    PDFAcroField.prototype.getFullyQualifiedName = function () {\n        var parent = this.getParent();\n        if (!parent)\n            return this.getPartialName();\n        return parent.getFullyQualifiedName() + \".\" + this.getPartialName();\n    };\n    PDFAcroField.prototype.getPartialName = function () {\n        var _a;\n        return (_a = this.T()) === null || _a === void 0 ? void 0 : _a.decodeText();\n    };\n    PDFAcroField.prototype.setPartialName = function (partialName) {\n        if (!partialName)\n            this.dict.delete(PDFName.of('T'));\n        else\n            this.dict.set(PDFName.of('T'), PDFHexString.fromText(partialName));\n    };\n    PDFAcroField.prototype.setDefaultAppearance = function (appearance) {\n        this.dict.set(PDFName.of('DA'), PDFString.of(appearance));\n    };\n    PDFAcroField.prototype.getDefaultAppearance = function () {\n        var DA = this.DA();\n        if (DA instanceof PDFHexString) {\n            return DA.decodeText();\n        }\n        return DA === null || DA === void 0 ? void 0 : DA.asString();\n    };\n    PDFAcroField.prototype.setFontSize = function (fontSize) {\n        var _a;\n        var name = (_a = this.getFullyQualifiedName()) !== null && _a !== void 0 ? _a : '';\n        var da = this.getDefaultAppearance();\n        if (!da)\n            throw new MissingDAEntryError(name);\n        var daMatch = findLastMatch(da, tfRegex);\n        if (!daMatch.match)\n            throw new MissingTfOperatorError(name);\n        var daStart = da.slice(0, daMatch.pos - daMatch.match[0].length);\n        var daEnd = daMatch.pos <= da.length ? da.slice(daMatch.pos) : '';\n        var fontName = daMatch.match[1];\n        var modifiedDa = daStart + \" /\" + fontName + \" \" + fontSize + \" Tf \" + daEnd;\n        this.setDefaultAppearance(modifiedDa);\n    };\n    PDFAcroField.prototype.getFlags = function () {\n        var _a, _b;\n        return (_b = (_a = this.Ff()) === null || _a === void 0 ? void 0 : _a.asNumber()) !== null && _b !== void 0 ? _b : 0;\n    };\n    PDFAcroField.prototype.setFlags = function (flags) {\n        this.dict.set(PDFName.of('Ff'), PDFNumber.of(flags));\n    };\n    PDFAcroField.prototype.hasFlag = function (flag) {\n        var flags = this.getFlags();\n        return (flags & flag) !== 0;\n    };\n    PDFAcroField.prototype.setFlag = function (flag) {\n        var flags = this.getFlags();\n        this.setFlags(flags | flag);\n    };\n    PDFAcroField.prototype.clearFlag = function (flag) {\n        var flags = this.getFlags();\n        this.setFlags(flags & ~flag);\n    };\n    PDFAcroField.prototype.setFlagTo = function (flag, enable) {\n        if (enable)\n            this.setFlag(flag);\n        else\n            this.clearFlag(flag);\n    };\n    PDFAcroField.prototype.getInheritableAttribute = function (name) {\n        var attribute;\n        this.ascend(function (node) {\n            if (!attribute)\n                attribute = node.dict.get(name);\n        });\n        return attribute;\n    };\n    PDFAcroField.prototype.ascend = function (visitor) {\n        visitor(this);\n        var parent = this.getParent();\n        if (parent)\n            parent.ascend(visitor);\n    };\n    return PDFAcroField;\n}());\nexport default PDFAcroField;\n//# sourceMappingURL=PDFAcroField.js.map","import PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\n// TODO: Also handle the `/S` and `/D` entries\nvar BorderStyle = /** @class */ (function () {\n    function BorderStyle(dict) {\n        this.dict = dict;\n    }\n    BorderStyle.prototype.W = function () {\n        var W = this.dict.lookup(PDFName.of('W'));\n        if (W instanceof PDFNumber)\n            return W;\n        return undefined;\n    };\n    BorderStyle.prototype.getWidth = function () {\n        var _a, _b;\n        return (_b = (_a = this.W()) === null || _a === void 0 ? void 0 : _a.asNumber()) !== null && _b !== void 0 ? _b : 1;\n    };\n    BorderStyle.prototype.setWidth = function (width) {\n        var W = this.dict.context.obj(width);\n        this.dict.set(PDFName.of('W'), W);\n    };\n    BorderStyle.fromDict = function (dict) { return new BorderStyle(dict); };\n    return BorderStyle;\n}());\nexport default BorderStyle;\n//# sourceMappingURL=BorderStyle.js.map","import PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFStream from \"../objects/PDFStream\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFNumber from \"../objects/PDFNumber\";\nvar PDFAnnotation = /** @class */ (function () {\n    function PDFAnnotation(dict) {\n        this.dict = dict;\n    }\n    // This is technically required by the PDF spec\n    PDFAnnotation.prototype.Rect = function () {\n        return this.dict.lookup(PDFName.of('Rect'), PDFArray);\n    };\n    PDFAnnotation.prototype.AP = function () {\n        return this.dict.lookupMaybe(PDFName.of('AP'), PDFDict);\n    };\n    PDFAnnotation.prototype.F = function () {\n        var numberOrRef = this.dict.lookup(PDFName.of('F'));\n        return this.dict.context.lookupMaybe(numberOrRef, PDFNumber);\n    };\n    PDFAnnotation.prototype.getRectangle = function () {\n        var _a;\n        var Rect = this.Rect();\n        return (_a = Rect === null || Rect === void 0 ? void 0 : Rect.asRectangle()) !== null && _a !== void 0 ? _a : { x: 0, y: 0, width: 0, height: 0 };\n    };\n    PDFAnnotation.prototype.setRectangle = function (rect) {\n        var x = rect.x, y = rect.y, width = rect.width, height = rect.height;\n        var Rect = this.dict.context.obj([x, y, x + width, y + height]);\n        this.dict.set(PDFName.of('Rect'), Rect);\n    };\n    PDFAnnotation.prototype.getAppearanceState = function () {\n        var AS = this.dict.lookup(PDFName.of('AS'));\n        if (AS instanceof PDFName)\n            return AS;\n        return undefined;\n    };\n    PDFAnnotation.prototype.setAppearanceState = function (state) {\n        this.dict.set(PDFName.of('AS'), state);\n    };\n    PDFAnnotation.prototype.setAppearances = function (appearances) {\n        this.dict.set(PDFName.of('AP'), appearances);\n    };\n    PDFAnnotation.prototype.ensureAP = function () {\n        var AP = this.AP();\n        if (!AP) {\n            AP = this.dict.context.obj({});\n            this.dict.set(PDFName.of('AP'), AP);\n        }\n        return AP;\n    };\n    PDFAnnotation.prototype.getNormalAppearance = function () {\n        var AP = this.ensureAP();\n        var N = AP.get(PDFName.of('N'));\n        if (N instanceof PDFRef || N instanceof PDFDict)\n            return N;\n        throw new Error(\"Unexpected N type: \" + (N === null || N === void 0 ? void 0 : N.constructor.name));\n    };\n    /** @param appearance A PDFDict or PDFStream (direct or ref) */\n    PDFAnnotation.prototype.setNormalAppearance = function (appearance) {\n        var AP = this.ensureAP();\n        AP.set(PDFName.of('N'), appearance);\n    };\n    /** @param appearance A PDFDict or PDFStream (direct or ref) */\n    PDFAnnotation.prototype.setRolloverAppearance = function (appearance) {\n        var AP = this.ensureAP();\n        AP.set(PDFName.of('R'), appearance);\n    };\n    /** @param appearance A PDFDict or PDFStream (direct or ref) */\n    PDFAnnotation.prototype.setDownAppearance = function (appearance) {\n        var AP = this.ensureAP();\n        AP.set(PDFName.of('D'), appearance);\n    };\n    PDFAnnotation.prototype.removeRolloverAppearance = function () {\n        var AP = this.AP();\n        AP === null || AP === void 0 ? void 0 : AP.delete(PDFName.of('R'));\n    };\n    PDFAnnotation.prototype.removeDownAppearance = function () {\n        var AP = this.AP();\n        AP === null || AP === void 0 ? void 0 : AP.delete(PDFName.of('D'));\n    };\n    PDFAnnotation.prototype.getAppearances = function () {\n        var AP = this.AP();\n        if (!AP)\n            return undefined;\n        var N = AP.lookup(PDFName.of('N'), PDFDict, PDFStream);\n        var R = AP.lookupMaybe(PDFName.of('R'), PDFDict, PDFStream);\n        var D = AP.lookupMaybe(PDFName.of('D'), PDFDict, PDFStream);\n        return { normal: N, rollover: R, down: D };\n    };\n    PDFAnnotation.prototype.getFlags = function () {\n        var _a, _b;\n        return (_b = (_a = this.F()) === null || _a === void 0 ? void 0 : _a.asNumber()) !== null && _b !== void 0 ? _b : 0;\n    };\n    PDFAnnotation.prototype.setFlags = function (flags) {\n        this.dict.set(PDFName.of('F'), PDFNumber.of(flags));\n    };\n    PDFAnnotation.prototype.hasFlag = function (flag) {\n        var flags = this.getFlags();\n        return (flags & flag) !== 0;\n    };\n    PDFAnnotation.prototype.setFlag = function (flag) {\n        var flags = this.getFlags();\n        this.setFlags(flags | flag);\n    };\n    PDFAnnotation.prototype.clearFlag = function (flag) {\n        var flags = this.getFlags();\n        this.setFlags(flags & ~flag);\n    };\n    PDFAnnotation.prototype.setFlagTo = function (flag, enable) {\n        if (enable)\n            this.setFlag(flag);\n        else\n            this.clearFlag(flag);\n    };\n    PDFAnnotation.fromDict = function (dict) { return new PDFAnnotation(dict); };\n    return PDFAnnotation;\n}());\nexport default PDFAnnotation;\n//# sourceMappingURL=PDFAnnotation.js.map","import PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFString from \"../objects/PDFString\";\nvar AppearanceCharacteristics = /** @class */ (function () {\n    function AppearanceCharacteristics(dict) {\n        this.dict = dict;\n    }\n    AppearanceCharacteristics.prototype.R = function () {\n        var R = this.dict.lookup(PDFName.of('R'));\n        if (R instanceof PDFNumber)\n            return R;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.BC = function () {\n        var BC = this.dict.lookup(PDFName.of('BC'));\n        if (BC instanceof PDFArray)\n            return BC;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.BG = function () {\n        var BG = this.dict.lookup(PDFName.of('BG'));\n        if (BG instanceof PDFArray)\n            return BG;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.CA = function () {\n        var CA = this.dict.lookup(PDFName.of('CA'));\n        if (CA instanceof PDFHexString || CA instanceof PDFString)\n            return CA;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.RC = function () {\n        var RC = this.dict.lookup(PDFName.of('RC'));\n        if (RC instanceof PDFHexString || RC instanceof PDFString)\n            return RC;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.AC = function () {\n        var AC = this.dict.lookup(PDFName.of('AC'));\n        if (AC instanceof PDFHexString || AC instanceof PDFString)\n            return AC;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.getRotation = function () {\n        var _a;\n        return (_a = this.R()) === null || _a === void 0 ? void 0 : _a.asNumber();\n    };\n    AppearanceCharacteristics.prototype.getBorderColor = function () {\n        var BC = this.BC();\n        if (!BC)\n            return undefined;\n        var components = [];\n        for (var idx = 0, len = BC === null || BC === void 0 ? void 0 : BC.size(); idx < len; idx++) {\n            var component = BC.get(idx);\n            if (component instanceof PDFNumber)\n                components.push(component.asNumber());\n        }\n        return components;\n    };\n    AppearanceCharacteristics.prototype.getBackgroundColor = function () {\n        var BG = this.BG();\n        if (!BG)\n            return undefined;\n        var components = [];\n        for (var idx = 0, len = BG === null || BG === void 0 ? void 0 : BG.size(); idx < len; idx++) {\n            var component = BG.get(idx);\n            if (component instanceof PDFNumber)\n                components.push(component.asNumber());\n        }\n        return components;\n    };\n    AppearanceCharacteristics.prototype.getCaptions = function () {\n        var CA = this.CA();\n        var RC = this.RC();\n        var AC = this.AC();\n        return {\n            normal: CA === null || CA === void 0 ? void 0 : CA.decodeText(),\n            rollover: RC === null || RC === void 0 ? void 0 : RC.decodeText(),\n            down: AC === null || AC === void 0 ? void 0 : AC.decodeText(),\n        };\n    };\n    AppearanceCharacteristics.prototype.setRotation = function (rotation) {\n        var R = this.dict.context.obj(rotation);\n        this.dict.set(PDFName.of('R'), R);\n    };\n    AppearanceCharacteristics.prototype.setBorderColor = function (color) {\n        var BC = this.dict.context.obj(color);\n        this.dict.set(PDFName.of('BC'), BC);\n    };\n    AppearanceCharacteristics.prototype.setBackgroundColor = function (color) {\n        var BG = this.dict.context.obj(color);\n        this.dict.set(PDFName.of('BG'), BG);\n    };\n    AppearanceCharacteristics.prototype.setCaptions = function (captions) {\n        var CA = PDFHexString.fromText(captions.normal);\n        this.dict.set(PDFName.of('CA'), CA);\n        if (captions.rollover) {\n            var RC = PDFHexString.fromText(captions.rollover);\n            this.dict.set(PDFName.of('RC'), RC);\n        }\n        else {\n            this.dict.delete(PDFName.of('RC'));\n        }\n        if (captions.down) {\n            var AC = PDFHexString.fromText(captions.down);\n            this.dict.set(PDFName.of('AC'), AC);\n        }\n        else {\n            this.dict.delete(PDFName.of('AC'));\n        }\n    };\n    AppearanceCharacteristics.fromDict = function (dict) {\n        return new AppearanceCharacteristics(dict);\n    };\n    return AppearanceCharacteristics;\n}());\nexport default AppearanceCharacteristics;\n//# sourceMappingURL=AppearanceCharacteristics.js.map","import { __extends } from \"tslib\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport BorderStyle from \"./BorderStyle\";\nimport PDFAnnotation from \"./PDFAnnotation\";\nimport AppearanceCharacteristics from \"./AppearanceCharacteristics\";\nvar PDFWidgetAnnotation = /** @class */ (function (_super) {\n    __extends(PDFWidgetAnnotation, _super);\n    function PDFWidgetAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFWidgetAnnotation.prototype.MK = function () {\n        var MK = this.dict.lookup(PDFName.of('MK'));\n        if (MK instanceof PDFDict)\n            return MK;\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.BS = function () {\n        var BS = this.dict.lookup(PDFName.of('BS'));\n        if (BS instanceof PDFDict)\n            return BS;\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.DA = function () {\n        var da = this.dict.lookup(PDFName.of('DA'));\n        if (da instanceof PDFString || da instanceof PDFHexString)\n            return da;\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.P = function () {\n        var P = this.dict.get(PDFName.of('P'));\n        if (P instanceof PDFRef)\n            return P;\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.setP = function (page) {\n        this.dict.set(PDFName.of('P'), page);\n    };\n    PDFWidgetAnnotation.prototype.setDefaultAppearance = function (appearance) {\n        this.dict.set(PDFName.of('DA'), PDFString.of(appearance));\n    };\n    PDFWidgetAnnotation.prototype.getDefaultAppearance = function () {\n        var DA = this.DA();\n        if (DA instanceof PDFHexString) {\n            return DA.decodeText();\n        }\n        return DA === null || DA === void 0 ? void 0 : DA.asString();\n    };\n    PDFWidgetAnnotation.prototype.getAppearanceCharacteristics = function () {\n        var MK = this.MK();\n        if (MK)\n            return AppearanceCharacteristics.fromDict(MK);\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.getOrCreateAppearanceCharacteristics = function () {\n        var MK = this.MK();\n        if (MK)\n            return AppearanceCharacteristics.fromDict(MK);\n        var ac = AppearanceCharacteristics.fromDict(this.dict.context.obj({}));\n        this.dict.set(PDFName.of('MK'), ac.dict);\n        return ac;\n    };\n    PDFWidgetAnnotation.prototype.getBorderStyle = function () {\n        var BS = this.BS();\n        if (BS)\n            return BorderStyle.fromDict(BS);\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.getOrCreateBorderStyle = function () {\n        var BS = this.BS();\n        if (BS)\n            return BorderStyle.fromDict(BS);\n        var bs = BorderStyle.fromDict(this.dict.context.obj({}));\n        this.dict.set(PDFName.of('BS'), bs.dict);\n        return bs;\n    };\n    PDFWidgetAnnotation.prototype.getOnValue = function () {\n        var _a;\n        var normal = (_a = this.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal;\n        if (normal instanceof PDFDict) {\n            var keys = normal.keys();\n            for (var idx = 0, len = keys.length; idx < len; idx++) {\n                var key = keys[idx];\n                if (key !== PDFName.of('Off'))\n                    return key;\n            }\n        }\n        return undefined;\n    };\n    PDFWidgetAnnotation.fromDict = function (dict) {\n        return new PDFWidgetAnnotation(dict);\n    };\n    PDFWidgetAnnotation.create = function (context, parent) {\n        var dict = context.obj({\n            Type: 'Annot',\n            Subtype: 'Widget',\n            Rect: [0, 0, 0, 0],\n            Parent: parent,\n        });\n        return new PDFWidgetAnnotation(dict);\n    };\n    return PDFWidgetAnnotation;\n}(PDFAnnotation));\nexport default PDFWidgetAnnotation;\n//# sourceMappingURL=PDFWidgetAnnotation.js.map","import { __extends } from \"tslib\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroField from \"./PDFAcroField\";\nimport PDFWidgetAnnotation from \"../annotation/PDFWidgetAnnotation\";\nimport { IndexOutOfBoundsError } from \"../errors\";\nvar PDFAcroTerminal = /** @class */ (function (_super) {\n    __extends(PDFAcroTerminal, _super);\n    function PDFAcroTerminal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroTerminal.prototype.FT = function () {\n        var nameOrRef = this.getInheritableAttribute(PDFName.of('FT'));\n        return this.dict.context.lookup(nameOrRef, PDFName);\n    };\n    PDFAcroTerminal.prototype.getWidgets = function () {\n        var kidDicts = this.Kids();\n        // This field is itself a widget\n        if (!kidDicts)\n            return [PDFWidgetAnnotation.fromDict(this.dict)];\n        // This field's kids are its widgets\n        var widgets = new Array(kidDicts.size());\n        for (var idx = 0, len = kidDicts.size(); idx < len; idx++) {\n            var dict = kidDicts.lookup(idx, PDFDict);\n            widgets[idx] = PDFWidgetAnnotation.fromDict(dict);\n        }\n        return widgets;\n    };\n    PDFAcroTerminal.prototype.addWidget = function (ref) {\n        var Kids = this.normalizedEntries().Kids;\n        Kids.push(ref);\n    };\n    PDFAcroTerminal.prototype.removeWidget = function (idx) {\n        var kidDicts = this.Kids();\n        if (!kidDicts) {\n            // This field is itself a widget\n            if (idx !== 0)\n                throw new IndexOutOfBoundsError(idx, 0, 0);\n            this.setKids([]);\n        }\n        else {\n            // This field's kids are its widgets\n            if (idx < 0 || idx > kidDicts.size()) {\n                throw new IndexOutOfBoundsError(idx, 0, kidDicts.size());\n            }\n            kidDicts.remove(idx);\n        }\n    };\n    PDFAcroTerminal.prototype.normalizedEntries = function () {\n        var Kids = this.Kids();\n        // If this field is itself a widget (because it was only rendered once in\n        // the document, so the field and widget properties were merged) then we\n        // add itself to the `Kids` array. The alternative would be to try\n        // splitting apart the widget properties and creating a separate object\n        // for them.\n        if (!Kids) {\n            Kids = this.dict.context.obj([this.ref]);\n            this.dict.set(PDFName.of('Kids'), Kids);\n        }\n        return { Kids: Kids };\n    };\n    PDFAcroTerminal.fromDict = function (dict, ref) {\n        return new PDFAcroTerminal(dict, ref);\n    };\n    return PDFAcroTerminal;\n}(PDFAcroField));\nexport default PDFAcroTerminal;\n//# sourceMappingURL=PDFAcroTerminal.js.map","import { __extends } from \"tslib\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nimport { IndexOutOfBoundsError } from \"../errors\";\nvar PDFAcroButton = /** @class */ (function (_super) {\n    __extends(PDFAcroButton, _super);\n    function PDFAcroButton() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroButton.prototype.Opt = function () {\n        return this.dict.lookupMaybe(PDFName.of('Opt'), PDFString, PDFHexString, PDFArray);\n    };\n    PDFAcroButton.prototype.setOpt = function (opt) {\n        this.dict.set(PDFName.of('Opt'), this.dict.context.obj(opt));\n    };\n    PDFAcroButton.prototype.getExportValues = function () {\n        var opt = this.Opt();\n        if (!opt)\n            return undefined;\n        if (opt instanceof PDFString || opt instanceof PDFHexString) {\n            return [opt];\n        }\n        var values = [];\n        for (var idx = 0, len = opt.size(); idx < len; idx++) {\n            var value = opt.lookup(idx);\n            if (value instanceof PDFString || value instanceof PDFHexString) {\n                values.push(value);\n            }\n        }\n        return values;\n    };\n    PDFAcroButton.prototype.removeExportValue = function (idx) {\n        var opt = this.Opt();\n        if (!opt)\n            return;\n        if (opt instanceof PDFString || opt instanceof PDFHexString) {\n            if (idx !== 0)\n                throw new IndexOutOfBoundsError(idx, 0, 0);\n            this.setOpt([]);\n        }\n        else {\n            if (idx < 0 || idx > opt.size()) {\n                throw new IndexOutOfBoundsError(idx, 0, opt.size());\n            }\n            opt.remove(idx);\n        }\n    };\n    // Enforce use use of /Opt even if it isn't strictly necessary\n    PDFAcroButton.prototype.normalizeExportValues = function () {\n        var _a, _b, _c, _d;\n        var exportValues = (_a = this.getExportValues()) !== null && _a !== void 0 ? _a : [];\n        var Opt = [];\n        var widgets = this.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var exportVal = (_b = exportValues[idx]) !== null && _b !== void 0 ? _b : PDFHexString.fromText((_d = (_c = widget.getOnValue()) === null || _c === void 0 ? void 0 : _c.decodeText()) !== null && _d !== void 0 ? _d : '');\n            Opt.push(exportVal);\n        }\n        this.setOpt(Opt);\n    };\n    /**\n     * Reuses existing opt if one exists with the same value (assuming\n     * `useExistingIdx` is `true`). Returns index of existing (or new) opt.\n     */\n    PDFAcroButton.prototype.addOpt = function (opt, useExistingOptIdx) {\n        var _a;\n        this.normalizeExportValues();\n        var optText = opt.decodeText();\n        var existingIdx;\n        if (useExistingOptIdx) {\n            var exportValues = (_a = this.getExportValues()) !== null && _a !== void 0 ? _a : [];\n            for (var idx = 0, len = exportValues.length; idx < len; idx++) {\n                var exportVal = exportValues[idx];\n                if (exportVal.decodeText() === optText)\n                    existingIdx = idx;\n            }\n        }\n        var Opt = this.Opt();\n        Opt.push(opt);\n        return existingIdx !== null && existingIdx !== void 0 ? existingIdx : Opt.size() - 1;\n    };\n    PDFAcroButton.prototype.addWidgetWithOpt = function (widget, opt, useExistingOptIdx) {\n        var optIdx = this.addOpt(opt, useExistingOptIdx);\n        var apStateValue = PDFName.of(String(optIdx));\n        this.addWidget(widget);\n        return apStateValue;\n    };\n    return PDFAcroButton;\n}(PDFAcroTerminal));\nexport default PDFAcroButton;\n//# sourceMappingURL=PDFAcroButton.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroButton from \"./PDFAcroButton\";\nimport { InvalidAcroFieldValueError } from \"../errors\";\nvar PDFAcroCheckBox = /** @class */ (function (_super) {\n    __extends(PDFAcroCheckBox, _super);\n    function PDFAcroCheckBox() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroCheckBox.prototype.setValue = function (value) {\n        var _a;\n        var onValue = (_a = this.getOnValue()) !== null && _a !== void 0 ? _a : PDFName.of('Yes');\n        if (value !== onValue && value !== PDFName.of('Off')) {\n            throw new InvalidAcroFieldValueError();\n        }\n        this.dict.set(PDFName.of('V'), value);\n        var widgets = this.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var state = widget.getOnValue() === value ? value : PDFName.of('Off');\n            widget.setAppearanceState(state);\n        }\n    };\n    PDFAcroCheckBox.prototype.getValue = function () {\n        var v = this.V();\n        if (v instanceof PDFName)\n            return v;\n        return PDFName.of('Off');\n    };\n    PDFAcroCheckBox.prototype.getOnValue = function () {\n        var widget = this.getWidgets()[0];\n        return widget === null || widget === void 0 ? void 0 : widget.getOnValue();\n    };\n    PDFAcroCheckBox.fromDict = function (dict, ref) {\n        return new PDFAcroCheckBox(dict, ref);\n    };\n    PDFAcroCheckBox.create = function (context) {\n        var dict = context.obj({\n            FT: 'Btn',\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroCheckBox(dict, ref);\n    };\n    return PDFAcroCheckBox;\n}(PDFAcroButton));\nexport default PDFAcroCheckBox;\n//# sourceMappingURL=PDFAcroCheckBox.js.map","var flag = function (bitIndex) { return 1 << bitIndex; };\n/** From PDF spec table 221 */\nexport var AcroFieldFlags;\n(function (AcroFieldFlags) {\n    /**\n     * If set, the user may not change the value of the field. Any associated\n     * widget annotations will not interact with the user; that is, they will not\n     * respond to mouse clicks or change their appearance in response to mouse\n     * motions. This flag is useful for fields whose values are computed or\n     * imported from a database.\n     */\n    AcroFieldFlags[AcroFieldFlags[\"ReadOnly\"] = flag(1 - 1)] = \"ReadOnly\";\n    /**\n     * If set, the field shall have a value at the time it is exported by a\n     * submit-form action (see 12.7.5.2, \"Submit-Form Action\").\n     */\n    AcroFieldFlags[AcroFieldFlags[\"Required\"] = flag(2 - 1)] = \"Required\";\n    /**\n     * If set, the field shall not be exported by a submit-form action\n     * (see 12.7.5.2, \"Submit-Form Action\").\n     */\n    AcroFieldFlags[AcroFieldFlags[\"NoExport\"] = flag(3 - 1)] = \"NoExport\";\n})(AcroFieldFlags || (AcroFieldFlags = {}));\n/** From PDF spec table 226 */\nexport var AcroButtonFlags;\n(function (AcroButtonFlags) {\n    /**\n     * (Radio buttons only) If set, exactly one radio button shall be selected at\n     * all times; selecting the currently selected button has no effect. If clear,\n     * clicking the selected button deselects it, leaving no button selected.\n     */\n    AcroButtonFlags[AcroButtonFlags[\"NoToggleToOff\"] = flag(15 - 1)] = \"NoToggleToOff\";\n    /**\n     * If set, the field is a set of radio buttons; if clear, the field is a check\n     * box. This flag may be set only if the Pushbutton flag is clear.\n     */\n    AcroButtonFlags[AcroButtonFlags[\"Radio\"] = flag(16 - 1)] = \"Radio\";\n    /**\n     * If set, the field is a pushbutton that does not retain a permanent value.\n     */\n    AcroButtonFlags[AcroButtonFlags[\"PushButton\"] = flag(17 - 1)] = \"PushButton\";\n    /**\n     * If set, a group of radio buttons within a radio button field that use the\n     * same value for the on state will turn on and off in unison; that is if one\n     * is checked, they are all checked. If clear, the buttons are mutually\n     * exclusive (the same behavior as HTML radio buttons).\n     */\n    AcroButtonFlags[AcroButtonFlags[\"RadiosInUnison\"] = flag(26 - 1)] = \"RadiosInUnison\";\n})(AcroButtonFlags || (AcroButtonFlags = {}));\n/** From PDF spec table 228 */\nexport var AcroTextFlags;\n(function (AcroTextFlags) {\n    /**\n     * If set, the field may contain multiple lines of text; if clear, the field's\n     * text shall be restricted to a single line.\n     */\n    AcroTextFlags[AcroTextFlags[\"Multiline\"] = flag(13 - 1)] = \"Multiline\";\n    /**\n     * If set, the field is intended for entering a secure password that should\n     * not be echoed visibly to the screen. Characters typed from the keyboard\n     * shall instead be echoed in some unreadable form, such as asterisks or\n     * bullet characters.\n     * > NOTE   To protect password confidentiality, readers should never store\n     * >        the value of the text field in the PDF file if this flag is set.\n     */\n    AcroTextFlags[AcroTextFlags[\"Password\"] = flag(14 - 1)] = \"Password\";\n    /**\n     * If set, the text entered in the field represents the pathname of a file\n     * whose contents shall be submitted as the value of the field.\n     */\n    AcroTextFlags[AcroTextFlags[\"FileSelect\"] = flag(21 - 1)] = \"FileSelect\";\n    /**\n     * If set, text entered in the field shall not be spell-checked.\n     */\n    AcroTextFlags[AcroTextFlags[\"DoNotSpellCheck\"] = flag(23 - 1)] = \"DoNotSpellCheck\";\n    /**\n     * If set, the field shall not scroll (horizontally for single-line fields,\n     * vertically for multiple-line fields) to accommodate more text than fits\n     * within its annotation rectangle. Once the field is full, no further text\n     * shall be accepted for interactive form filling; for non-interactive form\n     * filling, the filler should take care not to add more character than will\n     * visibly fit in the defined area.\n     */\n    AcroTextFlags[AcroTextFlags[\"DoNotScroll\"] = flag(24 - 1)] = \"DoNotScroll\";\n    /**\n     * May be set only if the MaxLen entry is present in the text field dictionary\n     * (see Table 229) and if the Multiline, Password, and FileSelect flags are\n     * clear. If set, the field shall be automatically divided into as many\n     * equally spaced positions, or combs, as the value of MaxLen, and the text\n     * is laid out into those combs.\n     */\n    AcroTextFlags[AcroTextFlags[\"Comb\"] = flag(25 - 1)] = \"Comb\";\n    /**\n     * If set, the value of this field shall be a rich text string\n     * (see 12.7.3.4, \"Rich Text Strings\"). If the field has a value, the RV\n     * entry of the field dictionary (Table 222) shall specify the rich text\n     * string.\n     */\n    AcroTextFlags[AcroTextFlags[\"RichText\"] = flag(26 - 1)] = \"RichText\";\n})(AcroTextFlags || (AcroTextFlags = {}));\n/** From PDF spec table 230 */\nexport var AcroChoiceFlags;\n(function (AcroChoiceFlags) {\n    /**\n     * If set, the field is a combo box; if clear, the field is a list box.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"Combo\"] = flag(18 - 1)] = \"Combo\";\n    /**\n     * If set, the combo box shall include an editable text box as well as a\n     * drop-down list; if clear, it shall include only a drop-down list. This\n     * flag shall be used only if the Combo flag is set.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"Edit\"] = flag(19 - 1)] = \"Edit\";\n    /**\n     * If set, the field's option items shall be sorted alphabetically. This flag\n     * is intended for use by writers, not by readers. Conforming readers shall\n     * display the options in the order in which they occur in the Opt array\n     * (see Table 231).\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"Sort\"] = flag(20 - 1)] = \"Sort\";\n    /**\n     * If set, more than one of the field's option items may be selected\n     * simultaneously; if clear, at most one item shall be selected.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"MultiSelect\"] = flag(22 - 1)] = \"MultiSelect\";\n    /**\n     * If set, text entered in the field shall not be spell-checked. This flag\n     * shall not be used unless the Combo and Edit flags are both set.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"DoNotSpellCheck\"] = flag(23 - 1)] = \"DoNotSpellCheck\";\n    /**\n     * If set, the new value shall be committed as soon as a selection is made\n     * (commonly with the pointing device). In this case, supplying a value for\n     * a field involves three actions: selecting the field for fill-in,\n     * selecting a choice for the fill-in value, and leaving that field, which\n     * finalizes or \"commits\" the data choice and triggers any actions associated\n     * with the entry or changing of this data. If this flag is on, then\n     * processing does not wait for leaving the field action to occur, but\n     * immediately proceeds to the third step.\n     *\n     * This option enables applications to perform an action once a selection is\n     * made, without requiring the user to exit the field. If clear, the new\n     * value is not committed until the user exits the field.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"CommitOnSelChange\"] = flag(27 - 1)] = \"CommitOnSelChange\";\n})(AcroChoiceFlags || (AcroChoiceFlags = {}));\n//# sourceMappingURL=flags.js.map","import { __extends } from \"tslib\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFName from \"../objects/PDFName\";\nimport { AcroChoiceFlags } from \"./flags\";\nimport { InvalidAcroFieldValueError, MultiSelectValueError, } from \"../errors\";\nvar PDFAcroChoice = /** @class */ (function (_super) {\n    __extends(PDFAcroChoice, _super);\n    function PDFAcroChoice() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroChoice.prototype.setValues = function (values) {\n        if (this.hasFlag(AcroChoiceFlags.Combo) &&\n            !this.hasFlag(AcroChoiceFlags.Edit) &&\n            !this.valuesAreValid(values)) {\n            throw new InvalidAcroFieldValueError();\n        }\n        if (values.length === 0) {\n            this.dict.delete(PDFName.of('V'));\n        }\n        if (values.length === 1) {\n            this.dict.set(PDFName.of('V'), values[0]);\n        }\n        if (values.length > 1) {\n            if (!this.hasFlag(AcroChoiceFlags.MultiSelect)) {\n                throw new MultiSelectValueError();\n            }\n            this.dict.set(PDFName.of('V'), this.dict.context.obj(values));\n        }\n        this.updateSelectedIndices(values);\n    };\n    PDFAcroChoice.prototype.valuesAreValid = function (values) {\n        var options = this.getOptions();\n        var _loop_1 = function (idx, len) {\n            var val = values[idx].decodeText();\n            if (!options.find(function (o) { return val === (o.display || o.value).decodeText(); })) {\n                return { value: false };\n            }\n        };\n        for (var idx = 0, len = values.length; idx < len; idx++) {\n            var state_1 = _loop_1(idx, len);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        return true;\n    };\n    PDFAcroChoice.prototype.updateSelectedIndices = function (values) {\n        if (values.length > 1) {\n            var indices = new Array(values.length);\n            var options = this.getOptions();\n            var _loop_2 = function (idx, len) {\n                var val = values[idx].decodeText();\n                indices[idx] = options.findIndex(function (o) { return val === (o.display || o.value).decodeText(); });\n            };\n            for (var idx = 0, len = values.length; idx < len; idx++) {\n                _loop_2(idx, len);\n            }\n            this.dict.set(PDFName.of('I'), this.dict.context.obj(indices.sort()));\n        }\n        else {\n            this.dict.delete(PDFName.of('I'));\n        }\n    };\n    PDFAcroChoice.prototype.getValues = function () {\n        var v = this.V();\n        if (v instanceof PDFString || v instanceof PDFHexString)\n            return [v];\n        if (v instanceof PDFArray) {\n            var values = [];\n            for (var idx = 0, len = v.size(); idx < len; idx++) {\n                var value = v.lookup(idx);\n                if (value instanceof PDFString || value instanceof PDFHexString) {\n                    values.push(value);\n                }\n            }\n            return values;\n        }\n        return [];\n    };\n    PDFAcroChoice.prototype.Opt = function () {\n        return this.dict.lookupMaybe(PDFName.of('Opt'), PDFString, PDFHexString, PDFArray);\n    };\n    PDFAcroChoice.prototype.setOptions = function (options) {\n        var newOpt = new Array(options.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            var _a = options[idx], value = _a.value, display = _a.display;\n            newOpt[idx] = this.dict.context.obj([value, display || value]);\n        }\n        this.dict.set(PDFName.of('Opt'), this.dict.context.obj(newOpt));\n    };\n    PDFAcroChoice.prototype.getOptions = function () {\n        var Opt = this.Opt();\n        // Not supposed to happen - Opt _should_ always be `PDFArray | undefined`\n        if (Opt instanceof PDFString || Opt instanceof PDFHexString) {\n            return [{ value: Opt, display: Opt }];\n        }\n        if (Opt instanceof PDFArray) {\n            var res = [];\n            for (var idx = 0, len = Opt.size(); idx < len; idx++) {\n                var item = Opt.lookup(idx);\n                // If `item` is a string, use that as both the export and text value\n                if (item instanceof PDFString || item instanceof PDFHexString) {\n                    res.push({ value: item, display: item });\n                }\n                // If `item` is an array of one, treat it the same as just a string,\n                // if it's an array of two then `item[0]` is the export value and\n                // `item[1]` is the text value\n                if (item instanceof PDFArray) {\n                    if (item.size() > 0) {\n                        var first = item.lookup(0, PDFString, PDFHexString);\n                        var second = item.lookupMaybe(1, PDFString, PDFHexString);\n                        res.push({ value: first, display: second || first });\n                    }\n                }\n            }\n            return res;\n        }\n        return [];\n    };\n    return PDFAcroChoice;\n}(PDFAcroTerminal));\nexport default PDFAcroChoice;\n//# sourceMappingURL=PDFAcroChoice.js.map","import { __extends } from \"tslib\";\nimport PDFAcroChoice from \"./PDFAcroChoice\";\nimport { AcroChoiceFlags } from \"./flags\";\nvar PDFAcroComboBox = /** @class */ (function (_super) {\n    __extends(PDFAcroComboBox, _super);\n    function PDFAcroComboBox() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroComboBox.fromDict = function (dict, ref) {\n        return new PDFAcroComboBox(dict, ref);\n    };\n    PDFAcroComboBox.create = function (context) {\n        var dict = context.obj({\n            FT: 'Ch',\n            Ff: AcroChoiceFlags.Combo,\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroComboBox(dict, ref);\n    };\n    return PDFAcroComboBox;\n}(PDFAcroChoice));\nexport default PDFAcroComboBox;\n//# sourceMappingURL=PDFAcroComboBox.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroField from \"./PDFAcroField\";\nvar PDFAcroNonTerminal = /** @class */ (function (_super) {\n    __extends(PDFAcroNonTerminal, _super);\n    function PDFAcroNonTerminal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroNonTerminal.prototype.addField = function (field) {\n        var Kids = this.normalizedEntries().Kids;\n        Kids === null || Kids === void 0 ? void 0 : Kids.push(field);\n    };\n    PDFAcroNonTerminal.prototype.normalizedEntries = function () {\n        var Kids = this.Kids();\n        if (!Kids) {\n            Kids = this.dict.context.obj([]);\n            this.dict.set(PDFName.of('Kids'), Kids);\n        }\n        return { Kids: Kids };\n    };\n    PDFAcroNonTerminal.fromDict = function (dict, ref) {\n        return new PDFAcroNonTerminal(dict, ref);\n    };\n    PDFAcroNonTerminal.create = function (context) {\n        var dict = context.obj({});\n        var ref = context.register(dict);\n        return new PDFAcroNonTerminal(dict, ref);\n    };\n    return PDFAcroNonTerminal;\n}(PDFAcroField));\nexport default PDFAcroNonTerminal;\n//# sourceMappingURL=PDFAcroNonTerminal.js.map","import { __extends } from \"tslib\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nvar PDFAcroSignature = /** @class */ (function (_super) {\n    __extends(PDFAcroSignature, _super);\n    function PDFAcroSignature() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroSignature.fromDict = function (dict, ref) {\n        return new PDFAcroSignature(dict, ref);\n    };\n    return PDFAcroSignature;\n}(PDFAcroTerminal));\nexport default PDFAcroSignature;\n//# sourceMappingURL=PDFAcroSignature.js.map","import { __extends } from \"tslib\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nvar PDFAcroText = /** @class */ (function (_super) {\n    __extends(PDFAcroText, _super);\n    function PDFAcroText() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroText.prototype.MaxLen = function () {\n        var maxLen = this.dict.lookup(PDFName.of('MaxLen'));\n        if (maxLen instanceof PDFNumber)\n            return maxLen;\n        return undefined;\n    };\n    PDFAcroText.prototype.Q = function () {\n        var q = this.dict.lookup(PDFName.of('Q'));\n        if (q instanceof PDFNumber)\n            return q;\n        return undefined;\n    };\n    PDFAcroText.prototype.setMaxLength = function (maxLength) {\n        this.dict.set(PDFName.of('MaxLen'), PDFNumber.of(maxLength));\n    };\n    PDFAcroText.prototype.removeMaxLength = function () {\n        this.dict.delete(PDFName.of('MaxLen'));\n    };\n    PDFAcroText.prototype.getMaxLength = function () {\n        var _a;\n        return (_a = this.MaxLen()) === null || _a === void 0 ? void 0 : _a.asNumber();\n    };\n    PDFAcroText.prototype.setQuadding = function (quadding) {\n        this.dict.set(PDFName.of('Q'), PDFNumber.of(quadding));\n    };\n    PDFAcroText.prototype.getQuadding = function () {\n        var _a;\n        return (_a = this.Q()) === null || _a === void 0 ? void 0 : _a.asNumber();\n    };\n    PDFAcroText.prototype.setValue = function (value) {\n        this.dict.set(PDFName.of('V'), value);\n        // const widgets = this.getWidgets();\n        // for (let idx = 0, len = widgets.length; idx < len; idx++) {\n        //   const widget = widgets[idx];\n        //   const state = widget.getOnValue() === value ? value : PDFName.of('Off');\n        //   widget.setAppearanceState(state);\n        // }\n    };\n    PDFAcroText.prototype.removeValue = function () {\n        this.dict.delete(PDFName.of('V'));\n    };\n    PDFAcroText.prototype.getValue = function () {\n        var v = this.V();\n        if (v instanceof PDFString || v instanceof PDFHexString)\n            return v;\n        return undefined;\n    };\n    PDFAcroText.fromDict = function (dict, ref) { return new PDFAcroText(dict, ref); };\n    PDFAcroText.create = function (context) {\n        var dict = context.obj({\n            FT: 'Tx',\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroText(dict, ref);\n    };\n    return PDFAcroText;\n}(PDFAcroTerminal));\nexport default PDFAcroText;\n//# sourceMappingURL=PDFAcroText.js.map","import { __extends } from \"tslib\";\nimport PDFAcroButton from \"./PDFAcroButton\";\nimport { AcroButtonFlags } from \"./flags\";\nvar PDFAcroPushButton = /** @class */ (function (_super) {\n    __extends(PDFAcroPushButton, _super);\n    function PDFAcroPushButton() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroPushButton.fromDict = function (dict, ref) {\n        return new PDFAcroPushButton(dict, ref);\n    };\n    PDFAcroPushButton.create = function (context) {\n        var dict = context.obj({\n            FT: 'Btn',\n            Ff: AcroButtonFlags.PushButton,\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroPushButton(dict, ref);\n    };\n    return PDFAcroPushButton;\n}(PDFAcroButton));\nexport default PDFAcroPushButton;\n//# sourceMappingURL=PDFAcroPushButton.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroButton from \"./PDFAcroButton\";\nimport { AcroButtonFlags } from \"./flags\";\nimport { InvalidAcroFieldValueError } from \"../errors\";\nvar PDFAcroRadioButton = /** @class */ (function (_super) {\n    __extends(PDFAcroRadioButton, _super);\n    function PDFAcroRadioButton() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroRadioButton.prototype.setValue = function (value) {\n        var onValues = this.getOnValues();\n        if (!onValues.includes(value) && value !== PDFName.of('Off')) {\n            throw new InvalidAcroFieldValueError();\n        }\n        this.dict.set(PDFName.of('V'), value);\n        var widgets = this.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var state = widget.getOnValue() === value ? value : PDFName.of('Off');\n            widget.setAppearanceState(state);\n        }\n    };\n    PDFAcroRadioButton.prototype.getValue = function () {\n        var v = this.V();\n        if (v instanceof PDFName)\n            return v;\n        return PDFName.of('Off');\n    };\n    PDFAcroRadioButton.prototype.getOnValues = function () {\n        var widgets = this.getWidgets();\n        var onValues = [];\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var onValue = widgets[idx].getOnValue();\n            if (onValue)\n                onValues.push(onValue);\n        }\n        return onValues;\n    };\n    PDFAcroRadioButton.fromDict = function (dict, ref) {\n        return new PDFAcroRadioButton(dict, ref);\n    };\n    PDFAcroRadioButton.create = function (context) {\n        var dict = context.obj({\n            FT: 'Btn',\n            Ff: AcroButtonFlags.Radio,\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroRadioButton(dict, ref);\n    };\n    return PDFAcroRadioButton;\n}(PDFAcroButton));\nexport default PDFAcroRadioButton;\n//# sourceMappingURL=PDFAcroRadioButton.js.map","import { __extends } from \"tslib\";\nimport PDFAcroChoice from \"./PDFAcroChoice\";\nvar PDFAcroListBox = /** @class */ (function (_super) {\n    __extends(PDFAcroListBox, _super);\n    function PDFAcroListBox() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroListBox.fromDict = function (dict, ref) {\n        return new PDFAcroListBox(dict, ref);\n    };\n    PDFAcroListBox.create = function (context) {\n        var dict = context.obj({\n            FT: 'Ch',\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroListBox(dict, ref);\n    };\n    return PDFAcroListBox;\n}(PDFAcroChoice));\nexport default PDFAcroListBox;\n//# sourceMappingURL=PDFAcroListBox.js.map","import PDFNumber from \"../objects/PDFNumber\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nimport PDFAcroNonTerminal from \"./PDFAcroNonTerminal\";\nimport PDFAcroSignature from \"./PDFAcroSignature\";\nimport PDFAcroText from \"./PDFAcroText\";\nimport PDFAcroPushButton from \"./PDFAcroPushButton\";\nimport PDFAcroRadioButton from \"./PDFAcroRadioButton\";\nimport PDFAcroCheckBox from \"./PDFAcroCheckBox\";\nimport PDFAcroComboBox from \"./PDFAcroComboBox\";\nimport PDFAcroListBox from \"./PDFAcroListBox\";\nimport { AcroButtonFlags, AcroChoiceFlags } from \"./flags\";\nexport var createPDFAcroFields = function (kidDicts) {\n    if (!kidDicts)\n        return [];\n    var kids = [];\n    for (var idx = 0, len = kidDicts.size(); idx < len; idx++) {\n        var ref = kidDicts.get(idx);\n        var dict = kidDicts.lookup(idx);\n        // if (dict instanceof PDFDict) kids.push(PDFAcroField.fromDict(dict));\n        if (ref instanceof PDFRef && dict instanceof PDFDict) {\n            kids.push([createPDFAcroField(dict, ref), ref]);\n        }\n    }\n    return kids;\n};\nexport var createPDFAcroField = function (dict, ref) {\n    var isNonTerminal = isNonTerminalAcroField(dict);\n    if (isNonTerminal)\n        return PDFAcroNonTerminal.fromDict(dict, ref);\n    return createPDFAcroTerminal(dict, ref);\n};\n// TODO: Maybe just check if the dict is *not* a widget? That might be better.\n// According to the PDF spec:\n//\n//   > A field's children in the hierarchy may also include widget annotations\n//   > that define its appearance on the page. A field that has children that\n//   > are fields is called a non-terminal field. A field that does not have\n//   > children that are fields is called a terminal field.\n//\n// The spec is not entirely clear about how to determine whether a given\n// dictionary represents an acrofield or a widget annotation. So we will assume\n// that a dictionary is an acrofield if it is a member of the `/Kids` array\n// and it contains a `/T` entry (widgets do not have `/T` entries). This isn't\n// a bullet proof solution, because the `/T` entry is technically defined as\n// optional for acrofields by the PDF spec. But in practice all acrofields seem\n// to have a `/T` entry defined.\nvar isNonTerminalAcroField = function (dict) {\n    var kids = dict.lookup(PDFName.of('Kids'));\n    if (kids instanceof PDFArray) {\n        for (var idx = 0, len = kids.size(); idx < len; idx++) {\n            var kid = kids.lookup(idx);\n            var kidIsField = kid instanceof PDFDict && kid.has(PDFName.of('T'));\n            if (kidIsField)\n                return true;\n        }\n    }\n    return false;\n};\nvar createPDFAcroTerminal = function (dict, ref) {\n    var ftNameOrRef = getInheritableAttribute(dict, PDFName.of('FT'));\n    var type = dict.context.lookup(ftNameOrRef, PDFName);\n    if (type === PDFName.of('Btn'))\n        return createPDFAcroButton(dict, ref);\n    if (type === PDFName.of('Ch'))\n        return createPDFAcroChoice(dict, ref);\n    if (type === PDFName.of('Tx'))\n        return PDFAcroText.fromDict(dict, ref);\n    if (type === PDFName.of('Sig'))\n        return PDFAcroSignature.fromDict(dict, ref);\n    // We should never reach this line. But there are a lot of weird PDFs out\n    // there. So, just to be safe, we'll try to handle things gracefully instead\n    // of throwing an error.\n    return PDFAcroTerminal.fromDict(dict, ref);\n};\nvar createPDFAcroButton = function (dict, ref) {\n    var _a;\n    var ffNumberOrRef = getInheritableAttribute(dict, PDFName.of('Ff'));\n    var ffNumber = dict.context.lookupMaybe(ffNumberOrRef, PDFNumber);\n    var flags = (_a = ffNumber === null || ffNumber === void 0 ? void 0 : ffNumber.asNumber()) !== null && _a !== void 0 ? _a : 0;\n    if (flagIsSet(flags, AcroButtonFlags.PushButton)) {\n        return PDFAcroPushButton.fromDict(dict, ref);\n    }\n    else if (flagIsSet(flags, AcroButtonFlags.Radio)) {\n        return PDFAcroRadioButton.fromDict(dict, ref);\n    }\n    else {\n        return PDFAcroCheckBox.fromDict(dict, ref);\n    }\n};\nvar createPDFAcroChoice = function (dict, ref) {\n    var _a;\n    var ffNumberOrRef = getInheritableAttribute(dict, PDFName.of('Ff'));\n    var ffNumber = dict.context.lookupMaybe(ffNumberOrRef, PDFNumber);\n    var flags = (_a = ffNumber === null || ffNumber === void 0 ? void 0 : ffNumber.asNumber()) !== null && _a !== void 0 ? _a : 0;\n    if (flagIsSet(flags, AcroChoiceFlags.Combo)) {\n        return PDFAcroComboBox.fromDict(dict, ref);\n    }\n    else {\n        return PDFAcroListBox.fromDict(dict, ref);\n    }\n};\nvar flagIsSet = function (flags, flag) {\n    return (flags & flag) !== 0;\n};\nvar getInheritableAttribute = function (startNode, name) {\n    var attribute;\n    ascend(startNode, function (node) {\n        if (!attribute)\n            attribute = node.get(name);\n    });\n    return attribute;\n};\nvar ascend = function (startNode, visitor) {\n    visitor(startNode);\n    var Parent = startNode.lookupMaybe(PDFName.of('Parent'), PDFDict);\n    if (Parent)\n        ascend(Parent, visitor);\n};\n//# sourceMappingURL=utils.js.map","import PDFDict from \"../objects/PDFDict\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroNonTerminal from \"./PDFAcroNonTerminal\";\nimport { createPDFAcroField, createPDFAcroFields, } from \"./utils\";\nvar PDFAcroForm = /** @class */ (function () {\n    function PDFAcroForm(dict) {\n        this.dict = dict;\n    }\n    PDFAcroForm.prototype.Fields = function () {\n        var fields = this.dict.lookup(PDFName.of('Fields'));\n        if (fields instanceof PDFArray)\n            return fields;\n        return undefined;\n    };\n    PDFAcroForm.prototype.getFields = function () {\n        var Fields = this.normalizedEntries().Fields;\n        var fields = new Array(Fields.size());\n        for (var idx = 0, len = Fields.size(); idx < len; idx++) {\n            var ref = Fields.get(idx);\n            var dict = Fields.lookup(idx, PDFDict);\n            fields[idx] = [createPDFAcroField(dict, ref), ref];\n        }\n        return fields;\n    };\n    PDFAcroForm.prototype.getAllFields = function () {\n        var allFields = [];\n        var pushFields = function (fields) {\n            if (!fields)\n                return;\n            for (var idx = 0, len = fields.length; idx < len; idx++) {\n                var field = fields[idx];\n                allFields.push(field);\n                var fieldModel = field[0];\n                if (fieldModel instanceof PDFAcroNonTerminal) {\n                    pushFields(createPDFAcroFields(fieldModel.Kids()));\n                }\n            }\n        };\n        pushFields(this.getFields());\n        return allFields;\n    };\n    PDFAcroForm.prototype.addField = function (field) {\n        var Fields = this.normalizedEntries().Fields;\n        Fields === null || Fields === void 0 ? void 0 : Fields.push(field);\n    };\n    PDFAcroForm.prototype.removeField = function (field) {\n        var parent = field.getParent();\n        var fields = parent === undefined ? this.normalizedEntries().Fields : parent.Kids();\n        var index = fields === null || fields === void 0 ? void 0 : fields.indexOf(field.ref);\n        if (fields === undefined || index === undefined) {\n            throw new Error(\"Tried to remove inexistent field \" + field.getFullyQualifiedName());\n        }\n        fields.remove(index);\n        if (parent !== undefined && fields.size() === 0) {\n            this.removeField(parent);\n        }\n    };\n    PDFAcroForm.prototype.normalizedEntries = function () {\n        var Fields = this.Fields();\n        if (!Fields) {\n            Fields = this.dict.context.obj([]);\n            this.dict.set(PDFName.of('Fields'), Fields);\n        }\n        return { Fields: Fields };\n    };\n    PDFAcroForm.fromDict = function (dict) { return new PDFAcroForm(dict); };\n    PDFAcroForm.create = function (context) {\n        var dict = context.obj({ Fields: [] });\n        return new PDFAcroForm(dict);\n    };\n    return PDFAcroForm;\n}());\nexport default PDFAcroForm;\n//# sourceMappingURL=PDFAcroForm.js.map","import { __extends } from \"tslib\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport { PDFAcroForm } from \"../acroform\";\nimport ViewerPreferences from '../interactive/ViewerPreferences';\nvar PDFCatalog = /** @class */ (function (_super) {\n    __extends(PDFCatalog, _super);\n    function PDFCatalog() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFCatalog.prototype.Pages = function () {\n        return this.lookup(PDFName.of('Pages'), PDFDict);\n    };\n    PDFCatalog.prototype.AcroForm = function () {\n        return this.lookupMaybe(PDFName.of('AcroForm'), PDFDict);\n    };\n    PDFCatalog.prototype.getAcroForm = function () {\n        var dict = this.AcroForm();\n        if (!dict)\n            return undefined;\n        return PDFAcroForm.fromDict(dict);\n    };\n    PDFCatalog.prototype.getOrCreateAcroForm = function () {\n        var acroForm = this.getAcroForm();\n        if (!acroForm) {\n            acroForm = PDFAcroForm.create(this.context);\n            var acroFormRef = this.context.register(acroForm.dict);\n            this.set(PDFName.of('AcroForm'), acroFormRef);\n        }\n        return acroForm;\n    };\n    PDFCatalog.prototype.ViewerPreferences = function () {\n        return this.lookupMaybe(PDFName.of('ViewerPreferences'), PDFDict);\n    };\n    PDFCatalog.prototype.getViewerPreferences = function () {\n        var dict = this.ViewerPreferences();\n        if (!dict)\n            return undefined;\n        return ViewerPreferences.fromDict(dict);\n    };\n    PDFCatalog.prototype.getOrCreateViewerPreferences = function () {\n        var viewerPrefs = this.getViewerPreferences();\n        if (!viewerPrefs) {\n            viewerPrefs = ViewerPreferences.create(this.context);\n            var viewerPrefsRef = this.context.register(viewerPrefs.dict);\n            this.set(PDFName.of('ViewerPreferences'), viewerPrefsRef);\n        }\n        return viewerPrefs;\n    };\n    /**\n     * Inserts the given ref as a leaf node of this catalog's page tree at the\n     * specified index (zero-based). Also increments the `Count` of each node in\n     * the page tree hierarchy to accomodate the new page.\n     *\n     * Returns the ref of the PDFPageTree node into which `leafRef` was inserted.\n     */\n    PDFCatalog.prototype.insertLeafNode = function (leafRef, index) {\n        var pagesRef = this.get(PDFName.of('Pages'));\n        var maybeParentRef = this.Pages().insertLeafNode(leafRef, index);\n        return maybeParentRef || pagesRef;\n    };\n    PDFCatalog.prototype.removeLeafNode = function (index) {\n        this.Pages().removeLeafNode(index);\n    };\n    PDFCatalog.withContextAndPages = function (context, pages) {\n        var dict = new Map();\n        dict.set(PDFName.of('Type'), PDFName.of('Catalog'));\n        dict.set(PDFName.of('Pages'), pages);\n        return new PDFCatalog(dict, context);\n    };\n    PDFCatalog.fromMapWithContext = function (map, context) {\n        return new PDFCatalog(map, context);\n    };\n    return PDFCatalog;\n}(PDFDict));\nexport default PDFCatalog;\n//# sourceMappingURL=PDFCatalog.js.map","import { __extends } from \"tslib\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFPageLeaf from \"./PDFPageLeaf\";\nimport { InvalidTargetIndexError, CorruptPageTreeError } from \"../errors\";\nvar PDFPageTree = /** @class */ (function (_super) {\n    __extends(PDFPageTree, _super);\n    function PDFPageTree() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFPageTree.prototype.Parent = function () {\n        return this.lookup(PDFName.of('Parent'));\n    };\n    PDFPageTree.prototype.Kids = function () {\n        return this.lookup(PDFName.of('Kids'), PDFArray);\n    };\n    PDFPageTree.prototype.Count = function () {\n        return this.lookup(PDFName.of('Count'), PDFNumber);\n    };\n    PDFPageTree.prototype.pushTreeNode = function (treeRef) {\n        var Kids = this.Kids();\n        Kids.push(treeRef);\n    };\n    PDFPageTree.prototype.pushLeafNode = function (leafRef) {\n        var Kids = this.Kids();\n        this.insertLeafKid(Kids.size(), leafRef);\n    };\n    /**\n     * Inserts the given ref as a leaf node of this page tree at the specified\n     * index (zero-based). Also increments the `Count` of each page tree in the\n     * hierarchy to accomodate the new page.\n     *\n     * Returns the ref of the PDFPageTree node into which `leafRef` was inserted,\n     * or `undefined` if it was inserted into the root node (the PDFPageTree upon\n     * which the method was first called).\n     */\n    PDFPageTree.prototype.insertLeafNode = function (leafRef, targetIndex) {\n        var Kids = this.Kids();\n        var Count = this.Count().asNumber();\n        if (targetIndex > Count) {\n            throw new InvalidTargetIndexError(targetIndex, Count);\n        }\n        var leafsRemainingUntilTarget = targetIndex;\n        for (var idx = 0, len = Kids.size(); idx < len; idx++) {\n            if (leafsRemainingUntilTarget === 0) {\n                // Insert page and return\n                this.insertLeafKid(idx, leafRef);\n                return undefined;\n            }\n            var kidRef = Kids.get(idx);\n            var kid = this.context.lookup(kidRef);\n            if (kid instanceof PDFPageTree) {\n                if (kid.Count().asNumber() > leafsRemainingUntilTarget) {\n                    // Dig in\n                    return (kid.insertLeafNode(leafRef, leafsRemainingUntilTarget) || kidRef);\n                }\n                else {\n                    // Move on\n                    leafsRemainingUntilTarget -= kid.Count().asNumber();\n                }\n            }\n            if (kid instanceof PDFPageLeaf) {\n                // Move on\n                leafsRemainingUntilTarget -= 1;\n            }\n        }\n        if (leafsRemainingUntilTarget === 0) {\n            // Insert page at the end and return\n            this.insertLeafKid(Kids.size(), leafRef);\n            return undefined;\n        }\n        // Should never get here if `targetIndex` is valid\n        throw new CorruptPageTreeError(targetIndex, 'insertLeafNode');\n    };\n    /**\n     * Removes the leaf node at the specified index (zero-based) from this page\n     * tree. Also decrements the `Count` of each page tree in the hierarchy to\n     * account for the removed page.\n     *\n     * If `prune` is true, then intermediate tree nodes will be removed from the\n     * tree if they contain 0 children after the leaf node is removed.\n     */\n    PDFPageTree.prototype.removeLeafNode = function (targetIndex, prune) {\n        if (prune === void 0) { prune = true; }\n        var Kids = this.Kids();\n        var Count = this.Count().asNumber();\n        if (targetIndex >= Count) {\n            throw new InvalidTargetIndexError(targetIndex, Count);\n        }\n        var leafsRemainingUntilTarget = targetIndex;\n        for (var idx = 0, len = Kids.size(); idx < len; idx++) {\n            var kidRef = Kids.get(idx);\n            var kid = this.context.lookup(kidRef);\n            if (kid instanceof PDFPageTree) {\n                if (kid.Count().asNumber() > leafsRemainingUntilTarget) {\n                    // Dig in\n                    kid.removeLeafNode(leafsRemainingUntilTarget, prune);\n                    if (prune && kid.Kids().size() === 0)\n                        Kids.remove(idx);\n                    return;\n                }\n                else {\n                    // Move on\n                    leafsRemainingUntilTarget -= kid.Count().asNumber();\n                }\n            }\n            if (kid instanceof PDFPageLeaf) {\n                if (leafsRemainingUntilTarget === 0) {\n                    // Remove page and return\n                    this.removeKid(idx);\n                    return;\n                }\n                else {\n                    // Move on\n                    leafsRemainingUntilTarget -= 1;\n                }\n            }\n        }\n        // Should never get here if `targetIndex` is valid\n        throw new CorruptPageTreeError(targetIndex, 'removeLeafNode');\n    };\n    PDFPageTree.prototype.ascend = function (visitor) {\n        visitor(this);\n        var Parent = this.Parent();\n        if (Parent)\n            Parent.ascend(visitor);\n    };\n    /** Performs a Post-Order traversal of this page tree */\n    PDFPageTree.prototype.traverse = function (visitor) {\n        var Kids = this.Kids();\n        for (var idx = 0, len = Kids.size(); idx < len; idx++) {\n            var kidRef = Kids.get(idx);\n            var kid = this.context.lookup(kidRef);\n            if (kid instanceof PDFPageTree)\n                kid.traverse(visitor);\n            visitor(kid, kidRef);\n        }\n    };\n    PDFPageTree.prototype.insertLeafKid = function (kidIdx, leafRef) {\n        var Kids = this.Kids();\n        this.ascend(function (node) {\n            var newCount = node.Count().asNumber() + 1;\n            node.set(PDFName.of('Count'), PDFNumber.of(newCount));\n        });\n        Kids.insert(kidIdx, leafRef);\n    };\n    PDFPageTree.prototype.removeKid = function (kidIdx) {\n        var Kids = this.Kids();\n        var kid = Kids.lookup(kidIdx);\n        if (kid instanceof PDFPageLeaf) {\n            this.ascend(function (node) {\n                var newCount = node.Count().asNumber() - 1;\n                node.set(PDFName.of('Count'), PDFNumber.of(newCount));\n            });\n        }\n        Kids.remove(kidIdx);\n    };\n    PDFPageTree.withContext = function (context, parent) {\n        var dict = new Map();\n        dict.set(PDFName.of('Type'), PDFName.of('Pages'));\n        dict.set(PDFName.of('Kids'), context.obj([]));\n        dict.set(PDFName.of('Count'), context.obj(0));\n        if (parent)\n            dict.set(PDFName.of('Parent'), parent);\n        return new PDFPageTree(dict, context);\n    };\n    PDFPageTree.fromMapWithContext = function (map, context) {\n        return new PDFPageTree(map, context);\n    };\n    return PDFPageTree;\n}(PDFDict));\nexport default PDFPageTree;\n//# sourceMappingURL=PDFPageTree.js.map","import CharCodes from \"./CharCodes\";\nexport var IsDigit = new Uint8Array(256);\nIsDigit[CharCodes.Zero] = 1;\nIsDigit[CharCodes.One] = 1;\nIsDigit[CharCodes.Two] = 1;\nIsDigit[CharCodes.Three] = 1;\nIsDigit[CharCodes.Four] = 1;\nIsDigit[CharCodes.Five] = 1;\nIsDigit[CharCodes.Six] = 1;\nIsDigit[CharCodes.Seven] = 1;\nIsDigit[CharCodes.Eight] = 1;\nIsDigit[CharCodes.Nine] = 1;\nexport var IsNumericPrefix = new Uint8Array(256);\nIsNumericPrefix[CharCodes.Period] = 1;\nIsNumericPrefix[CharCodes.Plus] = 1;\nIsNumericPrefix[CharCodes.Minus] = 1;\nexport var IsNumeric = new Uint8Array(256);\nfor (var idx = 0, len = 256; idx < len; idx++) {\n    IsNumeric[idx] = IsDigit[idx] || IsNumericPrefix[idx] ? 1 : 0;\n}\n//# sourceMappingURL=Numeric.js.map","import { NumberParsingError } from \"../errors\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { IsDigit, IsNumeric } from \"../syntax/Numeric\";\nimport { IsWhitespace } from \"../syntax/Whitespace\";\nimport { charFromCode } from \"../../utils\";\nvar Newline = CharCodes.Newline, CarriageReturn = CharCodes.CarriageReturn;\n// TODO: Throw error if eof is reached before finishing object parse...\nvar BaseParser = /** @class */ (function () {\n    function BaseParser(bytes, capNumbers) {\n        if (capNumbers === void 0) { capNumbers = false; }\n        this.bytes = bytes;\n        this.capNumbers = capNumbers;\n    }\n    BaseParser.prototype.parseRawInt = function () {\n        var value = '';\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (!IsDigit[byte])\n                break;\n            value += charFromCode(this.bytes.next());\n        }\n        var numberValue = Number(value);\n        if (!value || !isFinite(numberValue)) {\n            throw new NumberParsingError(this.bytes.position(), value);\n        }\n        return numberValue;\n    };\n    // TODO: Maybe handle exponential format?\n    // TODO: Compare performance of string concatenation to charFromCode(...bytes)\n    BaseParser.prototype.parseRawNumber = function () {\n        var value = '';\n        // Parse integer-part, the leading (+ | - | . | 0-9)\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (!IsNumeric[byte])\n                break;\n            value += charFromCode(this.bytes.next());\n            if (byte === CharCodes.Period)\n                break;\n        }\n        // Parse decimal-part, the trailing (0-9)\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (!IsDigit[byte])\n                break;\n            value += charFromCode(this.bytes.next());\n        }\n        var numberValue = Number(value);\n        if (!value || !isFinite(numberValue)) {\n            throw new NumberParsingError(this.bytes.position(), value);\n        }\n        if (numberValue > Number.MAX_SAFE_INTEGER) {\n            if (this.capNumbers) {\n                var msg = \"Parsed number that is too large for some PDF readers: \" + value + \", using Number.MAX_SAFE_INTEGER instead.\";\n                console.warn(msg);\n                return Number.MAX_SAFE_INTEGER;\n            }\n            else {\n                var msg = \"Parsed number that is too large for some PDF readers: \" + value + \", not capping.\";\n                console.warn(msg);\n            }\n        }\n        return numberValue;\n    };\n    BaseParser.prototype.skipWhitespace = function () {\n        while (!this.bytes.done() && IsWhitespace[this.bytes.peek()]) {\n            this.bytes.next();\n        }\n    };\n    BaseParser.prototype.skipLine = function () {\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (byte === Newline || byte === CarriageReturn)\n                return;\n            this.bytes.next();\n        }\n    };\n    BaseParser.prototype.skipComment = function () {\n        if (this.bytes.peek() !== CharCodes.Percent)\n            return false;\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (byte === Newline || byte === CarriageReturn)\n                return true;\n            this.bytes.next();\n        }\n        return true;\n    };\n    BaseParser.prototype.skipWhitespaceAndComments = function () {\n        this.skipWhitespace();\n        while (this.skipComment())\n            this.skipWhitespace();\n    };\n    BaseParser.prototype.matchKeyword = function (keyword) {\n        var initialOffset = this.bytes.offset();\n        for (var idx = 0, len = keyword.length; idx < len; idx++) {\n            if (this.bytes.done() || this.bytes.next() !== keyword[idx]) {\n                this.bytes.moveTo(initialOffset);\n                return false;\n            }\n        }\n        return true;\n    };\n    return BaseParser;\n}());\nexport default BaseParser;\n//# sourceMappingURL=BaseParser.js.map","import { NextByteAssertionError } from \"../errors\";\nimport { decodePDFRawStream } from \"../streams/decode\";\nimport CharCodes from \"../syntax/CharCodes\";\n// TODO: See how line/col tracking affects performance\nvar ByteStream = /** @class */ (function () {\n    function ByteStream(bytes) {\n        this.idx = 0;\n        this.line = 0;\n        this.column = 0;\n        this.bytes = bytes;\n        this.length = this.bytes.length;\n    }\n    ByteStream.prototype.moveTo = function (offset) {\n        this.idx = offset;\n    };\n    ByteStream.prototype.next = function () {\n        var byte = this.bytes[this.idx++];\n        if (byte === CharCodes.Newline) {\n            this.line += 1;\n            this.column = 0;\n        }\n        else {\n            this.column += 1;\n        }\n        return byte;\n    };\n    ByteStream.prototype.assertNext = function (expected) {\n        if (this.peek() !== expected) {\n            throw new NextByteAssertionError(this.position(), expected, this.peek());\n        }\n        return this.next();\n    };\n    ByteStream.prototype.peek = function () {\n        return this.bytes[this.idx];\n    };\n    ByteStream.prototype.peekAhead = function (steps) {\n        return this.bytes[this.idx + steps];\n    };\n    ByteStream.prototype.peekAt = function (offset) {\n        return this.bytes[offset];\n    };\n    ByteStream.prototype.done = function () {\n        return this.idx >= this.length;\n    };\n    ByteStream.prototype.offset = function () {\n        return this.idx;\n    };\n    ByteStream.prototype.slice = function (start, end) {\n        return this.bytes.slice(start, end);\n    };\n    ByteStream.prototype.position = function () {\n        return { line: this.line, column: this.column, offset: this.idx };\n    };\n    ByteStream.of = function (bytes) { return new ByteStream(bytes); };\n    ByteStream.fromPDFRawStream = function (rawStream) {\n        return ByteStream.of(decodePDFRawStream(rawStream).decode());\n    };\n    return ByteStream;\n}());\nexport default ByteStream;\n//# sourceMappingURL=ByteStream.js.map","import { __spreadArrays } from \"tslib\";\nimport CharCodes from \"./CharCodes\";\nvar Space = CharCodes.Space, CarriageReturn = CharCodes.CarriageReturn, Newline = CharCodes.Newline;\nvar stream = [\n    CharCodes.s,\n    CharCodes.t,\n    CharCodes.r,\n    CharCodes.e,\n    CharCodes.a,\n    CharCodes.m,\n];\nvar endstream = [\n    CharCodes.e,\n    CharCodes.n,\n    CharCodes.d,\n    CharCodes.s,\n    CharCodes.t,\n    CharCodes.r,\n    CharCodes.e,\n    CharCodes.a,\n    CharCodes.m,\n];\nexport var Keywords = {\n    header: [\n        CharCodes.Percent,\n        CharCodes.P,\n        CharCodes.D,\n        CharCodes.F,\n        CharCodes.Dash,\n    ],\n    eof: [\n        CharCodes.Percent,\n        CharCodes.Percent,\n        CharCodes.E,\n        CharCodes.O,\n        CharCodes.F,\n    ],\n    obj: [CharCodes.o, CharCodes.b, CharCodes.j],\n    endobj: [\n        CharCodes.e,\n        CharCodes.n,\n        CharCodes.d,\n        CharCodes.o,\n        CharCodes.b,\n        CharCodes.j,\n    ],\n    xref: [CharCodes.x, CharCodes.r, CharCodes.e, CharCodes.f],\n    trailer: [\n        CharCodes.t,\n        CharCodes.r,\n        CharCodes.a,\n        CharCodes.i,\n        CharCodes.l,\n        CharCodes.e,\n        CharCodes.r,\n    ],\n    startxref: [\n        CharCodes.s,\n        CharCodes.t,\n        CharCodes.a,\n        CharCodes.r,\n        CharCodes.t,\n        CharCodes.x,\n        CharCodes.r,\n        CharCodes.e,\n        CharCodes.f,\n    ],\n    true: [CharCodes.t, CharCodes.r, CharCodes.u, CharCodes.e],\n    false: [CharCodes.f, CharCodes.a, CharCodes.l, CharCodes.s, CharCodes.e],\n    null: [CharCodes.n, CharCodes.u, CharCodes.l, CharCodes.l],\n    stream: stream,\n    streamEOF1: __spreadArrays(stream, [Space, CarriageReturn, Newline]),\n    streamEOF2: __spreadArrays(stream, [CarriageReturn, Newline]),\n    streamEOF3: __spreadArrays(stream, [CarriageReturn]),\n    streamEOF4: __spreadArrays(stream, [Newline]),\n    endstream: endstream,\n    EOF1endstream: __spreadArrays([CarriageReturn, Newline], endstream),\n    EOF2endstream: __spreadArrays([CarriageReturn], endstream),\n    EOF3endstream: __spreadArrays([Newline], endstream),\n};\n//# sourceMappingURL=Keywords.js.map","import { __extends } from \"tslib\";\nimport { PDFObjectParsingError, PDFStreamParsingError, UnbalancedParenthesisError, } from \"../errors\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFBool from \"../objects/PDFBool\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNull from \"../objects/PDFNull\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRawStream from \"../objects/PDFRawStream\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFString from \"../objects/PDFString\";\nimport BaseParser from \"./BaseParser\";\nimport ByteStream from \"./ByteStream\";\nimport PDFCatalog from \"../structures/PDFCatalog\";\nimport PDFPageLeaf from \"../structures/PDFPageLeaf\";\nimport PDFPageTree from \"../structures/PDFPageTree\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { IsDelimiter } from \"../syntax/Delimiters\";\nimport { Keywords } from \"../syntax/Keywords\";\nimport { IsDigit, IsNumeric } from \"../syntax/Numeric\";\nimport { IsWhitespace } from \"../syntax/Whitespace\";\nimport { charFromCode } from \"../../utils\";\n// TODO: Throw error if eof is reached before finishing object parse...\nvar PDFObjectParser = /** @class */ (function (_super) {\n    __extends(PDFObjectParser, _super);\n    function PDFObjectParser(byteStream, context, capNumbers) {\n        if (capNumbers === void 0) { capNumbers = false; }\n        var _this = _super.call(this, byteStream, capNumbers) || this;\n        _this.context = context;\n        return _this;\n    }\n    // TODO: Is it possible to reduce duplicate parsing for ref lookaheads?\n    PDFObjectParser.prototype.parseObject = function () {\n        this.skipWhitespaceAndComments();\n        if (this.matchKeyword(Keywords.true))\n            return PDFBool.True;\n        if (this.matchKeyword(Keywords.false))\n            return PDFBool.False;\n        if (this.matchKeyword(Keywords.null))\n            return PDFNull;\n        var byte = this.bytes.peek();\n        if (byte === CharCodes.LessThan &&\n            this.bytes.peekAhead(1) === CharCodes.LessThan) {\n            return this.parseDictOrStream();\n        }\n        if (byte === CharCodes.LessThan)\n            return this.parseHexString();\n        if (byte === CharCodes.LeftParen)\n            return this.parseString();\n        if (byte === CharCodes.ForwardSlash)\n            return this.parseName();\n        if (byte === CharCodes.LeftSquareBracket)\n            return this.parseArray();\n        if (IsNumeric[byte])\n            return this.parseNumberOrRef();\n        throw new PDFObjectParsingError(this.bytes.position(), byte);\n    };\n    PDFObjectParser.prototype.parseNumberOrRef = function () {\n        var firstNum = this.parseRawNumber();\n        this.skipWhitespaceAndComments();\n        var lookaheadStart = this.bytes.offset();\n        if (IsDigit[this.bytes.peek()]) {\n            var secondNum = this.parseRawNumber();\n            this.skipWhitespaceAndComments();\n            if (this.bytes.peek() === CharCodes.R) {\n                this.bytes.assertNext(CharCodes.R);\n                return PDFRef.of(firstNum, secondNum);\n            }\n        }\n        this.bytes.moveTo(lookaheadStart);\n        return PDFNumber.of(firstNum);\n    };\n    // TODO: Maybe update PDFHexString.of() logic to remove whitespace and validate input?\n    PDFObjectParser.prototype.parseHexString = function () {\n        var value = '';\n        this.bytes.assertNext(CharCodes.LessThan);\n        while (!this.bytes.done() && this.bytes.peek() !== CharCodes.GreaterThan) {\n            value += charFromCode(this.bytes.next());\n        }\n        this.bytes.assertNext(CharCodes.GreaterThan);\n        return PDFHexString.of(value);\n    };\n    PDFObjectParser.prototype.parseString = function () {\n        var nestingLvl = 0;\n        var isEscaped = false;\n        var value = '';\n        while (!this.bytes.done()) {\n            var byte = this.bytes.next();\n            value += charFromCode(byte);\n            // Check for unescaped parenthesis\n            if (!isEscaped) {\n                if (byte === CharCodes.LeftParen)\n                    nestingLvl += 1;\n                if (byte === CharCodes.RightParen)\n                    nestingLvl -= 1;\n            }\n            // Track whether current character is being escaped or not\n            if (byte === CharCodes.BackSlash) {\n                isEscaped = !isEscaped;\n            }\n            else if (isEscaped) {\n                isEscaped = false;\n            }\n            // Once (if) the unescaped parenthesis balance out, return their contents\n            if (nestingLvl === 0) {\n                // Remove the outer parens so they aren't part of the contents\n                return PDFString.of(value.substring(1, value.length - 1));\n            }\n        }\n        throw new UnbalancedParenthesisError(this.bytes.position());\n    };\n    // TODO: Compare performance of string concatenation to charFromCode(...bytes)\n    // TODO: Maybe preallocate small Uint8Array if can use charFromCode?\n    PDFObjectParser.prototype.parseName = function () {\n        this.bytes.assertNext(CharCodes.ForwardSlash);\n        var name = '';\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (IsWhitespace[byte] || IsDelimiter[byte])\n                break;\n            name += charFromCode(byte);\n            this.bytes.next();\n        }\n        return PDFName.of(name);\n    };\n    PDFObjectParser.prototype.parseArray = function () {\n        this.bytes.assertNext(CharCodes.LeftSquareBracket);\n        this.skipWhitespaceAndComments();\n        var pdfArray = PDFArray.withContext(this.context);\n        while (this.bytes.peek() !== CharCodes.RightSquareBracket) {\n            var element = this.parseObject();\n            pdfArray.push(element);\n            this.skipWhitespaceAndComments();\n        }\n        this.bytes.assertNext(CharCodes.RightSquareBracket);\n        return pdfArray;\n    };\n    PDFObjectParser.prototype.parseDict = function () {\n        this.bytes.assertNext(CharCodes.LessThan);\n        this.bytes.assertNext(CharCodes.LessThan);\n        this.skipWhitespaceAndComments();\n        var dict = new Map();\n        while (!this.bytes.done() &&\n            this.bytes.peek() !== CharCodes.GreaterThan &&\n            this.bytes.peekAhead(1) !== CharCodes.GreaterThan) {\n            var key = this.parseName();\n            var value = this.parseObject();\n            dict.set(key, value);\n            this.skipWhitespaceAndComments();\n        }\n        this.skipWhitespaceAndComments();\n        this.bytes.assertNext(CharCodes.GreaterThan);\n        this.bytes.assertNext(CharCodes.GreaterThan);\n        var Type = dict.get(PDFName.of('Type'));\n        if (Type === PDFName.of('Catalog')) {\n            return PDFCatalog.fromMapWithContext(dict, this.context);\n        }\n        else if (Type === PDFName.of('Pages')) {\n            return PDFPageTree.fromMapWithContext(dict, this.context);\n        }\n        else if (Type === PDFName.of('Page')) {\n            return PDFPageLeaf.fromMapWithContext(dict, this.context);\n        }\n        else {\n            return PDFDict.fromMapWithContext(dict, this.context);\n        }\n    };\n    PDFObjectParser.prototype.parseDictOrStream = function () {\n        var startPos = this.bytes.position();\n        var dict = this.parseDict();\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.streamEOF1) &&\n            !this.matchKeyword(Keywords.streamEOF2) &&\n            !this.matchKeyword(Keywords.streamEOF3) &&\n            !this.matchKeyword(Keywords.streamEOF4) &&\n            !this.matchKeyword(Keywords.stream)) {\n            return dict;\n        }\n        var start = this.bytes.offset();\n        var end;\n        var Length = dict.get(PDFName.of('Length'));\n        if (Length instanceof PDFNumber) {\n            end = start + Length.asNumber();\n            this.bytes.moveTo(end);\n            this.skipWhitespaceAndComments();\n            if (!this.matchKeyword(Keywords.endstream)) {\n                this.bytes.moveTo(start);\n                end = this.findEndOfStreamFallback(startPos);\n            }\n        }\n        else {\n            end = this.findEndOfStreamFallback(startPos);\n        }\n        var contents = this.bytes.slice(start, end);\n        return PDFRawStream.of(dict, contents);\n    };\n    PDFObjectParser.prototype.findEndOfStreamFallback = function (startPos) {\n        // Move to end of stream, while handling nested streams\n        var nestingLvl = 1;\n        var end = this.bytes.offset();\n        while (!this.bytes.done()) {\n            end = this.bytes.offset();\n            if (this.matchKeyword(Keywords.stream)) {\n                nestingLvl += 1;\n            }\n            else if (this.matchKeyword(Keywords.EOF1endstream) ||\n                this.matchKeyword(Keywords.EOF2endstream) ||\n                this.matchKeyword(Keywords.EOF3endstream) ||\n                this.matchKeyword(Keywords.endstream)) {\n                nestingLvl -= 1;\n            }\n            else {\n                this.bytes.next();\n            }\n            if (nestingLvl === 0)\n                break;\n        }\n        if (nestingLvl !== 0)\n            throw new PDFStreamParsingError(startPos);\n        return end;\n    };\n    PDFObjectParser.forBytes = function (bytes, context, capNumbers) { return new PDFObjectParser(ByteStream.of(bytes), context, capNumbers); };\n    PDFObjectParser.forByteStream = function (byteStream, context, capNumbers) {\n        if (capNumbers === void 0) { capNumbers = false; }\n        return new PDFObjectParser(byteStream, context, capNumbers);\n    };\n    return PDFObjectParser;\n}(BaseParser));\nexport default PDFObjectParser;\n//# sourceMappingURL=PDFObjectParser.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { ReparseError } from \"../errors\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRef from \"../objects/PDFRef\";\nimport ByteStream from \"./ByteStream\";\nimport PDFObjectParser from \"./PDFObjectParser\";\nimport { waitForTick } from \"../../utils\";\nvar PDFObjectStreamParser = /** @class */ (function (_super) {\n    __extends(PDFObjectStreamParser, _super);\n    function PDFObjectStreamParser(rawStream, shouldWaitForTick) {\n        var _this = _super.call(this, ByteStream.fromPDFRawStream(rawStream), rawStream.dict.context) || this;\n        var dict = rawStream.dict;\n        _this.alreadyParsed = false;\n        _this.shouldWaitForTick = shouldWaitForTick || (function () { return false; });\n        _this.firstOffset = dict.lookup(PDFName.of('First'), PDFNumber).asNumber();\n        _this.objectCount = dict.lookup(PDFName.of('N'), PDFNumber).asNumber();\n        return _this;\n    }\n    PDFObjectStreamParser.prototype.parseIntoContext = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var offsetsAndObjectNumbers, idx, len, _a, objectNumber, offset, object, ref;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (this.alreadyParsed) {\n                            throw new ReparseError('PDFObjectStreamParser', 'parseIntoContext');\n                        }\n                        this.alreadyParsed = true;\n                        offsetsAndObjectNumbers = this.parseOffsetsAndObjectNumbers();\n                        idx = 0, len = offsetsAndObjectNumbers.length;\n                        _b.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        _a = offsetsAndObjectNumbers[idx], objectNumber = _a.objectNumber, offset = _a.offset;\n                        this.bytes.moveTo(this.firstOffset + offset);\n                        object = this.parseObject();\n                        ref = PDFRef.of(objectNumber, 0);\n                        this.context.assign(ref, object);\n                        if (!this.shouldWaitForTick()) return [3 /*break*/, 3];\n                        return [4 /*yield*/, waitForTick()];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PDFObjectStreamParser.prototype.parseOffsetsAndObjectNumbers = function () {\n        var offsetsAndObjectNumbers = [];\n        for (var idx = 0, len = this.objectCount; idx < len; idx++) {\n            this.skipWhitespaceAndComments();\n            var objectNumber = this.parseRawInt();\n            this.skipWhitespaceAndComments();\n            var offset = this.parseRawInt();\n            offsetsAndObjectNumbers.push({ objectNumber: objectNumber, offset: offset });\n        }\n        return offsetsAndObjectNumbers;\n    };\n    PDFObjectStreamParser.forStream = function (rawStream, shouldWaitForTick) { return new PDFObjectStreamParser(rawStream, shouldWaitForTick); };\n    return PDFObjectStreamParser;\n}(PDFObjectParser));\nexport default PDFObjectStreamParser;\n//# sourceMappingURL=PDFObjectStreamParser.js.map","import { ReparseError } from \"../errors\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRef from \"../objects/PDFRef\";\nimport ByteStream from \"./ByteStream\";\nvar PDFXRefStreamParser = /** @class */ (function () {\n    function PDFXRefStreamParser(rawStream) {\n        this.alreadyParsed = false;\n        this.dict = rawStream.dict;\n        this.bytes = ByteStream.fromPDFRawStream(rawStream);\n        this.context = this.dict.context;\n        var Size = this.dict.lookup(PDFName.of('Size'), PDFNumber);\n        var Index = this.dict.lookup(PDFName.of('Index'));\n        if (Index instanceof PDFArray) {\n            this.subsections = [];\n            for (var idx = 0, len = Index.size(); idx < len; idx += 2) {\n                var firstObjectNumber = Index.lookup(idx + 0, PDFNumber).asNumber();\n                var length_1 = Index.lookup(idx + 1, PDFNumber).asNumber();\n                this.subsections.push({ firstObjectNumber: firstObjectNumber, length: length_1 });\n            }\n        }\n        else {\n            this.subsections = [{ firstObjectNumber: 0, length: Size.asNumber() }];\n        }\n        var W = this.dict.lookup(PDFName.of('W'), PDFArray);\n        this.byteWidths = [-1, -1, -1];\n        for (var idx = 0, len = W.size(); idx < len; idx++) {\n            this.byteWidths[idx] = W.lookup(idx, PDFNumber).asNumber();\n        }\n    }\n    PDFXRefStreamParser.prototype.parseIntoContext = function () {\n        if (this.alreadyParsed) {\n            throw new ReparseError('PDFXRefStreamParser', 'parseIntoContext');\n        }\n        this.alreadyParsed = true;\n        this.context.trailerInfo = {\n            Root: this.dict.get(PDFName.of('Root')),\n            Encrypt: this.dict.get(PDFName.of('Encrypt')),\n            Info: this.dict.get(PDFName.of('Info')),\n            ID: this.dict.get(PDFName.of('ID')),\n        };\n        var entries = this.parseEntries();\n        // for (let idx = 0, len = entries.length; idx < len; idx++) {\n        // const entry = entries[idx];\n        // if (entry.deleted) this.context.delete(entry.ref);\n        // }\n        return entries;\n    };\n    PDFXRefStreamParser.prototype.parseEntries = function () {\n        var entries = [];\n        var _a = this.byteWidths, typeFieldWidth = _a[0], offsetFieldWidth = _a[1], genFieldWidth = _a[2];\n        for (var subsectionIdx = 0, subsectionLen = this.subsections.length; subsectionIdx < subsectionLen; subsectionIdx++) {\n            var _b = this.subsections[subsectionIdx], firstObjectNumber = _b.firstObjectNumber, length_2 = _b.length;\n            for (var objIdx = 0; objIdx < length_2; objIdx++) {\n                var type = 0;\n                for (var idx = 0, len = typeFieldWidth; idx < len; idx++) {\n                    type = (type << 8) | this.bytes.next();\n                }\n                var offset = 0;\n                for (var idx = 0, len = offsetFieldWidth; idx < len; idx++) {\n                    offset = (offset << 8) | this.bytes.next();\n                }\n                var generationNumber = 0;\n                for (var idx = 0, len = genFieldWidth; idx < len; idx++) {\n                    generationNumber = (generationNumber << 8) | this.bytes.next();\n                }\n                // When the `type` field is absent, it defaults to 1\n                if (typeFieldWidth === 0)\n                    type = 1;\n                var objectNumber = firstObjectNumber + objIdx;\n                var entry = {\n                    ref: PDFRef.of(objectNumber, generationNumber),\n                    offset: offset,\n                    deleted: type === 0,\n                    inObjectStream: type === 2,\n                };\n                entries.push(entry);\n            }\n        }\n        return entries;\n    };\n    PDFXRefStreamParser.forStream = function (rawStream) {\n        return new PDFXRefStreamParser(rawStream);\n    };\n    return PDFXRefStreamParser;\n}());\nexport default PDFXRefStreamParser;\n//# sourceMappingURL=PDFXRefStreamParser.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport PDFCrossRefSection from \"../document/PDFCrossRefSection\";\nimport PDFHeader from \"../document/PDFHeader\";\nimport PDFTrailer from \"../document/PDFTrailer\";\nimport { MissingKeywordError, MissingPDFHeaderError, PDFInvalidObjectParsingError, ReparseError, StalledParserError, } from \"../errors\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFInvalidObject from \"../objects/PDFInvalidObject\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFRawStream from \"../objects/PDFRawStream\";\nimport PDFRef from \"../objects/PDFRef\";\nimport ByteStream from \"./ByteStream\";\nimport PDFObjectParser from \"./PDFObjectParser\";\nimport PDFObjectStreamParser from \"./PDFObjectStreamParser\";\nimport PDFXRefStreamParser from \"./PDFXRefStreamParser\";\nimport PDFContext from \"../PDFContext\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { Keywords } from \"../syntax/Keywords\";\nimport { IsDigit } from \"../syntax/Numeric\";\nimport { waitForTick } from \"../../utils\";\nvar PDFParser = /** @class */ (function (_super) {\n    __extends(PDFParser, _super);\n    function PDFParser(pdfBytes, objectsPerTick, throwOnInvalidObject, capNumbers) {\n        if (objectsPerTick === void 0) { objectsPerTick = Infinity; }\n        if (throwOnInvalidObject === void 0) { throwOnInvalidObject = false; }\n        if (capNumbers === void 0) { capNumbers = false; }\n        var _this = _super.call(this, ByteStream.of(pdfBytes), PDFContext.create(), capNumbers) || this;\n        _this.alreadyParsed = false;\n        _this.parsedObjects = 0;\n        _this.shouldWaitForTick = function () {\n            _this.parsedObjects += 1;\n            return _this.parsedObjects % _this.objectsPerTick === 0;\n        };\n        _this.objectsPerTick = objectsPerTick;\n        _this.throwOnInvalidObject = throwOnInvalidObject;\n        return _this;\n    }\n    PDFParser.prototype.parseDocument = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var prevOffset, offset;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.alreadyParsed) {\n                            throw new ReparseError('PDFParser', 'parseDocument');\n                        }\n                        this.alreadyParsed = true;\n                        this.context.header = this.parseHeader();\n                        _a.label = 1;\n                    case 1:\n                        if (!!this.bytes.done()) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.parseDocumentSection()];\n                    case 2:\n                        _a.sent();\n                        offset = this.bytes.offset();\n                        if (offset === prevOffset) {\n                            throw new StalledParserError(this.bytes.position());\n                        }\n                        prevOffset = offset;\n                        return [3 /*break*/, 1];\n                    case 3:\n                        this.maybeRecoverRoot();\n                        if (this.context.lookup(PDFRef.of(0))) {\n                            console.warn('Removing parsed object: 0 0 R');\n                            this.context.delete(PDFRef.of(0));\n                        }\n                        return [2 /*return*/, this.context];\n                }\n            });\n        });\n    };\n    PDFParser.prototype.maybeRecoverRoot = function () {\n        var isValidCatalog = function (obj) {\n            return obj instanceof PDFDict &&\n                obj.lookup(PDFName.of('Type')) === PDFName.of('Catalog');\n        };\n        var catalog = this.context.lookup(this.context.trailerInfo.Root);\n        if (!isValidCatalog(catalog)) {\n            var indirectObjects = this.context.enumerateIndirectObjects();\n            for (var idx = 0, len = indirectObjects.length; idx < len; idx++) {\n                var _a = indirectObjects[idx], ref = _a[0], object = _a[1];\n                if (isValidCatalog(object)) {\n                    this.context.trailerInfo.Root = ref;\n                }\n            }\n        }\n    };\n    PDFParser.prototype.parseHeader = function () {\n        while (!this.bytes.done()) {\n            if (this.matchKeyword(Keywords.header)) {\n                var major = this.parseRawInt();\n                this.bytes.assertNext(CharCodes.Period);\n                var minor = this.parseRawInt();\n                var header = PDFHeader.forVersion(major, minor);\n                this.skipBinaryHeaderComment();\n                return header;\n            }\n            this.bytes.next();\n        }\n        throw new MissingPDFHeaderError(this.bytes.position());\n    };\n    PDFParser.prototype.parseIndirectObjectHeader = function () {\n        this.skipWhitespaceAndComments();\n        var objectNumber = this.parseRawInt();\n        this.skipWhitespaceAndComments();\n        var generationNumber = this.parseRawInt();\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.obj)) {\n            throw new MissingKeywordError(this.bytes.position(), Keywords.obj);\n        }\n        return PDFRef.of(objectNumber, generationNumber);\n    };\n    PDFParser.prototype.matchIndirectObjectHeader = function () {\n        var initialOffset = this.bytes.offset();\n        try {\n            this.parseIndirectObjectHeader();\n            return true;\n        }\n        catch (e) {\n            this.bytes.moveTo(initialOffset);\n            return false;\n        }\n    };\n    PDFParser.prototype.parseIndirectObject = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var ref, object;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ref = this.parseIndirectObjectHeader();\n                        this.skipWhitespaceAndComments();\n                        object = this.parseObject();\n                        this.skipWhitespaceAndComments();\n                        // if (!this.matchKeyword(Keywords.endobj)) {\n                        // throw new MissingKeywordError(this.bytes.position(), Keywords.endobj);\n                        // }\n                        // TODO: Log a warning if this fails...\n                        this.matchKeyword(Keywords.endobj);\n                        if (!(object instanceof PDFRawStream &&\n                            object.dict.lookup(PDFName.of('Type')) === PDFName.of('ObjStm'))) return [3 /*break*/, 2];\n                        return [4 /*yield*/, PDFObjectStreamParser.forStream(object, this.shouldWaitForTick).parseIntoContext()];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        if (object instanceof PDFRawStream &&\n                            object.dict.lookup(PDFName.of('Type')) === PDFName.of('XRef')) {\n                            PDFXRefStreamParser.forStream(object).parseIntoContext();\n                        }\n                        else {\n                            this.context.assign(ref, object);\n                        }\n                        _a.label = 3;\n                    case 3: return [2 /*return*/, ref];\n                }\n            });\n        });\n    };\n    // TODO: Improve and clean this up\n    PDFParser.prototype.tryToParseInvalidIndirectObject = function () {\n        var startPos = this.bytes.position();\n        var msg = \"Trying to parse invalid object: \" + JSON.stringify(startPos) + \")\";\n        if (this.throwOnInvalidObject)\n            throw new Error(msg);\n        console.warn(msg);\n        var ref = this.parseIndirectObjectHeader();\n        console.warn(\"Invalid object ref: \" + ref);\n        this.skipWhitespaceAndComments();\n        var start = this.bytes.offset();\n        var failed = true;\n        while (!this.bytes.done()) {\n            if (this.matchKeyword(Keywords.endobj)) {\n                failed = false;\n            }\n            if (!failed)\n                break;\n            this.bytes.next();\n        }\n        if (failed)\n            throw new PDFInvalidObjectParsingError(startPos);\n        var end = this.bytes.offset() - Keywords.endobj.length;\n        var object = PDFInvalidObject.of(this.bytes.slice(start, end));\n        this.context.assign(ref, object);\n        return ref;\n    };\n    PDFParser.prototype.parseIndirectObjects = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var initialOffset, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.skipWhitespaceAndComments();\n                        _a.label = 1;\n                    case 1:\n                        if (!(!this.bytes.done() && IsDigit[this.bytes.peek()])) return [3 /*break*/, 8];\n                        initialOffset = this.bytes.offset();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.parseIndirectObject()];\n                    case 3:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        e_1 = _a.sent();\n                        // TODO: Add tracing/logging mechanism to track when this happens!\n                        this.bytes.moveTo(initialOffset);\n                        this.tryToParseInvalidIndirectObject();\n                        return [3 /*break*/, 5];\n                    case 5:\n                        this.skipWhitespaceAndComments();\n                        // TODO: Can this be done only when needed, to avoid harming performance?\n                        this.skipJibberish();\n                        if (!this.shouldWaitForTick()) return [3 /*break*/, 7];\n                        return [4 /*yield*/, waitForTick()];\n                    case 6:\n                        _a.sent();\n                        _a.label = 7;\n                    case 7: return [3 /*break*/, 1];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PDFParser.prototype.maybeParseCrossRefSection = function () {\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.xref))\n            return;\n        this.skipWhitespaceAndComments();\n        var objectNumber = -1;\n        var xref = PDFCrossRefSection.createEmpty();\n        while (!this.bytes.done() && IsDigit[this.bytes.peek()]) {\n            var firstInt = this.parseRawInt();\n            this.skipWhitespaceAndComments();\n            var secondInt = this.parseRawInt();\n            this.skipWhitespaceAndComments();\n            var byte = this.bytes.peek();\n            if (byte === CharCodes.n || byte === CharCodes.f) {\n                var ref = PDFRef.of(objectNumber, secondInt);\n                if (this.bytes.next() === CharCodes.n) {\n                    xref.addEntry(ref, firstInt);\n                }\n                else {\n                    // this.context.delete(ref);\n                    xref.addDeletedEntry(ref, firstInt);\n                }\n                objectNumber += 1;\n            }\n            else {\n                objectNumber = firstInt;\n            }\n            this.skipWhitespaceAndComments();\n        }\n        return xref;\n    };\n    PDFParser.prototype.maybeParseTrailerDict = function () {\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.trailer))\n            return;\n        this.skipWhitespaceAndComments();\n        var dict = this.parseDict();\n        var context = this.context;\n        context.trailerInfo = {\n            Root: dict.get(PDFName.of('Root')) || context.trailerInfo.Root,\n            Encrypt: dict.get(PDFName.of('Encrypt')) || context.trailerInfo.Encrypt,\n            Info: dict.get(PDFName.of('Info')) || context.trailerInfo.Info,\n            ID: dict.get(PDFName.of('ID')) || context.trailerInfo.ID,\n        };\n    };\n    PDFParser.prototype.maybeParseTrailer = function () {\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.startxref))\n            return;\n        this.skipWhitespaceAndComments();\n        var offset = this.parseRawInt();\n        this.skipWhitespace();\n        this.matchKeyword(Keywords.eof);\n        this.skipWhitespaceAndComments();\n        this.matchKeyword(Keywords.eof);\n        this.skipWhitespaceAndComments();\n        return PDFTrailer.forLastCrossRefSectionOffset(offset);\n    };\n    PDFParser.prototype.parseDocumentSection = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.parseIndirectObjects()];\n                    case 1:\n                        _a.sent();\n                        this.maybeParseCrossRefSection();\n                        this.maybeParseTrailerDict();\n                        this.maybeParseTrailer();\n                        // TODO: Can this be done only when needed, to avoid harming performance?\n                        this.skipJibberish();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * This operation is not necessary for valid PDF files. But some invalid PDFs\n     * contain jibberish in between indirect objects. This method is designed to\n     * skip past that jibberish, should it exist, until it reaches the next\n     * indirect object header, an xref table section, or the file trailer.\n     */\n    PDFParser.prototype.skipJibberish = function () {\n        this.skipWhitespaceAndComments();\n        while (!this.bytes.done()) {\n            var initialOffset = this.bytes.offset();\n            var byte = this.bytes.peek();\n            var isAlphaNumeric = byte >= CharCodes.Space && byte <= CharCodes.Tilde;\n            if (isAlphaNumeric) {\n                if (this.matchKeyword(Keywords.xref) ||\n                    this.matchKeyword(Keywords.trailer) ||\n                    this.matchKeyword(Keywords.startxref) ||\n                    this.matchIndirectObjectHeader()) {\n                    this.bytes.moveTo(initialOffset);\n                    break;\n                }\n            }\n            this.bytes.next();\n        }\n    };\n    /**\n     * Skips the binary comment following a PDF header. The specification\n     * defines this binary comment (section 7.5.2 File Header) as a sequence of 4\n     * or more bytes that are 128 or greater, and which are preceded by a \"%\".\n     *\n     * This would imply that to strip out this binary comment, we could check for\n     * a sequence of bytes starting with \"%\", and remove all subsequent bytes that\n     * are 128 or greater. This works for many documents that properly comply with\n     * the spec. But in the wild, there are PDFs that omit the leading \"%\", and\n     * include bytes that are less than 128 (e.g. 0 or 1). So in order to parse\n     * these headers correctly, we just throw out all bytes leading up to the\n     * first indirect object header.\n     */\n    PDFParser.prototype.skipBinaryHeaderComment = function () {\n        this.skipWhitespaceAndComments();\n        try {\n            var initialOffset = this.bytes.offset();\n            this.parseIndirectObjectHeader();\n            this.bytes.moveTo(initialOffset);\n        }\n        catch (e) {\n            this.bytes.next();\n            this.skipWhitespaceAndComments();\n        }\n    };\n    PDFParser.forBytesWithOptions = function (pdfBytes, objectsPerTick, throwOnInvalidObject, capNumbers) {\n        return new PDFParser(pdfBytes, objectsPerTick, throwOnInvalidObject, capNumbers);\n    };\n    return PDFParser;\n}(PDFObjectParser));\nexport default PDFParser;\n//# sourceMappingURL=PDFParser.js.map","var flag = function (bitIndex) { return 1 << bitIndex; };\n/** From PDF spec table 165 */\nexport var AnnotationFlags;\n(function (AnnotationFlags) {\n    /**\n     * If set, do not display the annotation if it does not belong to one of the\n     * standard annotation types and no annotation handler is available. If clear,\n     * display such an unknown annotation using an appearance stream specified by\n     * its appearance dictionary, if any.\n     */\n    AnnotationFlags[AnnotationFlags[\"Invisible\"] = flag(1 - 1)] = \"Invisible\";\n    /**\n     * If set, do not display or print the annotation or allow it to interact with\n     * the user, regardless of its annotation type or whether an annotation\n     * handler is available.\n     *\n     * In cases where screen space is limited, the ability to hide and show\n     * annotations selectively can be used in combination with appearance streams\n     * to display auxiliary pop-up information similar in function to online help\n     * systems.\n     */\n    AnnotationFlags[AnnotationFlags[\"Hidden\"] = flag(2 - 1)] = \"Hidden\";\n    /**\n     * If set, print the annotation when the page is printed. If clear, never\n     * print the annotation, regardless of whether it is displayed on the screen.\n     *\n     * This can be useful for annotations representing interactive pushbuttons,\n     * which would serve no meaningful purpose on the printed page.\n     */\n    AnnotationFlags[AnnotationFlags[\"Print\"] = flag(3 - 1)] = \"Print\";\n    /**\n     * If set, do not scale the annotationâ€™s appearance to match the magnification\n     * of the page. The location of the annotation on the page (defined by the\n     * upper-left corner of its annotation rectangle) shall remain fixed,\n     * regardless of the page magnification.\n     */\n    AnnotationFlags[AnnotationFlags[\"NoZoom\"] = flag(4 - 1)] = \"NoZoom\";\n    /**\n     * If set, do not rotate the annotationâ€™s appearance to match the rotation of\n     * the page. The upper-left corner of the annotation rectangle shall remain in\n     * a fixed location on the page, regardless of the page rotation.\n     */\n    AnnotationFlags[AnnotationFlags[\"NoRotate\"] = flag(5 - 1)] = \"NoRotate\";\n    /**\n     * If set, do not display the annotation on the screen or allow it to interact\n     * with the user. The annotation may be printed (depending on the setting of\n     * the Print flag) but should be considered hidden for purposes of on-screen\n     * display and user interaction.\n     */\n    AnnotationFlags[AnnotationFlags[\"NoView\"] = flag(6 - 1)] = \"NoView\";\n    /**\n     * If set, do not allow the annotation to interact with the user. The\n     * annotation may be displayed or printed (depending on the settings of the\n     * NoView and Print flags) but should not respond to mouse clicks or change\n     * its appearance in response to mouse motions.\n     *\n     * This flag shall be ignored for widget annotations; its function is\n     * subsumed by the ReadOnly flag of the associated form field.\n     */\n    AnnotationFlags[AnnotationFlags[\"ReadOnly\"] = flag(7 - 1)] = \"ReadOnly\";\n    /**\n     * If set, do not allow the annotation to be deleted or its properties\n     * (including position and size) to be modified by the user. However, this\n     * flag does not restrict changes to the annotationâ€™s contents, such as the\n     * value of a form field.\n     */\n    AnnotationFlags[AnnotationFlags[\"Locked\"] = flag(8 - 1)] = \"Locked\";\n    /**\n     * If set, invert the interpretation of the NoView flag for certain events.\n     *\n     * A typical use is to have an annotation that appears only when a mouse\n     * cursor is held over it.\n     */\n    AnnotationFlags[AnnotationFlags[\"ToggleNoView\"] = flag(9 - 1)] = \"ToggleNoView\";\n    /**\n     * If set, do not allow the contents of the annotation to be modified by the\n     * user. This flag does not restrict deletion of the annotation or changes to\n     * other annotation properties, such as position and size.\n     */\n    AnnotationFlags[AnnotationFlags[\"LockedContents\"] = flag(10 - 1)] = \"LockedContents\";\n})(AnnotationFlags || (AnnotationFlags = {}));\n//# sourceMappingURL=flags.js.map","import { PDFName, PDFNumber } from \"../core\";\nexport var asPDFName = function (name) {\n    return name instanceof PDFName ? name : PDFName.of(name);\n};\nexport var asPDFNumber = function (num) {\n    return num instanceof PDFNumber ? num : PDFNumber.of(num);\n};\nexport var asNumber = function (num) {\n    return num instanceof PDFNumber ? num.asNumber() : num;\n};\n//# sourceMappingURL=objects.js.map","import { assertIs, error } from \"../utils\";\nexport var RotationTypes;\n(function (RotationTypes) {\n    RotationTypes[\"Degrees\"] = \"degrees\";\n    RotationTypes[\"Radians\"] = \"radians\";\n})(RotationTypes || (RotationTypes = {}));\nexport var radians = function (radianAngle) {\n    assertIs(radianAngle, 'radianAngle', ['number']);\n    return { type: RotationTypes.Radians, angle: radianAngle };\n};\nexport var degrees = function (degreeAngle) {\n    assertIs(degreeAngle, 'degreeAngle', ['number']);\n    return { type: RotationTypes.Degrees, angle: degreeAngle };\n};\nvar Radians = RotationTypes.Radians, Degrees = RotationTypes.Degrees;\nexport var degreesToRadians = function (degree) { return (degree * Math.PI) / 180; };\nexport var radiansToDegrees = function (radian) { return (radian * 180) / Math.PI; };\n// prettier-ignore\nexport var toRadians = function (rotation) {\n    return rotation.type === Radians ? rotation.angle\n        : rotation.type === Degrees ? degreesToRadians(rotation.angle)\n            : error(\"Invalid rotation: \" + JSON.stringify(rotation));\n};\n// prettier-ignore\nexport var toDegrees = function (rotation) {\n    return rotation.type === Radians ? radiansToDegrees(rotation.angle)\n        : rotation.type === Degrees ? rotation.angle\n            : error(\"Invalid rotation: \" + JSON.stringify(rotation));\n};\nexport var reduceRotation = function (degreeAngle) {\n    if (degreeAngle === void 0) { degreeAngle = 0; }\n    var quadrants = (degreeAngle / 90) % 4;\n    if (quadrants === 0)\n        return 0;\n    if (quadrants === 1)\n        return 90;\n    if (quadrants === 2)\n        return 180;\n    if (quadrants === 3)\n        return 270;\n    return 0; // `degreeAngle` is not a multiple of 90\n};\nexport var adjustDimsForRotation = function (dims, degreeAngle) {\n    if (degreeAngle === void 0) { degreeAngle = 0; }\n    var rotation = reduceRotation(degreeAngle);\n    return rotation === 90 || rotation === 270\n        ? { width: dims.height, height: dims.width }\n        : { width: dims.width, height: dims.height };\n};\nexport var rotateRectangle = function (rectangle, borderWidth, degreeAngle) {\n    if (borderWidth === void 0) { borderWidth = 0; }\n    if (degreeAngle === void 0) { degreeAngle = 0; }\n    var x = rectangle.x, y = rectangle.y, w = rectangle.width, h = rectangle.height;\n    var r = reduceRotation(degreeAngle);\n    var b = borderWidth / 2;\n    // prettier-ignore\n    if (r === 0)\n        return { x: x - b, y: y - b, width: w, height: h };\n    else if (r === 90)\n        return { x: x - h + b, y: y - b, width: h, height: w };\n    else if (r === 180)\n        return { x: x - w + b, y: y - h + b, width: w, height: h };\n    else if (r === 270)\n        return { x: x - b, y: y - w + b, width: h, height: w };\n    else\n        return { x: x - b, y: y - b, width: w, height: h };\n};\n//# sourceMappingURL=rotations.js.map","import { asNumber, asPDFName, asPDFNumber } from \"./objects\";\nimport { degreesToRadians } from \"./rotations\";\nimport { PDFOperator, PDFOperatorNames as Ops, } from \"../core\";\n/* ==================== Clipping Path Operators ==================== */\nexport var clip = function () { return PDFOperator.of(Ops.ClipNonZero); };\nexport var clipEvenOdd = function () { return PDFOperator.of(Ops.ClipEvenOdd); };\n/* ==================== Graphics State Operators ==================== */\nvar cos = Math.cos, sin = Math.sin, tan = Math.tan;\nexport var concatTransformationMatrix = function (a, b, c, d, e, f) {\n    return PDFOperator.of(Ops.ConcatTransformationMatrix, [\n        asPDFNumber(a),\n        asPDFNumber(b),\n        asPDFNumber(c),\n        asPDFNumber(d),\n        asPDFNumber(e),\n        asPDFNumber(f),\n    ]);\n};\nexport var translate = function (xPos, yPos) {\n    return concatTransformationMatrix(1, 0, 0, 1, xPos, yPos);\n};\nexport var scale = function (xPos, yPos) {\n    return concatTransformationMatrix(xPos, 0, 0, yPos, 0, 0);\n};\nexport var rotateRadians = function (angle) {\n    return concatTransformationMatrix(cos(asNumber(angle)), sin(asNumber(angle)), -sin(asNumber(angle)), cos(asNumber(angle)), 0, 0);\n};\nexport var rotateDegrees = function (angle) {\n    return rotateRadians(degreesToRadians(asNumber(angle)));\n};\nexport var skewRadians = function (xSkewAngle, ySkewAngle) {\n    return concatTransformationMatrix(1, tan(asNumber(xSkewAngle)), tan(asNumber(ySkewAngle)), 1, 0, 0);\n};\nexport var skewDegrees = function (xSkewAngle, ySkewAngle) {\n    return skewRadians(degreesToRadians(asNumber(xSkewAngle)), degreesToRadians(asNumber(ySkewAngle)));\n};\nexport var setDashPattern = function (dashArray, dashPhase) {\n    return PDFOperator.of(Ops.SetLineDashPattern, [\n        \"[\" + dashArray.map(asPDFNumber).join(' ') + \"]\",\n        asPDFNumber(dashPhase),\n    ]);\n};\nexport var restoreDashPattern = function () { return setDashPattern([], 0); };\nexport var LineCapStyle;\n(function (LineCapStyle) {\n    LineCapStyle[LineCapStyle[\"Butt\"] = 0] = \"Butt\";\n    LineCapStyle[LineCapStyle[\"Round\"] = 1] = \"Round\";\n    LineCapStyle[LineCapStyle[\"Projecting\"] = 2] = \"Projecting\";\n})(LineCapStyle || (LineCapStyle = {}));\nexport var setLineCap = function (style) {\n    return PDFOperator.of(Ops.SetLineCapStyle, [asPDFNumber(style)]);\n};\nexport var LineJoinStyle;\n(function (LineJoinStyle) {\n    LineJoinStyle[LineJoinStyle[\"Miter\"] = 0] = \"Miter\";\n    LineJoinStyle[LineJoinStyle[\"Round\"] = 1] = \"Round\";\n    LineJoinStyle[LineJoinStyle[\"Bevel\"] = 2] = \"Bevel\";\n})(LineJoinStyle || (LineJoinStyle = {}));\nexport var setLineJoin = function (style) {\n    return PDFOperator.of(Ops.SetLineJoinStyle, [asPDFNumber(style)]);\n};\nexport var setGraphicsState = function (state) {\n    return PDFOperator.of(Ops.SetGraphicsStateParams, [asPDFName(state)]);\n};\nexport var pushGraphicsState = function () { return PDFOperator.of(Ops.PushGraphicsState); };\nexport var popGraphicsState = function () { return PDFOperator.of(Ops.PopGraphicsState); };\nexport var setLineWidth = function (width) {\n    return PDFOperator.of(Ops.SetLineWidth, [asPDFNumber(width)]);\n};\n/* ==================== Path Construction Operators ==================== */\nexport var appendBezierCurve = function (x1, y1, x2, y2, x3, y3) {\n    return PDFOperator.of(Ops.AppendBezierCurve, [\n        asPDFNumber(x1),\n        asPDFNumber(y1),\n        asPDFNumber(x2),\n        asPDFNumber(y2),\n        asPDFNumber(x3),\n        asPDFNumber(y3),\n    ]);\n};\nexport var appendQuadraticCurve = function (x1, y1, x2, y2) {\n    return PDFOperator.of(Ops.CurveToReplicateInitialPoint, [\n        asPDFNumber(x1),\n        asPDFNumber(y1),\n        asPDFNumber(x2),\n        asPDFNumber(y2),\n    ]);\n};\nexport var closePath = function () { return PDFOperator.of(Ops.ClosePath); };\nexport var moveTo = function (xPos, yPos) {\n    return PDFOperator.of(Ops.MoveTo, [asPDFNumber(xPos), asPDFNumber(yPos)]);\n};\nexport var lineTo = function (xPos, yPos) {\n    return PDFOperator.of(Ops.LineTo, [asPDFNumber(xPos), asPDFNumber(yPos)]);\n};\n/**\n * @param xPos x coordinate for the lower left corner of the rectangle\n * @param yPos y coordinate for the lower left corner of the rectangle\n * @param width width of the rectangle\n * @param height height of the rectangle\n */\nexport var rectangle = function (xPos, yPos, width, height) {\n    return PDFOperator.of(Ops.AppendRectangle, [\n        asPDFNumber(xPos),\n        asPDFNumber(yPos),\n        asPDFNumber(width),\n        asPDFNumber(height),\n    ]);\n};\n/**\n * @param xPos x coordinate for the lower left corner of the square\n * @param yPos y coordinate for the lower left corner of the square\n * @param size width and height of the square\n */\nexport var square = function (xPos, yPos, size) {\n    return rectangle(xPos, yPos, size, size);\n};\n/* ==================== Path Painting Operators ==================== */\nexport var stroke = function () { return PDFOperator.of(Ops.StrokePath); };\nexport var fill = function () { return PDFOperator.of(Ops.FillNonZero); };\nexport var fillAndStroke = function () { return PDFOperator.of(Ops.FillNonZeroAndStroke); };\nexport var endPath = function () { return PDFOperator.of(Ops.EndPath); };\n/* ==================== Text Positioning Operators ==================== */\nexport var nextLine = function () { return PDFOperator.of(Ops.NextLine); };\nexport var moveText = function (x, y) {\n    return PDFOperator.of(Ops.MoveText, [asPDFNumber(x), asPDFNumber(y)]);\n};\n/* ==================== Text Showing Operators ==================== */\nexport var showText = function (text) {\n    return PDFOperator.of(Ops.ShowText, [text]);\n};\n/* ==================== Text State Operators ==================== */\nexport var beginText = function () { return PDFOperator.of(Ops.BeginText); };\nexport var endText = function () { return PDFOperator.of(Ops.EndText); };\nexport var setFontAndSize = function (name, size) { return PDFOperator.of(Ops.SetFontAndSize, [asPDFName(name), asPDFNumber(size)]); };\nexport var setCharacterSpacing = function (spacing) {\n    return PDFOperator.of(Ops.SetCharacterSpacing, [asPDFNumber(spacing)]);\n};\nexport var setWordSpacing = function (spacing) {\n    return PDFOperator.of(Ops.SetWordSpacing, [asPDFNumber(spacing)]);\n};\n/** @param squeeze horizontal character spacing */\nexport var setCharacterSqueeze = function (squeeze) {\n    return PDFOperator.of(Ops.SetTextHorizontalScaling, [asPDFNumber(squeeze)]);\n};\nexport var setLineHeight = function (lineHeight) {\n    return PDFOperator.of(Ops.SetTextLineHeight, [asPDFNumber(lineHeight)]);\n};\nexport var setTextRise = function (rise) {\n    return PDFOperator.of(Ops.SetTextRise, [asPDFNumber(rise)]);\n};\nexport var TextRenderingMode;\n(function (TextRenderingMode) {\n    TextRenderingMode[TextRenderingMode[\"Fill\"] = 0] = \"Fill\";\n    TextRenderingMode[TextRenderingMode[\"Outline\"] = 1] = \"Outline\";\n    TextRenderingMode[TextRenderingMode[\"FillAndOutline\"] = 2] = \"FillAndOutline\";\n    TextRenderingMode[TextRenderingMode[\"Invisible\"] = 3] = \"Invisible\";\n    TextRenderingMode[TextRenderingMode[\"FillAndClip\"] = 4] = \"FillAndClip\";\n    TextRenderingMode[TextRenderingMode[\"OutlineAndClip\"] = 5] = \"OutlineAndClip\";\n    TextRenderingMode[TextRenderingMode[\"FillAndOutlineAndClip\"] = 6] = \"FillAndOutlineAndClip\";\n    TextRenderingMode[TextRenderingMode[\"Clip\"] = 7] = \"Clip\";\n})(TextRenderingMode || (TextRenderingMode = {}));\nexport var setTextRenderingMode = function (mode) {\n    return PDFOperator.of(Ops.SetTextRenderingMode, [asPDFNumber(mode)]);\n};\nexport var setTextMatrix = function (a, b, c, d, e, f) {\n    return PDFOperator.of(Ops.SetTextMatrix, [\n        asPDFNumber(a),\n        asPDFNumber(b),\n        asPDFNumber(c),\n        asPDFNumber(d),\n        asPDFNumber(e),\n        asPDFNumber(f),\n    ]);\n};\nexport var rotateAndSkewTextRadiansAndTranslate = function (rotationAngle, xSkewAngle, ySkewAngle, x, y) {\n    return setTextMatrix(cos(asNumber(rotationAngle)), sin(asNumber(rotationAngle)) + tan(asNumber(xSkewAngle)), -sin(asNumber(rotationAngle)) + tan(asNumber(ySkewAngle)), cos(asNumber(rotationAngle)), x, y);\n};\nexport var rotateAndSkewTextDegreesAndTranslate = function (rotationAngle, xSkewAngle, ySkewAngle, x, y) {\n    return rotateAndSkewTextRadiansAndTranslate(degreesToRadians(asNumber(rotationAngle)), degreesToRadians(asNumber(xSkewAngle)), degreesToRadians(asNumber(ySkewAngle)), x, y);\n};\n/* ==================== XObject Operator ==================== */\nexport var drawObject = function (name) {\n    return PDFOperator.of(Ops.DrawObject, [asPDFName(name)]);\n};\n/* ==================== Color Operators ==================== */\nexport var setFillingGrayscaleColor = function (gray) {\n    return PDFOperator.of(Ops.NonStrokingColorGray, [asPDFNumber(gray)]);\n};\nexport var setStrokingGrayscaleColor = function (gray) {\n    return PDFOperator.of(Ops.StrokingColorGray, [asPDFNumber(gray)]);\n};\nexport var setFillingRgbColor = function (red, green, blue) {\n    return PDFOperator.of(Ops.NonStrokingColorRgb, [\n        asPDFNumber(red),\n        asPDFNumber(green),\n        asPDFNumber(blue),\n    ]);\n};\nexport var setStrokingRgbColor = function (red, green, blue) {\n    return PDFOperator.of(Ops.StrokingColorRgb, [\n        asPDFNumber(red),\n        asPDFNumber(green),\n        asPDFNumber(blue),\n    ]);\n};\nexport var setFillingCmykColor = function (cyan, magenta, yellow, key) {\n    return PDFOperator.of(Ops.NonStrokingColorCmyk, [\n        asPDFNumber(cyan),\n        asPDFNumber(magenta),\n        asPDFNumber(yellow),\n        asPDFNumber(key),\n    ]);\n};\nexport var setStrokingCmykColor = function (cyan, magenta, yellow, key) {\n    return PDFOperator.of(Ops.StrokingColorCmyk, [\n        asPDFNumber(cyan),\n        asPDFNumber(magenta),\n        asPDFNumber(yellow),\n        asPDFNumber(key),\n    ]);\n};\n/* ==================== Marked Content Operators ==================== */\nexport var beginMarkedContent = function (tag) {\n    return PDFOperator.of(Ops.BeginMarkedContent, [asPDFName(tag)]);\n};\nexport var endMarkedContent = function () { return PDFOperator.of(Ops.EndMarkedContent); };\n//# sourceMappingURL=operators.js.map","import { setFillingCmykColor, setFillingGrayscaleColor, setFillingRgbColor, setStrokingCmykColor, setStrokingGrayscaleColor, setStrokingRgbColor, } from \"./operators\";\nimport { assertRange, error } from \"../utils\";\nexport var ColorTypes;\n(function (ColorTypes) {\n    ColorTypes[\"Grayscale\"] = \"Grayscale\";\n    ColorTypes[\"RGB\"] = \"RGB\";\n    ColorTypes[\"CMYK\"] = \"CMYK\";\n})(ColorTypes || (ColorTypes = {}));\nexport var grayscale = function (gray) {\n    assertRange(gray, 'gray', 0.0, 1.0);\n    return { type: ColorTypes.Grayscale, gray: gray };\n};\nexport var rgb = function (red, green, blue) {\n    assertRange(red, 'red', 0, 1);\n    assertRange(green, 'green', 0, 1);\n    assertRange(blue, 'blue', 0, 1);\n    return { type: ColorTypes.RGB, red: red, green: green, blue: blue };\n};\nexport var cmyk = function (cyan, magenta, yellow, key) {\n    assertRange(cyan, 'cyan', 0, 1);\n    assertRange(magenta, 'magenta', 0, 1);\n    assertRange(yellow, 'yellow', 0, 1);\n    assertRange(key, 'key', 0, 1);\n    return { type: ColorTypes.CMYK, cyan: cyan, magenta: magenta, yellow: yellow, key: key };\n};\nvar Grayscale = ColorTypes.Grayscale, RGB = ColorTypes.RGB, CMYK = ColorTypes.CMYK;\n// prettier-ignore\nexport var setFillingColor = function (color) {\n    return color.type === Grayscale ? setFillingGrayscaleColor(color.gray)\n        : color.type === RGB ? setFillingRgbColor(color.red, color.green, color.blue)\n            : color.type === CMYK ? setFillingCmykColor(color.cyan, color.magenta, color.yellow, color.key)\n                : error(\"Invalid color: \" + JSON.stringify(color));\n};\n// prettier-ignore\nexport var setStrokingColor = function (color) {\n    return color.type === Grayscale ? setStrokingGrayscaleColor(color.gray)\n        : color.type === RGB ? setStrokingRgbColor(color.red, color.green, color.blue)\n            : color.type === CMYK ? setStrokingCmykColor(color.cyan, color.magenta, color.yellow, color.key)\n                : error(\"Invalid color: \" + JSON.stringify(color));\n};\n// prettier-ignore\nexport var componentsToColor = function (comps, scale) {\n    if (scale === void 0) { scale = 1; }\n    return ((comps === null || comps === void 0 ? void 0 : comps.length) === 1 ? grayscale(comps[0] * scale)\n        : (comps === null || comps === void 0 ? void 0 : comps.length) === 3 ? rgb(comps[0] * scale, comps[1] * scale, comps[2] * scale)\n            : (comps === null || comps === void 0 ? void 0 : comps.length) === 4 ? cmyk(comps[0] * scale, comps[1] * scale, comps[2] * scale, comps[3] * scale)\n                : undefined);\n};\n// prettier-ignore\nexport var colorToComponents = function (color) {\n    return color.type === Grayscale ? [color.gray]\n        : color.type === RGB ? [color.red, color.green, color.blue]\n            : color.type === CMYK ? [color.cyan, color.magenta, color.yellow, color.key]\n                : error(\"Invalid color: \" + JSON.stringify(color));\n};\n//# sourceMappingURL=colors.js.map","// Originated from pdfkit Copyright (c) 2014 Devon Govett\n// https://github.com/foliojs/pdfkit/blob/1e62e6ffe24b378eb890df507a47610f4c4a7b24/lib/path.js\n// MIT LICENSE\n// Updated for pdf-lib & TypeScript by Jeremy Messenger\nimport { appendBezierCurve, appendQuadraticCurve, closePath, lineTo, moveTo, } from \"./operators\";\nvar cx = 0;\nvar cy = 0;\nvar px = 0;\nvar py = 0;\nvar sx = 0;\nvar sy = 0;\nvar parameters = new Map([\n    ['A', 7],\n    ['a', 7],\n    ['C', 6],\n    ['c', 6],\n    ['H', 1],\n    ['h', 1],\n    ['L', 2],\n    ['l', 2],\n    ['M', 2],\n    ['m', 2],\n    ['Q', 4],\n    ['q', 4],\n    ['S', 4],\n    ['s', 4],\n    ['T', 2],\n    ['t', 2],\n    ['V', 1],\n    ['v', 1],\n    ['Z', 0],\n    ['z', 0],\n]);\nvar parse = function (path) {\n    var cmd;\n    var ret = [];\n    var args = [];\n    var curArg = '';\n    var foundDecimal = false;\n    var params = 0;\n    for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var c = path_1[_i];\n        if (parameters.has(c)) {\n            params = parameters.get(c);\n            if (cmd) {\n                // save existing command\n                if (curArg.length > 0) {\n                    args[args.length] = +curArg;\n                }\n                ret[ret.length] = { cmd: cmd, args: args };\n                args = [];\n                curArg = '';\n                foundDecimal = false;\n            }\n            cmd = c;\n        }\n        else if ([' ', ','].includes(c) ||\n            (c === '-' && curArg.length > 0 && curArg[curArg.length - 1] !== 'e') ||\n            (c === '.' && foundDecimal)) {\n            if (curArg.length === 0) {\n                continue;\n            }\n            if (args.length === params) {\n                // handle reused commands\n                ret[ret.length] = { cmd: cmd, args: args };\n                args = [+curArg];\n                // handle assumed commands\n                if (cmd === 'M') {\n                    cmd = 'L';\n                }\n                if (cmd === 'm') {\n                    cmd = 'l';\n                }\n            }\n            else {\n                args[args.length] = +curArg;\n            }\n            foundDecimal = c === '.';\n            // fix for negative numbers or repeated decimals with no delimeter between commands\n            curArg = ['-', '.'].includes(c) ? c : '';\n        }\n        else {\n            curArg += c;\n            if (c === '.') {\n                foundDecimal = true;\n            }\n        }\n    }\n    // add the last command\n    if (curArg.length > 0) {\n        if (args.length === params) {\n            // handle reused commands\n            ret[ret.length] = { cmd: cmd, args: args };\n            args = [+curArg];\n            // handle assumed commands\n            if (cmd === 'M') {\n                cmd = 'L';\n            }\n            if (cmd === 'm') {\n                cmd = 'l';\n            }\n        }\n        else {\n            args[args.length] = +curArg;\n        }\n    }\n    ret[ret.length] = { cmd: cmd, args: args };\n    return ret;\n};\nvar apply = function (commands) {\n    // current point, control point, and subpath starting point\n    cx = cy = px = py = sx = sy = 0;\n    // run the commands\n    var cmds = [];\n    for (var i = 0; i < commands.length; i++) {\n        var c = commands[i];\n        if (c.cmd && typeof runners[c.cmd] === 'function') {\n            var cmd = runners[c.cmd](c.args);\n            if (Array.isArray(cmd)) {\n                cmds = cmds.concat(cmd);\n            }\n            else {\n                cmds.push(cmd);\n            }\n        }\n    }\n    return cmds;\n};\nvar runners = {\n    M: function (a) {\n        cx = a[0];\n        cy = a[1];\n        px = py = null;\n        sx = cx;\n        sy = cy;\n        return moveTo(cx, cy);\n    },\n    m: function (a) {\n        cx += a[0];\n        cy += a[1];\n        px = py = null;\n        sx = cx;\n        sy = cy;\n        return moveTo(cx, cy);\n    },\n    C: function (a) {\n        cx = a[4];\n        cy = a[5];\n        px = a[2];\n        py = a[3];\n        return appendBezierCurve(a[0], a[1], a[2], a[3], a[4], a[5]);\n    },\n    c: function (a) {\n        var cmd = appendBezierCurve(a[0] + cx, a[1] + cy, a[2] + cx, a[3] + cy, a[4] + cx, a[5] + cy);\n        px = cx + a[2];\n        py = cy + a[3];\n        cx += a[4];\n        cy += a[5];\n        return cmd;\n    },\n    S: function (a) {\n        if (px === null || py === null) {\n            px = cx;\n            py = cy;\n        }\n        var cmd = appendBezierCurve(cx - (px - cx), cy - (py - cy), a[0], a[1], a[2], a[3]);\n        px = a[0];\n        py = a[1];\n        cx = a[2];\n        cy = a[3];\n        return cmd;\n    },\n    s: function (a) {\n        if (px === null || py === null) {\n            px = cx;\n            py = cy;\n        }\n        var cmd = appendBezierCurve(cx - (px - cx), cy - (py - cy), cx + a[0], cy + a[1], cx + a[2], cy + a[3]);\n        px = cx + a[0];\n        py = cy + a[1];\n        cx += a[2];\n        cy += a[3];\n        return cmd;\n    },\n    Q: function (a) {\n        px = a[0];\n        py = a[1];\n        cx = a[2];\n        cy = a[3];\n        return appendQuadraticCurve(a[0], a[1], cx, cy);\n    },\n    q: function (a) {\n        var cmd = appendQuadraticCurve(a[0] + cx, a[1] + cy, a[2] + cx, a[3] + cy);\n        px = cx + a[0];\n        py = cy + a[1];\n        cx += a[2];\n        cy += a[3];\n        return cmd;\n    },\n    T: function (a) {\n        if (px === null || py === null) {\n            px = cx;\n            py = cy;\n        }\n        else {\n            px = cx - (px - cx);\n            py = cy - (py - cy);\n        }\n        var cmd = appendQuadraticCurve(px, py, a[0], a[1]);\n        px = cx - (px - cx);\n        py = cy - (py - cy);\n        cx = a[0];\n        cy = a[1];\n        return cmd;\n    },\n    t: function (a) {\n        if (px === null || py === null) {\n            px = cx;\n            py = cy;\n        }\n        else {\n            px = cx - (px - cx);\n            py = cy - (py - cy);\n        }\n        var cmd = appendQuadraticCurve(px, py, cx + a[0], cy + a[1]);\n        cx += a[0];\n        cy += a[1];\n        return cmd;\n    },\n    A: function (a) {\n        var cmds = solveArc(cx, cy, a);\n        cx = a[5];\n        cy = a[6];\n        return cmds;\n    },\n    a: function (a) {\n        a[5] += cx;\n        a[6] += cy;\n        var cmds = solveArc(cx, cy, a);\n        cx = a[5];\n        cy = a[6];\n        return cmds;\n    },\n    L: function (a) {\n        cx = a[0];\n        cy = a[1];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    l: function (a) {\n        cx += a[0];\n        cy += a[1];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    H: function (a) {\n        cx = a[0];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    h: function (a) {\n        cx += a[0];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    V: function (a) {\n        cy = a[0];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    v: function (a) {\n        cy += a[0];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    Z: function () {\n        var cmd = closePath();\n        cx = sx;\n        cy = sy;\n        return cmd;\n    },\n    z: function () {\n        var cmd = closePath();\n        cx = sx;\n        cy = sy;\n        return cmd;\n    },\n};\nvar solveArc = function (x, y, coords) {\n    var rx = coords[0], ry = coords[1], rot = coords[2], large = coords[3], sweep = coords[4], ex = coords[5], ey = coords[6];\n    var segs = arcToSegments(ex, ey, rx, ry, large, sweep, rot, x, y);\n    var cmds = [];\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        var bez = segmentToBezier.apply(void 0, seg);\n        cmds.push(appendBezierCurve.apply(void 0, bez));\n    }\n    return cmds;\n};\n// from Inkscape svgtopdf, thanks!\nvar arcToSegments = function (x, y, rx, ry, large, sweep, rotateX, ox, oy) {\n    var th = rotateX * (Math.PI / 180);\n    var sinTh = Math.sin(th);\n    var cosTh = Math.cos(th);\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n    px = cosTh * (ox - x) * 0.5 + sinTh * (oy - y) * 0.5;\n    py = cosTh * (oy - y) * 0.5 - sinTh * (ox - x) * 0.5;\n    var pl = (px * px) / (rx * rx) + (py * py) / (ry * ry);\n    if (pl > 1) {\n        pl = Math.sqrt(pl);\n        rx *= pl;\n        ry *= pl;\n    }\n    var a00 = cosTh / rx;\n    var a01 = sinTh / rx;\n    var a10 = -sinTh / ry;\n    var a11 = cosTh / ry;\n    var x0 = a00 * ox + a01 * oy;\n    var y0 = a10 * ox + a11 * oy;\n    var x1 = a00 * x + a01 * y;\n    var y1 = a10 * x + a11 * y;\n    var d = (x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0);\n    var sfactorSq = 1 / d - 0.25;\n    if (sfactorSq < 0) {\n        sfactorSq = 0;\n    }\n    var sfactor = Math.sqrt(sfactorSq);\n    if (sweep === large) {\n        sfactor = -sfactor;\n    }\n    var xc = 0.5 * (x0 + x1) - sfactor * (y1 - y0);\n    var yc = 0.5 * (y0 + y1) + sfactor * (x1 - x0);\n    var th0 = Math.atan2(y0 - yc, x0 - xc);\n    var th1 = Math.atan2(y1 - yc, x1 - xc);\n    var thArc = th1 - th0;\n    if (thArc < 0 && sweep === 1) {\n        thArc += 2 * Math.PI;\n    }\n    else if (thArc > 0 && sweep === 0) {\n        thArc -= 2 * Math.PI;\n    }\n    var segments = Math.ceil(Math.abs(thArc / (Math.PI * 0.5 + 0.001)));\n    var result = [];\n    for (var i = 0; i < segments; i++) {\n        var th2 = th0 + (i * thArc) / segments;\n        var th3 = th0 + ((i + 1) * thArc) / segments;\n        result[i] = [xc, yc, th2, th3, rx, ry, sinTh, cosTh];\n    }\n    return result;\n};\nvar segmentToBezier = function (cx1, cy1, th0, th1, rx, ry, sinTh, cosTh) {\n    var a00 = cosTh * rx;\n    var a01 = -sinTh * ry;\n    var a10 = sinTh * rx;\n    var a11 = cosTh * ry;\n    var thHalf = 0.5 * (th1 - th0);\n    var t = ((8 / 3) * Math.sin(thHalf * 0.5) * Math.sin(thHalf * 0.5)) /\n        Math.sin(thHalf);\n    var x1 = cx1 + Math.cos(th0) - t * Math.sin(th0);\n    var y1 = cy1 + Math.sin(th0) + t * Math.cos(th0);\n    var x3 = cx1 + Math.cos(th1);\n    var y3 = cy1 + Math.sin(th1);\n    var x2 = x3 + t * Math.sin(th1);\n    var y2 = y3 - t * Math.cos(th1);\n    var result = [\n        a00 * x1 + a01 * y1,\n        a10 * x1 + a11 * y1,\n        a00 * x2 + a01 * y2,\n        a10 * x2 + a11 * y2,\n        a00 * x3 + a01 * y3,\n        a10 * x3 + a11 * y3,\n    ];\n    return result;\n};\nexport var svgPathToOperators = function (path) { return apply(parse(path)); };\n//# sourceMappingURL=svgPath.js.map","import { __spreadArrays } from \"tslib\";\nimport { setFillingColor, setStrokingColor } from \"./colors\";\nimport { beginText, closePath, drawObject, endText, fill, fillAndStroke, lineTo, moveTo, nextLine, popGraphicsState, pushGraphicsState, rotateAndSkewTextRadiansAndTranslate, rotateRadians, scale, setFontAndSize, setLineHeight, setLineWidth, showText, skewRadians, stroke, translate, setLineCap, rotateDegrees, setGraphicsState, setDashPattern, beginMarkedContent, endMarkedContent, clip, endPath, appendBezierCurve, } from \"./operators\";\nimport { degrees, toRadians } from \"./rotations\";\nimport { svgPathToOperators } from \"./svgPath\";\nimport { asNumber } from \"./objects\";\nexport var drawText = function (line, options) {\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        beginText(),\n        setFillingColor(options.color),\n        setFontAndSize(options.font, options.size),\n        rotateAndSkewTextRadiansAndTranslate(toRadians(options.rotate), toRadians(options.xSkew), toRadians(options.ySkew), options.x, options.y),\n        showText(line),\n        endText(),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nexport var drawLinesOfText = function (lines, options) {\n    var operators = [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        beginText(),\n        setFillingColor(options.color),\n        setFontAndSize(options.font, options.size),\n        setLineHeight(options.lineHeight),\n        rotateAndSkewTextRadiansAndTranslate(toRadians(options.rotate), toRadians(options.xSkew), toRadians(options.ySkew), options.x, options.y),\n    ].filter(Boolean);\n    for (var idx = 0, len = lines.length; idx < len; idx++) {\n        operators.push(showText(lines[idx]), nextLine());\n    }\n    operators.push(endText(), popGraphicsState());\n    return operators;\n};\nexport var drawImage = function (name, options) {\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        translate(options.x, options.y),\n        rotateRadians(toRadians(options.rotate)),\n        scale(options.width, options.height),\n        skewRadians(toRadians(options.xSkew), toRadians(options.ySkew)),\n        drawObject(name),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nexport var drawPage = function (name, options) {\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        translate(options.x, options.y),\n        rotateRadians(toRadians(options.rotate)),\n        scale(options.xScale, options.yScale),\n        skewRadians(toRadians(options.xSkew), toRadians(options.ySkew)),\n        drawObject(name),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nexport var drawLine = function (options) {\n    var _a, _b;\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        options.color && setStrokingColor(options.color),\n        setLineWidth(options.thickness),\n        setDashPattern((_a = options.dashArray) !== null && _a !== void 0 ? _a : [], (_b = options.dashPhase) !== null && _b !== void 0 ? _b : 0),\n        moveTo(options.start.x, options.start.y),\n        options.lineCap && setLineCap(options.lineCap),\n        moveTo(options.start.x, options.start.y),\n        lineTo(options.end.x, options.end.y),\n        stroke(),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nexport var drawRectangle = function (options) {\n    var _a, _b;\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        options.color && setFillingColor(options.color),\n        options.borderColor && setStrokingColor(options.borderColor),\n        setLineWidth(options.borderWidth),\n        options.borderLineCap && setLineCap(options.borderLineCap),\n        setDashPattern((_a = options.borderDashArray) !== null && _a !== void 0 ? _a : [], (_b = options.borderDashPhase) !== null && _b !== void 0 ? _b : 0),\n        translate(options.x, options.y),\n        rotateRadians(toRadians(options.rotate)),\n        skewRadians(toRadians(options.xSkew), toRadians(options.ySkew)),\n        moveTo(0, 0),\n        lineTo(0, options.height),\n        lineTo(options.width, options.height),\n        lineTo(options.width, 0),\n        closePath(),\n        // prettier-ignore\n        options.color && options.borderWidth ? fillAndStroke()\n            : options.color ? fill()\n                : options.borderColor ? stroke()\n                    : closePath(),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nvar KAPPA = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n/** @deprecated */\nexport var drawEllipsePath = function (config) {\n    var x = asNumber(config.x);\n    var y = asNumber(config.y);\n    var xScale = asNumber(config.xScale);\n    var yScale = asNumber(config.yScale);\n    x -= xScale;\n    y -= yScale;\n    var ox = xScale * KAPPA;\n    var oy = yScale * KAPPA;\n    var xe = x + xScale * 2;\n    var ye = y + yScale * 2;\n    var xm = x + xScale;\n    var ym = y + yScale;\n    return [\n        pushGraphicsState(),\n        moveTo(x, ym),\n        appendBezierCurve(x, ym - oy, xm - ox, y, xm, y),\n        appendBezierCurve(xm + ox, y, xe, ym - oy, xe, ym),\n        appendBezierCurve(xe, ym + oy, xm + ox, ye, xm, ye),\n        appendBezierCurve(xm - ox, ye, x, ym + oy, x, ym),\n        popGraphicsState(),\n    ];\n};\nvar drawEllipseCurves = function (config) {\n    var centerX = asNumber(config.x);\n    var centerY = asNumber(config.y);\n    var xScale = asNumber(config.xScale);\n    var yScale = asNumber(config.yScale);\n    var x = -xScale;\n    var y = -yScale;\n    var ox = xScale * KAPPA;\n    var oy = yScale * KAPPA;\n    var xe = x + xScale * 2;\n    var ye = y + yScale * 2;\n    var xm = x + xScale;\n    var ym = y + yScale;\n    return [\n        translate(centerX, centerY),\n        rotateRadians(toRadians(config.rotate)),\n        moveTo(x, ym),\n        appendBezierCurve(x, ym - oy, xm - ox, y, xm, y),\n        appendBezierCurve(xm + ox, y, xe, ym - oy, xe, ym),\n        appendBezierCurve(xe, ym + oy, xm + ox, ye, xm, ye),\n        appendBezierCurve(xm - ox, ye, x, ym + oy, x, ym),\n    ];\n};\nexport var drawEllipse = function (options) {\n    var _a, _b, _c;\n    return __spreadArrays([\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        options.color && setFillingColor(options.color),\n        options.borderColor && setStrokingColor(options.borderColor),\n        setLineWidth(options.borderWidth),\n        options.borderLineCap && setLineCap(options.borderLineCap),\n        setDashPattern((_a = options.borderDashArray) !== null && _a !== void 0 ? _a : [], (_b = options.borderDashPhase) !== null && _b !== void 0 ? _b : 0)\n    ], (options.rotate === undefined\n        ? drawEllipsePath({\n            x: options.x,\n            y: options.y,\n            xScale: options.xScale,\n            yScale: options.yScale,\n        })\n        : drawEllipseCurves({\n            x: options.x,\n            y: options.y,\n            xScale: options.xScale,\n            yScale: options.yScale,\n            rotate: (_c = options.rotate) !== null && _c !== void 0 ? _c : degrees(0),\n        })), [\n        // prettier-ignore\n        options.color && options.borderWidth ? fillAndStroke()\n            : options.color ? fill()\n                : options.borderColor ? stroke()\n                    : closePath(),\n        popGraphicsState(),\n    ]).filter(Boolean);\n};\nexport var drawSvgPath = function (path, options) {\n    var _a, _b, _c;\n    return __spreadArrays([\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        translate(options.x, options.y),\n        rotateRadians(toRadians((_a = options.rotate) !== null && _a !== void 0 ? _a : degrees(0))),\n        // SVG path Y axis is opposite pdf-lib's\n        options.scale ? scale(options.scale, -options.scale) : scale(1, -1),\n        options.color && setFillingColor(options.color),\n        options.borderColor && setStrokingColor(options.borderColor),\n        options.borderWidth && setLineWidth(options.borderWidth),\n        options.borderLineCap && setLineCap(options.borderLineCap),\n        setDashPattern((_b = options.borderDashArray) !== null && _b !== void 0 ? _b : [], (_c = options.borderDashPhase) !== null && _c !== void 0 ? _c : 0)\n    ], svgPathToOperators(path), [\n        // prettier-ignore\n        options.color && options.borderWidth ? fillAndStroke()\n            : options.color ? fill()\n                : options.borderColor ? stroke()\n                    : closePath(),\n        popGraphicsState(),\n    ]).filter(Boolean);\n};\nexport var drawCheckMark = function (options) {\n    var size = asNumber(options.size);\n    /*********************** Define Check Mark Points ***************************/\n    // A check mark is defined by three points in some coordinate space. Here, we\n    // define these points in a unit coordinate system, where the range of the x\n    // and y axis are both [-1, 1].\n    //\n    // Note that we do not hard code `p1y` in case we wish to change the\n    // size/shape of the check mark in the future. We want the check mark to\n    // always form a right angle. This means that the dot product between (p1-p2)\n    // and (p3-p2) should be zero:\n    //\n    //   (p1x-p2x) * (p3x-p2x) + (p1y-p2y) * (p3y-p2y) = 0\n    //\n    // We can now rejigger this equation to solve for `p1y`:\n    //\n    //   (p1y-p2y) * (p3y-p2y) = -((p1x-p2x) * (p3x-p2x))\n    //   (p1y-p2y) = -((p1x-p2x) * (p3x-p2x)) / (p3y-p2y)\n    //   p1y = -((p1x-p2x) * (p3x-p2x)) / (p3y-p2y) + p2y\n    //\n    // Thanks to my friend Joel Walker (https://github.com/JWalker1995) for\n    // devising the above equation and unit coordinate system approach!\n    // (x, y) coords of the check mark's bottommost point\n    var p2x = -1 + 0.75;\n    var p2y = -1 + 0.51;\n    // (x, y) coords of the check mark's topmost point\n    var p3y = 1 - 0.525;\n    var p3x = 1 - 0.31;\n    // (x, y) coords of the check mark's center (vertically) point\n    var p1x = -1 + 0.325;\n    var p1y = -((p1x - p2x) * (p3x - p2x)) / (p3y - p2y) + p2y;\n    /****************************************************************************/\n    return [\n        pushGraphicsState(),\n        options.color && setStrokingColor(options.color),\n        setLineWidth(options.thickness),\n        translate(options.x, options.y),\n        moveTo(p1x * size, p1y * size),\n        lineTo(p2x * size, p2y * size),\n        lineTo(p3x * size, p3y * size),\n        stroke(),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\n// prettier-ignore\nexport var rotateInPlace = function (options) {\n    return options.rotation === 0 ? [\n        translate(0, 0),\n        rotateDegrees(0)\n    ]\n        : options.rotation === 90 ? [\n            translate(options.width, 0),\n            rotateDegrees(90)\n        ]\n            : options.rotation === 180 ? [\n                translate(options.width, options.height),\n                rotateDegrees(180)\n            ]\n                : options.rotation === 270 ? [\n                    translate(0, options.height),\n                    rotateDegrees(270)\n                ]\n                    : [];\n}; // Invalid rotation - noop\nexport var drawCheckBox = function (options) {\n    var outline = drawRectangle({\n        x: options.x,\n        y: options.y,\n        width: options.width,\n        height: options.height,\n        borderWidth: options.borderWidth,\n        color: options.color,\n        borderColor: options.borderColor,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    if (!options.filled)\n        return outline;\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var checkMarkSize = Math.min(width, height) / 2;\n    var checkMark = drawCheckMark({\n        x: width / 2,\n        y: height / 2,\n        size: checkMarkSize,\n        thickness: options.thickness,\n        color: options.markColor,\n    });\n    return __spreadArrays([pushGraphicsState()], outline, checkMark, [popGraphicsState()]);\n};\nexport var drawRadioButton = function (options) {\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var outlineScale = Math.min(width, height) / 2;\n    var outline = drawEllipse({\n        x: options.x,\n        y: options.y,\n        xScale: outlineScale,\n        yScale: outlineScale,\n        color: options.color,\n        borderColor: options.borderColor,\n        borderWidth: options.borderWidth,\n    });\n    if (!options.filled)\n        return outline;\n    var dot = drawEllipse({\n        x: options.x,\n        y: options.y,\n        xScale: outlineScale * 0.45,\n        yScale: outlineScale * 0.45,\n        color: options.dotColor,\n        borderColor: undefined,\n        borderWidth: 0,\n    });\n    return __spreadArrays([pushGraphicsState()], outline, dot, [popGraphicsState()]);\n};\nexport var drawButton = function (options) {\n    var x = asNumber(options.x);\n    var y = asNumber(options.y);\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var background = drawRectangle({\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        borderWidth: options.borderWidth,\n        color: options.color,\n        borderColor: options.borderColor,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var lines = drawTextLines(options.textLines, {\n        color: options.textColor,\n        font: options.font,\n        size: options.fontSize,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    return __spreadArrays([pushGraphicsState()], background, lines, [popGraphicsState()]);\n};\nexport var drawTextLines = function (lines, options) {\n    var operators = [\n        beginText(),\n        setFillingColor(options.color),\n        setFontAndSize(options.font, options.size),\n    ];\n    for (var idx = 0, len = lines.length; idx < len; idx++) {\n        var _a = lines[idx], encoded = _a.encoded, x = _a.x, y = _a.y;\n        operators.push(rotateAndSkewTextRadiansAndTranslate(toRadians(options.rotate), toRadians(options.xSkew), toRadians(options.ySkew), x, y), showText(encoded));\n    }\n    operators.push(endText());\n    return operators;\n};\nexport var drawTextField = function (options) {\n    var x = asNumber(options.x);\n    var y = asNumber(options.y);\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var borderWidth = asNumber(options.borderWidth);\n    var padding = asNumber(options.padding);\n    var clipX = x + borderWidth / 2 + padding;\n    var clipY = y + borderWidth / 2 + padding;\n    var clipWidth = width - (borderWidth / 2 + padding) * 2;\n    var clipHeight = height - (borderWidth / 2 + padding) * 2;\n    var clippingArea = [\n        moveTo(clipX, clipY),\n        lineTo(clipX, clipY + clipHeight),\n        lineTo(clipX + clipWidth, clipY + clipHeight),\n        lineTo(clipX + clipWidth, clipY),\n        closePath(),\n        clip(),\n        endPath(),\n    ];\n    var background = drawRectangle({\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        borderWidth: options.borderWidth,\n        color: options.color,\n        borderColor: options.borderColor,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var lines = drawTextLines(options.textLines, {\n        color: options.textColor,\n        font: options.font,\n        size: options.fontSize,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var markedContent = __spreadArrays([\n        beginMarkedContent('Tx'),\n        pushGraphicsState()\n    ], lines, [\n        popGraphicsState(),\n        endMarkedContent(),\n    ]);\n    return __spreadArrays([\n        pushGraphicsState()\n    ], background, clippingArea, markedContent, [\n        popGraphicsState(),\n    ]);\n};\nexport var drawOptionList = function (options) {\n    var x = asNumber(options.x);\n    var y = asNumber(options.y);\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var lineHeight = asNumber(options.lineHeight);\n    var borderWidth = asNumber(options.borderWidth);\n    var padding = asNumber(options.padding);\n    var clipX = x + borderWidth / 2 + padding;\n    var clipY = y + borderWidth / 2 + padding;\n    var clipWidth = width - (borderWidth / 2 + padding) * 2;\n    var clipHeight = height - (borderWidth / 2 + padding) * 2;\n    var clippingArea = [\n        moveTo(clipX, clipY),\n        lineTo(clipX, clipY + clipHeight),\n        lineTo(clipX + clipWidth, clipY + clipHeight),\n        lineTo(clipX + clipWidth, clipY),\n        closePath(),\n        clip(),\n        endPath(),\n    ];\n    var background = drawRectangle({\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        borderWidth: options.borderWidth,\n        color: options.color,\n        borderColor: options.borderColor,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var highlights = [];\n    for (var idx = 0, len = options.selectedLines.length; idx < len; idx++) {\n        var line = options.textLines[options.selectedLines[idx]];\n        highlights.push.apply(highlights, drawRectangle({\n            x: line.x - padding,\n            y: line.y - (lineHeight - line.height) / 2,\n            width: width - borderWidth,\n            height: line.height + (lineHeight - line.height) / 2,\n            borderWidth: 0,\n            color: options.selectedColor,\n            borderColor: undefined,\n            rotate: degrees(0),\n            xSkew: degrees(0),\n            ySkew: degrees(0),\n        }));\n    }\n    var lines = drawTextLines(options.textLines, {\n        color: options.textColor,\n        font: options.font,\n        size: options.fontSize,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var markedContent = __spreadArrays([\n        beginMarkedContent('Tx'),\n        pushGraphicsState()\n    ], lines, [\n        popGraphicsState(),\n        endMarkedContent(),\n    ]);\n    return __spreadArrays([\n        pushGraphicsState()\n    ], background, highlights, clippingArea, markedContent, [\n        popGraphicsState(),\n    ]);\n};\n//# sourceMappingURL=operations.js.map","// tslint:disable: max-classes-per-file\nimport { __extends } from \"tslib\";\n// TODO: Include link to documentation with example\nvar EncryptedPDFError = /** @class */ (function (_super) {\n    __extends(EncryptedPDFError, _super);\n    function EncryptedPDFError() {\n        var _this = this;\n        var msg = 'Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.';\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return EncryptedPDFError;\n}(Error));\nexport { EncryptedPDFError };\n// TODO: Include link to documentation with example\nvar FontkitNotRegisteredError = /** @class */ (function (_super) {\n    __extends(FontkitNotRegisteredError, _super);\n    function FontkitNotRegisteredError() {\n        var _this = this;\n        var msg = 'Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.';\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return FontkitNotRegisteredError;\n}(Error));\nexport { FontkitNotRegisteredError };\n// TODO: Include link to documentation with example\nvar ForeignPageError = /** @class */ (function (_super) {\n    __extends(ForeignPageError, _super);\n    function ForeignPageError() {\n        var _this = this;\n        var msg = 'A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.';\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return ForeignPageError;\n}(Error));\nexport { ForeignPageError };\n// TODO: Include link to documentation with example\nvar RemovePageFromEmptyDocumentError = /** @class */ (function (_super) {\n    __extends(RemovePageFromEmptyDocumentError, _super);\n    function RemovePageFromEmptyDocumentError() {\n        var _this = this;\n        var msg = 'PDFDocument has no pages so `PDFDocument.removePage` cannot be called';\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return RemovePageFromEmptyDocumentError;\n}(Error));\nexport { RemovePageFromEmptyDocumentError };\nvar NoSuchFieldError = /** @class */ (function (_super) {\n    __extends(NoSuchFieldError, _super);\n    function NoSuchFieldError(name) {\n        var _this = this;\n        var msg = \"PDFDocument has no form field with the name \\\"\" + name + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return NoSuchFieldError;\n}(Error));\nexport { NoSuchFieldError };\nvar UnexpectedFieldTypeError = /** @class */ (function (_super) {\n    __extends(UnexpectedFieldTypeError, _super);\n    function UnexpectedFieldTypeError(name, expected, actual) {\n        var _a, _b;\n        var _this = this;\n        var expectedType = expected === null || expected === void 0 ? void 0 : expected.name;\n        var actualType = (_b = (_a = actual === null || actual === void 0 ? void 0 : actual.constructor) === null || _a === void 0 ? void 0 : _a.name) !== null && _b !== void 0 ? _b : actual;\n        var msg = \"Expected field \\\"\" + name + \"\\\" to be of type \" + expectedType + \", \" +\n            (\"but it is actually of type \" + actualType);\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return UnexpectedFieldTypeError;\n}(Error));\nexport { UnexpectedFieldTypeError };\nvar MissingOnValueCheckError = /** @class */ (function (_super) {\n    __extends(MissingOnValueCheckError, _super);\n    function MissingOnValueCheckError(onValue) {\n        var _this = this;\n        var msg = \"Failed to select check box due to missing onValue: \\\"\" + onValue + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingOnValueCheckError;\n}(Error));\nexport { MissingOnValueCheckError };\nvar FieldAlreadyExistsError = /** @class */ (function (_super) {\n    __extends(FieldAlreadyExistsError, _super);\n    function FieldAlreadyExistsError(name) {\n        var _this = this;\n        var msg = \"A field already exists with the specified name: \\\"\" + name + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return FieldAlreadyExistsError;\n}(Error));\nexport { FieldAlreadyExistsError };\nvar InvalidFieldNamePartError = /** @class */ (function (_super) {\n    __extends(InvalidFieldNamePartError, _super);\n    function InvalidFieldNamePartError(namePart) {\n        var _this = this;\n        var msg = \"Field name contains invalid component: \\\"\" + namePart + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidFieldNamePartError;\n}(Error));\nexport { InvalidFieldNamePartError };\nvar FieldExistsAsNonTerminalError = /** @class */ (function (_super) {\n    __extends(FieldExistsAsNonTerminalError, _super);\n    function FieldExistsAsNonTerminalError(name) {\n        var _this = this;\n        var msg = \"A non-terminal field already exists with the specified name: \\\"\" + name + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return FieldExistsAsNonTerminalError;\n}(Error));\nexport { FieldExistsAsNonTerminalError };\nvar RichTextFieldReadError = /** @class */ (function (_super) {\n    __extends(RichTextFieldReadError, _super);\n    function RichTextFieldReadError(fieldName) {\n        var _this = this;\n        var msg = \"Reading rich text fields is not supported: Attempted to read rich text field: \" + fieldName;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return RichTextFieldReadError;\n}(Error));\nexport { RichTextFieldReadError };\nvar CombedTextLayoutError = /** @class */ (function (_super) {\n    __extends(CombedTextLayoutError, _super);\n    function CombedTextLayoutError(lineLength, cellCount) {\n        var _this = this;\n        var msg = \"Failed to layout combed text as lineLength=\" + lineLength + \" is greater than cellCount=\" + cellCount;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return CombedTextLayoutError;\n}(Error));\nexport { CombedTextLayoutError };\nvar ExceededMaxLengthError = /** @class */ (function (_super) {\n    __extends(ExceededMaxLengthError, _super);\n    function ExceededMaxLengthError(textLength, maxLength, name) {\n        var _this = this;\n        var msg = \"Attempted to set text with length=\" + textLength + \" for TextField with maxLength=\" + maxLength + \" and name=\" + name;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return ExceededMaxLengthError;\n}(Error));\nexport { ExceededMaxLengthError };\nvar InvalidMaxLengthError = /** @class */ (function (_super) {\n    __extends(InvalidMaxLengthError, _super);\n    function InvalidMaxLengthError(textLength, maxLength, name) {\n        var _this = this;\n        var msg = \"Attempted to set maxLength=\" + maxLength + \", which is less than \" + textLength + \", the length of this field's current value (name=\" + name + \")\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidMaxLengthError;\n}(Error));\nexport { InvalidMaxLengthError };\n//# sourceMappingURL=errors.js.map","export var TextAlignment;\n(function (TextAlignment) {\n    TextAlignment[TextAlignment[\"Left\"] = 0] = \"Left\";\n    TextAlignment[TextAlignment[\"Center\"] = 1] = \"Center\";\n    TextAlignment[TextAlignment[\"Right\"] = 2] = \"Right\";\n})(TextAlignment || (TextAlignment = {}));\n//# sourceMappingURL=alignment.js.map","import { CombedTextLayoutError } from \"../errors\";\nimport { TextAlignment } from \"./alignment\";\nimport { cleanText, lineSplit, mergeLines, charAtIndex, charSplit, } from \"../../utils\";\nvar MIN_FONT_SIZE = 4;\nvar MAX_FONT_SIZE = 500;\nvar computeFontSize = function (lines, font, bounds, multiline) {\n    if (multiline === void 0) { multiline = false; }\n    var fontSize = MIN_FONT_SIZE;\n    while (fontSize < MAX_FONT_SIZE) {\n        var linesUsed = 0;\n        for (var lineIdx = 0, lineLen = lines.length; lineIdx < lineLen; lineIdx++) {\n            linesUsed += 1;\n            var line = lines[lineIdx];\n            var words = line.split(' ');\n            // Layout the words using the current `fontSize`, line wrapping\n            // whenever we reach the end of the current line.\n            var spaceInLineRemaining = bounds.width;\n            for (var idx = 0, len = words.length; idx < len; idx++) {\n                var isLastWord = idx === len - 1;\n                var word = isLastWord ? words[idx] : words[idx] + ' ';\n                var widthOfWord = font.widthOfTextAtSize(word, fontSize);\n                spaceInLineRemaining -= widthOfWord;\n                if (spaceInLineRemaining <= 0) {\n                    linesUsed += 1;\n                    spaceInLineRemaining = bounds.width - widthOfWord;\n                }\n            }\n        }\n        // Return if we exceeded the allowed width\n        if (!multiline && linesUsed > lines.length)\n            return fontSize - 1;\n        var height = font.heightAtSize(fontSize);\n        var lineHeight = height + height * 0.2;\n        var totalHeight = lineHeight * linesUsed;\n        // Return if we exceeded the allowed height\n        if (totalHeight > Math.abs(bounds.height))\n            return fontSize - 1;\n        fontSize += 1;\n    }\n    return fontSize;\n};\nvar computeCombedFontSize = function (line, font, bounds, cellCount) {\n    var cellWidth = bounds.width / cellCount;\n    var cellHeight = bounds.height;\n    var fontSize = MIN_FONT_SIZE;\n    var chars = charSplit(line);\n    while (fontSize < MAX_FONT_SIZE) {\n        for (var idx = 0, len = chars.length; idx < len; idx++) {\n            var c = chars[idx];\n            var tooLong = font.widthOfTextAtSize(c, fontSize) > cellWidth * 0.75;\n            if (tooLong)\n                return fontSize - 1;\n        }\n        var height = font.heightAtSize(fontSize, { descender: false });\n        if (height > cellHeight)\n            return fontSize - 1;\n        fontSize += 1;\n    }\n    return fontSize;\n};\nvar lastIndexOfWhitespace = function (line) {\n    for (var idx = line.length; idx > 0; idx--) {\n        if (/\\s/.test(line[idx]))\n            return idx;\n    }\n    return undefined;\n};\nvar splitOutLines = function (input, maxWidth, font, fontSize) {\n    var _a;\n    var lastWhitespaceIdx = input.length;\n    while (lastWhitespaceIdx > 0) {\n        var line = input.substring(0, lastWhitespaceIdx);\n        var encoded = font.encodeText(line);\n        var width = font.widthOfTextAtSize(line, fontSize);\n        if (width < maxWidth) {\n            var remainder = input.substring(lastWhitespaceIdx) || undefined;\n            return { line: line, encoded: encoded, width: width, remainder: remainder };\n        }\n        lastWhitespaceIdx = (_a = lastIndexOfWhitespace(line)) !== null && _a !== void 0 ? _a : 0;\n    }\n    // We were unable to split the input enough to get a chunk that would fit\n    // within the specified `maxWidth` so we'll just return everything\n    return {\n        line: input,\n        encoded: font.encodeText(input),\n        width: font.widthOfTextAtSize(input, fontSize),\n        remainder: undefined,\n    };\n};\nexport var layoutMultilineText = function (text, _a) {\n    var alignment = _a.alignment, fontSize = _a.fontSize, font = _a.font, bounds = _a.bounds;\n    var lines = lineSplit(cleanText(text));\n    if (fontSize === undefined || fontSize === 0) {\n        fontSize = computeFontSize(lines, font, bounds, true);\n    }\n    var height = font.heightAtSize(fontSize);\n    var lineHeight = height + height * 0.2;\n    var textLines = [];\n    var minX = bounds.x;\n    var minY = bounds.y;\n    var maxX = bounds.x + bounds.width;\n    var maxY = bounds.y + bounds.height;\n    var y = bounds.y + bounds.height;\n    for (var idx = 0, len = lines.length; idx < len; idx++) {\n        var prevRemainder = lines[idx];\n        while (prevRemainder !== undefined) {\n            var _b = splitOutLines(prevRemainder, bounds.width, font, fontSize), line = _b.line, encoded = _b.encoded, width = _b.width, remainder = _b.remainder;\n            // prettier-ignore\n            var x = (alignment === TextAlignment.Left ? bounds.x\n                : alignment === TextAlignment.Center ? bounds.x + (bounds.width / 2) - (width / 2)\n                    : alignment === TextAlignment.Right ? bounds.x + bounds.width - width\n                        : bounds.x);\n            y -= lineHeight;\n            if (x < minX)\n                minX = x;\n            if (y < minY)\n                minY = y;\n            if (x + width > maxX)\n                maxX = x + width;\n            if (y + height > maxY)\n                maxY = y + height;\n            textLines.push({ text: line, encoded: encoded, width: width, height: height, x: x, y: y });\n            // Only trim lines that we had to split ourselves. So we won't trim lines\n            // that the user provided themselves with whitespace.\n            prevRemainder = remainder === null || remainder === void 0 ? void 0 : remainder.trim();\n        }\n    }\n    return {\n        fontSize: fontSize,\n        lineHeight: lineHeight,\n        lines: textLines,\n        bounds: {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        },\n    };\n};\nexport var layoutCombedText = function (text, _a) {\n    var fontSize = _a.fontSize, font = _a.font, bounds = _a.bounds, cellCount = _a.cellCount;\n    var line = mergeLines(cleanText(text));\n    if (line.length > cellCount) {\n        throw new CombedTextLayoutError(line.length, cellCount);\n    }\n    if (fontSize === undefined || fontSize === 0) {\n        fontSize = computeCombedFontSize(line, font, bounds, cellCount);\n    }\n    var cellWidth = bounds.width / cellCount;\n    var height = font.heightAtSize(fontSize, { descender: false });\n    var y = bounds.y + (bounds.height / 2 - height / 2);\n    var cells = [];\n    var minX = bounds.x;\n    var minY = bounds.y;\n    var maxX = bounds.x + bounds.width;\n    var maxY = bounds.y + bounds.height;\n    var cellOffset = 0;\n    var charOffset = 0;\n    while (cellOffset < cellCount) {\n        var _b = charAtIndex(line, charOffset), char = _b[0], charLength = _b[1];\n        var encoded = font.encodeText(char);\n        var width = font.widthOfTextAtSize(char, fontSize);\n        var cellCenter = bounds.x + (cellWidth * cellOffset + cellWidth / 2);\n        var x = cellCenter - width / 2;\n        if (x < minX)\n            minX = x;\n        if (y < minY)\n            minY = y;\n        if (x + width > maxX)\n            maxX = x + width;\n        if (y + height > maxY)\n            maxY = y + height;\n        cells.push({ text: line, encoded: encoded, width: width, height: height, x: x, y: y });\n        cellOffset += 1;\n        charOffset += charLength;\n    }\n    return {\n        fontSize: fontSize,\n        cells: cells,\n        bounds: {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        },\n    };\n};\nexport var layoutSinglelineText = function (text, _a) {\n    var alignment = _a.alignment, fontSize = _a.fontSize, font = _a.font, bounds = _a.bounds;\n    var line = mergeLines(cleanText(text));\n    if (fontSize === undefined || fontSize === 0) {\n        fontSize = computeFontSize([line], font, bounds);\n    }\n    var encoded = font.encodeText(line);\n    var width = font.widthOfTextAtSize(line, fontSize);\n    var height = font.heightAtSize(fontSize, { descender: false });\n    // prettier-ignore\n    var x = (alignment === TextAlignment.Left ? bounds.x\n        : alignment === TextAlignment.Center ? bounds.x + (bounds.width / 2) - (width / 2)\n            : alignment === TextAlignment.Right ? bounds.x + bounds.width - width\n                : bounds.x);\n    var y = bounds.y + (bounds.height / 2 - height / 2);\n    return {\n        fontSize: fontSize,\n        line: { text: line, encoded: encoded, width: width, height: height, x: x, y: y },\n        bounds: { x: x, y: y, width: width, height: height },\n    };\n};\n//# sourceMappingURL=layout.js.map","import { __assign, __spreadArrays } from \"tslib\";\nimport { drawCheckBox, rotateInPlace, drawRadioButton, drawButton, drawTextField, drawOptionList, } from \"../operations\";\nimport { rgb, componentsToColor, setFillingColor, grayscale, cmyk, } from \"../colors\";\nimport { reduceRotation, adjustDimsForRotation } from \"../rotations\";\nimport { layoutMultilineText, layoutCombedText, layoutSinglelineText, } from \"../text/layout\";\nimport { TextAlignment } from \"../text/alignment\";\nimport { setFontAndSize } from \"../operators\";\nimport { findLastMatch } from \"../../utils\";\n/********************* Appearance Provider Functions **************************/\nexport var normalizeAppearance = function (appearance) {\n    if ('normal' in appearance)\n        return appearance;\n    return { normal: appearance };\n};\n// Examples:\n//   `/Helv 12 Tf` -> ['/Helv 12 Tf', 'Helv', '12']\n//   `/HeBo 8.00 Tf` -> ['/HeBo 8 Tf', 'HeBo', '8.00']\nvar tfRegex = /\\/([^\\0\\t\\n\\f\\r\\ ]+)[\\0\\t\\n\\f\\r\\ ]+(\\d*\\.\\d+|\\d+)[\\0\\t\\n\\f\\r\\ ]+Tf/;\nvar getDefaultFontSize = function (field) {\n    var _a, _b;\n    var da = (_a = field.getDefaultAppearance()) !== null && _a !== void 0 ? _a : '';\n    var daMatch = (_b = findLastMatch(da, tfRegex).match) !== null && _b !== void 0 ? _b : [];\n    var defaultFontSize = Number(daMatch[2]);\n    return isFinite(defaultFontSize) ? defaultFontSize : undefined;\n};\n// Examples:\n//   `0.3 g` -> ['0.3', 'g']\n//   `0.3 1 .3 rg` -> ['0.3', '1', '.3', 'rg']\n//   `0.3 1 .3 0 k` -> ['0.3', '1', '.3', '0', 'k']\nvar colorRegex = /(\\d*\\.\\d+|\\d+)[\\0\\t\\n\\f\\r\\ ]*(\\d*\\.\\d+|\\d+)?[\\0\\t\\n\\f\\r\\ ]*(\\d*\\.\\d+|\\d+)?[\\0\\t\\n\\f\\r\\ ]*(\\d*\\.\\d+|\\d+)?[\\0\\t\\n\\f\\r\\ ]+(g|rg|k)/;\nvar getDefaultColor = function (field) {\n    var _a;\n    var da = (_a = field.getDefaultAppearance()) !== null && _a !== void 0 ? _a : '';\n    var daMatch = findLastMatch(da, colorRegex).match;\n    var _b = daMatch !== null && daMatch !== void 0 ? daMatch : [], c1 = _b[1], c2 = _b[2], c3 = _b[3], c4 = _b[4], colorSpace = _b[5];\n    if (colorSpace === 'g' && c1) {\n        return grayscale(Number(c1));\n    }\n    if (colorSpace === 'rg' && c1 && c2 && c3) {\n        return rgb(Number(c1), Number(c2), Number(c3));\n    }\n    if (colorSpace === 'k' && c1 && c2 && c3 && c4) {\n        return cmyk(Number(c1), Number(c2), Number(c3), Number(c4));\n    }\n    return undefined;\n};\nvar updateDefaultAppearance = function (field, color, font, fontSize) {\n    var _a;\n    if (fontSize === void 0) { fontSize = 0; }\n    var da = [\n        setFillingColor(color).toString(),\n        setFontAndSize((_a = font === null || font === void 0 ? void 0 : font.name) !== null && _a !== void 0 ? _a : 'dummy__noop', fontSize).toString(),\n    ].join('\\n');\n    field.setDefaultAppearance(da);\n};\nexport var defaultCheckBoxAppearanceProvider = function (checkBox, widget) {\n    var _a, _b, _c;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(checkBox.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var borderWidth = (_a = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _a !== void 0 ? _a : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _d = adjustDimsForRotation(rectangle, rotation), width = _d.width, height = _d.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = (_b = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor())) !== null && _b !== void 0 ? _b : black;\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var downBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor(), 0.8);\n    // Update color\n    var textColor = (_c = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _c !== void 0 ? _c : black;\n    if (widgetColor) {\n        updateDefaultAppearance(widget, textColor);\n    }\n    else {\n        updateDefaultAppearance(checkBox.acroField, textColor);\n    }\n    var options = {\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        thickness: 1.5,\n        borderWidth: borderWidth,\n        borderColor: borderColor,\n        markColor: textColor,\n    };\n    return {\n        normal: {\n            on: __spreadArrays(rotate, drawCheckBox(__assign(__assign({}, options), { color: normalBackgroundColor, filled: true }))),\n            off: __spreadArrays(rotate, drawCheckBox(__assign(__assign({}, options), { color: normalBackgroundColor, filled: false }))),\n        },\n        down: {\n            on: __spreadArrays(rotate, drawCheckBox(__assign(__assign({}, options), { color: downBackgroundColor, filled: true }))),\n            off: __spreadArrays(rotate, drawCheckBox(__assign(__assign({}, options), { color: downBackgroundColor, filled: false }))),\n        },\n    };\n};\nexport var defaultRadioGroupAppearanceProvider = function (radioGroup, widget) {\n    var _a, _b, _c;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(radioGroup.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var borderWidth = (_a = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _a !== void 0 ? _a : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _d = adjustDimsForRotation(rectangle, rotation), width = _d.width, height = _d.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = (_b = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor())) !== null && _b !== void 0 ? _b : black;\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var downBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor(), 0.8);\n    // Update color\n    var textColor = (_c = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _c !== void 0 ? _c : black;\n    if (widgetColor) {\n        updateDefaultAppearance(widget, textColor);\n    }\n    else {\n        updateDefaultAppearance(radioGroup.acroField, textColor);\n    }\n    var options = {\n        x: width / 2,\n        y: height / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth,\n        borderColor: borderColor,\n        dotColor: textColor,\n    };\n    return {\n        normal: {\n            on: __spreadArrays(rotate, drawRadioButton(__assign(__assign({}, options), { color: normalBackgroundColor, filled: true }))),\n            off: __spreadArrays(rotate, drawRadioButton(__assign(__assign({}, options), { color: normalBackgroundColor, filled: false }))),\n        },\n        down: {\n            on: __spreadArrays(rotate, drawRadioButton(__assign(__assign({}, options), { color: downBackgroundColor, filled: true }))),\n            off: __spreadArrays(rotate, drawRadioButton(__assign(__assign({}, options), { color: downBackgroundColor, filled: false }))),\n        },\n    };\n};\nexport var defaultButtonAppearanceProvider = function (button, widget, font) {\n    var _a, _b, _c, _d, _e;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(button.acroField);\n    var widgetFontSize = getDefaultFontSize(widget);\n    var fieldFontSize = getDefaultFontSize(button.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var captions = ap === null || ap === void 0 ? void 0 : ap.getCaptions();\n    var normalText = (_a = captions === null || captions === void 0 ? void 0 : captions.normal) !== null && _a !== void 0 ? _a : '';\n    var downText = (_c = (_b = captions === null || captions === void 0 ? void 0 : captions.down) !== null && _b !== void 0 ? _b : normalText) !== null && _c !== void 0 ? _c : '';\n    var borderWidth = (_d = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _d !== void 0 ? _d : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _f = adjustDimsForRotation(rectangle, rotation), width = _f.width, height = _f.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor());\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var downBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor(), 0.8);\n    var bounds = {\n        x: borderWidth,\n        y: borderWidth,\n        width: width - borderWidth * 2,\n        height: height - borderWidth * 2,\n    };\n    var normalLayout = layoutSinglelineText(normalText, {\n        alignment: TextAlignment.Center,\n        fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n        font: font,\n        bounds: bounds,\n    });\n    var downLayout = layoutSinglelineText(downText, {\n        alignment: TextAlignment.Center,\n        fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n        font: font,\n        bounds: bounds,\n    });\n    // Update font size and color\n    var fontSize = Math.min(normalLayout.fontSize, downLayout.fontSize);\n    var textColor = (_e = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _e !== void 0 ? _e : black;\n    if (widgetColor || widgetFontSize !== undefined) {\n        updateDefaultAppearance(widget, textColor, font, fontSize);\n    }\n    else {\n        updateDefaultAppearance(button.acroField, textColor, font, fontSize);\n    }\n    var options = {\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth,\n        borderColor: borderColor,\n        textColor: textColor,\n        font: font.name,\n        fontSize: fontSize,\n    };\n    return {\n        normal: __spreadArrays(rotate, drawButton(__assign(__assign({}, options), { color: normalBackgroundColor, textLines: [normalLayout.line] }))),\n        down: __spreadArrays(rotate, drawButton(__assign(__assign({}, options), { color: downBackgroundColor, textLines: [downLayout.line] }))),\n    };\n};\nexport var defaultTextFieldAppearanceProvider = function (textField, widget, font) {\n    var _a, _b, _c, _d;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(textField.acroField);\n    var widgetFontSize = getDefaultFontSize(widget);\n    var fieldFontSize = getDefaultFontSize(textField.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var text = (_a = textField.getText()) !== null && _a !== void 0 ? _a : '';\n    var borderWidth = (_b = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _b !== void 0 ? _b : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _e = adjustDimsForRotation(rectangle, rotation), width = _e.width, height = _e.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor());\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var textLines;\n    var fontSize;\n    var padding = textField.isCombed() ? 0 : 1;\n    var bounds = {\n        x: borderWidth + padding,\n        y: borderWidth + padding,\n        width: width - (borderWidth + padding) * 2,\n        height: height - (borderWidth + padding) * 2,\n    };\n    if (textField.isMultiline()) {\n        var layout = layoutMultilineText(text, {\n            alignment: textField.getAlignment(),\n            fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n            font: font,\n            bounds: bounds,\n        });\n        textLines = layout.lines;\n        fontSize = layout.fontSize;\n    }\n    else if (textField.isCombed()) {\n        var layout = layoutCombedText(text, {\n            fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n            font: font,\n            bounds: bounds,\n            cellCount: (_c = textField.getMaxLength()) !== null && _c !== void 0 ? _c : 0,\n        });\n        textLines = layout.cells;\n        fontSize = layout.fontSize;\n    }\n    else {\n        var layout = layoutSinglelineText(text, {\n            alignment: textField.getAlignment(),\n            fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n            font: font,\n            bounds: bounds,\n        });\n        textLines = [layout.line];\n        fontSize = layout.fontSize;\n    }\n    // Update font size and color\n    var textColor = (_d = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _d !== void 0 ? _d : black;\n    if (widgetColor || widgetFontSize !== undefined) {\n        updateDefaultAppearance(widget, textColor, font, fontSize);\n    }\n    else {\n        updateDefaultAppearance(textField.acroField, textColor, font, fontSize);\n    }\n    var options = {\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth !== null && borderWidth !== void 0 ? borderWidth : 0,\n        borderColor: borderColor,\n        textColor: textColor,\n        font: font.name,\n        fontSize: fontSize,\n        color: normalBackgroundColor,\n        textLines: textLines,\n        padding: padding,\n    };\n    return __spreadArrays(rotate, drawTextField(options));\n};\nexport var defaultDropdownAppearanceProvider = function (dropdown, widget, font) {\n    var _a, _b, _c;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(dropdown.acroField);\n    var widgetFontSize = getDefaultFontSize(widget);\n    var fieldFontSize = getDefaultFontSize(dropdown.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var text = (_a = dropdown.getSelected()[0]) !== null && _a !== void 0 ? _a : '';\n    var borderWidth = (_b = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _b !== void 0 ? _b : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _d = adjustDimsForRotation(rectangle, rotation), width = _d.width, height = _d.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor());\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var padding = 1;\n    var bounds = {\n        x: borderWidth + padding,\n        y: borderWidth + padding,\n        width: width - (borderWidth + padding) * 2,\n        height: height - (borderWidth + padding) * 2,\n    };\n    var _e = layoutSinglelineText(text, {\n        alignment: TextAlignment.Left,\n        fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n        font: font,\n        bounds: bounds,\n    }), line = _e.line, fontSize = _e.fontSize;\n    // Update font size and color\n    var textColor = (_c = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _c !== void 0 ? _c : black;\n    if (widgetColor || widgetFontSize !== undefined) {\n        updateDefaultAppearance(widget, textColor, font, fontSize);\n    }\n    else {\n        updateDefaultAppearance(dropdown.acroField, textColor, font, fontSize);\n    }\n    var options = {\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth !== null && borderWidth !== void 0 ? borderWidth : 0,\n        borderColor: borderColor,\n        textColor: textColor,\n        font: font.name,\n        fontSize: fontSize,\n        color: normalBackgroundColor,\n        textLines: [line],\n        padding: padding,\n    };\n    return __spreadArrays(rotate, drawTextField(options));\n};\nexport var defaultOptionListAppearanceProvider = function (optionList, widget, font) {\n    var _a, _b;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(optionList.acroField);\n    var widgetFontSize = getDefaultFontSize(widget);\n    var fieldFontSize = getDefaultFontSize(optionList.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var borderWidth = (_a = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _a !== void 0 ? _a : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _c = adjustDimsForRotation(rectangle, rotation), width = _c.width, height = _c.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor());\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var options = optionList.getOptions();\n    var selected = optionList.getSelected();\n    if (optionList.isSorted())\n        options.sort();\n    var text = '';\n    for (var idx = 0, len = options.length; idx < len; idx++) {\n        text += options[idx];\n        if (idx < len - 1)\n            text += '\\n';\n    }\n    var padding = 1;\n    var bounds = {\n        x: borderWidth + padding,\n        y: borderWidth + padding,\n        width: width - (borderWidth + padding) * 2,\n        height: height - (borderWidth + padding) * 2,\n    };\n    var _d = layoutMultilineText(text, {\n        alignment: TextAlignment.Left,\n        fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n        font: font,\n        bounds: bounds,\n    }), lines = _d.lines, fontSize = _d.fontSize, lineHeight = _d.lineHeight;\n    var selectedLines = [];\n    for (var idx = 0, len = lines.length; idx < len; idx++) {\n        var line = lines[idx];\n        if (selected.includes(line.text))\n            selectedLines.push(idx);\n    }\n    var blue = rgb(153 / 255, 193 / 255, 218 / 255);\n    // Update font size and color\n    var textColor = (_b = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _b !== void 0 ? _b : black;\n    if (widgetColor || widgetFontSize !== undefined) {\n        updateDefaultAppearance(widget, textColor, font, fontSize);\n    }\n    else {\n        updateDefaultAppearance(optionList.acroField, textColor, font, fontSize);\n    }\n    return __spreadArrays(rotate, drawOptionList({\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth !== null && borderWidth !== void 0 ? borderWidth : 0,\n        borderColor: borderColor,\n        textColor: textColor,\n        font: font.name,\n        fontSize: fontSize,\n        color: normalBackgroundColor,\n        textLines: lines,\n        lineHeight: lineHeight,\n        selectedColor: blue,\n        selectedLines: selectedLines,\n        padding: padding,\n    }));\n};\n//# sourceMappingURL=appearances.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFDocument from \"./PDFDocument\";\nimport { PDFPageEmbedder, PDFRef } from \"../core\";\nimport { assertIs } from \"../utils\";\n/**\n * Represents a PDF page that has been embedded in a [[PDFDocument]].\n */\nvar PDFEmbeddedPage = /** @class */ (function () {\n    function PDFEmbeddedPage(ref, doc, embedder) {\n        this.alreadyEmbedded = false;\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        assertIs(embedder, 'embedder', [[PDFPageEmbedder, 'PDFPageEmbedder']]);\n        this.ref = ref;\n        this.doc = doc;\n        this.width = embedder.width;\n        this.height = embedder.height;\n        this.embedder = embedder;\n    }\n    /**\n     * Compute the width and height of this page after being scaled by the\n     * given `factor`. For example:\n     * ```js\n     * embeddedPage.width  // => 500\n     * embeddedPage.height // => 250\n     *\n     * const scaled = embeddedPage.scale(0.5)\n     * scaled.width  // => 250\n     * scaled.height // => 125\n     * ```\n     * This operation is often useful before drawing a page with\n     * [[PDFPage.drawPage]] to compute the `width` and `height` options.\n     * @param factor The factor by which this page should be scaled.\n     * @returns The width and height of the page after being scaled.\n     */\n    PDFEmbeddedPage.prototype.scale = function (factor) {\n        assertIs(factor, 'factor', ['number']);\n        return { width: this.width * factor, height: this.height * factor };\n    };\n    /**\n     * Get the width and height of this page. For example:\n     * ```js\n     * const { width, height } = embeddedPage.size()\n     * ```\n     * @returns The width and height of the page.\n     */\n    PDFEmbeddedPage.prototype.size = function () {\n        return this.scale(1);\n    };\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all embeddable pages get embedded.\n     *\n     * Embed this embeddable page in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFEmbeddedPage.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.alreadyEmbedded) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.embedder.embedIntoContext(this.doc.context, this.ref)];\n                    case 1:\n                        _a.sent();\n                        this.alreadyEmbedded = true;\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.embedPdf]] and\n     * > [[PDFDocument.embedPage]] methods, which will create instances of\n     * > [[PDFEmbeddedPage]] for you.\n     *\n     * Create an instance of [[PDFEmbeddedPage]] from an existing ref and embedder\n     *\n     * @param ref The unique reference for this embedded page.\n     * @param doc The document to which the embedded page will belong.\n     * @param embedder The embedder that will be used to embed the page.\n     */\n    PDFEmbeddedPage.of = function (ref, doc, embedder) {\n        return new PDFEmbeddedPage(ref, doc, embedder);\n    };\n    return PDFEmbeddedPage;\n}());\nexport default PDFEmbeddedPage;\n//# sourceMappingURL=PDFEmbeddedPage.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFDocument from \"./PDFDocument\";\nimport { CustomFontEmbedder, PDFRef, StandardFontEmbedder, } from \"../core\";\nimport { assertIs, assertOrUndefined } from \"../utils\";\n/**\n * Represents a font that has been embedded in a [[PDFDocument]].\n */\nvar PDFFont = /** @class */ (function () {\n    function PDFFont(ref, doc, embedder) {\n        this.modified = true;\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        assertIs(embedder, 'embedder', [\n            [CustomFontEmbedder, 'CustomFontEmbedder'],\n            [StandardFontEmbedder, 'StandardFontEmbedder'],\n        ]);\n        this.ref = ref;\n        this.doc = doc;\n        this.name = embedder.fontName;\n        this.embedder = embedder;\n    }\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFPage.drawText]] method will automatically encode the text it is\n     * > given.\n     *\n     * Encodes a string of text in this font.\n     *\n     * @param text The text to be encoded.\n     * @returns The encoded text as a hex string.\n     */\n    PDFFont.prototype.encodeText = function (text) {\n        assertIs(text, 'text', ['string']);\n        this.modified = true;\n        return this.embedder.encodeText(text);\n    };\n    /**\n     * Measure the width of a string of text drawn in this font at a given size.\n     * For example:\n     * ```js\n     * const width = font.widthOfTextAtSize('Foo Bar Qux Baz', 36)\n     * ```\n     * @param text The string of text to be measured.\n     * @param size The font size to be used for this measurement.\n     * @returns The width of the string of text when drawn in this font at the\n     *          given size.\n     */\n    PDFFont.prototype.widthOfTextAtSize = function (text, size) {\n        assertIs(text, 'text', ['string']);\n        assertIs(size, 'size', ['number']);\n        return this.embedder.widthOfTextAtSize(text, size);\n    };\n    /**\n     * Measure the height of this font at a given size. For example:\n     * ```js\n     * const height = font.heightAtSize(24)\n     * ```\n     *\n     * The `options.descender` value controls whether or not the font's\n     * descender is included in the height calculation.\n     *\n     * @param size The font size to be used for this measurement.\n     * @param options The options to be used when computing this measurement.\n     * @returns The height of this font at the given size.\n     */\n    PDFFont.prototype.heightAtSize = function (size, options) {\n        var _a;\n        assertIs(size, 'size', ['number']);\n        assertOrUndefined(options === null || options === void 0 ? void 0 : options.descender, 'options.descender', ['boolean']);\n        return this.embedder.heightOfFontAtSize(size, {\n            descender: (_a = options === null || options === void 0 ? void 0 : options.descender) !== null && _a !== void 0 ? _a : true,\n        });\n    };\n    /**\n     * Compute the font size at which this font is a given height. For example:\n     * ```js\n     * const fontSize = font.sizeAtHeight(12)\n     * ```\n     * @param height The height to be used for this calculation.\n     * @returns The font size at which this font is the given height.\n     */\n    PDFFont.prototype.sizeAtHeight = function (height) {\n        assertIs(height, 'height', ['number']);\n        return this.embedder.sizeOfFontAtHeight(height);\n    };\n    /**\n     * Get the set of unicode code points that can be represented by this font.\n     * @returns The set of unicode code points supported by this font.\n     */\n    PDFFont.prototype.getCharacterSet = function () {\n        if (this.embedder instanceof StandardFontEmbedder) {\n            return this.embedder.encoding.supportedCodePoints;\n        }\n        else {\n            return this.embedder.font.characterSet;\n        }\n    };\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all fonts get embedded.\n     *\n     * Embed this font in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFFont.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.modified) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.embedder.embedIntoContext(this.doc.context, this.ref)];\n                    case 1:\n                        _a.sent();\n                        this.modified = false;\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.embedFont]] and\n     * > [[PDFDocument.embedStandardFont]] methods, which will create instances\n     * > of [[PDFFont]] for you.\n     *\n     * Create an instance of [[PDFFont]] from an existing ref and embedder\n     *\n     * @param ref The unique reference for this font.\n     * @param doc The document to which the font will belong.\n     * @param embedder The embedder that will be used to embed the font.\n     */\n    PDFFont.of = function (ref, doc, embedder) {\n        return new PDFFont(ref, doc, embedder);\n    };\n    return PDFFont;\n}());\nexport default PDFFont;\n//# sourceMappingURL=PDFFont.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFDocument from \"./PDFDocument\";\nimport { JpegEmbedder, PDFRef, PngEmbedder } from \"../core\";\nimport { assertIs } from \"../utils\";\n/**\n * Represents an image that has been embedded in a [[PDFDocument]].\n */\nvar PDFImage = /** @class */ (function () {\n    function PDFImage(ref, doc, embedder) {\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        assertIs(embedder, 'embedder', [\n            [JpegEmbedder, 'JpegEmbedder'],\n            [PngEmbedder, 'PngEmbedder'],\n        ]);\n        this.ref = ref;\n        this.doc = doc;\n        this.width = embedder.width;\n        this.height = embedder.height;\n        this.embedder = embedder;\n    }\n    /**\n     * Compute the width and height of this image after being scaled by the\n     * given `factor`. For example:\n     * ```js\n     * image.width  // => 500\n     * image.height // => 250\n     *\n     * const scaled = image.scale(0.5)\n     * scaled.width  // => 250\n     * scaled.height // => 125\n     * ```\n     * This operation is often useful before drawing an image with\n     * [[PDFPage.drawImage]] to compute the `width` and `height` options.\n     * @param factor The factor by which this image should be scaled.\n     * @returns The width and height of the image after being scaled.\n     */\n    PDFImage.prototype.scale = function (factor) {\n        assertIs(factor, 'factor', ['number']);\n        return { width: this.width * factor, height: this.height * factor };\n    };\n    /**\n     * Get the width and height of this image after scaling it as large as\n     * possible while maintaining its aspect ratio and not exceeding the\n     * specified `width` and `height`. For example:\n     * ```\n     * image.width  // => 500\n     * image.height // => 250\n     *\n     * const scaled = image.scaleToFit(750, 1000)\n     * scaled.width  // => 750\n     * scaled.height // => 375\n     * ```\n     * The `width` and `height` parameters can also be thought of as the width\n     * and height of a box that the scaled image must fit within.\n     * @param width The bounding box's width.\n     * @param height The bounding box's height.\n     * @returns The width and height of the image after being scaled.\n     */\n    PDFImage.prototype.scaleToFit = function (width, height) {\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var imgWidthScale = width / this.width;\n        var imgHeightScale = height / this.height;\n        var scale = Math.min(imgWidthScale, imgHeightScale);\n        return this.scale(scale);\n    };\n    /**\n     * Get the width and height of this image. For example:\n     * ```js\n     * const { width, height } = image.size()\n     * ```\n     * @returns The width and height of the image.\n     */\n    PDFImage.prototype.size = function () {\n        return this.scale(1);\n    };\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all images get embedded.\n     *\n     * Embed this image in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFImage.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, doc, ref;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.embedder)\n                            return [2 /*return*/];\n                        // The image should only be embedded once. If there's a pending embed\n                        // operation then wait on it. Otherwise we need to start the embed.\n                        if (!this.embedTask) {\n                            _a = this, doc = _a.doc, ref = _a.ref;\n                            this.embedTask = this.embedder.embedIntoContext(doc.context, ref);\n                        }\n                        return [4 /*yield*/, this.embedTask];\n                    case 1:\n                        _b.sent();\n                        // We clear `this.embedder` so that the indirectly referenced image data\n                        // can be garbage collected, thus avoiding a memory leak.\n                        // See https://github.com/Hopding/pdf-lib/pull/1032/files.\n                        this.embedder = undefined;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.embedPng]] and [[PDFDocument.embedJpg]]\n     * > methods, which will create instances of [[PDFImage]] for you.\n     *\n     * Create an instance of [[PDFImage]] from an existing ref and embedder\n     *\n     * @param ref The unique reference for this image.\n     * @param doc The document to which the image will belong.\n     * @param embedder The embedder that will be used to embed the image.\n     */\n    PDFImage.of = function (ref, doc, embedder) {\n        return new PDFImage(ref, doc, embedder);\n    };\n    return PDFImage;\n}());\nexport default PDFImage;\n//# sourceMappingURL=PDFImage.js.map","export var ImageAlignment;\n(function (ImageAlignment) {\n    ImageAlignment[ImageAlignment[\"Left\"] = 0] = \"Left\";\n    ImageAlignment[ImageAlignment[\"Center\"] = 1] = \"Center\";\n    ImageAlignment[ImageAlignment[\"Right\"] = 2] = \"Right\";\n})(ImageAlignment || (ImageAlignment = {}));\n//# sourceMappingURL=alignment.js.map","import { __assign, __spreadArrays } from \"tslib\";\nimport PDFDocument from \"../PDFDocument\";\nimport { colorToComponents, setFillingColor } from \"../colors\";\nimport { toDegrees, rotateRectangle, reduceRotation, adjustDimsForRotation, degrees, } from \"../rotations\";\nimport { PDFRef, PDFWidgetAnnotation, PDFName, MethodNotImplementedError, AcroFieldFlags, PDFAcroTerminal, AnnotationFlags, } from \"../../core\";\nimport { assertIs, assertMultiple, assertOrUndefined } from \"../../utils\";\nimport { ImageAlignment } from '../image';\nimport { drawImage, rotateInPlace } from '../operations';\nexport var assertFieldAppearanceOptions = function (options) {\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.x, 'options.x', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.y, 'options.y', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.width, 'options.width', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.height, 'options.height', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.textColor, 'options.textColor', [\n        [Object, 'Color'],\n    ]);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.backgroundColor, 'options.backgroundColor', [\n        [Object, 'Color'],\n    ]);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.borderColor, 'options.borderColor', [\n        [Object, 'Color'],\n    ]);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.borderWidth, 'options.borderWidth', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n};\n/**\n * Represents a field of a [[PDFForm]].\n *\n * This class is effectively abstract. All fields in a [[PDFForm]] will\n * actually be an instance of a subclass of this class.\n *\n * Note that each field in a PDF is represented by a single field object.\n * However, a given field object may be rendered at multiple locations within\n * the document (across one or more pages). The rendering of a field is\n * controlled by its widgets. Each widget causes its field to be displayed at a\n * particular location in the document.\n *\n * Most of the time each field in a PDF has only a single widget, and thus is\n * only rendered once. However, if a field is rendered multiple times, it will\n * have multiple widgets - one for each location it is rendered.\n *\n * This abstraction of field objects and widgets is defined in the PDF\n * specification and dictates how PDF files store fields and where they are\n * to be rendered.\n */\nvar PDFField = /** @class */ (function () {\n    function PDFField(acroField, ref, doc) {\n        assertIs(acroField, 'acroField', [[PDFAcroTerminal, 'PDFAcroTerminal']]);\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        this.acroField = acroField;\n        this.ref = ref;\n        this.doc = doc;\n    }\n    /**\n     * Get the fully qualified name of this field. For example:\n     * ```js\n     * const fields = form.getFields()\n     * fields.forEach(field => {\n     *   const name = field.getName()\n     *   console.log('Field name:', name)\n     * })\n     * ```\n     * Note that PDF fields are structured as a tree. Each field is the\n     * descendent of a series of ancestor nodes all the way up to the form node,\n     * which is always the root of the tree. Each node in the tree (except for\n     * the form node) has a partial name. Partial names can be composed of any\n     * unicode characters except a period (`.`). The fully qualified name of a\n     * field is composed of the partial names of all its ancestors joined\n     * with periods. This means that splitting the fully qualified name on\n     * periods and taking the last element of the resulting array will give you\n     * the partial name of a specific field.\n     * @returns The fully qualified name of this field.\n     */\n    PDFField.prototype.getName = function () {\n        var _a;\n        return (_a = this.acroField.getFullyQualifiedName()) !== null && _a !== void 0 ? _a : '';\n    };\n    /**\n     * Returns `true` if this field is read only. This means that PDF readers\n     * will not allow users to interact with the field or change its value. See\n     * [[PDFField.enableReadOnly]] and [[PDFField.disableReadOnly]].\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * if (field.isReadOnly()) console.log('Read only is enabled')\n     * ```\n     * @returns Whether or not this is a read only field.\n     */\n    PDFField.prototype.isReadOnly = function () {\n        return this.acroField.hasFlag(AcroFieldFlags.ReadOnly);\n    };\n    /**\n     * Prevent PDF readers from allowing users to interact with this field or\n     * change its value. The field will not respond to mouse or keyboard input.\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.enableReadOnly()\n     * ```\n     * Useful for fields whose values are computed, imported from a database, or\n     * prefilled by software before being displayed to the user.\n     */\n    PDFField.prototype.enableReadOnly = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.ReadOnly, true);\n    };\n    /**\n     * Allow users to interact with this field and change its value in PDF\n     * readers via mouse and keyboard input. For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.disableReadOnly()\n     * ```\n     */\n    PDFField.prototype.disableReadOnly = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.ReadOnly, false);\n    };\n    /**\n     * Returns `true` if this field must have a value when the form is submitted.\n     * See [[PDFField.enableRequired]] and [[PDFField.disableRequired]].\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * if (field.isRequired()) console.log('Field is required')\n     * ```\n     * @returns Whether or not this field is required.\n     */\n    PDFField.prototype.isRequired = function () {\n        return this.acroField.hasFlag(AcroFieldFlags.Required);\n    };\n    /**\n     * Require this field to have a value when the form is submitted.\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.enableRequired()\n     * ```\n     */\n    PDFField.prototype.enableRequired = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.Required, true);\n    };\n    /**\n     * Do not require this field to have a value when the form is submitted.\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.disableRequired()\n     * ```\n     */\n    PDFField.prototype.disableRequired = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.Required, false);\n    };\n    /**\n     * Returns `true` if this field's value should be exported when the form is\n     * submitted. See [[PDFField.enableExporting]] and\n     * [[PDFField.disableExporting]].\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * if (field.isExported()) console.log('Exporting is enabled')\n     * ```\n     * @returns Whether or not this field's value should be exported.\n     */\n    PDFField.prototype.isExported = function () {\n        return !this.acroField.hasFlag(AcroFieldFlags.NoExport);\n    };\n    /**\n     * Indicate that this field's value should be exported when the form is\n     * submitted in a PDF reader. For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.enableExporting()\n     * ```\n     */\n    PDFField.prototype.enableExporting = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.NoExport, false);\n    };\n    /**\n     * Indicate that this field's value should **not** be exported when the form\n     * is submitted in a PDF reader. For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.disableExporting()\n     * ```\n     */\n    PDFField.prototype.disableExporting = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.NoExport, true);\n    };\n    /** @ignore */\n    PDFField.prototype.needsAppearancesUpdate = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'needsAppearancesUpdate');\n    };\n    /** @ignore */\n    PDFField.prototype.defaultUpdateAppearances = function (_font) {\n        throw new MethodNotImplementedError(this.constructor.name, 'defaultUpdateAppearances');\n    };\n    PDFField.prototype.markAsDirty = function () {\n        this.doc.getForm().markFieldAsDirty(this.ref);\n    };\n    PDFField.prototype.markAsClean = function () {\n        this.doc.getForm().markFieldAsClean(this.ref);\n    };\n    PDFField.prototype.isDirty = function () {\n        return this.doc.getForm().fieldIsDirty(this.ref);\n    };\n    PDFField.prototype.createWidget = function (options) {\n        var _a;\n        var textColor = options.textColor;\n        var backgroundColor = options.backgroundColor;\n        var borderColor = options.borderColor;\n        var borderWidth = options.borderWidth;\n        var degreesAngle = toDegrees(options.rotate);\n        var caption = options.caption;\n        var x = options.x;\n        var y = options.y;\n        var width = options.width + borderWidth;\n        var height = options.height + borderWidth;\n        var hidden = Boolean(options.hidden);\n        var pageRef = options.page;\n        assertMultiple(degreesAngle, 'degreesAngle', 90);\n        // Create a widget for this field\n        var widget = PDFWidgetAnnotation.create(this.doc.context, this.ref);\n        // Set widget properties\n        var rect = rotateRectangle({ x: x, y: y, width: width, height: height }, borderWidth, degreesAngle);\n        widget.setRectangle(rect);\n        if (pageRef)\n            widget.setP(pageRef);\n        var ac = widget.getOrCreateAppearanceCharacteristics();\n        if (backgroundColor) {\n            ac.setBackgroundColor(colorToComponents(backgroundColor));\n        }\n        ac.setRotation(degreesAngle);\n        if (caption)\n            ac.setCaptions({ normal: caption });\n        if (borderColor)\n            ac.setBorderColor(colorToComponents(borderColor));\n        var bs = widget.getOrCreateBorderStyle();\n        if (borderWidth !== undefined)\n            bs.setWidth(borderWidth);\n        widget.setFlagTo(AnnotationFlags.Print, true);\n        widget.setFlagTo(AnnotationFlags.Hidden, hidden);\n        widget.setFlagTo(AnnotationFlags.Invisible, false);\n        // Set acrofield properties\n        if (textColor) {\n            var da = (_a = this.acroField.getDefaultAppearance()) !== null && _a !== void 0 ? _a : '';\n            var newDa = da + '\\n' + setFillingColor(textColor).toString();\n            this.acroField.setDefaultAppearance(newDa);\n        }\n        return widget;\n    };\n    PDFField.prototype.updateWidgetAppearanceWithFont = function (widget, font, _a) {\n        var normal = _a.normal, rollover = _a.rollover, down = _a.down;\n        this.updateWidgetAppearances(widget, {\n            normal: this.createAppearanceStream(widget, normal, font),\n            rollover: rollover && this.createAppearanceStream(widget, rollover, font),\n            down: down && this.createAppearanceStream(widget, down, font),\n        });\n    };\n    PDFField.prototype.updateOnOffWidgetAppearance = function (widget, onValue, _a) {\n        var normal = _a.normal, rollover = _a.rollover, down = _a.down;\n        this.updateWidgetAppearances(widget, {\n            normal: this.createAppearanceDict(widget, normal, onValue),\n            rollover: rollover && this.createAppearanceDict(widget, rollover, onValue),\n            down: down && this.createAppearanceDict(widget, down, onValue),\n        });\n    };\n    PDFField.prototype.updateWidgetAppearances = function (widget, _a) {\n        var normal = _a.normal, rollover = _a.rollover, down = _a.down;\n        widget.setNormalAppearance(normal);\n        if (rollover) {\n            widget.setRolloverAppearance(rollover);\n        }\n        else {\n            widget.removeRolloverAppearance();\n        }\n        if (down) {\n            widget.setDownAppearance(down);\n        }\n        else {\n            widget.removeDownAppearance();\n        }\n    };\n    // // TODO: Do we need to do this...?\n    // private foo(font: PDFFont, dict: PDFDict) {\n    //   if (!dict.lookup(PDFName.of('DR'))) {\n    //     dict.set(PDFName.of('DR'), dict.context.obj({}));\n    //   }\n    //   const DR = dict.lookup(PDFName.of('DR'), PDFDict);\n    //   if (!DR.lookup(PDFName.of('Font'))) {\n    //     DR.set(PDFName.of('Font'), dict.context.obj({}));\n    //   }\n    //   const Font = DR.lookup(PDFName.of('Font'), PDFDict);\n    //   Font.set(PDFName.of(font.name), font.ref);\n    // }\n    PDFField.prototype.createAppearanceStream = function (widget, appearance, font) {\n        var _a;\n        var context = this.acroField.dict.context;\n        var _b = widget.getRectangle(), width = _b.width, height = _b.height;\n        // TODO: Do we need to do this...?\n        // if (font) {\n        //   this.foo(font, widget.dict);\n        //   this.foo(font, this.doc.getForm().acroForm.dict);\n        // }\n        // END TODO\n        var Resources = font && { Font: (_a = {}, _a[font.name] = font.ref, _a) };\n        var stream = context.formXObject(appearance, {\n            Resources: Resources,\n            BBox: context.obj([0, 0, width, height]),\n            Matrix: context.obj([1, 0, 0, 1, 0, 0]),\n        });\n        var streamRef = context.register(stream);\n        return streamRef;\n    };\n    /**\n     * Create a FormXObject of the supplied image and add it to context.\n     * The FormXObject size is calculated based on the widget (including\n     * the alignment).\n     * @param widget The widget that should display the image.\n     * @param alignment The alignment of the image.\n     * @param image The image that should be displayed.\n     * @returns The ref for the FormXObject that was added to the context.\n     */\n    PDFField.prototype.createImageAppearanceStream = function (widget, image, alignment) {\n        // NOTE: This implementation doesn't handle image borders.\n        // NOTE: Acrobat seems to resize the image (maybe even skewing its aspect\n        //       ratio) to fit perfectly within the widget's rectangle. This method\n        //       does not currently do that. Should there be an option for that?\n        var _a;\n        var _b;\n        var context = this.acroField.dict.context;\n        var rectangle = widget.getRectangle();\n        var ap = widget.getAppearanceCharacteristics();\n        var bs = widget.getBorderStyle();\n        var borderWidth = (_b = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _b !== void 0 ? _b : 0;\n        var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n        var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n        var adj = adjustDimsForRotation(rectangle, rotation);\n        var imageDims = image.scaleToFit(adj.width - borderWidth * 2, adj.height - borderWidth * 2);\n        // Support borders on images and maybe other properties\n        var options = {\n            x: borderWidth,\n            y: borderWidth,\n            width: imageDims.width,\n            height: imageDims.height,\n            //\n            rotate: degrees(0),\n            xSkew: degrees(0),\n            ySkew: degrees(0),\n        };\n        if (alignment === ImageAlignment.Center) {\n            options.x += (adj.width - borderWidth * 2) / 2 - imageDims.width / 2;\n            options.y += (adj.height - borderWidth * 2) / 2 - imageDims.height / 2;\n        }\n        else if (alignment === ImageAlignment.Right) {\n            options.x = adj.width - borderWidth - imageDims.width;\n            options.y = adj.height - borderWidth - imageDims.height;\n        }\n        var imageName = this.doc.context.addRandomSuffix('Image', 10);\n        var appearance = __spreadArrays(rotate, drawImage(imageName, options));\n        ////////////\n        var Resources = { XObject: (_a = {}, _a[imageName] = image.ref, _a) };\n        var stream = context.formXObject(appearance, {\n            Resources: Resources,\n            BBox: context.obj([0, 0, rectangle.width, rectangle.height]),\n            Matrix: context.obj([1, 0, 0, 1, 0, 0]),\n        });\n        return context.register(stream);\n    };\n    PDFField.prototype.createAppearanceDict = function (widget, appearance, onValue) {\n        var context = this.acroField.dict.context;\n        var onStreamRef = this.createAppearanceStream(widget, appearance.on);\n        var offStreamRef = this.createAppearanceStream(widget, appearance.off);\n        var appearanceDict = context.obj({});\n        appearanceDict.set(onValue, onStreamRef);\n        appearanceDict.set(PDFName.of('Off'), offStreamRef);\n        return appearanceDict;\n    };\n    return PDFField;\n}());\nexport default PDFField;\n//# sourceMappingURL=PDFField.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport { normalizeAppearance, defaultCheckBoxAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { PDFName, PDFDict, PDFAcroCheckBox, } from \"../../core\";\nimport { assertIs, assertOrUndefined } from \"../../utils\";\n/**\n * Represents a check box field of a [[PDFForm]].\n *\n * [[PDFCheckBox]] fields are interactive boxes that users can click with their\n * mouse. This type of [[PDFField]] has two states: `on` and `off`. The purpose\n * of a check box is to enable users to select from one or more options, where\n * each option is represented by a single check box. Check boxes are typically\n * square in shape and display a check mark when they are in the `on` state.\n */\nvar PDFCheckBox = /** @class */ (function (_super) {\n    __extends(PDFCheckBox, _super);\n    function PDFCheckBox(acroCheckBox, ref, doc) {\n        var _this = _super.call(this, acroCheckBox, ref, doc) || this;\n        assertIs(acroCheckBox, 'acroCheckBox', [\n            [PDFAcroCheckBox, 'PDFAcroCheckBox'],\n        ]);\n        _this.acroField = acroCheckBox;\n        return _this;\n    }\n    /**\n     * Mark this check box. This operation is analogous to a human user clicking\n     * a check box to fill it in a PDF reader. This method will update the\n     * underlying state of the check box field to indicate it has been selected.\n     * PDF libraries and readers will be able to extract this value from the\n     * saved document and determine that it was selected.\n     *\n     * For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * checkBox.check()\n     * ```\n     *\n     * This method will mark this check box as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated appearance\n     * streams will display a check mark inside the widgets of this check box\n     * field.\n     */\n    PDFCheckBox.prototype.check = function () {\n        var _a;\n        var onValue = (_a = this.acroField.getOnValue()) !== null && _a !== void 0 ? _a : PDFName.of('Yes');\n        this.markAsDirty();\n        this.acroField.setValue(onValue);\n    };\n    /**\n     * Clears this check box. This operation is analogous to a human user clicking\n     * a check box to unmark it in a PDF reader. This method will update the\n     * underlying state of the check box field to indicate it has been deselected.\n     * PDF libraries and readers will be able to extract this value from the\n     * saved document and determine that it was not selected.\n     *\n     * For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * checkBox.uncheck()\n     * ```\n     *\n     * This method will mark this check box as dirty. See [[PDFCheckBox.check]]\n     * for more details about what this means.\n     */\n    PDFCheckBox.prototype.uncheck = function () {\n        this.markAsDirty();\n        this.acroField.setValue(PDFName.of('Off'));\n    };\n    /**\n     * Returns `true` if this check box is selected (either by a human user via\n     * a PDF reader, or else programmatically via software). For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * if (checkBox.isChecked()) console.log('check box is selected')\n     * ```\n     * @returns Whether or not this check box is selected.\n     */\n    PDFCheckBox.prototype.isChecked = function () {\n        var onValue = this.acroField.getOnValue();\n        return !!onValue && onValue === this.acroField.getValue();\n    };\n    /**\n     * Show this check box on the specified page. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const checkBox = form.createCheckBox('some.checkBox.field')\n     *\n     * checkBox.addToPage(page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 25,\n     *   height: 25,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     * })\n     * ```\n     * This will create a new widget for this check box field.\n     * @param page The page to which this check box widget should be added.\n     * @param options The options to be used when adding this check box widget.\n     */\n    PDFCheckBox.prototype.addToPage = function (page, options) {\n        var _a, _b, _c, _d, _e, _f;\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        if (!options)\n            options = {};\n        if (!('textColor' in options))\n            options.textColor = rgb(0, 0, 0);\n        if (!('backgroundColor' in options))\n            options.backgroundColor = rgb(1, 1, 1);\n        if (!('borderColor' in options))\n            options.borderColor = rgb(0, 0, 0);\n        if (!('borderWidth' in options))\n            options.borderWidth = 1;\n        // Create a widget for this check box\n        var widget = this.createWidget({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 50,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 50,\n            textColor: options.textColor,\n            backgroundColor: options.backgroundColor,\n            borderColor: options.borderColor,\n            borderWidth: (_e = options.borderWidth) !== null && _e !== void 0 ? _e : 0,\n            rotate: (_f = options.rotate) !== null && _f !== void 0 ? _f : degrees(0),\n            hidden: options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        widget.setAppearanceState(PDFName.of('Off'));\n        this.updateWidgetAppearance(widget, PDFName.of('Yes'));\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if any of this check box's widgets do not have an\n     * appearance stream for its current state. For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * if (checkBox.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this check box needs an appearance update.\n     */\n    PDFCheckBox.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var state = widget.getAppearanceState();\n            var normal = (_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal;\n            if (!(normal instanceof PDFDict))\n                return true;\n            if (state && !normal.has(state))\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this check box's widgets using\n     * the default appearance provider for check boxes. For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * checkBox.defaultUpdateAppearances()\n     * ```\n     */\n    PDFCheckBox.prototype.defaultUpdateAppearances = function () {\n        this.updateAppearances();\n    };\n    /**\n     * Update the appearance streams for each of this check box's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for check boxs will be used. For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * checkBox.updateAppearances((field, widget) => {\n     *   ...\n     *   return {\n     *     normal: { on: drawCheckBox(...), off: drawCheckBox(...) },\n     *     down: { on: drawCheckBox(...), off: drawCheckBox(...) },\n     *   }\n     * })\n     * ```\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFCheckBox.prototype.updateAppearances = function (provider) {\n        var _a;\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var onValue = (_a = widget.getOnValue()) !== null && _a !== void 0 ? _a : PDFName.of('Yes');\n            if (!onValue)\n                continue;\n            this.updateWidgetAppearance(widget, onValue, provider);\n        }\n        this.markAsClean();\n    };\n    PDFCheckBox.prototype.updateWidgetAppearance = function (widget, onValue, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultCheckBoxAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget));\n        this.updateOnOffWidgetAppearance(widget, onValue, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getCheckBox]] method, which will create an\n     * > instance of [[PDFCheckBox]] for you.\n     *\n     * Create an instance of [[PDFCheckBox]] from an existing acroCheckBox and ref\n     *\n     * @param acroCheckBox The underlying `PDFAcroCheckBox` for this check box.\n     * @param ref The unique reference for this check box.\n     * @param doc The document to which this check box will belong.\n     */\n    PDFCheckBox.of = function (acroCheckBox, ref, doc) {\n        return new PDFCheckBox(acroCheckBox, ref, doc);\n    };\n    return PDFCheckBox;\n}(PDFField));\nexport default PDFCheckBox;\n//# sourceMappingURL=PDFCheckBox.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFFont from \"../PDFFont\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { normalizeAppearance, defaultDropdownAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { PDFHexString, PDFStream, PDFAcroComboBox, AcroChoiceFlags, } from \"../../core\";\nimport { assertIs, assertOrUndefined, assertPositive } from \"../../utils\";\n/**\n * Represents a dropdown field of a [[PDFForm]].\n *\n * [[PDFDropdown]] fields are interactive text boxes that display a single\n * element (the currently selected value). The purpose of a dropdown is to\n * enable users to select a single option from a set of possible options. Users\n * can click on a dropdown to view the full list of options it provides.\n * Clicking on an option in the list will cause it to be selected and displayed\n * in the dropdown's text box. Some dropdowns allow users to enter text\n * directly into the box from their keyboard, rather than only being allowed to\n * choose an option from the list (see [[PDFDropdown.isEditable]]).\n */\nvar PDFDropdown = /** @class */ (function (_super) {\n    __extends(PDFDropdown, _super);\n    function PDFDropdown(acroComboBox, ref, doc) {\n        var _this = _super.call(this, acroComboBox, ref, doc) || this;\n        assertIs(acroComboBox, 'acroComboBox', [\n            [PDFAcroComboBox, 'PDFAcroComboBox'],\n        ]);\n        _this.acroField = acroComboBox;\n        return _this;\n    }\n    /**\n     * Get the list of available options for this dropdown. These options will be\n     * displayed to users who click on this dropdown in a PDF reader.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * const options = dropdown.getOptions()\n     * console.log('Dropdown options:', options)\n     * ```\n     * @returns The options for this dropdown.\n     */\n    PDFDropdown.prototype.getOptions = function () {\n        var rawOptions = this.acroField.getOptions();\n        var options = new Array(rawOptions.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            var _a = rawOptions[idx], display = _a.display, value = _a.value;\n            options[idx] = (display !== null && display !== void 0 ? display : value).decodeText();\n        }\n        return options;\n    };\n    /**\n     * Get the selected options for this dropdown. These are the values that were\n     * selected by a human user via a PDF reader, or programatically via\n     * software.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * const selections = dropdown.getSelected()\n     * console.log('Dropdown selections:', selections)\n     * ```\n     * > **NOTE:** Note that PDF readers only display one selected option when\n     * > rendering dropdowns. However, the PDF specification does allow for\n     * > multiple values to be selected in a dropdown. As such, the `pdf-lib`\n     * > API supports this. However, in most cases the array returned by this\n     * > method will contain only a single element (or no elements).\n     * @returns The selected options in this dropdown.\n     */\n    PDFDropdown.prototype.getSelected = function () {\n        var values = this.acroField.getValues();\n        var selected = new Array(values.length);\n        for (var idx = 0, len = values.length; idx < len; idx++) {\n            selected[idx] = values[idx].decodeText();\n        }\n        return selected;\n    };\n    /**\n     * Set the list of options that are available for this dropdown. These are\n     * the values that will be available for users to select when they view this\n     * dropdown in a PDF reader. Note that preexisting options for this dropdown\n     * will be removed. Only the values passed as `options` will be available to\n     * select.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('planets.dropdown')\n     * dropdown.setOptions(['Earth', 'Mars', 'Pluto', 'Venus'])\n     * ```\n     * @param options The options that should be available in this dropdown.\n     */\n    PDFDropdown.prototype.setOptions = function (options) {\n        assertIs(options, 'options', [Array]);\n        var optionObjects = new Array(options.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            optionObjects[idx] = { value: PDFHexString.fromText(options[idx]) };\n        }\n        this.acroField.setOptions(optionObjects);\n    };\n    /**\n     * Add to the list of options that are available for this dropdown. Users\n     * will be able to select these values in a PDF reader. In addition to the\n     * values passed as `options`, any preexisting options for this dropdown will\n     * still be available for users to select.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('rockets.dropdown')\n     * dropdown.addOptions(['Saturn IV', 'Falcon Heavy'])\n     * ```\n     * @param options New options that should be available in this dropdown.\n     */\n    PDFDropdown.prototype.addOptions = function (options) {\n        assertIs(options, 'options', ['string', Array]);\n        var optionsArr = Array.isArray(options) ? options : [options];\n        var existingOptions = this.acroField.getOptions();\n        var newOptions = new Array(optionsArr.length);\n        for (var idx = 0, len = optionsArr.length; idx < len; idx++) {\n            newOptions[idx] = { value: PDFHexString.fromText(optionsArr[idx]) };\n        }\n        this.acroField.setOptions(existingOptions.concat(newOptions));\n    };\n    /**\n     * Select one or more values for this dropdown. This operation is analogous\n     * to a human user opening the dropdown in a PDF reader and clicking on a\n     * value to select it. This method will update the underlying state of the\n     * dropdown to indicate which values have been selected. PDF libraries and\n     * readers will be able to extract these values from the saved document and\n     * determine which values were selected.\n     *\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('best.superhero.dropdown')\n     * dropdown.select('One Punch Man')\n     * ```\n     *\n     * This method will mark this dropdown as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated streams will\n     * display the selected option inside the widgets of this dropdown.\n     *\n     * **IMPORTANT:** The default font used to update appearance streams is\n     * [[StandardFonts.Helvetica]]. Note that this is a WinAnsi font. This means\n     * that encoding errors will be thrown if the selected option for this field\n     * contains characters outside the WinAnsi character set (the latin alphabet).\n     *\n     * Embedding a custom font and passing it to\n     * [[PDFForm.updateFieldAppearances]] or [[PDFDropdown.updateAppearances]]\n     * allows you to generate appearance streams with characters outside the\n     * latin alphabet (assuming the custom font supports them).\n     *\n     * Selecting an option that does not exist in this dropdown's option list\n     * (see [[PDFDropdown.getOptions]]) will enable editing on this dropdown\n     * (see [[PDFDropdown.enableEditing]]).\n     *\n     * > **NOTE:** PDF readers only display one selected option when rendering\n     * > dropdowns. However, the PDF specification does allow for multiple values\n     * > to be selected in a dropdown. As such, the `pdf-lib` API supports this.\n     * > However, it is not recommended to select more than one value with this\n     * > method, as only one will be visible. [[PDFOptionList]] fields are better\n     * > suited for displaying multiple selected values.\n     *\n     * @param options The options to be selected.\n     * @param merge Whether or not existing selections should be preserved.\n     */\n    PDFDropdown.prototype.select = function (options, merge) {\n        if (merge === void 0) { merge = false; }\n        assertIs(options, 'options', ['string', Array]);\n        assertIs(merge, 'merge', ['boolean']);\n        var optionsArr = Array.isArray(options) ? options : [options];\n        var validOptions = this.getOptions();\n        var hasCustomOption = optionsArr.find(function (option) { return !validOptions.includes(option); });\n        if (hasCustomOption)\n            this.enableEditing();\n        this.markAsDirty();\n        if (optionsArr.length > 1 || (optionsArr.length === 1 && merge)) {\n            this.enableMultiselect();\n        }\n        var values = new Array(optionsArr.length);\n        for (var idx = 0, len = optionsArr.length; idx < len; idx++) {\n            values[idx] = PDFHexString.fromText(optionsArr[idx]);\n        }\n        if (merge) {\n            var existingValues = this.acroField.getValues();\n            this.acroField.setValues(existingValues.concat(values));\n        }\n        else {\n            this.acroField.setValues(values);\n        }\n    };\n    /**\n     * Clear all selected values for this dropdown. This operation is equivalent\n     * to selecting an empty list. This method will update the underlying state\n     * of the dropdown to indicate that no values have been selected.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.clear()\n     * ```\n     * This method will mark this text field as dirty. See [[PDFDropdown.select]]\n     * for more details about what this means.\n     */\n    PDFDropdown.prototype.clear = function () {\n        this.markAsDirty();\n        this.acroField.setValues([]);\n    };\n    /**\n     * Set the font size for this field. Larger font sizes will result in larger\n     * text being displayed when PDF readers render this dropdown. Font sizes may\n     * be integer or floating point numbers. Supplying a negative font size will\n     * cause this method to throw an error.\n     *\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.setFontSize(4)\n     * dropdown.setFontSize(15.7)\n     * ```\n     *\n     * > This method depends upon the existence of a default appearance\n     * > (`/DA`) string. If this field does not have a default appearance string,\n     * > or that string does not contain a font size (via the `Tf` operator),\n     * > then this method will throw an error.\n     *\n     * @param fontSize The font size to be used when rendering text in this field.\n     */\n    PDFDropdown.prototype.setFontSize = function (fontSize) {\n        assertPositive(fontSize, 'fontSize');\n        this.acroField.setFontSize(fontSize);\n        this.markAsDirty();\n    };\n    /**\n     * Returns `true` if users are allowed to edit the selected value of this\n     * dropdown directly and are not constrained by the list of available\n     * options. See [[PDFDropdown.enableEditing]] and\n     * [[PDFDropdown.disableEditing]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isEditable()) console.log('Editing is enabled')\n     * ```\n     * @returns Whether or not this dropdown is editable.\n     */\n    PDFDropdown.prototype.isEditable = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.Edit);\n    };\n    /**\n     * Allow users to edit the selected value of this dropdown in PDF readers\n     * with their keyboard. This means that the selected value of this dropdown\n     * will not be constrained by the list of available options. However, if this\n     * dropdown has any available options, users will still be allowed to select\n     * from that list.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableEditing()\n     * ```\n     */\n    PDFDropdown.prototype.enableEditing = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Edit, true);\n    };\n    /**\n     * Do not allow users to edit the selected value of this dropdown in PDF\n     * readers with their keyboard. This will constrain the selected value of\n     * this dropdown to the list of available options. Users will only be able\n     * to select an option from that list.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableEditing()\n     * ```\n     */\n    PDFDropdown.prototype.disableEditing = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Edit, false);\n    };\n    /**\n     * Returns `true` if the option list of this dropdown is always displayed\n     * in alphabetical order, irrespective of the order in which the options\n     * were added to the dropdown. See [[PDFDropdown.enableSorting]] and\n     * [[PDFDropdown.disableSorting]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isSorted()) console.log('Sorting is enabled')\n     * ```\n     * @returns Whether or not this dropdown's options are sorted.\n     */\n    PDFDropdown.prototype.isSorted = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.Sort);\n    };\n    /**\n     * Always display the option list of this dropdown in alphabetical order,\n     * irrespective of the order in which the options were added to this dropdown.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableSorting()\n     * ```\n     */\n    PDFDropdown.prototype.enableSorting = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Sort, true);\n    };\n    /**\n     * Do not always display the option list of this dropdown in alphabetical\n     * order. Instead, display the options in whichever order they were added\n     * to the list. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableSorting()\n     * ```\n     */\n    PDFDropdown.prototype.disableSorting = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Sort, false);\n    };\n    /**\n     * Returns `true` if multiple options can be selected from this dropdown's\n     * option list. See [[PDFDropdown.enableMultiselect]] and\n     * [[PDFDropdown.disableMultiselect]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isMultiselect()) console.log('Multiselect is enabled')\n     * ```\n     * @returns Whether or not multiple options can be selected.\n     */\n    PDFDropdown.prototype.isMultiselect = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect);\n    };\n    /**\n     * Allow users to select more than one option from this dropdown's option\n     * list. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableMultiselect()\n     * ```\n     */\n    PDFDropdown.prototype.enableMultiselect = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect, true);\n    };\n    /**\n     * Do not allow users to select more than one option from this dropdown's\n     * option list. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableMultiselect()\n     * ```\n     */\n    PDFDropdown.prototype.disableMultiselect = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect, false);\n    };\n    /**\n     * Returns `true` if the selected option should be spell checked by PDF\n     * readers. Spell checking will only be performed if this dropdown allows\n     * editing (see [[PDFDropdown.isEditable]]). See\n     * [[PDFDropdown.enableSpellChecking]] and\n     * [[PDFDropdown.disableSpellChecking]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isSpellChecked()) console.log('Spell checking is enabled')\n     * ```\n     * @returns Whether or not this dropdown can be spell checked.\n     */\n    PDFDropdown.prototype.isSpellChecked = function () {\n        return !this.acroField.hasFlag(AcroChoiceFlags.DoNotSpellCheck);\n    };\n    /**\n     * Allow PDF readers to spell check the selected option of this dropdown.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableSpellChecking()\n     * ```\n     */\n    PDFDropdown.prototype.enableSpellChecking = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck, false);\n    };\n    /**\n     * Do not allow PDF readers to spell check the selected option of this\n     * dropdown. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableSpellChecking()\n     * ```\n     */\n    PDFDropdown.prototype.disableSpellChecking = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck, true);\n    };\n    /**\n     * Returns `true` if the option selected by a user is stored, or \"committed\",\n     * when the user clicks the option. The alternative is that the user's\n     * selection is stored when the user leaves this dropdown field (by clicking\n     * outside of it - on another field, for example). See\n     * [[PDFDropdown.enableSelectOnClick]] and\n     * [[PDFDropdown.disableSelectOnClick]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isSelectOnClick()) console.log('Select on click is enabled')\n     * ```\n     * @returns Whether or not options are selected immediately after they are\n     *          clicked.\n     */\n    PDFDropdown.prototype.isSelectOnClick = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange);\n    };\n    /**\n     * Store the option selected by a user immediately after the user clicks the\n     * option. Do not wait for the user to leave this dropdown field (by clicking\n     * outside of it - on another field, for example). For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableSelectOnClick()\n     * ```\n     */\n    PDFDropdown.prototype.enableSelectOnClick = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange, true);\n    };\n    /**\n     * Wait to store the option selected by a user until they leave this dropdown\n     * field (by clicking outside of it - on another field, for example).\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableSelectOnClick()\n     * ```\n     */\n    PDFDropdown.prototype.disableSelectOnClick = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange, false);\n    };\n    /**\n     * Show this dropdown on the specified page. For example:\n     * ```js\n     * const ubuntuFont = await pdfDoc.embedFont(ubuntuFontBytes)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const dropdown = form.createDropdown('best.gundam')\n     * dropdown.setOptions(['Exia', 'Dynames'])\n     * dropdown.select('Exia')\n     *\n     * dropdown.addToPage(page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 200,\n     *   height: 100,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     *   font: ubuntuFont,\n     * })\n     * ```\n     * This will create a new widget for this dropdown field.\n     * @param page The page to which this dropdown widget should be added.\n     * @param options The options to be used when adding this dropdown widget.\n     */\n    PDFDropdown.prototype.addToPage = function (page, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        if (!options)\n            options = {};\n        if (!('textColor' in options))\n            options.textColor = rgb(0, 0, 0);\n        if (!('backgroundColor' in options))\n            options.backgroundColor = rgb(1, 1, 1);\n        if (!('borderColor' in options))\n            options.borderColor = rgb(0, 0, 0);\n        if (!('borderWidth' in options))\n            options.borderWidth = 1;\n        // Create a widget for this dropdown\n        var widget = this.createWidget({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 200,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 50,\n            textColor: options.textColor,\n            backgroundColor: options.backgroundColor,\n            borderColor: options.borderColor,\n            borderWidth: (_e = options.borderWidth) !== null && _e !== void 0 ? _e : 0,\n            rotate: (_f = options.rotate) !== null && _f !== void 0 ? _f : degrees(0),\n            hidden: options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        var font = (_g = options.font) !== null && _g !== void 0 ? _g : this.doc.getForm().getDefaultFont();\n        this.updateWidgetAppearance(widget, font);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if this dropdown has been marked as dirty, or if any of\n     * this dropdown's widgets do not have an appearance stream. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this dropdown needs an appearance update.\n     */\n    PDFDropdown.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        if (this.isDirty())\n            return true;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var hasAppearances = ((_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal) instanceof PDFStream;\n            if (!hasAppearances)\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this dropdown's widgets using\n     * the default appearance provider for dropdowns. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.defaultUpdateAppearances(helvetica)\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     */\n    PDFDropdown.prototype.defaultUpdateAppearances = function (font) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.updateAppearances(font);\n    };\n    /**\n     * Update the appearance streams for each of this dropdown's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for dropdowns will be used. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.updateAppearances(helvetica, (field, widget, font) => {\n     *   ...\n     *   return drawTextField(...)\n     * })\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFDropdown.prototype.updateAppearances = function (font, provider) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            this.updateWidgetAppearance(widget, font, provider);\n        }\n        this.markAsClean();\n    };\n    // getOption(index: number): string {}\n    // getSelectedIndices(): number[] {}\n    // removeOptions(option: string | string[]) {}\n    // removeIndices(option: number[]) {}\n    // deselect(options: string | string[]) {}\n    // deselectIndices(optionIndices: number[]) {}\n    PDFDropdown.prototype.updateWidgetAppearance = function (widget, font, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultDropdownAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget, font));\n        this.updateWidgetAppearanceWithFont(widget, font, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getDropdown]] method, which will create an\n     * > instance of [[PDFDropdown]] for you.\n     *\n     * Create an instance of [[PDFDropdown]] from an existing acroComboBox and ref\n     *\n     * @param acroComboBox The underlying `PDFAcroComboBox` for this dropdown.\n     * @param ref The unique reference for this dropdown.\n     * @param doc The document to which this dropdown will belong.\n     */\n    PDFDropdown.of = function (acroComboBox, ref, doc) {\n        return new PDFDropdown(acroComboBox, ref, doc);\n    };\n    return PDFDropdown;\n}(PDFField));\nexport default PDFDropdown;\n//# sourceMappingURL=PDFDropdown.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFFont from \"../PDFFont\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { normalizeAppearance, defaultOptionListAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { PDFHexString, PDFStream, PDFAcroListBox, AcroChoiceFlags, } from \"../../core\";\nimport { assertIs, assertIsSubset, assertOrUndefined, assertPositive, } from \"../../utils\";\n/**\n * Represents an option list field of a [[PDFForm]].\n *\n * [[PDFOptionList]] fields are interactive lists of options. The purpose of an\n * option list is to enable users to select one or more options from a set of\n * possible options. Users are able to see the full set of options without\n * first having to click on the field (though scrolling may be necessary).\n * Clicking an option in the list will cause it to be selected and displayed\n * with a highlighted background. Some option lists allow users to select\n * more than one option (see [[PDFOptionList.isMultiselect]]).\n */\nvar PDFOptionList = /** @class */ (function (_super) {\n    __extends(PDFOptionList, _super);\n    function PDFOptionList(acroListBox, ref, doc) {\n        var _this = _super.call(this, acroListBox, ref, doc) || this;\n        assertIs(acroListBox, 'acroListBox', [[PDFAcroListBox, 'PDFAcroListBox']]);\n        _this.acroField = acroListBox;\n        return _this;\n    }\n    /**\n     * Get the list of available options for this option list. These options will\n     * be displayed to users who view this option list in a PDF reader.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * const options = optionList.getOptions()\n     * console.log('Option List options:', options)\n     * ```\n     * @returns The options for this option list.\n     */\n    PDFOptionList.prototype.getOptions = function () {\n        var rawOptions = this.acroField.getOptions();\n        var options = new Array(rawOptions.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            var _a = rawOptions[idx], display = _a.display, value = _a.value;\n            options[idx] = (display !== null && display !== void 0 ? display : value).decodeText();\n        }\n        return options;\n    };\n    /**\n     * Get the selected options for this option list. These are the values that\n     * were selected by a human user via a PDF reader, or programatically via\n     * software.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * const selections = optionList.getSelected()\n     * console.log('Option List selections:', selections)\n     * ```\n     * @returns The selected options for this option list.\n     */\n    PDFOptionList.prototype.getSelected = function () {\n        var values = this.acroField.getValues();\n        var selected = new Array(values.length);\n        for (var idx = 0, len = values.length; idx < len; idx++) {\n            selected[idx] = values[idx].decodeText();\n        }\n        return selected;\n    };\n    /**\n     * Set the list of options that are available for this option list. These are\n     * the values that will be available for users to select when they view this\n     * option list in a PDF reader. Note that preexisting options for this\n     * option list will be removed. Only the values passed as `options` will be\n     * available to select.\n     *\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('planets.optionList')\n     * optionList.setOptions(['Earth', 'Mars', 'Pluto', 'Venus'])\n     * ```\n     *\n     * This method will mark this option list as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated streams will\n     * display the options this field contains inside the widgets of this text\n     * field (with selected options highlighted).\n     *\n     * **IMPORTANT:** The default font used to update appearance streams is\n     * [[StandardFonts.Helvetica]]. Note that this is a WinAnsi font. This means\n     * that encoding errors will be thrown if this field contains any options\n     * with characters outside the WinAnsi character set (the latin alphabet).\n     *\n     * Embedding a custom font and passing it to\n     * [[PDFForm.updateFieldAppearances]] or [[PDFOptionList.updateAppearances]]\n     * allows you to generate appearance streams with characters outside the\n     * latin alphabet (assuming the custom font supports them).\n     *\n     * @param options The options that should be available in this option list.\n     */\n    PDFOptionList.prototype.setOptions = function (options) {\n        assertIs(options, 'options', [Array]);\n        this.markAsDirty();\n        var optionObjects = new Array(options.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            optionObjects[idx] = { value: PDFHexString.fromText(options[idx]) };\n        }\n        this.acroField.setOptions(optionObjects);\n    };\n    /**\n     * Add to the list of options that are available for this option list. Users\n     * will be able to select these values in a PDF reader. In addition to the\n     * values passed as `options`, any preexisting options for this option list\n     * will still be available for users to select.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('rockets.optionList')\n     * optionList.addOptions(['Saturn IV', 'Falcon Heavy'])\n     * ```\n     * This method will mark this option list as dirty. See\n     * [[PDFOptionList.setOptions]] for more details about what this means.\n     * @param options New options that should be available in this option list.\n     */\n    PDFOptionList.prototype.addOptions = function (options) {\n        assertIs(options, 'options', ['string', Array]);\n        this.markAsDirty();\n        var optionsArr = Array.isArray(options) ? options : [options];\n        var existingOptions = this.acroField.getOptions();\n        var newOptions = new Array(optionsArr.length);\n        for (var idx = 0, len = optionsArr.length; idx < len; idx++) {\n            newOptions[idx] = { value: PDFHexString.fromText(optionsArr[idx]) };\n        }\n        this.acroField.setOptions(existingOptions.concat(newOptions));\n    };\n    /**\n     * Select one or more values for this option list. This operation is analogous\n     * to a human user opening the option list in a PDF reader and clicking on one\n     * or more values to select them. This method will update the underlying state\n     * of the option list to indicate which values have been selected. PDF\n     * libraries and readers will be able to extract these values from the saved\n     * document and determine which values were selected.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('best.superheroes.optionList')\n     * optionList.select(['One Punch Man', 'Iron Man'])\n     * ```\n     * This method will mark this option list as dirty. See\n     * [[PDFOptionList.setOptions]] for more details about what this means.\n     * @param options The options to be selected.\n     * @param merge Whether or not existing selections should be preserved.\n     */\n    PDFOptionList.prototype.select = function (options, merge) {\n        if (merge === void 0) { merge = false; }\n        assertIs(options, 'options', ['string', Array]);\n        assertIs(merge, 'merge', ['boolean']);\n        var optionsArr = Array.isArray(options) ? options : [options];\n        var validOptions = this.getOptions();\n        assertIsSubset(optionsArr, 'option', validOptions);\n        this.markAsDirty();\n        if (optionsArr.length > 1 || (optionsArr.length === 1 && merge)) {\n            this.enableMultiselect();\n        }\n        var values = new Array(optionsArr.length);\n        for (var idx = 0, len = optionsArr.length; idx < len; idx++) {\n            values[idx] = PDFHexString.fromText(optionsArr[idx]);\n        }\n        if (merge) {\n            var existingValues = this.acroField.getValues();\n            this.acroField.setValues(existingValues.concat(values));\n        }\n        else {\n            this.acroField.setValues(values);\n        }\n    };\n    /**\n     * Clear all selected values for this option list. This operation is\n     * equivalent to selecting an empty list. This method will update the\n     * underlying state of the option list to indicate that no values have been\n     * selected.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.clear()\n     * ```\n     * This method will mark this option list as dirty. See\n     * [[PDFOptionList.setOptions]] for more details about what this means.\n     */\n    PDFOptionList.prototype.clear = function () {\n        this.markAsDirty();\n        this.acroField.setValues([]);\n    };\n    /**\n     * Set the font size for the text in this field. There needs to be a\n     * default appearance string (DA) set with a font value specified\n     * for this to work. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.setFontSize(4);\n     * ```\n     * @param fontSize The font size to set the font to.\n     */\n    /**\n     * Set the font size for this field. Larger font sizes will result in larger\n     * text being displayed when PDF readers render this option list. Font sizes\n     * may be integer or floating point numbers. Supplying a negative font size\n     * will cause this method to throw an error.\n     *\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.setFontSize(4)\n     * optionList.setFontSize(15.7)\n     * ```\n     *\n     * > This method depends upon the existence of a default appearance\n     * > (`/DA`) string. If this field does not have a default appearance string,\n     * > or that string does not contain a font size (via the `Tf` operator),\n     * > then this method will throw an error.\n     *\n     * @param fontSize The font size to be used when rendering text in this field.\n     */\n    PDFOptionList.prototype.setFontSize = function (fontSize) {\n        assertPositive(fontSize, 'fontSize');\n        this.acroField.setFontSize(fontSize);\n        this.markAsDirty();\n    };\n    /**\n     * Returns `true` if the options of this option list are always displayed\n     * in alphabetical order, irrespective of the order in which the options\n     * were added to the option list. See [[PDFOptionList.enableSorting]] and\n     * [[PDFOptionList.disableSorting]]. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * if (optionList.isSorted()) console.log('Sorting is enabled')\n     * ```\n     * @returns Whether or not this option list is sorted.\n     */\n    PDFOptionList.prototype.isSorted = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.Sort);\n    };\n    /**\n     * Always display the options of this option list in alphabetical order,\n     * irrespective of the order in which the options were added to this option\n     * list.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.enableSorting()\n     * ```\n     */\n    PDFOptionList.prototype.enableSorting = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Sort, true);\n    };\n    /**\n     * Do not always display the options of this option list in alphabetical\n     * order. Instead, display the options in whichever order they were added\n     * to this option list. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.disableSorting()\n     * ```\n     */\n    PDFOptionList.prototype.disableSorting = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Sort, false);\n    };\n    /**\n     * Returns `true` if multiple options can be selected from this option list.\n     * See [[PDFOptionList.enableMultiselect]] and\n     * [[PDFOptionList.disableMultiselect]]. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * if (optionList.isMultiselect()) console.log('Multiselect is enabled')\n     * ```\n     * @returns Whether or not multiple options can be selected.\n     */\n    PDFOptionList.prototype.isMultiselect = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect);\n    };\n    /**\n     * Allow users to select more than one option from this option list.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.enableMultiselect()\n     * ```\n     */\n    PDFOptionList.prototype.enableMultiselect = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect, true);\n    };\n    /**\n     * Do not allow users to select more than one option from this option list.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.disableMultiselect()\n     * ```\n     */\n    PDFOptionList.prototype.disableMultiselect = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect, false);\n    };\n    /**\n     * Returns `true` if the option selected by a user is stored, or \"committed\",\n     * when the user clicks the option. The alternative is that the user's\n     * selection is stored when the user leaves this option list field (by\n     * clicking outside of it - on another field, for example). See\n     * [[PDFOptionList.enableSelectOnClick]] and\n     * [[PDFOptionList.disableSelectOnClick]]. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * if (optionList.isSelectOnClick()) console.log('Select on click is enabled')\n     * ```\n     * @returns Whether or not options are selected immediately after they are\n     *          clicked.\n     */\n    PDFOptionList.prototype.isSelectOnClick = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange);\n    };\n    /**\n     * Store the option selected by a user immediately after the user clicks the\n     * option. Do not wait for the user to leave this option list field (by\n     * clicking outside of it - on another field, for example). For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.enableSelectOnClick()\n     * ```\n     */\n    PDFOptionList.prototype.enableSelectOnClick = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange, true);\n    };\n    /**\n     * Wait to store the option selected by a user until they leave this option\n     * list field (by clicking outside of it - on another field, for example).\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.disableSelectOnClick()\n     * ```\n     */\n    PDFOptionList.prototype.disableSelectOnClick = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange, false);\n    };\n    /**\n     * Show this option list on the specified page. For example:\n     * ```js\n     * const ubuntuFont = await pdfDoc.embedFont(ubuntuFontBytes)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const optionList = form.createOptionList('best.gundams')\n     * optionList.setOptions(['Exia', 'Dynames', 'Kyrios', 'Virtue'])\n     * optionList.select(['Exia', 'Virtue'])\n     *\n     * optionList.addToPage(page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 200,\n     *   height: 100,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     *   font: ubuntuFont,\n     * })\n     * ```\n     * This will create a new widget for this option list field.\n     * @param page The page to which this option list widget should be added.\n     * @param options The options to be used when adding this option list widget.\n     */\n    PDFOptionList.prototype.addToPage = function (page, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        if (!options)\n            options = {};\n        if (!('textColor' in options))\n            options.textColor = rgb(0, 0, 0);\n        if (!('backgroundColor' in options))\n            options.backgroundColor = rgb(1, 1, 1);\n        if (!('borderColor' in options))\n            options.borderColor = rgb(0, 0, 0);\n        if (!('borderWidth' in options))\n            options.borderWidth = 1;\n        // Create a widget for this option list\n        var widget = this.createWidget({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 200,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 100,\n            textColor: options.textColor,\n            backgroundColor: options.backgroundColor,\n            borderColor: options.borderColor,\n            borderWidth: (_e = options.borderWidth) !== null && _e !== void 0 ? _e : 0,\n            rotate: (_f = options.rotate) !== null && _f !== void 0 ? _f : degrees(0),\n            hidden: options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        var font = (_g = options.font) !== null && _g !== void 0 ? _g : this.doc.getForm().getDefaultFont();\n        this.updateWidgetAppearance(widget, font);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if this option list has been marked as dirty, or if any of\n     * this option list's widgets do not have an appearance stream. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * if (optionList.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this option list needs an appearance update.\n     */\n    PDFOptionList.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        if (this.isDirty())\n            return true;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var hasAppearances = ((_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal) instanceof PDFStream;\n            if (!hasAppearances)\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this option list's widgets using\n     * the default appearance provider for option lists. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.defaultUpdateAppearances(helvetica)\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     */\n    PDFOptionList.prototype.defaultUpdateAppearances = function (font) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.updateAppearances(font);\n    };\n    /**\n     * Update the appearance streams for each of this option list's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for option lists will be used. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.updateAppearances(helvetica, (field, widget, font) => {\n     *   ...\n     *   return drawOptionList(...)\n     * })\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFOptionList.prototype.updateAppearances = function (font, provider) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            this.updateWidgetAppearance(widget, font, provider);\n        }\n        this.markAsClean();\n    };\n    // getOption(index: number): string {}\n    // getSelectedIndices(): number[] {}\n    // removeOptions(option: string | string[]) {}\n    // removeIndices(option: number[]) {}\n    // deselect(options: string | string[]) {}\n    // deselectIndices(optionIndices: number[]) {}\n    PDFOptionList.prototype.updateWidgetAppearance = function (widget, font, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultOptionListAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget, font));\n        this.updateWidgetAppearanceWithFont(widget, font, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getOptionList]] method, which will create\n     * > an instance of [[PDFOptionList]] for you.\n     *\n     * Create an instance of [[PDFOptionList]] from an existing acroListBox and\n     * ref\n     *\n     * @param acroComboBox The underlying `PDFAcroListBox` for this option list.\n     * @param ref The unique reference for this option list.\n     * @param doc The document to which this option list will belong.\n     */\n    PDFOptionList.of = function (acroListBox, ref, doc) {\n        return new PDFOptionList(acroListBox, ref, doc);\n    };\n    return PDFOptionList;\n}(PDFField));\nexport default PDFOptionList;\n//# sourceMappingURL=PDFOptionList.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { normalizeAppearance, defaultRadioGroupAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { PDFName, PDFHexString, PDFDict, PDFAcroRadioButton, AcroButtonFlags, } from \"../../core\";\nimport { assertIs, assertOrUndefined, assertIsOneOf } from \"../../utils\";\n/**\n * Represents a radio group field of a [[PDFForm]].\n *\n * [[PDFRadioGroup]] fields are collections of radio buttons. The purpose of a\n * radio group is to enable users to select one option from a set of mutually\n * exclusive choices. Each choice in a radio group is represented by a radio\n * button. Radio buttons each have two states: `on` and `off`. At most one\n * radio button in a group may be in the `on` state at any time. Users can\n * click on a radio button to select it (and thereby automatically deselect any\n * other radio button that might have already been selected). Some radio\n * groups allow users to toggle a selected radio button `off` by clicking on\n * it (see [[PDFRadioGroup.isOffToggleable]]).\n *\n * Note that some radio groups allow multiple radio buttons to be in the `on`\n * state at the same type **if** they represent the same underlying value (see\n * [[PDFRadioGroup.isMutuallyExclusive]]).\n */\nvar PDFRadioGroup = /** @class */ (function (_super) {\n    __extends(PDFRadioGroup, _super);\n    function PDFRadioGroup(acroRadioButton, ref, doc) {\n        var _this = _super.call(this, acroRadioButton, ref, doc) || this;\n        assertIs(acroRadioButton, 'acroRadioButton', [\n            [PDFAcroRadioButton, 'PDFAcroRadioButton'],\n        ]);\n        _this.acroField = acroRadioButton;\n        return _this;\n    }\n    /**\n     * Get the list of available options for this radio group. Each option is\n     * represented by a radio button. These radio buttons are displayed at\n     * various locations in the document, potentially on different pages (though\n     * typically they are stacked horizontally or vertically on the same page).\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * const options = radioGroup.getOptions()\n     * console.log('Radio Group options:', options)\n     * ```\n     * @returns The options for this radio group.\n     */\n    PDFRadioGroup.prototype.getOptions = function () {\n        var exportValues = this.acroField.getExportValues();\n        if (exportValues) {\n            var exportOptions = new Array(exportValues.length);\n            for (var idx = 0, len = exportValues.length; idx < len; idx++) {\n                exportOptions[idx] = exportValues[idx].decodeText();\n            }\n            return exportOptions;\n        }\n        var onValues = this.acroField.getOnValues();\n        var onOptions = new Array(onValues.length);\n        for (var idx = 0, len = onOptions.length; idx < len; idx++) {\n            onOptions[idx] = onValues[idx].decodeText();\n        }\n        return onOptions;\n    };\n    /**\n     * Get the selected option for this radio group. The selected option is\n     * represented by the radio button in this group that is turned on. At most\n     * one radio button in a group can be selected. If no buttons in this group\n     * are selected, `undefined` is returned.\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * const selected = radioGroup.getSelected()\n     * console.log('Selected radio button:', selected)\n     * ```\n     * @returns The selected option for this radio group.\n     */\n    PDFRadioGroup.prototype.getSelected = function () {\n        var value = this.acroField.getValue();\n        if (value === PDFName.of('Off'))\n            return undefined;\n        var exportValues = this.acroField.getExportValues();\n        if (exportValues) {\n            var onValues = this.acroField.getOnValues();\n            for (var idx = 0, len = onValues.length; idx < len; idx++) {\n                if (onValues[idx] === value)\n                    return exportValues[idx].decodeText();\n            }\n        }\n        return value.decodeText();\n    };\n    // // TODO: Figure out why this seems to crash Acrobat. Maybe it's because we\n    // //       aren't removing the widget reference from the page's Annots?\n    // removeOption(option: string) {\n    //   assertIs(option, 'option', ['string']);\n    //   // TODO: Assert is valid `option`!\n    //   const onValues = this.acroField.getOnValues();\n    //   const exportValues = this.acroField.getExportValues();\n    //   if (exportValues) {\n    //     for (let idx = 0, len = exportValues.length; idx < len; idx++) {\n    //       if (exportValues[idx].decodeText() === option) {\n    //         this.acroField.removeWidget(idx);\n    //         this.acroField.removeExportValue(idx);\n    //       }\n    //     }\n    //   } else {\n    //     for (let idx = 0, len = onValues.length; idx < len; idx++) {\n    //       const value = onValues[idx];\n    //       if (value.decodeText() === option) {\n    //         this.acroField.removeWidget(idx);\n    //         this.acroField.removeExportValue(idx);\n    //       }\n    //     }\n    //   }\n    // }\n    /**\n     * Select an option for this radio group. This operation is analogous to a\n     * human user clicking one of the radio buttons in this group via a PDF\n     * reader to toggle it on. This method will update the underlying state of\n     * the radio group to indicate which option has been selected. PDF libraries\n     * and readers will be able to extract this value from the saved document and\n     * determine which option was selected.\n     *\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('best.superhero.radioGroup')\n     * radioGroup.select('One Punch Man')\n     * ```\n     *\n     * This method will mark this radio group as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated appearance\n     * streams will display a dot inside the widget of this check box field\n     * that represents the selected option.\n     *\n     * @param option The option to be selected.\n     */\n    PDFRadioGroup.prototype.select = function (option) {\n        assertIs(option, 'option', ['string']);\n        var validOptions = this.getOptions();\n        assertIsOneOf(option, 'option', validOptions);\n        this.markAsDirty();\n        var onValues = this.acroField.getOnValues();\n        var exportValues = this.acroField.getExportValues();\n        if (exportValues) {\n            for (var idx = 0, len = exportValues.length; idx < len; idx++) {\n                if (exportValues[idx].decodeText() === option) {\n                    this.acroField.setValue(onValues[idx]);\n                }\n            }\n        }\n        else {\n            for (var idx = 0, len = onValues.length; idx < len; idx++) {\n                var value = onValues[idx];\n                if (value.decodeText() === option)\n                    this.acroField.setValue(value);\n            }\n        }\n    };\n    /**\n     * Clear any selected option for this dropdown. This will result in all\n     * radio buttons in this group being toggled off. This method will update\n     * the underlying state of the dropdown to indicate that no radio buttons\n     * have been selected.\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.clear()\n     * ```\n     * This method will mark this radio group as dirty. See\n     * [[PDFRadioGroup.select]] for more details about what this means.\n     */\n    PDFRadioGroup.prototype.clear = function () {\n        this.markAsDirty();\n        this.acroField.setValue(PDFName.of('Off'));\n    };\n    /**\n     * Returns `true` if users can click on radio buttons in this group to toggle\n     * them off. The alternative is that once a user clicks on a radio button\n     * to select it, the only way to deselect it is by selecting on another radio\n     * button in the group. See [[PDFRadioGroup.enableOffToggling]] and\n     * [[PDFRadioGroup.disableOffToggling]]. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * if (radioGroup.isOffToggleable()) console.log('Off toggling is enabled')\n     * ```\n     */\n    PDFRadioGroup.prototype.isOffToggleable = function () {\n        return !this.acroField.hasFlag(AcroButtonFlags.NoToggleToOff);\n    };\n    /**\n     * Allow users to click on selected radio buttons in this group to toggle\n     * them off. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.enableOffToggling()\n     * ```\n     * > **NOTE:** This feature is documented in the PDF specification\n     * > (Table 226). However, most PDF readers do not respect this option and\n     * > prevent users from toggling radio buttons off even when it is enabled.\n     * > At the time of this writing (9/6/2020) Mac's Preview software did\n     * > respect the option. Adobe Acrobat, Foxit Reader, and Google Chrome did\n     * > not.\n     */\n    PDFRadioGroup.prototype.enableOffToggling = function () {\n        this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff, false);\n    };\n    /**\n     * Prevent users from clicking on selected radio buttons in this group to\n     * toggle them off. Clicking on a selected radio button will have no effect.\n     * The only way to deselect a selected radio button is to click on a\n     * different radio button in the group. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.disableOffToggling()\n     * ```\n     */\n    PDFRadioGroup.prototype.disableOffToggling = function () {\n        this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff, true);\n    };\n    /**\n     * Returns `true` if the radio buttons in this group are mutually exclusive.\n     * This means that when the user selects a radio button, only that specific\n     * button will be turned on. Even if other radio buttons in the group\n     * represent the same value, they will not be enabled. The alternative to\n     * this is that clicking a radio button will select that button along with\n     * any other radio buttons in the group that share the same value. See\n     * [[PDFRadioGroup.enableMutualExclusion]] and\n     * [[PDFRadioGroup.disableMutualExclusion]].\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * if (radioGroup.isMutuallyExclusive()) console.log('Mutual exclusion is enabled')\n     * ```\n     */\n    PDFRadioGroup.prototype.isMutuallyExclusive = function () {\n        return !this.acroField.hasFlag(AcroButtonFlags.RadiosInUnison);\n    };\n    /**\n     * When the user clicks a radio button in this group it will be selected. In\n     * addition, any other radio buttons in this group that share the same\n     * underlying value will also be selected. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.enableMutualExclusion()\n     * ```\n     * Note that this option must be enabled prior to adding options to the\n     * radio group. It does not currently apply retroactively to existing\n     * radio buttons in the group.\n     */\n    PDFRadioGroup.prototype.enableMutualExclusion = function () {\n        this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison, false);\n    };\n    /**\n     * When the user clicks a radio button in this group only it will be selected.\n     * No other radio buttons in the group will be selected, even if they share\n     * the same underlying value. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.disableMutualExclusion()\n     * ```\n     * Note that this option must be disabled prior to adding options to the\n     * radio group. It does not currently apply retroactively to existing\n     * radio buttons in the group.\n     */\n    PDFRadioGroup.prototype.disableMutualExclusion = function () {\n        this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison, true);\n    };\n    /**\n     * Add a new radio button to this group on the specified page. For example:\n     * ```js\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const radioGroup = form.createRadioGroup('best.gundam')\n     *\n     * const options = {\n     *   x: 50,\n     *   width: 25,\n     *   height: 25,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     * }\n     *\n     * radioGroup.addOptionToPage('Exia', page, { ...options, y: 50 })\n     * radioGroup.addOptionToPage('Dynames', page, { ...options, y: 110 })\n     * ```\n     * This will create a new radio button widget for this radio group field.\n     * @param option The option that the radio button widget represents.\n     * @param page The page to which the radio button widget should be added.\n     * @param options The options to be used when adding the radio button widget.\n     */\n    PDFRadioGroup.prototype.addOptionToPage = function (option, page, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        assertIs(option, 'option', ['string']);\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        // Create a widget for this radio button\n        var widget = this.createWidget({\n            x: (_a = options === null || options === void 0 ? void 0 : options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options === null || options === void 0 ? void 0 : options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options === null || options === void 0 ? void 0 : options.width) !== null && _c !== void 0 ? _c : 50,\n            height: (_d = options === null || options === void 0 ? void 0 : options.height) !== null && _d !== void 0 ? _d : 50,\n            textColor: (_e = options === null || options === void 0 ? void 0 : options.textColor) !== null && _e !== void 0 ? _e : rgb(0, 0, 0),\n            backgroundColor: (_f = options === null || options === void 0 ? void 0 : options.backgroundColor) !== null && _f !== void 0 ? _f : rgb(1, 1, 1),\n            borderColor: (_g = options === null || options === void 0 ? void 0 : options.borderColor) !== null && _g !== void 0 ? _g : rgb(0, 0, 0),\n            borderWidth: (_h = options === null || options === void 0 ? void 0 : options.borderWidth) !== null && _h !== void 0 ? _h : 1,\n            rotate: (_j = options === null || options === void 0 ? void 0 : options.rotate) !== null && _j !== void 0 ? _j : degrees(0),\n            hidden: options === null || options === void 0 ? void 0 : options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        var apStateValue = this.acroField.addWidgetWithOpt(widgetRef, PDFHexString.fromText(option), !this.isMutuallyExclusive());\n        // Set appearance streams for widget\n        widget.setAppearanceState(PDFName.of('Off'));\n        this.updateWidgetAppearance(widget, apStateValue);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if any of this group's radio button widgets do not have an\n     * appearance stream for their current state. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * if (radioGroup.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this radio group needs an appearance update.\n     */\n    PDFRadioGroup.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var state = widget.getAppearanceState();\n            var normal = (_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal;\n            if (!(normal instanceof PDFDict))\n                return true;\n            if (state && !normal.has(state))\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this group's radio button widgets\n     * using the default appearance provider for radio groups. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.defaultUpdateAppearances()\n     * ```\n     */\n    PDFRadioGroup.prototype.defaultUpdateAppearances = function () {\n        this.updateAppearances();\n    };\n    // rg.updateAppearances((field: any, widget: any) => {\n    //   assert(field === rg);\n    //   assert(widget instanceof PDFWidgetAnnotation);\n    //   return { on: [...rectangle, ...circle], off: [...rectangle, ...circle] };\n    // });\n    /**\n     * Update the appearance streams for each of this group's radio button widgets\n     * using the given appearance provider. If no `provider` is passed, the\n     * default appearance provider for radio groups will be used. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.updateAppearances((field, widget) => {\n     *   ...\n     *   return {\n     *     normal: { on: drawRadioButton(...), off: drawRadioButton(...) },\n     *     down: { on: drawRadioButton(...), off: drawRadioButton(...) },\n     *   }\n     * })\n     * ```\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFRadioGroup.prototype.updateAppearances = function (provider) {\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var onValue = widget.getOnValue();\n            if (!onValue)\n                continue;\n            this.updateWidgetAppearance(widget, onValue, provider);\n        }\n    };\n    PDFRadioGroup.prototype.updateWidgetAppearance = function (widget, onValue, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultRadioGroupAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget));\n        this.updateOnOffWidgetAppearance(widget, onValue, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getOptionList]] method, which will create an\n     * > instance of [[PDFOptionList]] for you.\n     *\n     * Create an instance of [[PDFOptionList]] from an existing acroRadioButton\n     * and ref\n     *\n     * @param acroRadioButton The underlying `PDFAcroRadioButton` for this\n     *                        radio group.\n     * @param ref The unique reference for this radio group.\n     * @param doc The document to which this radio group will belong.\n     */\n    PDFRadioGroup.of = function (acroRadioButton, ref, doc) { return new PDFRadioGroup(acroRadioButton, ref, doc); };\n    return PDFRadioGroup;\n}(PDFField));\nexport default PDFRadioGroup;\n//# sourceMappingURL=PDFRadioGroup.js.map","import { __extends } from \"tslib\";\nimport PDFField from \"./PDFField\";\nimport { PDFAcroSignature } from \"../../core\";\nimport { assertIs } from \"../../utils\";\n/**\n * Represents a signature field of a [[PDFForm]].\n *\n * [[PDFSignature]] fields are digital signatures. `pdf-lib` does not\n * currently provide any specialized APIs for creating digital signatures or\n * reading the contents of existing digital signatures.\n */\nvar PDFSignature = /** @class */ (function (_super) {\n    __extends(PDFSignature, _super);\n    function PDFSignature(acroSignature, ref, doc) {\n        var _this = _super.call(this, acroSignature, ref, doc) || this;\n        assertIs(acroSignature, 'acroSignature', [\n            [PDFAcroSignature, 'PDFAcroSignature'],\n        ]);\n        _this.acroField = acroSignature;\n        return _this;\n    }\n    PDFSignature.prototype.needsAppearancesUpdate = function () {\n        return false;\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getSignature]] method, which will create an\n     * > instance of [[PDFSignature]] for you.\n     *\n     * Create an instance of [[PDFSignature]] from an existing acroSignature and\n     * ref\n     *\n     * @param acroSignature The underlying `PDFAcroSignature` for this signature.\n     * @param ref The unique reference for this signature.\n     * @param doc The document to which this signature will belong.\n     */\n    PDFSignature.of = function (acroSignature, ref, doc) { return new PDFSignature(acroSignature, ref, doc); };\n    return PDFSignature;\n}(PDFField));\nexport default PDFSignature;\n//# sourceMappingURL=PDFSignature.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFFont from \"../PDFFont\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { normalizeAppearance, defaultTextFieldAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { RichTextFieldReadError, ExceededMaxLengthError, InvalidMaxLengthError, } from \"../errors\";\nimport { ImageAlignment } from \"../image/alignment\";\nimport { TextAlignment } from \"../text/alignment\";\nimport { PDFHexString, PDFStream, PDFAcroText, AcroTextFlags, } from \"../../core\";\nimport { assertIs, assertIsOneOf, assertOrUndefined, assertPositive, assertRangeOrUndefined, } from \"../../utils\";\n/**\n * Represents a text field of a [[PDFForm]].\n *\n * [[PDFTextField]] fields are boxes that display text entered by the user. The\n * purpose of a text field is to enable users to enter text or view text values\n * in the document prefilled by software. Users can click on a text field and\n * input text via their keyboard. Some text fields allow multiple lines of text\n * to be entered (see [[PDFTextField.isMultiline]]).\n */\nvar PDFTextField = /** @class */ (function (_super) {\n    __extends(PDFTextField, _super);\n    function PDFTextField(acroText, ref, doc) {\n        var _this = _super.call(this, acroText, ref, doc) || this;\n        assertIs(acroText, 'acroText', [[PDFAcroText, 'PDFAcroText']]);\n        _this.acroField = acroText;\n        return _this;\n    }\n    /**\n     * Get the text that this field contains. This text is visible to users who\n     * view this field in a PDF reader.\n     *\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * const text = textField.getText()\n     * console.log('Text field contents:', text)\n     * ```\n     *\n     * Note that if this text field contains no underlying value, `undefined`\n     * will be returned. Text fields may also contain an underlying value that\n     * is simply an empty string (`''`). This detail is largely irrelevant for\n     * most applications. In general, you'll want to treat both cases the same\n     * way and simply consider the text field to be empty. In either case, the\n     * text field will appear empty to users when viewed in a PDF reader.\n     *\n     * An error will be thrown if this is a rich text field. `pdf-lib` does not\n     * support reading rich text fields. Nor do most PDF readers and writers.\n     * Rich text fields are based on XFA (XML Forms Architecture). Relatively few\n     * PDFs use rich text fields or XFA. Unlike PDF itself, XFA is not an ISO\n     * standard. XFA has been deprecated in PDF 2.0:\n     * * https://en.wikipedia.org/wiki/XFA\n     * * http://blog.pdfshareforms.com/pdf-2-0-release-bid-farewell-xfa-forms/\n     *\n     * @returns The text contained in this text field.\n     */\n    PDFTextField.prototype.getText = function () {\n        var value = this.acroField.getValue();\n        if (!value && this.isRichFormatted()) {\n            throw new RichTextFieldReadError(this.getName());\n        }\n        return value === null || value === void 0 ? void 0 : value.decodeText();\n    };\n    /**\n     * Set the text for this field. This operation is analogous to a human user\n     * clicking on the text field in a PDF reader and typing in text via their\n     * keyboard. This method will update the underlying state of the text field\n     * to indicate what text has been set. PDF libraries and readers will be able\n     * to extract these values from the saved document and determine what text\n     * was set.\n     *\n     * For example:\n     * ```js\n     * const textField = form.getTextField('best.superhero.text.field')\n     * textField.setText('One Punch Man')\n     * ```\n     *\n     * This method will mark this text field as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated streams will\n     * display the text this field contains inside the widgets of this text\n     * field.\n     *\n     * **IMPORTANT:** The default font used to update appearance streams is\n     * [[StandardFonts.Helvetica]]. Note that this is a WinAnsi font. This means\n     * that encoding errors will be thrown if this field contains text outside\n     * the WinAnsi character set (the latin alphabet).\n     *\n     * Embedding a custom font and passing it to\n     * [[PDFForm.updateFieldAppearances]] or [[PDFTextField.updateAppearances]]\n     * allows you to generate appearance streams with characters outside the\n     * latin alphabet (assuming the custom font supports them).\n     *\n     * If this is a rich text field, it will be converted to a standard text\n     * field in order to set the text. `pdf-lib` does not support writing rich\n     * text strings. Nor do most PDF readers and writers. See\n     * [[PDFTextField.getText]] for more information about rich text fields and\n     * their deprecation in PDF 2.0.\n     *\n     * @param text The text this field should contain.\n     */\n    PDFTextField.prototype.setText = function (text) {\n        assertOrUndefined(text, 'text', ['string']);\n        var maxLength = this.getMaxLength();\n        if (maxLength !== undefined && text && text.length > maxLength) {\n            throw new ExceededMaxLengthError(text.length, maxLength, this.getName());\n        }\n        this.markAsDirty();\n        this.disableRichFormatting();\n        if (text) {\n            this.acroField.setValue(PDFHexString.fromText(text));\n        }\n        else {\n            this.acroField.removeValue();\n        }\n    };\n    /**\n     * Get the alignment for this text field. This value represents the\n     * justification of the text when it is displayed to the user in PDF readers.\n     * There are three possible alignments: left, center, and right. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * const alignment = textField.getAlignment()\n     * if (alignment === TextAlignment.Left) console.log('Text is left justified')\n     * if (alignment === TextAlignment.Center) console.log('Text is centered')\n     * if (alignment === TextAlignment.Right) console.log('Text is right justified')\n     * ```\n     * @returns The alignment of this text field.\n     */\n    PDFTextField.prototype.getAlignment = function () {\n        var quadding = this.acroField.getQuadding();\n        // prettier-ignore\n        return (quadding === 0 ? TextAlignment.Left\n            : quadding === 1 ? TextAlignment.Center\n                : quadding === 2 ? TextAlignment.Right\n                    : TextAlignment.Left);\n    };\n    /**\n     * Set the alignment for this text field. This will determine the\n     * justification of the text when it is displayed to the user in PDF readers.\n     * There are three possible alignments: left, center, and right. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     *\n     * // Text will be left justified when displayed\n     * textField.setAlignment(TextAlignment.Left)\n     *\n     * // Text will be centered when displayed\n     * textField.setAlignment(TextAlignment.Center)\n     *\n     * // Text will be right justified when displayed\n     * textField.setAlignment(TextAlignment.Right)\n     * ```\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     * @param alignment The alignment for this text field.\n     */\n    PDFTextField.prototype.setAlignment = function (alignment) {\n        assertIsOneOf(alignment, 'alignment', TextAlignment);\n        this.markAsDirty();\n        this.acroField.setQuadding(alignment);\n    };\n    /**\n     * Get the maximum length of this field. This value represents the maximum\n     * number of characters that can be typed into this field by the user. If\n     * this field does not have a maximum length, `undefined` is returned.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * const maxLength = textField.getMaxLength()\n     * if (maxLength === undefined) console.log('No max length')\n     * else console.log(`Max length is ${maxLength}`)\n     * ```\n     * @returns The maximum number of characters allowed in this field, or\n     *          `undefined` if no limit exists.\n     */\n    PDFTextField.prototype.getMaxLength = function () {\n        return this.acroField.getMaxLength();\n    };\n    /**\n     * Set the maximum length of this field. This limits the number of characters\n     * that can be typed into this field by the user. This also limits the length\n     * of the string that can be passed to [[PDFTextField.setText]]. This limit\n     * can be removed by passing `undefined` as `maxLength`. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     *\n     * // Allow between 0 and 5 characters to be entered\n     * textField.setMaxLength(5)\n     *\n     * // Allow any number of characters to be entered\n     * textField.setMaxLength(undefined)\n     * ```\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     * @param maxLength The maximum number of characters allowed in this field, or\n     *                  `undefined` to remove the limit.\n     */\n    PDFTextField.prototype.setMaxLength = function (maxLength) {\n        assertRangeOrUndefined(maxLength, 'maxLength', 0, Number.MAX_SAFE_INTEGER);\n        this.markAsDirty();\n        if (maxLength === undefined) {\n            this.acroField.removeMaxLength();\n        }\n        else {\n            var text = this.getText();\n            if (text && text.length > maxLength) {\n                throw new InvalidMaxLengthError(text.length, maxLength, this.getName());\n            }\n            this.acroField.setMaxLength(maxLength);\n        }\n    };\n    /**\n     * Remove the maximum length for this text field. This allows any number of\n     * characters to be typed into this field by the user. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.removeMaxLength()\n     * ```\n     * Calling this method is equivalent to passing `undefined` to\n     * [[PDFTextField.setMaxLength]].\n     */\n    PDFTextField.prototype.removeMaxLength = function () {\n        this.markAsDirty();\n        this.acroField.removeMaxLength();\n    };\n    /**\n     * Display an image inside the bounds of this text field's widgets. For example:\n     * ```js\n     * const pngImage = await pdfDoc.embedPng(...)\n     * const textField = form.getTextField('some.text.field')\n     * textField.setImage(pngImage)\n     * ```\n     * This will update the appearances streams for each of this text field's widgets.\n     * @param image The image that should be displayed.\n     */\n    PDFTextField.prototype.setImage = function (image) {\n        var fieldAlignment = this.getAlignment();\n        // prettier-ignore\n        var alignment = fieldAlignment === TextAlignment.Center ? ImageAlignment.Center\n            : fieldAlignment === TextAlignment.Right ? ImageAlignment.Right\n                : ImageAlignment.Left;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var streamRef = this.createImageAppearanceStream(widget, image, alignment);\n            this.updateWidgetAppearances(widget, { normal: streamRef });\n        }\n        this.markAsClean();\n    };\n    /**\n     * Set the font size for this field. Larger font sizes will result in larger\n     * text being displayed when PDF readers render this text field. Font sizes\n     * may be integer or floating point numbers. Supplying a negative font size\n     * will cause this method to throw an error.\n     *\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.setFontSize(4)\n     * textField.setFontSize(15.7)\n     * ```\n     *\n     * > This method depends upon the existence of a default appearance\n     * > (`/DA`) string. If this field does not have a default appearance string,\n     * > or that string does not contain a font size (via the `Tf` operator),\n     * > then this method will throw an error.\n     *\n     * @param fontSize The font size to be used when rendering text in this field.\n     */\n    PDFTextField.prototype.setFontSize = function (fontSize) {\n        assertPositive(fontSize, 'fontSize');\n        this.acroField.setFontSize(fontSize);\n        this.markAsDirty();\n    };\n    /**\n     * Returns `true` if each line of text is shown on a new line when this\n     * field is displayed in a PDF reader. The alternative is that all lines of\n     * text are merged onto a single line when displayed. See\n     * [[PDFTextField.enableMultiline]] and [[PDFTextField.disableMultiline]].\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isMultiline()) console.log('Multiline is enabled')\n     * ```\n     * @returns Whether or not this is a multiline text field.\n     */\n    PDFTextField.prototype.isMultiline = function () {\n        return this.acroField.hasFlag(AcroTextFlags.Multiline);\n    };\n    /**\n     * Display each line of text on a new line when this field is displayed in a\n     * PDF reader. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableMultiline()\n     * ```\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     */\n    PDFTextField.prototype.enableMultiline = function () {\n        this.markAsDirty();\n        this.acroField.setFlagTo(AcroTextFlags.Multiline, true);\n    };\n    /**\n     * Display each line of text on the same line when this field is displayed\n     * in a PDF reader. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableMultiline()\n     * ```\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     */\n    PDFTextField.prototype.disableMultiline = function () {\n        this.markAsDirty();\n        this.acroField.setFlagTo(AcroTextFlags.Multiline, false);\n    };\n    /**\n     * Returns `true` if this is a password text field. This means that the field\n     * is intended for storing a secure password. See\n     * [[PDFTextField.enablePassword]] and [[PDFTextField.disablePassword]].\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isPassword()) console.log('Password is enabled')\n     * ```\n     * @returns Whether or not this is a password text field.\n     */\n    PDFTextField.prototype.isPassword = function () {\n        return this.acroField.hasFlag(AcroTextFlags.Password);\n    };\n    /**\n     * Indicate that this text field is intended for storing a secure password.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enablePassword()\n     * ```\n     * Values entered into password text fields should not be displayed on the\n     * screen by PDF readers. Most PDF readers will display the value as\n     * asterisks or bullets. PDF readers should never store values entered by the\n     * user into password text fields. Similarly, applications should not\n     * write data to a password text field.\n     *\n     * **Please note that this method does not cause entered values to be\n     * encrypted or secured in any way! It simply sets a flag that PDF software\n     * and readers can access to determine the _purpose_ of this field.**\n     */\n    PDFTextField.prototype.enablePassword = function () {\n        this.acroField.setFlagTo(AcroTextFlags.Password, true);\n    };\n    /**\n     * Indicate that this text field is **not** intended for storing a secure\n     * password. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disablePassword()\n     * ```\n     */\n    PDFTextField.prototype.disablePassword = function () {\n        this.acroField.setFlagTo(AcroTextFlags.Password, false);\n    };\n    /**\n     * Returns `true` if the contents of this text field represent a file path.\n     * See [[PDFTextField.enableFileSelection]] and\n     * [[PDFTextField.disableFileSelection]]. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isFileSelector()) console.log('Is a file selector')\n     * ```\n     * @returns Whether or not this field should contain file paths.\n     */\n    PDFTextField.prototype.isFileSelector = function () {\n        return this.acroField.hasFlag(AcroTextFlags.FileSelect);\n    };\n    /**\n     * Indicate that this text field is intended to store a file path. The\n     * contents of the file stored at that path should be submitted as the value\n     * of the field. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableFileSelection()\n     * ```\n     */\n    PDFTextField.prototype.enableFileSelection = function () {\n        this.acroField.setFlagTo(AcroTextFlags.FileSelect, true);\n    };\n    /**\n     * Indicate that this text field is **not** intended to store a file path.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableFileSelection()\n     * ```\n     */\n    PDFTextField.prototype.disableFileSelection = function () {\n        this.acroField.setFlagTo(AcroTextFlags.FileSelect, false);\n    };\n    /**\n     * Returns `true` if the text entered in this field should be spell checked\n     * by PDF readers. See [[PDFTextField.enableSpellChecking]] and\n     * [[PDFTextField.disableSpellChecking]]. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isSpellChecked()) console.log('Spell checking is enabled')\n     * ```\n     * @returns Whether or not this field should be spell checked.\n     */\n    PDFTextField.prototype.isSpellChecked = function () {\n        return !this.acroField.hasFlag(AcroTextFlags.DoNotSpellCheck);\n    };\n    /**\n     * Allow PDF readers to spell check the text entered in this field.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableSpellChecking()\n     * ```\n     */\n    PDFTextField.prototype.enableSpellChecking = function () {\n        this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck, false);\n    };\n    /**\n     * Do not allow PDF readers to spell check the text entered in this field.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableSpellChecking()\n     * ```\n     */\n    PDFTextField.prototype.disableSpellChecking = function () {\n        this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck, true);\n    };\n    /**\n     * Returns `true` if PDF readers should allow the user to scroll the text\n     * field when its contents do not fit within the field's view bounds. See\n     * [[PDFTextField.enableScrolling]] and [[PDFTextField.disableScrolling]].\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isScrollable()) console.log('Scrolling is enabled')\n     * ```\n     * @returns Whether or not the field is scrollable in PDF readers.\n     */\n    PDFTextField.prototype.isScrollable = function () {\n        return !this.acroField.hasFlag(AcroTextFlags.DoNotScroll);\n    };\n    /**\n     * Allow PDF readers to present a scroll bar to the user when the contents\n     * of this text field do not fit within its view bounds. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableScrolling()\n     * ```\n     * A horizontal scroll bar should be shown for singleline fields. A vertical\n     * scroll bar should be shown for multiline fields.\n     */\n    PDFTextField.prototype.enableScrolling = function () {\n        this.acroField.setFlagTo(AcroTextFlags.DoNotScroll, false);\n    };\n    /**\n     * Do not allow PDF readers to present a scroll bar to the user when the\n     * contents of this text field do not fit within its view bounds. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableScrolling()\n     * ```\n     */\n    PDFTextField.prototype.disableScrolling = function () {\n        this.acroField.setFlagTo(AcroTextFlags.DoNotScroll, true);\n    };\n    /**\n     * Returns `true` if this is a combed text field. This means that the field\n     * is split into `n` equal size cells with one character in each (where `n`\n     * is equal to the max length of the text field). The result is that all\n     * characters in this field are displayed an equal distance apart from one\n     * another. See [[PDFTextField.enableCombing]] and\n     * [[PDFTextField.disableCombing]]. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isCombed()) console.log('Combing is enabled')\n     * ```\n     * Note that in order for a text field to be combed, the following must be\n     * true (in addition to enabling combing):\n     * * It must not be a multiline field (see [[PDFTextField.isMultiline]])\n     * * It must not be a password field (see [[PDFTextField.isPassword]])\n     * * It must not be a file selector field (see [[PDFTextField.isFileSelector]])\n     * * It must have a max length defined (see [[PDFTextField.setMaxLength]])\n     * @returns Whether or not this field is combed.\n     */\n    PDFTextField.prototype.isCombed = function () {\n        return (this.acroField.hasFlag(AcroTextFlags.Comb) &&\n            !this.isMultiline() &&\n            !this.isPassword() &&\n            !this.isFileSelector() &&\n            this.getMaxLength() !== undefined);\n    };\n    /**\n     * Split this field into `n` equal size cells with one character in each\n     * (where `n` is equal to the max length of the text field). This will cause\n     * all characters in the field to be displayed an equal distance apart from\n     * one another. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableCombing()\n     * ```\n     *\n     * In addition to calling this method, text fields must have a max length\n     * defined in order to be combed (see [[PDFTextField.setMaxLength]]).\n     *\n     * This method will also call the following three methods internally:\n     * * [[PDFTextField.disableMultiline]]\n     * * [[PDFTextField.disablePassword]]\n     * * [[PDFTextField.disableFileSelection]]\n     *\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     */\n    PDFTextField.prototype.enableCombing = function () {\n        if (this.getMaxLength() === undefined) {\n            var msg = \"PDFTextFields must have a max length in order to be combed\";\n            console.warn(msg);\n        }\n        this.markAsDirty();\n        this.disableMultiline();\n        this.disablePassword();\n        this.disableFileSelection();\n        this.acroField.setFlagTo(AcroTextFlags.Comb, true);\n    };\n    /**\n     * Turn off combing for this text field. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableCombing()\n     * ```\n     * See [[PDFTextField.isCombed]] and [[PDFTextField.enableCombing]] for more\n     * information about what combing is.\n     *\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     */\n    PDFTextField.prototype.disableCombing = function () {\n        this.markAsDirty();\n        this.acroField.setFlagTo(AcroTextFlags.Comb, false);\n    };\n    /**\n     * Returns `true` if this text field contains rich text. See\n     * [[PDFTextField.enableRichFormatting]] and\n     * [[PDFTextField.disableRichFormatting]]. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isRichFormatted()) console.log('Rich formatting enabled')\n     * ```\n     * @returns Whether or not this field contains rich text.\n     */\n    PDFTextField.prototype.isRichFormatted = function () {\n        return this.acroField.hasFlag(AcroTextFlags.RichText);\n    };\n    /**\n     * Indicate that this field contains XFA data - or rich text. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableRichFormatting()\n     * ```\n     * Note that `pdf-lib` does not support reading or writing rich text fields.\n     * Nor do most PDF readers and writers. Rich text fields are based on XFA\n     * (XML Forms Architecture). Relatively few PDFs use rich text fields or XFA.\n     * Unlike PDF itself, XFA is not an ISO standard. XFA has been deprecated in\n     * PDF 2.0:\n     * * https://en.wikipedia.org/wiki/XFA\n     * * http://blog.pdfshareforms.com/pdf-2-0-release-bid-farewell-xfa-forms/\n     */\n    PDFTextField.prototype.enableRichFormatting = function () {\n        this.acroField.setFlagTo(AcroTextFlags.RichText, true);\n    };\n    /**\n     * Indicate that this is a standard text field that does not XFA data (rich\n     * text). For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableRichFormatting()\n     * ```\n     */\n    PDFTextField.prototype.disableRichFormatting = function () {\n        this.acroField.setFlagTo(AcroTextFlags.RichText, false);\n    };\n    /**\n     * Show this text field on the specified page. For example:\n     * ```js\n     * const ubuntuFont = await pdfDoc.embedFont(ubuntuFontBytes)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const textField = form.createTextField('best.gundam')\n     * textField.setText('Exia')\n     *\n     * textField.addToPage(page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 200,\n     *   height: 100,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     *   font: ubuntuFont,\n     * })\n     * ```\n     * This will create a new widget for this text field.\n     * @param page The page to which this text field widget should be added.\n     * @param options The options to be used when adding this text field widget.\n     */\n    PDFTextField.prototype.addToPage = function (page, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        if (!options)\n            options = {};\n        if (!('textColor' in options))\n            options.textColor = rgb(0, 0, 0);\n        if (!('backgroundColor' in options))\n            options.backgroundColor = rgb(1, 1, 1);\n        if (!('borderColor' in options))\n            options.borderColor = rgb(0, 0, 0);\n        if (!('borderWidth' in options))\n            options.borderWidth = 1;\n        // Create a widget for this text field\n        var widget = this.createWidget({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 200,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 50,\n            textColor: options.textColor,\n            backgroundColor: options.backgroundColor,\n            borderColor: options.borderColor,\n            borderWidth: (_e = options.borderWidth) !== null && _e !== void 0 ? _e : 0,\n            rotate: (_f = options.rotate) !== null && _f !== void 0 ? _f : degrees(0),\n            hidden: options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        var font = (_g = options.font) !== null && _g !== void 0 ? _g : this.doc.getForm().getDefaultFont();\n        this.updateWidgetAppearance(widget, font);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if this text field has been marked as dirty, or if any of\n     * this text field's widgets do not have an appearance stream. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this text field needs an appearance update.\n     */\n    PDFTextField.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        if (this.isDirty())\n            return true;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var hasAppearances = ((_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal) instanceof PDFStream;\n            if (!hasAppearances)\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this text field's widgets using\n     * the default appearance provider for text fields. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const textField = form.getTextField('some.text.field')\n     * textField.defaultUpdateAppearances(helvetica)\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     */\n    PDFTextField.prototype.defaultUpdateAppearances = function (font) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.updateAppearances(font);\n    };\n    /**\n     * Update the appearance streams for each of this text field's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for text fields will be used. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const textField = form.getTextField('some.text.field')\n     * textField.updateAppearances(helvetica, (field, widget, font) => {\n     *   ...\n     *   return drawTextField(...)\n     * })\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFTextField.prototype.updateAppearances = function (font, provider) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            this.updateWidgetAppearance(widget, font, provider);\n        }\n        this.markAsClean();\n    };\n    PDFTextField.prototype.updateWidgetAppearance = function (widget, font, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultTextFieldAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget, font));\n        this.updateWidgetAppearanceWithFont(widget, font, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getTextField]] method, which will create an\n     * > instance of [[PDFTextField]] for you.\n     *\n     * Create an instance of [[PDFTextField]] from an existing acroText and ref\n     *\n     * @param acroText The underlying `PDFAcroText` for this text field.\n     * @param ref The unique reference for this text field.\n     * @param doc The document to which this text field will belong.\n     */\n    PDFTextField.of = function (acroText, ref, doc) {\n        return new PDFTextField(acroText, ref, doc);\n    };\n    return PDFTextField;\n}(PDFField));\nexport default PDFTextField;\n//# sourceMappingURL=PDFTextField.js.map","export var StandardFonts;\n(function (StandardFonts) {\n    StandardFonts[\"Courier\"] = \"Courier\";\n    StandardFonts[\"CourierBold\"] = \"Courier-Bold\";\n    StandardFonts[\"CourierOblique\"] = \"Courier-Oblique\";\n    StandardFonts[\"CourierBoldOblique\"] = \"Courier-BoldOblique\";\n    StandardFonts[\"Helvetica\"] = \"Helvetica\";\n    StandardFonts[\"HelveticaBold\"] = \"Helvetica-Bold\";\n    StandardFonts[\"HelveticaOblique\"] = \"Helvetica-Oblique\";\n    StandardFonts[\"HelveticaBoldOblique\"] = \"Helvetica-BoldOblique\";\n    StandardFonts[\"TimesRoman\"] = \"Times-Roman\";\n    StandardFonts[\"TimesRomanBold\"] = \"Times-Bold\";\n    StandardFonts[\"TimesRomanItalic\"] = \"Times-Italic\";\n    StandardFonts[\"TimesRomanBoldItalic\"] = \"Times-BoldItalic\";\n    StandardFonts[\"Symbol\"] = \"Symbol\";\n    StandardFonts[\"ZapfDingbats\"] = \"ZapfDingbats\";\n})(StandardFonts || (StandardFonts = {}));\n//# sourceMappingURL=StandardFonts.js.map","import { __assign, __spreadArrays } from \"tslib\";\nimport PDFDocument from \"../PDFDocument\";\nimport PDFButton from \"./PDFButton\";\nimport PDFCheckBox from \"./PDFCheckBox\";\nimport PDFDropdown from \"./PDFDropdown\";\nimport PDFOptionList from \"./PDFOptionList\";\nimport PDFRadioGroup from \"./PDFRadioGroup\";\nimport PDFSignature from \"./PDFSignature\";\nimport PDFTextField from \"./PDFTextField\";\nimport { NoSuchFieldError, UnexpectedFieldTypeError, FieldAlreadyExistsError, InvalidFieldNamePartError, } from \"../errors\";\nimport PDFFont from \"../PDFFont\";\nimport { StandardFonts } from \"../StandardFonts\";\nimport { rotateInPlace } from \"../operations\";\nimport { drawObject, popGraphicsState, pushGraphicsState, translate, } from \"../operators\";\nimport { PDFAcroForm, PDFAcroCheckBox, PDFAcroComboBox, PDFAcroListBox, PDFAcroRadioButton, PDFAcroSignature, PDFAcroText, PDFAcroPushButton, PDFAcroNonTerminal, PDFDict, PDFRef, createPDFAcroFields, PDFName, } from \"../../core\";\nimport { assertIs, Cache, assertOrUndefined } from \"../../utils\";\n/**\n * Represents the interactive form of a [[PDFDocument]].\n *\n * Interactive forms (sometimes called _AcroForms_) are collections of fields\n * designed to gather information from a user. A PDF document may contains any\n * number of fields that appear on various pages, all of which make up a single,\n * global interactive form spanning the entire document. This means that\n * instances of [[PDFDocument]] shall contain at most one [[PDFForm]].\n *\n * The fields of an interactive form are represented by [[PDFField]] instances.\n */\nvar PDFForm = /** @class */ (function () {\n    function PDFForm(acroForm, doc) {\n        var _this = this;\n        this.embedDefaultFont = function () {\n            return _this.doc.embedStandardFont(StandardFonts.Helvetica);\n        };\n        assertIs(acroForm, 'acroForm', [[PDFAcroForm, 'PDFAcroForm']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        this.acroForm = acroForm;\n        this.doc = doc;\n        this.dirtyFields = new Set();\n        this.defaultFontCache = Cache.populatedBy(this.embedDefaultFont);\n    }\n    /**\n     * Returns `true` if this [[PDFForm]] has XFA data. Most PDFs with form\n     * fields do not use XFA as it is not widely supported by PDF readers.\n     *\n     * > `pdf-lib` does not support creation, modification, or reading of XFA\n     * > fields.\n     *\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * if (form.hasXFA()) console.log('PDF has XFA data')\n     * ```\n     * @returns Whether or not this form has XFA data.\n     */\n    PDFForm.prototype.hasXFA = function () {\n        return this.acroForm.dict.has(PDFName.of('XFA'));\n    };\n    /**\n     * Disconnect the XFA data from this [[PDFForm]] (if any exists). This will\n     * force readers to fallback to standard fields if the [[PDFDocument]]\n     * contains any. For example:\n     *\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * form.deleteXFA()\n     * ```\n     */\n    PDFForm.prototype.deleteXFA = function () {\n        this.acroForm.dict.delete(PDFName.of('XFA'));\n    };\n    /**\n     * Get all fields contained in this [[PDFForm]]. For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const fields = form.getFields()\n     * fields.forEach(field => {\n     *   const type = field.constructor.name\n     *   const name = field.getName()\n     *   console.log(`${type}: ${name}`)\n     * })\n     * ```\n     * @returns An array of all fields in this form.\n     */\n    PDFForm.prototype.getFields = function () {\n        var allFields = this.acroForm.getAllFields();\n        var fields = [];\n        for (var idx = 0, len = allFields.length; idx < len; idx++) {\n            var _a = allFields[idx], acroField = _a[0], ref = _a[1];\n            var field = convertToPDFField(acroField, ref, this.doc);\n            if (field)\n                fields.push(field);\n        }\n        return fields;\n    };\n    /**\n     * Get the field in this [[PDFForm]] with the given name. For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getFieldMaybe('Page1.Foo.Bar[0]')\n     * if (field) console.log('Field exists!')\n     * ```\n     * @param name A fully qualified field name.\n     * @returns The field with the specified name, if one exists.\n     */\n    PDFForm.prototype.getFieldMaybe = function (name) {\n        assertIs(name, 'name', ['string']);\n        var fields = this.getFields();\n        for (var idx = 0, len = fields.length; idx < len; idx++) {\n            var field = fields[idx];\n            if (field.getName() === name)\n                return field;\n        }\n        return undefined;\n    };\n    /**\n     * Get the field in this [[PDFForm]] with the given name. For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getField('Page1.Foo.Bar[0]')\n     * ```\n     * If no field exists with the provided name, an error will be thrown.\n     * @param name A fully qualified field name.\n     * @returns The field with the specified name.\n     */\n    PDFForm.prototype.getField = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getFieldMaybe(name);\n        if (field)\n            return field;\n        throw new NoSuchFieldError(name);\n    };\n    /**\n     * Get the button field in this [[PDFForm]] with the given name. For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const button = form.getButton('Page1.Foo.Button[0]')\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a button.\n     * @param name A fully qualified button name.\n     * @returns The button with the specified name.\n     */\n    PDFForm.prototype.getButton = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFButton)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFButton, field);\n    };\n    /**\n     * Get the check box field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const checkBox = form.getCheckBox('Page1.Foo.CheckBox[0]')\n     * checkBox.check()\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a check box.\n     * @param name A fully qualified check box name.\n     * @returns The check box with the specified name.\n     */\n    PDFForm.prototype.getCheckBox = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFCheckBox)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFCheckBox, field);\n    };\n    /**\n     * Get the dropdown field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const dropdown = form.getDropdown('Page1.Foo.Dropdown[0]')\n     * const options = dropdown.getOptions()\n     * dropdown.select(options[0])\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a dropdown.\n     * @param name A fully qualified dropdown name.\n     * @returns The dropdown with the specified name.\n     */\n    PDFForm.prototype.getDropdown = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFDropdown)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFDropdown, field);\n    };\n    /**\n     * Get the option list field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const optionList = form.getOptionList('Page1.Foo.OptionList[0]')\n     * const options = optionList.getOptions()\n     * optionList.select(options[0])\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not an option list.\n     * @param name A fully qualified option list name.\n     * @returns The option list with the specified name.\n     */\n    PDFForm.prototype.getOptionList = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFOptionList)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFOptionList, field);\n    };\n    /**\n     * Get the radio group field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const radioGroup = form.getRadioGroup('Page1.Foo.RadioGroup[0]')\n     * const options = radioGroup.getOptions()\n     * radioGroup.select(options[0])\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a radio group.\n     * @param name A fully qualified radio group name.\n     * @returns The radio group with the specified name.\n     */\n    PDFForm.prototype.getRadioGroup = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFRadioGroup)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFRadioGroup, field);\n    };\n    /**\n     * Get the signature field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const signature = form.getSignature('Page1.Foo.Signature[0]')\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a signature.\n     * @param name A fully qualified signature name.\n     * @returns The signature with the specified name.\n     */\n    PDFForm.prototype.getSignature = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFSignature)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFSignature, field);\n    };\n    /**\n     * Get the text field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const textField = form.getTextField('Page1.Foo.TextField[0]')\n     * textField.setText('Are you designed to act or to be acted upon?')\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a text field.\n     * @param name A fully qualified text field name.\n     * @returns The text field with the specified name.\n     */\n    PDFForm.prototype.getTextField = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFTextField)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFTextField, field);\n    };\n    /**\n     * Create a new button field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const button = form.createButton('cool.new.button')\n     *\n     * button.addToPage('Do Stuff', font, page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new button.\n     * @returns The new button field.\n     */\n    PDFForm.prototype.createButton = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var button = PDFAcroPushButton.create(this.doc.context);\n        button.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [button, button.ref], nameParts.terminal);\n        return PDFButton.of(button, button.ref, this.doc);\n    };\n    /**\n     * Create a new check box field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const checkBox = form.createCheckBox('cool.new.checkBox')\n     *\n     * checkBox.addToPage(page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new check box.\n     * @returns The new check box field.\n     */\n    PDFForm.prototype.createCheckBox = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var checkBox = PDFAcroCheckBox.create(this.doc.context);\n        checkBox.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [checkBox, checkBox.ref], nameParts.terminal);\n        return PDFCheckBox.of(checkBox, checkBox.ref, this.doc);\n    };\n    /**\n     * Create a new dropdown field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const dropdown = form.createDropdown('cool.new.dropdown')\n     *\n     * dropdown.addToPage(font, page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new dropdown.\n     * @returns The new dropdown field.\n     */\n    PDFForm.prototype.createDropdown = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var comboBox = PDFAcroComboBox.create(this.doc.context);\n        comboBox.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [comboBox, comboBox.ref], nameParts.terminal);\n        return PDFDropdown.of(comboBox, comboBox.ref, this.doc);\n    };\n    /**\n     * Create a new option list field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const optionList = form.createOptionList('cool.new.optionList')\n     *\n     * optionList.addToPage(font, page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new option list.\n     * @returns The new option list field.\n     */\n    PDFForm.prototype.createOptionList = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var listBox = PDFAcroListBox.create(this.doc.context);\n        listBox.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [listBox, listBox.ref], nameParts.terminal);\n        return PDFOptionList.of(listBox, listBox.ref, this.doc);\n    };\n    /**\n     * Create a new radio group field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const radioGroup = form.createRadioGroup('cool.new.radioGroup')\n     *\n     * radioGroup.addOptionToPage('is-dog', page, { y: 0 })\n     * radioGroup.addOptionToPage('is-cat', page, { y: 75 })\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new radio group.\n     * @returns The new radio group field.\n     */\n    PDFForm.prototype.createRadioGroup = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var radioButton = PDFAcroRadioButton.create(this.doc.context);\n        radioButton.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [radioButton, radioButton.ref], nameParts.terminal);\n        return PDFRadioGroup.of(radioButton, radioButton.ref, this.doc);\n    };\n    /**\n     * Create a new text field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const textField = form.createTextField('cool.new.textField')\n     *\n     * textField.addToPage(font, page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new radio group.\n     * @returns The new radio group field.\n     */\n    PDFForm.prototype.createTextField = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var text = PDFAcroText.create(this.doc.context);\n        text.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [text, text.ref], nameParts.terminal);\n        return PDFTextField.of(text, text.ref, this.doc);\n    };\n    /**\n     * Flatten all fields in this [[PDFForm]].\n     *\n     * Flattening a form field will take the current appearance for each of that\n     * field's widgets and make them part of their page's content stream. All form\n     * fields and annotations associated are then removed. Note that once a form\n     * has been flattened its fields can no longer be accessed or edited.\n     *\n     * This operation is often used after filling form fields to ensure a\n     * consistent appearance across different PDF readers and/or printers.\n     * Another common use case is to copy a template document with form fields\n     * into another document. In this scenario you would load the template\n     * document, fill its fields, flatten it, and then copy its pages into the\n     * recipient document - the filled fields will be copied over.\n     *\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm();\n     * form.flatten();\n     * ```\n     */\n    PDFForm.prototype.flatten = function (options) {\n        if (options === void 0) { options = { updateFieldAppearances: true }; }\n        if (options.updateFieldAppearances) {\n            this.updateFieldAppearances();\n        }\n        var fields = this.getFields();\n        for (var i = 0, lenFields = fields.length; i < lenFields; i++) {\n            var field = fields[i];\n            var widgets = field.acroField.getWidgets();\n            for (var j = 0, lenWidgets = widgets.length; j < lenWidgets; j++) {\n                var widget = widgets[j];\n                var page = this.findWidgetPage(widget);\n                var widgetRef = this.findWidgetAppearanceRef(field, widget);\n                var xObjectKey = page.node.newXObject('FlatWidget', widgetRef);\n                var rectangle = widget.getRectangle();\n                var operators = __spreadArrays([\n                    pushGraphicsState(),\n                    translate(rectangle.x, rectangle.y)\n                ], rotateInPlace(__assign(__assign({}, rectangle), { rotation: 0 })), [\n                    drawObject(xObjectKey),\n                    popGraphicsState(),\n                ]).filter(Boolean);\n                page.pushOperators.apply(page, operators);\n            }\n            this.removeField(field);\n        }\n    };\n    /**\n     * Remove a field from this [[PDFForm]].\n     *\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm();\n     * const ageField = form.getFields().find(x => x.getName() === 'Age');\n     * form.removeField(ageField);\n     * ```\n     */\n    PDFForm.prototype.removeField = function (field) {\n        var widgets = field.acroField.getWidgets();\n        var pages = new Set();\n        for (var i = 0, len = widgets.length; i < len; i++) {\n            var widget = widgets[i];\n            var widgetRef = this.findWidgetAppearanceRef(field, widget);\n            var page = this.findWidgetPage(widget);\n            pages.add(page);\n            page.node.removeAnnot(widgetRef);\n        }\n        pages.forEach(function (page) { return page.node.removeAnnot(field.ref); });\n        this.acroForm.removeField(field.acroField);\n        var fieldKids = field.acroField.normalizedEntries().Kids;\n        var kidsCount = fieldKids.size();\n        for (var childIndex = 0; childIndex < kidsCount; childIndex++) {\n            var child = fieldKids.get(childIndex);\n            if (child instanceof PDFRef) {\n                this.doc.context.delete(child);\n            }\n        }\n        this.doc.context.delete(field.ref);\n    };\n    /**\n     * Update the appearance streams for all widgets of all fields in this\n     * [[PDFForm]]. Appearance streams will only be created for a widget if it\n     * does not have any existing appearance streams, or the field's value has\n     * changed (e.g. by calling [[PDFTextField.setText]] or\n     * [[PDFDropdown.select]]).\n     *\n     * For example:\n     * ```js\n     * const courier = await pdfDoc.embedFont(StandardFonts.Courier)\n     * const form = pdfDoc.getForm()\n     * form.updateFieldAppearances(courier)\n     * ```\n     *\n     * **IMPORTANT:** The default value for the `font` parameter is\n     * [[StandardFonts.Helvetica]]. Note that this is a WinAnsi font. This means\n     * that encoding errors will be thrown if any fields contain text with\n     * characters outside the WinAnsi character set (the latin alphabet).\n     *\n     * Embedding a custom font and passing that as the `font`\n     * parameter allows you to generate appearance streams with non WinAnsi\n     * characters (assuming your custom font supports them).\n     *\n     * > **NOTE:** The [[PDFDocument.save]] method will call this method to\n     * > update appearances automatically if a form was accessed via the\n     * > [[PDFDocument.getForm]] method prior to saving.\n     *\n     * @param font Optionally, the font to use when creating new appearances.\n     */\n    PDFForm.prototype.updateFieldAppearances = function (font) {\n        assertOrUndefined(font, 'font', [[PDFFont, 'PDFFont']]);\n        font = font !== null && font !== void 0 ? font : this.getDefaultFont();\n        var fields = this.getFields();\n        for (var idx = 0, len = fields.length; idx < len; idx++) {\n            var field = fields[idx];\n            if (field.needsAppearancesUpdate()) {\n                field.defaultUpdateAppearances(font);\n            }\n        }\n    };\n    /**\n     * Mark a field as dirty. This will cause its appearance streams to be\n     * updated by [[PDFForm.updateFieldAppearances]].\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getField('foo.bar')\n     * form.markFieldAsDirty(field.ref)\n     * ```\n     * @param fieldRef The reference to the field that should be marked.\n     */\n    PDFForm.prototype.markFieldAsDirty = function (fieldRef) {\n        assertOrUndefined(fieldRef, 'fieldRef', [[PDFRef, 'PDFRef']]);\n        this.dirtyFields.add(fieldRef);\n    };\n    /**\n     * Mark a field as dirty. This will cause its appearance streams to not be\n     * updated by [[PDFForm.updateFieldAppearances]].\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getField('foo.bar')\n     * form.markFieldAsClean(field.ref)\n     * ```\n     * @param fieldRef The reference to the field that should be marked.\n     */\n    PDFForm.prototype.markFieldAsClean = function (fieldRef) {\n        assertOrUndefined(fieldRef, 'fieldRef', [[PDFRef, 'PDFRef']]);\n        this.dirtyFields.delete(fieldRef);\n    };\n    /**\n     * Returns `true` is the specified field has been marked as dirty.\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getField('foo.bar')\n     * if (form.fieldIsDirty(field.ref)) console.log('Field is dirty')\n     * ```\n     * @param fieldRef The reference to the field that should be checked.\n     * @returns Whether or not the specified field is dirty.\n     */\n    PDFForm.prototype.fieldIsDirty = function (fieldRef) {\n        assertOrUndefined(fieldRef, 'fieldRef', [[PDFRef, 'PDFRef']]);\n        return this.dirtyFields.has(fieldRef);\n    };\n    PDFForm.prototype.getDefaultFont = function () {\n        return this.defaultFontCache.access();\n    };\n    PDFForm.prototype.findWidgetPage = function (widget) {\n        var pageRef = widget.P();\n        var page = this.doc.getPages().find(function (x) { return x.ref === pageRef; });\n        if (page === undefined) {\n            var widgetRef = this.doc.context.getObjectRef(widget.dict);\n            if (widgetRef === undefined) {\n                throw new Error('Could not find PDFRef for PDFObject');\n            }\n            page = this.doc.findPageForAnnotationRef(widgetRef);\n            if (page === undefined) {\n                throw new Error(\"Could not find page for PDFRef \" + widgetRef);\n            }\n        }\n        return page;\n    };\n    PDFForm.prototype.findWidgetAppearanceRef = function (field, widget) {\n        var _a;\n        var refOrDict = widget.getNormalAppearance();\n        if (refOrDict instanceof PDFDict &&\n            (field instanceof PDFCheckBox || field instanceof PDFRadioGroup)) {\n            var value = field.acroField.getValue();\n            var ref = (_a = refOrDict.get(value)) !== null && _a !== void 0 ? _a : refOrDict.get(PDFName.of('Off'));\n            if (ref instanceof PDFRef) {\n                refOrDict = ref;\n            }\n        }\n        if (!(refOrDict instanceof PDFRef)) {\n            var name_1 = field.getName();\n            throw new Error(\"Failed to extract appearance ref for: \" + name_1);\n        }\n        return refOrDict;\n    };\n    PDFForm.prototype.findOrCreateNonTerminals = function (partialNames) {\n        var nonTerminal = [\n            this.acroForm,\n        ];\n        for (var idx = 0, len = partialNames.length; idx < len; idx++) {\n            var namePart = partialNames[idx];\n            if (!namePart)\n                throw new InvalidFieldNamePartError(namePart);\n            var parent_1 = nonTerminal[0], parentRef = nonTerminal[1];\n            var res = this.findNonTerminal(namePart, parent_1);\n            if (res) {\n                nonTerminal = res;\n            }\n            else {\n                var node = PDFAcroNonTerminal.create(this.doc.context);\n                node.setPartialName(namePart);\n                node.setParent(parentRef);\n                var nodeRef = this.doc.context.register(node.dict);\n                parent_1.addField(nodeRef);\n                nonTerminal = [node, nodeRef];\n            }\n        }\n        return nonTerminal;\n    };\n    PDFForm.prototype.findNonTerminal = function (partialName, parent) {\n        var fields = parent instanceof PDFAcroForm\n            ? this.acroForm.getFields()\n            : createPDFAcroFields(parent.Kids());\n        for (var idx = 0, len = fields.length; idx < len; idx++) {\n            var _a = fields[idx], field = _a[0], ref = _a[1];\n            if (field.getPartialName() === partialName) {\n                if (field instanceof PDFAcroNonTerminal)\n                    return [field, ref];\n                throw new FieldAlreadyExistsError(partialName);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.getForm]] method, which will create an\n     * > instance of [[PDFForm]] for you.\n     *\n     * Create an instance of [[PDFForm]] from an existing acroForm and embedder\n     *\n     * @param acroForm The underlying `PDFAcroForm` for this form.\n     * @param doc The document to which the form will belong.\n     */\n    PDFForm.of = function (acroForm, doc) {\n        return new PDFForm(acroForm, doc);\n    };\n    return PDFForm;\n}());\nexport default PDFForm;\nvar convertToPDFField = function (field, ref, doc) {\n    if (field instanceof PDFAcroPushButton)\n        return PDFButton.of(field, ref, doc);\n    if (field instanceof PDFAcroCheckBox)\n        return PDFCheckBox.of(field, ref, doc);\n    if (field instanceof PDFAcroComboBox)\n        return PDFDropdown.of(field, ref, doc);\n    if (field instanceof PDFAcroListBox)\n        return PDFOptionList.of(field, ref, doc);\n    if (field instanceof PDFAcroText)\n        return PDFTextField.of(field, ref, doc);\n    if (field instanceof PDFAcroRadioButton) {\n        return PDFRadioGroup.of(field, ref, doc);\n    }\n    if (field instanceof PDFAcroSignature) {\n        return PDFSignature.of(field, ref, doc);\n    }\n    return undefined;\n};\nvar splitFieldName = function (fullyQualifiedName) {\n    if (fullyQualifiedName.length === 0) {\n        throw new Error('PDF field names must not be empty strings');\n    }\n    var parts = fullyQualifiedName.split('.');\n    for (var idx = 0, len = parts.length; idx < len; idx++) {\n        if (parts[idx] === '') {\n            throw new Error(\"Periods in PDF field names must be separated by at least one character: \\\"\" + fullyQualifiedName + \"\\\"\");\n        }\n    }\n    if (parts.length === 1)\n        return { nonTerminal: [], terminal: parts[0] };\n    return {\n        nonTerminal: parts.slice(0, parts.length - 1),\n        terminal: parts[parts.length - 1],\n    };\n};\nvar addFieldToParent = function (_a, _b, partialName) {\n    var parent = _a[0], parentRef = _a[1];\n    var field = _b[0], fieldRef = _b[1];\n    var entries = parent.normalizedEntries();\n    var fields = createPDFAcroFields('Kids' in entries ? entries.Kids : entries.Fields);\n    for (var idx = 0, len = fields.length; idx < len; idx++) {\n        if (fields[idx][0].getPartialName() === partialName) {\n            throw new FieldAlreadyExistsError(partialName);\n        }\n    }\n    parent.addField(fieldRef);\n    field.setParent(parentRef);\n};\n//# sourceMappingURL=PDFForm.js.map","export var PageSizes = {\n    '4A0': [4767.87, 6740.79],\n    '2A0': [3370.39, 4767.87],\n    A0: [2383.94, 3370.39],\n    A1: [1683.78, 2383.94],\n    A2: [1190.55, 1683.78],\n    A3: [841.89, 1190.55],\n    A4: [595.28, 841.89],\n    A5: [419.53, 595.28],\n    A6: [297.64, 419.53],\n    A7: [209.76, 297.64],\n    A8: [147.4, 209.76],\n    A9: [104.88, 147.4],\n    A10: [73.7, 104.88],\n    B0: [2834.65, 4008.19],\n    B1: [2004.09, 2834.65],\n    B2: [1417.32, 2004.09],\n    B3: [1000.63, 1417.32],\n    B4: [708.66, 1000.63],\n    B5: [498.9, 708.66],\n    B6: [354.33, 498.9],\n    B7: [249.45, 354.33],\n    B8: [175.75, 249.45],\n    B9: [124.72, 175.75],\n    B10: [87.87, 124.72],\n    C0: [2599.37, 3676.54],\n    C1: [1836.85, 2599.37],\n    C2: [1298.27, 1836.85],\n    C3: [918.43, 1298.27],\n    C4: [649.13, 918.43],\n    C5: [459.21, 649.13],\n    C6: [323.15, 459.21],\n    C7: [229.61, 323.15],\n    C8: [161.57, 229.61],\n    C9: [113.39, 161.57],\n    C10: [79.37, 113.39],\n    RA0: [2437.8, 3458.27],\n    RA1: [1729.13, 2437.8],\n    RA2: [1218.9, 1729.13],\n    RA3: [864.57, 1218.9],\n    RA4: [609.45, 864.57],\n    SRA0: [2551.18, 3628.35],\n    SRA1: [1814.17, 2551.18],\n    SRA2: [1275.59, 1814.17],\n    SRA3: [907.09, 1275.59],\n    SRA4: [637.8, 907.09],\n    Executive: [521.86, 756.0],\n    Folio: [612.0, 936.0],\n    Legal: [612.0, 1008.0],\n    Letter: [612.0, 792.0],\n    Tabloid: [792.0, 1224.0],\n};\n//# sourceMappingURL=sizes.js.map","export var ParseSpeeds;\n(function (ParseSpeeds) {\n    ParseSpeeds[ParseSpeeds[\"Fastest\"] = Infinity] = \"Fastest\";\n    ParseSpeeds[ParseSpeeds[\"Fast\"] = 1500] = \"Fast\";\n    ParseSpeeds[ParseSpeeds[\"Medium\"] = 500] = \"Medium\";\n    ParseSpeeds[ParseSpeeds[\"Slow\"] = 100] = \"Slow\";\n})(ParseSpeeds || (ParseSpeeds = {}));\n//# sourceMappingURL=PDFDocumentOptions.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { PDFName, PDFArray, PDFDict, PDFHexString } from \"../core\";\n/**\n * Represents a file that has been embedded in a [[PDFDocument]].\n */\nvar PDFEmbeddedFile = /** @class */ (function () {\n    function PDFEmbeddedFile(ref, doc, embedder) {\n        this.alreadyEmbedded = false;\n        this.ref = ref;\n        this.doc = doc;\n        this.embedder = embedder;\n    }\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all embeddable files get embedded.\n     *\n     * Embed this embeddable file in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFEmbeddedFile.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var ref, Names, EmbeddedFiles, EFNames, AF;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.alreadyEmbedded) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.embedder.embedIntoContext(this.doc.context, this.ref)];\n                    case 1:\n                        ref = _a.sent();\n                        if (!this.doc.catalog.has(PDFName.of('Names'))) {\n                            this.doc.catalog.set(PDFName.of('Names'), this.doc.context.obj({}));\n                        }\n                        Names = this.doc.catalog.lookup(PDFName.of('Names'), PDFDict);\n                        if (!Names.has(PDFName.of('EmbeddedFiles'))) {\n                            Names.set(PDFName.of('EmbeddedFiles'), this.doc.context.obj({}));\n                        }\n                        EmbeddedFiles = Names.lookup(PDFName.of('EmbeddedFiles'), PDFDict);\n                        if (!EmbeddedFiles.has(PDFName.of('Names'))) {\n                            EmbeddedFiles.set(PDFName.of('Names'), this.doc.context.obj([]));\n                        }\n                        EFNames = EmbeddedFiles.lookup(PDFName.of('Names'), PDFArray);\n                        EFNames.push(PDFHexString.fromText(this.embedder.fileName));\n                        EFNames.push(ref);\n                        /**\n                         * The AF-Tag is needed to achieve PDF-A3 compliance for embedded files\n                         *\n                         * The following document outlines the uses cases of the associated files (AF) tag.\n                         * See:\n                         * https://www.pdfa.org/wp-content/uploads/2018/10/PDF20_AN002-AF.pdf\n                         */\n                        if (!this.doc.catalog.has(PDFName.of('AF'))) {\n                            this.doc.catalog.set(PDFName.of('AF'), this.doc.context.obj([]));\n                        }\n                        AF = this.doc.catalog.lookup(PDFName.of('AF'), PDFArray);\n                        AF.push(ref);\n                        this.alreadyEmbedded = true;\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.attach]] method, which will create\n     * instances of [[PDFEmbeddedFile]] for you.\n     *\n     * Create an instance of [[PDFEmbeddedFile]] from an existing ref and embedder\n     *\n     * @param ref The unique reference for this file.\n     * @param doc The document to which the file will belong.\n     * @param embedder The embedder that will be used to embed the file.\n     */\n    PDFEmbeddedFile.of = function (ref, doc, embedder) {\n        return new PDFEmbeddedFile(ref, doc, embedder);\n    };\n    return PDFEmbeddedFile;\n}());\nexport default PDFEmbeddedFile;\n//# sourceMappingURL=PDFEmbeddedFile.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { PDFName, PDFArray, PDFDict, PDFHexString } from \"../core\";\n/**\n * Represents JavaScript that has been embedded in a [[PDFDocument]].\n */\nvar PDFJavaScript = /** @class */ (function () {\n    function PDFJavaScript(ref, doc, embedder) {\n        this.alreadyEmbedded = false;\n        this.ref = ref;\n        this.doc = doc;\n        this.embedder = embedder;\n    }\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all JavaScripts get embedded.\n     *\n     * Embed this JavaScript in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFJavaScript.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, catalog, context, ref, Names, Javascript, JSNames;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!!this.alreadyEmbedded) return [3 /*break*/, 2];\n                        _a = this.doc, catalog = _a.catalog, context = _a.context;\n                        return [4 /*yield*/, this.embedder.embedIntoContext(this.doc.context, this.ref)];\n                    case 1:\n                        ref = _b.sent();\n                        if (!catalog.has(PDFName.of('Names'))) {\n                            catalog.set(PDFName.of('Names'), context.obj({}));\n                        }\n                        Names = catalog.lookup(PDFName.of('Names'), PDFDict);\n                        if (!Names.has(PDFName.of('JavaScript'))) {\n                            Names.set(PDFName.of('JavaScript'), context.obj({}));\n                        }\n                        Javascript = Names.lookup(PDFName.of('JavaScript'), PDFDict);\n                        if (!Javascript.has(PDFName.of('Names'))) {\n                            Javascript.set(PDFName.of('Names'), context.obj([]));\n                        }\n                        JSNames = Javascript.lookup(PDFName.of('Names'), PDFArray);\n                        JSNames.push(PDFHexString.fromText(this.embedder.scriptName));\n                        JSNames.push(ref);\n                        this.alreadyEmbedded = true;\n                        _b.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.addJavaScript]] method, which will\n     * create instances of [[PDFJavaScript]] for you.\n     *\n     * Create an instance of [[PDFJavaScript]] from an existing ref and script\n     *\n     * @param ref The unique reference for this script.\n     * @param doc The document to which the script will belong.\n     * @param embedder The embedder that will be used to embed the script.\n     */\n    PDFJavaScript.of = function (ref, doc, embedder) {\n        return new PDFJavaScript(ref, doc, embedder);\n    };\n    return PDFJavaScript;\n}());\nexport default PDFJavaScript;\n//# sourceMappingURL=PDFJavaScript.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFHexString from \"../objects/PDFHexString\";\nvar JavaScriptEmbedder = /** @class */ (function () {\n    function JavaScriptEmbedder(script, scriptName) {\n        this.script = script;\n        this.scriptName = scriptName;\n    }\n    JavaScriptEmbedder.for = function (script, scriptName) {\n        return new JavaScriptEmbedder(script, scriptName);\n    };\n    JavaScriptEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var jsActionDict;\n            return __generator(this, function (_a) {\n                jsActionDict = context.obj({\n                    Type: 'Action',\n                    S: 'JavaScript',\n                    JS: PDFHexString.fromText(this.script),\n                });\n                if (ref) {\n                    context.assign(ref, jsActionDict);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(jsActionDict)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return JavaScriptEmbedder;\n}());\nexport default JavaScriptEmbedder;\n//# sourceMappingURL=JavaScriptEmbedder.js.map","import { __awaiter, __generator, __rest } from \"tslib\";\nimport { EncryptedPDFError, FontkitNotRegisteredError, ForeignPageError, RemovePageFromEmptyDocumentError, } from \"./errors\";\nimport PDFEmbeddedPage from \"./PDFEmbeddedPage\";\nimport PDFFont from \"./PDFFont\";\nimport PDFImage from \"./PDFImage\";\nimport PDFPage from \"./PDFPage\";\nimport PDFForm from \"./form/PDFForm\";\nimport { PageSizes } from \"./sizes\";\nimport { CustomFontEmbedder, CustomFontSubsetEmbedder, JpegEmbedder, PageEmbeddingMismatchedContextError, PDFCatalog, PDFContext, PDFDict, PDFHexString, PDFName, PDFObjectCopier, PDFPageEmbedder, PDFPageLeaf, PDFPageTree, PDFParser, PDFStreamWriter, PDFString, PDFWriter, PngEmbedder, StandardFontEmbedder, UnexpectedObjectTypeError, } from \"../core\";\nimport { ParseSpeeds, } from \"./PDFDocumentOptions\";\nimport { assertIs, assertIsOneOfOrUndefined, assertOrUndefined, assertRange, Cache, canBeConvertedToUint8Array, encodeToBase64, isStandardFont, pluckIndices, range, toUint8Array, } from \"../utils\";\nimport FileEmbedder, { AFRelationship } from \"../core/embedders/FileEmbedder\";\nimport PDFEmbeddedFile from \"./PDFEmbeddedFile\";\nimport PDFJavaScript from \"./PDFJavaScript\";\nimport JavaScriptEmbedder from \"../core/embedders/JavaScriptEmbedder\";\n/**\n * Represents a PDF document.\n */\nvar PDFDocument = /** @class */ (function () {\n    function PDFDocument(context, ignoreEncryption, updateMetadata) {\n        var _this = this;\n        /** The default word breaks used in PDFPage.drawText */\n        this.defaultWordBreaks = [' '];\n        this.computePages = function () {\n            var pages = [];\n            _this.catalog.Pages().traverse(function (node, ref) {\n                if (node instanceof PDFPageLeaf) {\n                    var page = _this.pageMap.get(node);\n                    if (!page) {\n                        page = PDFPage.of(node, ref, _this);\n                        _this.pageMap.set(node, page);\n                    }\n                    pages.push(page);\n                }\n            });\n            return pages;\n        };\n        this.getOrCreateForm = function () {\n            var acroForm = _this.catalog.getOrCreateAcroForm();\n            return PDFForm.of(acroForm, _this);\n        };\n        assertIs(context, 'context', [[PDFContext, 'PDFContext']]);\n        assertIs(ignoreEncryption, 'ignoreEncryption', ['boolean']);\n        this.context = context;\n        this.catalog = context.lookup(context.trailerInfo.Root);\n        this.isEncrypted = !!context.lookup(context.trailerInfo.Encrypt);\n        this.pageCache = Cache.populatedBy(this.computePages);\n        this.pageMap = new Map();\n        this.formCache = Cache.populatedBy(this.getOrCreateForm);\n        this.fonts = [];\n        this.images = [];\n        this.embeddedPages = [];\n        this.embeddedFiles = [];\n        this.javaScripts = [];\n        if (!ignoreEncryption && this.isEncrypted)\n            throw new EncryptedPDFError();\n        if (updateMetadata)\n            this.updateInfoDict();\n    }\n    /**\n     * Load an existing [[PDFDocument]]. The input data can be provided in\n     * multiple formats:\n     *\n     * | Type          | Contents                                               |\n     * | ------------- | ------------------------------------------------------ |\n     * | `string`      | A base64 encoded string (or data URI) containing a PDF |\n     * | `Uint8Array`  | The raw bytes of a PDF                                 |\n     * | `ArrayBuffer` | The raw bytes of a PDF                                 |\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument } from 'pdf-lib'\n     *\n     * // pdf=string\n     * const base64 =\n     *  'JVBERi0xLjcKJYGBgYEKCjUgMCBvYmoKPDwKL0ZpbHRlciAvRmxhdGVEZWNvZGUKL0xlbm' +\n     *  'd0aCAxMDQKPj4Kc3RyZWFtCniccwrhMlAAwaJ0Ln2P1Jyy1JLM5ERdc0MjCwUjE4WQNC4Q' +\n     *  '6cNlCFZkqGCqYGSqEJLLZWNuYGZiZmbkYuZsZmlmZGRgZmluDCQNzc3NTM2NzdzMXMxMjQ' +\n     *  'ztFEKyuEK0uFxDuAAOERdVCmVuZHN0cmVhbQplbmRvYmoKCjYgMCBvYmoKPDwKL0ZpbHRl' +\n     *  'ciAvRmxhdGVEZWNvZGUKL1R5cGUgL09ialN0bQovTiA0Ci9GaXJzdCAyMAovTGVuZ3RoID' +\n     *  'IxNQo+PgpzdHJlYW0KeJxVj9GqwjAMhu/zFHkBzTo3nCCCiiKIHPEICuJF3cKoSCu2E8/b' +\n     *  '20wPIr1p8v9/8kVhgilmGfawX2CGaVrgcAi0/bsy0lrX7IGWpvJ4iJYEN3gEmrrGBlQwGs' +\n     *  'HHO9VBX1wNrxAqMX87RBD5xpJuddqwd82tjAHxzV1U5LPgy52DKXWnr1Lheg+j/c/pzGVr' +\n     *  'iqV0VlwZPXGPCJjElw/ybkwUmeoWgxesDXGhHJC/D/iikp1Av80ptKU0FdBEe25pPihAM1' +\n     *  'u6ytgaaWfs2Hrz35CJT1+EWmAKZW5kc3RyZWFtCmVuZG9iagoKNyAwIG9iago8PAovU2l6' +\n     *  'ZSA4Ci9Sb290IDIgMCBSCi9GaWx0ZXIgL0ZsYXRlRGVjb2RlCi9UeXBlIC9YUmVmCi9MZW' +\n     *  '5ndGggMzgKL1cgWyAxIDIgMiBdCi9JbmRleCBbIDAgOCBdCj4+CnN0cmVhbQp4nBXEwREA' +\n     *  'EBAEsCwz3vrvRmOOyyOoGhZdutHN2MT55fIAVocD+AplbmRzdHJlYW0KZW5kb2JqCgpzdG' +\n     *  'FydHhyZWYKNTEwCiUlRU9G'\n     *\n     * const dataUri = 'data:application/pdf;base64,' + base64\n     *\n     * const pdfDoc1 = await PDFDocument.load(base64)\n     * const pdfDoc2 = await PDFDocument.load(dataUri)\n     *\n     * // pdf=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('with_update_sections.pdf')\n     * const pdfDoc3 = await PDFDocument.load(uint8Array)\n     *\n     * // pdf=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/with_update_sections.pdf'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * const pdfDoc4 = await PDFDocument.load(arrayBuffer)\n     *\n     * ```\n     *\n     * @param pdf The input data containing a PDF document.\n     * @param options The options to be used when loading the document.\n     * @returns Resolves with a document loaded from the input.\n     */\n    PDFDocument.load = function (pdf, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, ignoreEncryption, _b, parseSpeed, _c, throwOnInvalidObject, _d, updateMetadata, _e, capNumbers, bytes, context;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        _a = options.ignoreEncryption, ignoreEncryption = _a === void 0 ? false : _a, _b = options.parseSpeed, parseSpeed = _b === void 0 ? ParseSpeeds.Slow : _b, _c = options.throwOnInvalidObject, throwOnInvalidObject = _c === void 0 ? false : _c, _d = options.updateMetadata, updateMetadata = _d === void 0 ? true : _d, _e = options.capNumbers, capNumbers = _e === void 0 ? false : _e;\n                        assertIs(pdf, 'pdf', ['string', Uint8Array, ArrayBuffer]);\n                        assertIs(ignoreEncryption, 'ignoreEncryption', ['boolean']);\n                        assertIs(parseSpeed, 'parseSpeed', ['number']);\n                        assertIs(throwOnInvalidObject, 'throwOnInvalidObject', ['boolean']);\n                        bytes = toUint8Array(pdf);\n                        return [4 /*yield*/, PDFParser.forBytesWithOptions(bytes, parseSpeed, throwOnInvalidObject, capNumbers).parseDocument()];\n                    case 1:\n                        context = _f.sent();\n                        return [2 /*return*/, new PDFDocument(context, ignoreEncryption, updateMetadata)];\n                }\n            });\n        });\n    };\n    /**\n     * Create a new [[PDFDocument]].\n     * @returns Resolves with the newly created document.\n     */\n    PDFDocument.create = function (options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, updateMetadata, context, pageTree, pageTreeRef, catalog;\n            return __generator(this, function (_b) {\n                _a = options.updateMetadata, updateMetadata = _a === void 0 ? true : _a;\n                context = PDFContext.create();\n                pageTree = PDFPageTree.withContext(context);\n                pageTreeRef = context.register(pageTree);\n                catalog = PDFCatalog.withContextAndPages(context, pageTreeRef);\n                context.trailerInfo.Root = context.register(catalog);\n                return [2 /*return*/, new PDFDocument(context, false, updateMetadata)];\n            });\n        });\n    };\n    /**\n     * Register a fontkit instance. This must be done before custom fonts can\n     * be embedded. See [here](https://github.com/Hopding/pdf-lib/tree/master#fontkit-installation)\n     * for instructions on how to install and register a fontkit instance.\n     *\n     * > You do **not** need to call this method to embed standard fonts.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument } from 'pdf-lib'\n     * import fontkit from '@pdf-lib/fontkit'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * pdfDoc.registerFontkit(fontkit)\n     * ```\n     *\n     * @param fontkit The fontkit instance to be registered.\n     */\n    PDFDocument.prototype.registerFontkit = function (fontkit) {\n        this.fontkit = fontkit;\n    };\n    /**\n     * Get the [[PDFForm]] containing all interactive fields for this document.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const fields = form.getFields()\n     * fields.forEach(field => {\n     *   const type = field.constructor.name\n     *   const name = field.getName()\n     *   console.log(`${type}: ${name}`)\n     * })\n     * ```\n     * @returns The form for this document.\n     */\n    PDFDocument.prototype.getForm = function () {\n        var form = this.formCache.access();\n        if (form.hasXFA()) {\n            console.warn('Removing XFA form data as pdf-lib does not support reading or writing XFA');\n            form.deleteXFA();\n        }\n        return form;\n    };\n    /**\n     * Get this document's title metadata. The title appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const title = pdfDoc.getTitle()\n     * ```\n     * @returns A string containing the title of this document, if it has one.\n     */\n    PDFDocument.prototype.getTitle = function () {\n        var title = this.getInfoDict().lookup(PDFName.Title);\n        if (!title)\n            return undefined;\n        assertIsLiteralOrHexString(title);\n        return title.decodeText();\n    };\n    /**\n     * Get this document's author metadata. The author appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const author = pdfDoc.getAuthor()\n     * ```\n     * @returns A string containing the author of this document, if it has one.\n     */\n    PDFDocument.prototype.getAuthor = function () {\n        var author = this.getInfoDict().lookup(PDFName.Author);\n        if (!author)\n            return undefined;\n        assertIsLiteralOrHexString(author);\n        return author.decodeText();\n    };\n    /**\n     * Get this document's subject metadata. The subject appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const subject = pdfDoc.getSubject()\n     * ```\n     * @returns A string containing the subject of this document, if it has one.\n     */\n    PDFDocument.prototype.getSubject = function () {\n        var subject = this.getInfoDict().lookup(PDFName.Subject);\n        if (!subject)\n            return undefined;\n        assertIsLiteralOrHexString(subject);\n        return subject.decodeText();\n    };\n    /**\n     * Get this document's keywords metadata. The keywords appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const keywords = pdfDoc.getKeywords()\n     * ```\n     * @returns A string containing the keywords of this document, if it has any.\n     */\n    PDFDocument.prototype.getKeywords = function () {\n        var keywords = this.getInfoDict().lookup(PDFName.Keywords);\n        if (!keywords)\n            return undefined;\n        assertIsLiteralOrHexString(keywords);\n        return keywords.decodeText();\n    };\n    /**\n     * Get this document's creator metadata. The creator appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const creator = pdfDoc.getCreator()\n     * ```\n     * @returns A string containing the creator of this document, if it has one.\n     */\n    PDFDocument.prototype.getCreator = function () {\n        var creator = this.getInfoDict().lookup(PDFName.Creator);\n        if (!creator)\n            return undefined;\n        assertIsLiteralOrHexString(creator);\n        return creator.decodeText();\n    };\n    /**\n     * Get this document's producer metadata. The producer appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const producer = pdfDoc.getProducer()\n     * ```\n     * @returns A string containing the producer of this document, if it has one.\n     */\n    PDFDocument.prototype.getProducer = function () {\n        var producer = this.getInfoDict().lookup(PDFName.Producer);\n        if (!producer)\n            return undefined;\n        assertIsLiteralOrHexString(producer);\n        return producer.decodeText();\n    };\n    /**\n     * Get this document's creation date metadata. The creation date appears in\n     * the \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const creationDate = pdfDoc.getCreationDate()\n     * ```\n     * @returns A Date containing the creation date of this document,\n     *          if it has one.\n     */\n    PDFDocument.prototype.getCreationDate = function () {\n        var creationDate = this.getInfoDict().lookup(PDFName.CreationDate);\n        if (!creationDate)\n            return undefined;\n        assertIsLiteralOrHexString(creationDate);\n        return creationDate.decodeDate();\n    };\n    /**\n     * Get this document's modification date metadata. The modification date\n     * appears in the \"Document Properties\" section of most PDF readers.\n     * For example:\n     * ```js\n     * const modification = pdfDoc.getModificationDate()\n     * ```\n     * @returns A Date containing the modification date of this document,\n     *          if it has one.\n     */\n    PDFDocument.prototype.getModificationDate = function () {\n        var modificationDate = this.getInfoDict().lookup(PDFName.ModDate);\n        if (!modificationDate)\n            return undefined;\n        assertIsLiteralOrHexString(modificationDate);\n        return modificationDate.decodeDate();\n    };\n    /**\n     * Set this document's title metadata. The title will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setTitle('ðŸ¥š The Life of an Egg ðŸ³')\n     * ```\n     *\n     * To display the title in the window's title bar, set the\n     * `showInWindowTitleBar` option to `true` (works for _most_ PDF readers).\n     * For example:\n     * ```js\n     * pdfDoc.setTitle('ðŸ¥š The Life of an Egg ðŸ³', { showInWindowTitleBar: true })\n     * ```\n     *\n     * @param title The title of this document.\n     * @param options The options to be used when setting the title.\n     */\n    PDFDocument.prototype.setTitle = function (title, options) {\n        assertIs(title, 'title', ['string']);\n        var key = PDFName.of('Title');\n        this.getInfoDict().set(key, PDFHexString.fromText(title));\n        // Indicate that readers should display the title rather than the filename\n        if (options === null || options === void 0 ? void 0 : options.showInWindowTitleBar) {\n            var prefs = this.catalog.getOrCreateViewerPreferences();\n            prefs.setDisplayDocTitle(true);\n        }\n    };\n    /**\n     * Set this document's author metadata. The author will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setAuthor('Humpty Dumpty')\n     * ```\n     * @param author The author of this document.\n     */\n    PDFDocument.prototype.setAuthor = function (author) {\n        assertIs(author, 'author', ['string']);\n        var key = PDFName.of('Author');\n        this.getInfoDict().set(key, PDFHexString.fromText(author));\n    };\n    /**\n     * Set this document's subject metadata. The subject will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setSubject('ðŸ“˜ An Epic Tale of Woe ðŸ“–')\n     * ```\n     * @param subject The subject of this document.\n     */\n    PDFDocument.prototype.setSubject = function (subject) {\n        assertIs(subject, 'author', ['string']);\n        var key = PDFName.of('Subject');\n        this.getInfoDict().set(key, PDFHexString.fromText(subject));\n    };\n    /**\n     * Set this document's keyword metadata. These keywords will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setKeywords(['eggs', 'wall', 'fall', 'king', 'horses', 'men'])\n     * ```\n     * @param keywords An array of keywords associated with this document.\n     */\n    PDFDocument.prototype.setKeywords = function (keywords) {\n        assertIs(keywords, 'keywords', [Array]);\n        var key = PDFName.of('Keywords');\n        this.getInfoDict().set(key, PDFHexString.fromText(keywords.join(' ')));\n    };\n    /**\n     * Set this document's creator metadata. The creator will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setCreator('PDF App 9000 ðŸ¤–')\n     * ```\n     * @param creator The creator of this document.\n     */\n    PDFDocument.prototype.setCreator = function (creator) {\n        assertIs(creator, 'creator', ['string']);\n        var key = PDFName.of('Creator');\n        this.getInfoDict().set(key, PDFHexString.fromText(creator));\n    };\n    /**\n     * Set this document's producer metadata. The producer will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setProducer('PDF App 9000 ðŸ¤–')\n     * ```\n     * @param producer The producer of this document.\n     */\n    PDFDocument.prototype.setProducer = function (producer) {\n        assertIs(producer, 'creator', ['string']);\n        var key = PDFName.of('Producer');\n        this.getInfoDict().set(key, PDFHexString.fromText(producer));\n    };\n    /**\n     * Set this document's language metadata. The language will appear in the\n     * \"Document Properties\" section of some PDF readers. For example:\n     * ```js\n     * pdfDoc.setLanguage('en-us')\n     * ```\n     *\n     * @param language An RFC 3066 _Language-Tag_ denoting the language of this\n     *                 document, or an empty string if the language is unknown.\n     */\n    PDFDocument.prototype.setLanguage = function (language) {\n        assertIs(language, 'language', ['string']);\n        var key = PDFName.of('Lang');\n        this.catalog.set(key, PDFString.of(language));\n    };\n    /**\n     * Set this document's creation date metadata. The creation date will appear\n     * in the \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setCreationDate(new Date())\n     * ```\n     * @param creationDate The date this document was created.\n     */\n    PDFDocument.prototype.setCreationDate = function (creationDate) {\n        assertIs(creationDate, 'creationDate', [[Date, 'Date']]);\n        var key = PDFName.of('CreationDate');\n        this.getInfoDict().set(key, PDFString.fromDate(creationDate));\n    };\n    /**\n     * Set this document's modification date metadata. The modification date will\n     * appear in the \"Document Properties\" section of most PDF readers. For\n     * example:\n     * ```js\n     * pdfDoc.setModificationDate(new Date())\n     * ```\n     * @param modificationDate The date this document was last modified.\n     */\n    PDFDocument.prototype.setModificationDate = function (modificationDate) {\n        assertIs(modificationDate, 'modificationDate', [[Date, 'Date']]);\n        var key = PDFName.of('ModDate');\n        this.getInfoDict().set(key, PDFString.fromDate(modificationDate));\n    };\n    /**\n     * Get the number of pages contained in this document. For example:\n     * ```js\n     * const totalPages = pdfDoc.getPageCount()\n     * ```\n     * @returns The number of pages in this document.\n     */\n    PDFDocument.prototype.getPageCount = function () {\n        if (this.pageCount === undefined)\n            this.pageCount = this.getPages().length;\n        return this.pageCount;\n    };\n    /**\n     * Get an array of all the pages contained in this document. The pages are\n     * stored in the array in the same order that they are rendered in the\n     * document. For example:\n     * ```js\n     * const pages = pdfDoc.getPages()\n     * pages[0]   // The first page of the document\n     * pages[2]   // The third page of the document\n     * pages[197] // The 198th page of the document\n     * ```\n     * @returns An array of all the pages contained in this document.\n     */\n    PDFDocument.prototype.getPages = function () {\n        return this.pageCache.access();\n    };\n    /**\n     * Get the page rendered at a particular `index` of the document. For example:\n     * ```js\n     * pdfDoc.getPage(0)   // The first page of the document\n     * pdfDoc.getPage(2)   // The third page of the document\n     * pdfDoc.getPage(197) // The 198th page of the document\n     * ```\n     * @returns The [[PDFPage]] rendered at the given `index` of the document.\n     */\n    PDFDocument.prototype.getPage = function (index) {\n        var pages = this.getPages();\n        assertRange(index, 'index', 0, pages.length - 1);\n        return pages[index];\n    };\n    /**\n     * Get an array of indices for all the pages contained in this document. The\n     * array will contain a range of integers from\n     * `0..pdfDoc.getPageCount() - 1`. For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     * pdfDoc.addPage()\n     * pdfDoc.addPage()\n     * pdfDoc.addPage()\n     *\n     * const indices = pdfDoc.getPageIndices()\n     * indices // => [0, 1, 2]\n     * ```\n     * @returns An array of indices for all pages contained in this document.\n     */\n    PDFDocument.prototype.getPageIndices = function () {\n        return range(0, this.getPageCount());\n    };\n    /**\n     * Remove the page at a given index from this document. For example:\n     * ```js\n     * pdfDoc.removePage(0)   // Remove the first page of the document\n     * pdfDoc.removePage(2)   // Remove the third page of the document\n     * pdfDoc.removePage(197) // Remove the 198th page of the document\n     * ```\n     * Once a page has been removed, it will no longer be rendered at that index\n     * in the document.\n     * @param index The index of the page to be removed.\n     */\n    PDFDocument.prototype.removePage = function (index) {\n        var pageCount = this.getPageCount();\n        if (this.pageCount === 0)\n            throw new RemovePageFromEmptyDocumentError();\n        assertRange(index, 'index', 0, pageCount - 1);\n        this.catalog.removeLeafNode(index);\n        this.pageCount = pageCount - 1;\n    };\n    /**\n     * Add a page to the end of this document. This method accepts three\n     * different value types for the `page` parameter:\n     *\n     * | Type               | Behavior                                                                            |\n     * | ------------------ | ----------------------------------------------------------------------------------- |\n     * | `undefined`        | Create a new page and add it to the end of this document                            |\n     * | `[number, number]` | Create a new page with the given dimensions and add it to the end of this document  |\n     * | `PDFPage`          | Add the existing page to the end of this document                                   |\n     *\n     * For example:\n     * ```js\n     * // page=undefined\n     * const newPage = pdfDoc.addPage()\n     *\n     * // page=[number, number]\n     * import { PageSizes } from 'pdf-lib'\n     * const newPage1 = pdfDoc.addPage(PageSizes.A7)\n     * const newPage2 = pdfDoc.addPage(PageSizes.Letter)\n     * const newPage3 = pdfDoc.addPage([500, 750])\n     *\n     * // page=PDFPage\n     * const pdfDoc1 = await PDFDocument.create()\n     * const pdfDoc2 = await PDFDocument.load(...)\n     * const [existingPage] = await pdfDoc1.copyPages(pdfDoc2, [0])\n     * pdfDoc1.addPage(existingPage)\n     * ```\n     *\n     * @param page Optionally, the desired dimensions or existing page.\n     * @returns The newly created (or existing) page.\n     */\n    PDFDocument.prototype.addPage = function (page) {\n        assertIs(page, 'page', ['undefined', [PDFPage, 'PDFPage'], Array]);\n        return this.insertPage(this.getPageCount(), page);\n    };\n    /**\n     * Insert a page at a given index within this document. This method accepts\n     * three different value types for the `page` parameter:\n     *\n     * | Type               | Behavior                                                                       |\n     * | ------------------ | ------------------------------------------------------------------------------ |\n     * | `undefined`        | Create a new page and insert it into this document                             |\n     * | `[number, number]` | Create a new page with the given dimensions and insert it into this document   |\n     * | `PDFPage`          | Insert the existing page into this document                                    |\n     *\n     * For example:\n     * ```js\n     * // page=undefined\n     * const newPage = pdfDoc.insertPage(2)\n     *\n     * // page=[number, number]\n     * import { PageSizes } from 'pdf-lib'\n     * const newPage1 = pdfDoc.insertPage(2, PageSizes.A7)\n     * const newPage2 = pdfDoc.insertPage(0, PageSizes.Letter)\n     * const newPage3 = pdfDoc.insertPage(198, [500, 750])\n     *\n     * // page=PDFPage\n     * const pdfDoc1 = await PDFDocument.create()\n     * const pdfDoc2 = await PDFDocument.load(...)\n     * const [existingPage] = await pdfDoc1.copyPages(pdfDoc2, [0])\n     * pdfDoc1.insertPage(0, existingPage)\n     * ```\n     *\n     * @param index The index at which the page should be inserted (zero-based).\n     * @param page Optionally, the desired dimensions or existing page.\n     * @returns The newly created (or existing) page.\n     */\n    PDFDocument.prototype.insertPage = function (index, page) {\n        var pageCount = this.getPageCount();\n        assertRange(index, 'index', 0, pageCount);\n        assertIs(page, 'page', ['undefined', [PDFPage, 'PDFPage'], Array]);\n        if (!page || Array.isArray(page)) {\n            var dims = Array.isArray(page) ? page : PageSizes.A4;\n            page = PDFPage.create(this);\n            page.setSize.apply(page, dims);\n        }\n        else if (page.doc !== this) {\n            throw new ForeignPageError();\n        }\n        var parentRef = this.catalog.insertLeafNode(page.ref, index);\n        page.node.setParent(parentRef);\n        this.pageMap.set(page.node, page);\n        this.pageCache.invalidate();\n        this.pageCount = pageCount + 1;\n        return page;\n    };\n    /**\n     * Copy pages from a source document into this document. Allows pages to be\n     * copied between different [[PDFDocument]] instances. For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     * const srcDoc = await PDFDocument.load(...)\n     *\n     * const copiedPages = await pdfDoc.copyPages(srcDoc, [0, 3, 89])\n     * const [firstPage, fourthPage, ninetiethPage] = copiedPages;\n     *\n     * pdfDoc.addPage(fourthPage)\n     * pdfDoc.insertPage(0, ninetiethPage)\n     * pdfDoc.addPage(firstPage)\n     * ```\n     * @param srcDoc The document from which pages should be copied.\n     * @param indices The indices of the pages that should be copied.\n     * @returns Resolves with an array of pages copied into this document.\n     */\n    PDFDocument.prototype.copyPages = function (srcDoc, indices) {\n        return __awaiter(this, void 0, void 0, function () {\n            var copier, srcPages, copiedPages, idx, len, srcPage, copiedPage, ref;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(srcDoc, 'srcDoc', [[PDFDocument, 'PDFDocument']]);\n                        assertIs(indices, 'indices', [Array]);\n                        return [4 /*yield*/, srcDoc.flush()];\n                    case 1:\n                        _a.sent();\n                        copier = PDFObjectCopier.for(srcDoc.context, this.context);\n                        srcPages = srcDoc.getPages();\n                        copiedPages = new Array(indices.length);\n                        for (idx = 0, len = indices.length; idx < len; idx++) {\n                            srcPage = srcPages[indices[idx]];\n                            copiedPage = copier.copy(srcPage.node);\n                            ref = this.context.register(copiedPage);\n                            copiedPages[idx] = PDFPage.of(copiedPage, ref, this);\n                        }\n                        return [2 /*return*/, copiedPages];\n                }\n            });\n        });\n    };\n    /**\n     * Get a copy of this document.\n     *\n     * For example:\n     * ```js\n     * const srcDoc = await PDFDocument.load(...)\n     * const pdfDoc = await srcDoc.copy()\n     * ```\n     *\n     * > **NOTE:**  This method won't copy all information over to the new\n     * > document (acroforms, outlines, etc...).\n     *\n     * @returns Resolves with a copy this document.\n     */\n    PDFDocument.prototype.copy = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var pdfCopy, contentPages, idx, len;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, PDFDocument.create()];\n                    case 1:\n                        pdfCopy = _a.sent();\n                        return [4 /*yield*/, pdfCopy.copyPages(this, this.getPageIndices())];\n                    case 2:\n                        contentPages = _a.sent();\n                        for (idx = 0, len = contentPages.length; idx < len; idx++) {\n                            pdfCopy.addPage(contentPages[idx]);\n                        }\n                        if (this.getAuthor() !== undefined) {\n                            pdfCopy.setAuthor(this.getAuthor());\n                        }\n                        if (this.getCreationDate() !== undefined) {\n                            pdfCopy.setCreationDate(this.getCreationDate());\n                        }\n                        if (this.getCreator() !== undefined) {\n                            pdfCopy.setCreator(this.getCreator());\n                        }\n                        if (this.getModificationDate() !== undefined) {\n                            pdfCopy.setModificationDate(this.getModificationDate());\n                        }\n                        if (this.getProducer() !== undefined) {\n                            pdfCopy.setProducer(this.getProducer());\n                        }\n                        if (this.getSubject() !== undefined) {\n                            pdfCopy.setSubject(this.getSubject());\n                        }\n                        if (this.getTitle() !== undefined) {\n                            pdfCopy.setTitle(this.getTitle());\n                        }\n                        pdfCopy.defaultWordBreaks = this.defaultWordBreaks;\n                        return [2 /*return*/, pdfCopy];\n                }\n            });\n        });\n    };\n    /**\n     * Add JavaScript to this document. The supplied `script` is executed when the\n     * document is opened. The `script` can be used to perform some operation\n     * when the document is opened (e.g. logging to the console), or it can be\n     * used to define a function that can be referenced later in a JavaScript\n     * action. For example:\n     * ```js\n     * // Show \"Hello World!\" in the console when the PDF is opened\n     * pdfDoc.addJavaScript(\n     *   'main',\n     *   'console.show(); console.println(\"Hello World!\");'\n     * );\n     *\n     * // Define a function named \"foo\" that can be called in JavaScript Actions\n     * pdfDoc.addJavaScript(\n     *   'foo',\n     *   'function foo() { return \"foo\"; }'\n     * );\n     * ```\n     * See the [JavaScript for Acrobat API Reference](https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/js_api_reference.pdf)\n     * for details.\n     * @param name The name of the script. Must be unique per document.\n     * @param script The JavaScript to execute.\n     */\n    PDFDocument.prototype.addJavaScript = function (name, script) {\n        assertIs(name, 'name', ['string']);\n        assertIs(script, 'script', ['string']);\n        var embedder = JavaScriptEmbedder.for(script, name);\n        var ref = this.context.nextRef();\n        var javaScript = PDFJavaScript.of(ref, this, embedder);\n        this.javaScripts.push(javaScript);\n    };\n    /**\n     * Add an attachment to this document. Attachments are visible in the\n     * \"Attachments\" panel of Adobe Acrobat and some other PDF readers. Any\n     * type of file can be added as an attachment. This includes, but is not\n     * limited to, `.png`, `.jpg`, `.pdf`, `.csv`, `.docx`, and `.xlsx` files.\n     *\n     * The input data can be provided in multiple formats:\n     *\n     * | Type          | Contents                                                       |\n     * | ------------- | -------------------------------------------------------------- |\n     * | `string`      | A base64 encoded string (or data URI) containing an attachment |\n     * | `Uint8Array`  | The raw bytes of an attachment                                 |\n     * | `ArrayBuffer` | The raw bytes of an attachment                                 |\n     *\n     * For example:\n     * ```js\n     * // attachment=string\n     * await pdfDoc.attach('/9j/4AAQSkZJRgABAQAAAQABAAD/2wBD...', 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     * await pdfDoc.attach('data:image/jpeg;base64,/9j/4AAQ...', 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     *\n     * // attachment=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('cat_riding_unicorn.jpg')\n     * await pdfDoc.attach(uint8Array, 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     *\n     * // attachment=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * await pdfDoc.attach(arrayBuffer, 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ðŸ¦„ðŸˆðŸ•¶ï¸',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     * ```\n     *\n     * @param attachment The input data containing the file to be attached.\n     * @param name The name of the file to be attached.\n     * @returns Resolves when the attachment is complete.\n     */\n    PDFDocument.prototype.attach = function (attachment, name, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var bytes, embedder, ref, embeddedFile;\n            return __generator(this, function (_a) {\n                assertIs(attachment, 'attachment', ['string', Uint8Array, ArrayBuffer]);\n                assertIs(name, 'name', ['string']);\n                assertOrUndefined(options.mimeType, 'mimeType', ['string']);\n                assertOrUndefined(options.description, 'description', ['string']);\n                assertOrUndefined(options.creationDate, 'options.creationDate', [Date]);\n                assertOrUndefined(options.modificationDate, 'options.modificationDate', [\n                    Date,\n                ]);\n                assertIsOneOfOrUndefined(options.afRelationship, 'options.afRelationship', AFRelationship);\n                bytes = toUint8Array(attachment);\n                embedder = FileEmbedder.for(bytes, name, options);\n                ref = this.context.nextRef();\n                embeddedFile = PDFEmbeddedFile.of(ref, this, embedder);\n                this.embeddedFiles.push(embeddedFile);\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n     * Embed a font into this document. The input data can be provided in multiple\n     * formats:\n     *\n     * | Type            | Contents                                                |\n     * | --------------- | ------------------------------------------------------- |\n     * | `StandardFonts` | One of the standard 14 fonts                            |\n     * | `string`        | A base64 encoded string (or data URI) containing a font |\n     * | `Uint8Array`    | The raw bytes of a font                                 |\n     * | `ArrayBuffer`   | The raw bytes of a font                                 |\n     *\n     * For example:\n     * ```js\n     * // font=StandardFonts\n     * import { StandardFonts } from 'pdf-lib'\n     * const font1 = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     *\n     * // font=string\n     * const font2 = await pdfDoc.embedFont('AAEAAAAVAQAABABQRFNJRx/upe...')\n     * const font3 = await pdfDoc.embedFont('data:font/opentype;base64,AAEAAA...')\n     *\n     * // font=Uint8Array\n     * import fs from 'fs'\n     * const font4 = await pdfDoc.embedFont(fs.readFileSync('Ubuntu-R.ttf'))\n     *\n     * // font=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/ubuntu/Ubuntu-R.ttf'\n     * const ubuntuBytes = await fetch(url).then(res => res.arrayBuffer())\n     * const font5 = await pdfDoc.embedFont(ubuntuBytes)\n     * ```\n     * See also: [[registerFontkit]]\n     * @param font The input data for a font.\n     * @param options The options to be used when embedding the font.\n     * @returns Resolves with the embedded font.\n     */\n    PDFDocument.prototype.embedFont = function (font, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, subset, customName, features, embedder, bytes, fontkit, _b, ref, pdfFont;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = options.subset, subset = _a === void 0 ? false : _a, customName = options.customName, features = options.features;\n                        assertIs(font, 'font', ['string', Uint8Array, ArrayBuffer]);\n                        assertIs(subset, 'subset', ['boolean']);\n                        if (!isStandardFont(font)) return [3 /*break*/, 1];\n                        embedder = StandardFontEmbedder.for(font, customName);\n                        return [3 /*break*/, 7];\n                    case 1:\n                        if (!canBeConvertedToUint8Array(font)) return [3 /*break*/, 6];\n                        bytes = toUint8Array(font);\n                        fontkit = this.assertFontkit();\n                        if (!subset) return [3 /*break*/, 3];\n                        return [4 /*yield*/, CustomFontSubsetEmbedder.for(fontkit, bytes, customName, features)];\n                    case 2:\n                        _b = _c.sent();\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, CustomFontEmbedder.for(fontkit, bytes, customName, features)];\n                    case 4:\n                        _b = _c.sent();\n                        _c.label = 5;\n                    case 5:\n                        embedder = _b;\n                        return [3 /*break*/, 7];\n                    case 6: throw new TypeError('`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`');\n                    case 7:\n                        ref = this.context.nextRef();\n                        pdfFont = PDFFont.of(ref, this, embedder);\n                        this.fonts.push(pdfFont);\n                        return [2 /*return*/, pdfFont];\n                }\n            });\n        });\n    };\n    /**\n     * Embed a standard font into this document.\n     * For example:\n     * ```js\n     * import { StandardFonts } from 'pdf-lib'\n     * const helveticaFont = pdfDoc.embedFont(StandardFonts.Helvetica)\n     * ```\n     * @param font The standard font to be embedded.\n     * @param customName The name to be used when embedding the font.\n     * @returns The embedded font.\n     */\n    PDFDocument.prototype.embedStandardFont = function (font, customName) {\n        assertIs(font, 'font', ['string']);\n        if (!isStandardFont(font)) {\n            throw new TypeError('`font` must be one of type `StandardFonts`');\n        }\n        var embedder = StandardFontEmbedder.for(font, customName);\n        var ref = this.context.nextRef();\n        var pdfFont = PDFFont.of(ref, this, embedder);\n        this.fonts.push(pdfFont);\n        return pdfFont;\n    };\n    /**\n     * Embed a JPEG image into this document. The input data can be provided in\n     * multiple formats:\n     *\n     * | Type          | Contents                                                      |\n     * | ------------- | ------------------------------------------------------------- |\n     * | `string`      | A base64 encoded string (or data URI) containing a JPEG image |\n     * | `Uint8Array`  | The raw bytes of a JPEG image                                 |\n     * | `ArrayBuffer` | The raw bytes of a JPEG image                                 |\n     *\n     * For example:\n     * ```js\n     * // jpg=string\n     * const image1 = await pdfDoc.embedJpg('/9j/4AAQSkZJRgABAQAAAQABAAD/2wBD...')\n     * const image2 = await pdfDoc.embedJpg('data:image/jpeg;base64,/9j/4AAQ...')\n     *\n     * // jpg=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('cat_riding_unicorn.jpg')\n     * const image3 = await pdfDoc.embedJpg(uint8Array)\n     *\n     * // jpg=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * const image4 = await pdfDoc.embedJpg(arrayBuffer)\n     * ```\n     *\n     * @param jpg The input data for a JPEG image.\n     * @returns Resolves with the embedded image.\n     */\n    PDFDocument.prototype.embedJpg = function (jpg) {\n        return __awaiter(this, void 0, void 0, function () {\n            var bytes, embedder, ref, pdfImage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(jpg, 'jpg', ['string', Uint8Array, ArrayBuffer]);\n                        bytes = toUint8Array(jpg);\n                        return [4 /*yield*/, JpegEmbedder.for(bytes)];\n                    case 1:\n                        embedder = _a.sent();\n                        ref = this.context.nextRef();\n                        pdfImage = PDFImage.of(ref, this, embedder);\n                        this.images.push(pdfImage);\n                        return [2 /*return*/, pdfImage];\n                }\n            });\n        });\n    };\n    /**\n     * Embed a PNG image into this document. The input data can be provided in\n     * multiple formats:\n     *\n     * | Type          | Contents                                                     |\n     * | ------------- | ------------------------------------------------------------ |\n     * | `string`      | A base64 encoded string (or data URI) containing a PNG image |\n     * | `Uint8Array`  | The raw bytes of a PNG image                                 |\n     * | `ArrayBuffer` | The raw bytes of a PNG image                                 |\n     *\n     * For example:\n     * ```js\n     * // png=string\n     * const image1 = await pdfDoc.embedPng('iVBORw0KGgoAAAANSUhEUgAAAlgAAAF3...')\n     * const image2 = await pdfDoc.embedPng('data:image/png;base64,iVBORw0KGg...')\n     *\n     * // png=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('small_mario.png')\n     * const image3 = await pdfDoc.embedPng(uint8Array)\n     *\n     * // png=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/small_mario.png'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * const image4 = await pdfDoc.embedPng(arrayBuffer)\n     * ```\n     *\n     * @param png The input data for a PNG image.\n     * @returns Resolves with the embedded image.\n     */\n    PDFDocument.prototype.embedPng = function (png) {\n        return __awaiter(this, void 0, void 0, function () {\n            var bytes, embedder, ref, pdfImage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(png, 'png', ['string', Uint8Array, ArrayBuffer]);\n                        bytes = toUint8Array(png);\n                        return [4 /*yield*/, PngEmbedder.for(bytes)];\n                    case 1:\n                        embedder = _a.sent();\n                        ref = this.context.nextRef();\n                        pdfImage = PDFImage.of(ref, this, embedder);\n                        this.images.push(pdfImage);\n                        return [2 /*return*/, pdfImage];\n                }\n            });\n        });\n    };\n    /**\n     * Embed one or more PDF pages into this document.\n     *\n     * For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourcePdf = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     *\n     * // Embed page 74 of `sourcePdf` into `pdfDoc`\n     * const [embeddedPage] = await pdfDoc.embedPdf(sourcePdf, [73])\n     * ```\n     *\n     * See [[PDFDocument.load]] for examples of the allowed input data formats.\n     *\n     * @param pdf The input data containing a PDF document.\n     * @param indices The indices of the pages that should be embedded.\n     * @returns Resolves with an array of the embedded pages.\n     */\n    PDFDocument.prototype.embedPdf = function (pdf, indices) {\n        if (indices === void 0) { indices = [0]; }\n        return __awaiter(this, void 0, void 0, function () {\n            var srcDoc, _a, srcPages;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        assertIs(pdf, 'pdf', [\n                            'string',\n                            Uint8Array,\n                            ArrayBuffer,\n                            [PDFDocument, 'PDFDocument'],\n                        ]);\n                        assertIs(indices, 'indices', [Array]);\n                        if (!(pdf instanceof PDFDocument)) return [3 /*break*/, 1];\n                        _a = pdf;\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, PDFDocument.load(pdf)];\n                    case 2:\n                        _a = _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        srcDoc = _a;\n                        srcPages = pluckIndices(srcDoc.getPages(), indices);\n                        return [2 /*return*/, this.embedPages(srcPages)];\n                }\n            });\n        });\n    };\n    /**\n     * Embed a single PDF page into this document.\n     *\n     * For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourceBuffer = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     * const sourcePdfDoc = await PDFDocument.load(sourceBuffer)\n     * const sourcePdfPage = sourcePdfDoc.getPages()[73]\n     *\n     * const embeddedPage = await pdfDoc.embedPage(\n     *   sourcePdfPage,\n     *\n     *   // Clip a section of the source page so that we only embed part of it\n     *   { left: 100, right: 450, bottom: 330, top: 570 },\n     *\n     *   // Translate all drawings of the embedded page by (10, 200) units\n     *   [1, 0, 0, 1, 10, 200],\n     * )\n     * ```\n     *\n     * @param page The page to be embedded.\n     * @param boundingBox\n     * Optionally, an area of the source page that should be embedded\n     * (defaults to entire page).\n     * @param transformationMatrix\n     * Optionally, a transformation matrix that is always applied to the embedded\n     * page anywhere it is drawn.\n     * @returns Resolves with the embedded pdf page.\n     */\n    PDFDocument.prototype.embedPage = function (page, boundingBox, transformationMatrix) {\n        return __awaiter(this, void 0, void 0, function () {\n            var embeddedPage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n                        return [4 /*yield*/, this.embedPages([page], [boundingBox], [transformationMatrix])];\n                    case 1:\n                        embeddedPage = (_a.sent())[0];\n                        return [2 /*return*/, embeddedPage];\n                }\n            });\n        });\n    };\n    /**\n     * Embed one or more PDF pages into this document.\n     *\n     * For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourceBuffer = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     * const sourcePdfDoc = await PDFDocument.load(sourceBuffer)\n     *\n     * const page1 = sourcePdfDoc.getPages()[0]\n     * const page2 = sourcePdfDoc.getPages()[52]\n     * const page3 = sourcePdfDoc.getPages()[73]\n     *\n     * const embeddedPages = await pdfDoc.embedPages([page1, page2, page3])\n     * ```\n     *\n     * @param page\n     * The pages to be embedded (they must all share the same context).\n     * @param boundingBoxes\n     * Optionally, an array of clipping boundaries - one for each page\n     * (defaults to entirety of each page).\n     * @param transformationMatrices\n     * Optionally, an array of transformation matrices - one for each page\n     * (each page's transformation will apply anywhere it is drawn).\n     * @returns Resolves with an array of the embedded pdf pages.\n     */\n    PDFDocument.prototype.embedPages = function (pages, boundingBoxes, transformationMatrices) {\n        if (boundingBoxes === void 0) { boundingBoxes = []; }\n        if (transformationMatrices === void 0) { transformationMatrices = []; }\n        return __awaiter(this, void 0, void 0, function () {\n            var idx, len, currPage, nextPage, context, maybeCopyPage, embeddedPages, idx, len, page, box, matrix, embedder, ref;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (pages.length === 0)\n                            return [2 /*return*/, []];\n                        // Assert all pages have the same context\n                        for (idx = 0, len = pages.length - 1; idx < len; idx++) {\n                            currPage = pages[idx];\n                            nextPage = pages[idx + 1];\n                            if (currPage.node.context !== nextPage.node.context) {\n                                throw new PageEmbeddingMismatchedContextError();\n                            }\n                        }\n                        context = pages[0].node.context;\n                        maybeCopyPage = context === this.context\n                            ? function (p) { return p; }\n                            : PDFObjectCopier.for(context, this.context).copy;\n                        embeddedPages = new Array(pages.length);\n                        idx = 0, len = pages.length;\n                        _b.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        page = maybeCopyPage(pages[idx].node);\n                        box = boundingBoxes[idx];\n                        matrix = transformationMatrices[idx];\n                        return [4 /*yield*/, PDFPageEmbedder.for(page, box, matrix)];\n                    case 2:\n                        embedder = _b.sent();\n                        ref = this.context.nextRef();\n                        embeddedPages[idx] = PDFEmbeddedPage.of(ref, this, embedder);\n                        _b.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        (_a = this.embeddedPages).push.apply(_a, embeddedPages);\n                        return [2 /*return*/, embeddedPages];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You shouldn't need to call this method directly. The [[save]]\n     * > and [[saveAsBase64]] methods will automatically ensure that all embedded\n     * > assets are flushed before serializing the document.\n     *\n     * Flush all embedded fonts, PDF pages, and images to this document's\n     * [[context]].\n     *\n     * @returns Resolves when the flush is complete.\n     */\n    PDFDocument.prototype.flush = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.embedAll(this.fonts)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.images)];\n                    case 2:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.embeddedPages)];\n                    case 3:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.embeddedFiles)];\n                    case 4:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.javaScripts)];\n                    case 5:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Serialize this document to an array of bytes making up a PDF file.\n     * For example:\n     * ```js\n     * const pdfBytes = await pdfDoc.save()\n     * ```\n     *\n     * There are a number of things you can do with the serialized document,\n     * depending on the JavaScript environment you're running in:\n     * * Write it to a file in Node or React Native\n     * * Download it as a Blob in the browser\n     * * Render it in an `iframe`\n     *\n     * @param options The options to be used when saving the document.\n     * @returns Resolves with the bytes of the serialized document.\n     */\n    PDFDocument.prototype.save = function (options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, useObjectStreams, _b, addDefaultPage, _c, objectsPerTick, _d, updateFieldAppearances, form, Writer;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        _a = options.useObjectStreams, useObjectStreams = _a === void 0 ? true : _a, _b = options.addDefaultPage, addDefaultPage = _b === void 0 ? true : _b, _c = options.objectsPerTick, objectsPerTick = _c === void 0 ? 50 : _c, _d = options.updateFieldAppearances, updateFieldAppearances = _d === void 0 ? true : _d;\n                        assertIs(useObjectStreams, 'useObjectStreams', ['boolean']);\n                        assertIs(addDefaultPage, 'addDefaultPage', ['boolean']);\n                        assertIs(objectsPerTick, 'objectsPerTick', ['number']);\n                        assertIs(updateFieldAppearances, 'updateFieldAppearances', ['boolean']);\n                        if (addDefaultPage && this.getPageCount() === 0)\n                            this.addPage();\n                        if (updateFieldAppearances) {\n                            form = this.formCache.getValue();\n                            if (form)\n                                form.updateFieldAppearances();\n                        }\n                        return [4 /*yield*/, this.flush()];\n                    case 1:\n                        _e.sent();\n                        Writer = useObjectStreams ? PDFStreamWriter : PDFWriter;\n                        return [2 /*return*/, Writer.forContext(this.context, objectsPerTick).serializeToBuffer()];\n                }\n            });\n        });\n    };\n    /**\n     * Serialize this document to a base64 encoded string or data URI making up a\n     * PDF file. For example:\n     * ```js\n     * const base64String = await pdfDoc.saveAsBase64()\n     * base64String // => 'JVBERi0xLjcKJYGBgYEKC...'\n     *\n     * const base64DataUri = await pdfDoc.saveAsBase64({ dataUri: true })\n     * base64DataUri // => 'data:application/pdf;base64,JVBERi0xLjcKJYGBgYEKC...'\n     * ```\n     *\n     * @param options The options to be used when saving the document.\n     * @returns Resolves with a base64 encoded string or data URI of the\n     *          serialized document.\n     */\n    PDFDocument.prototype.saveAsBase64 = function (options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, dataUri, otherOptions, bytes, base64;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = options.dataUri, dataUri = _a === void 0 ? false : _a, otherOptions = __rest(options, [\"dataUri\"]);\n                        assertIs(dataUri, 'dataUri', ['boolean']);\n                        return [4 /*yield*/, this.save(otherOptions)];\n                    case 1:\n                        bytes = _b.sent();\n                        base64 = encodeToBase64(bytes);\n                        return [2 /*return*/, dataUri ? \"data:application/pdf;base64,\" + base64 : base64];\n                }\n            });\n        });\n    };\n    PDFDocument.prototype.findPageForAnnotationRef = function (ref) {\n        var pages = this.getPages();\n        for (var idx = 0, len = pages.length; idx < len; idx++) {\n            var page = pages[idx];\n            var annotations = page.node.Annots();\n            if ((annotations === null || annotations === void 0 ? void 0 : annotations.indexOf(ref)) !== undefined) {\n                return page;\n            }\n        }\n        return undefined;\n    };\n    PDFDocument.prototype.embedAll = function (embeddables) {\n        return __awaiter(this, void 0, void 0, function () {\n            var idx, len;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        idx = 0, len = embeddables.length;\n                        _a.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, embeddables[idx].embed()];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PDFDocument.prototype.updateInfoDict = function () {\n        var pdfLib = \"pdf-lib (https://github.com/Hopding/pdf-lib)\";\n        var now = new Date();\n        var info = this.getInfoDict();\n        this.setProducer(pdfLib);\n        this.setModificationDate(now);\n        if (!info.get(PDFName.of('Creator')))\n            this.setCreator(pdfLib);\n        if (!info.get(PDFName.of('CreationDate')))\n            this.setCreationDate(now);\n    };\n    PDFDocument.prototype.getInfoDict = function () {\n        var existingInfo = this.context.lookup(this.context.trailerInfo.Info);\n        if (existingInfo instanceof PDFDict)\n            return existingInfo;\n        var newInfo = this.context.obj({});\n        this.context.trailerInfo.Info = this.context.register(newInfo);\n        return newInfo;\n    };\n    PDFDocument.prototype.assertFontkit = function () {\n        if (!this.fontkit)\n            throw new FontkitNotRegisteredError();\n        return this.fontkit;\n    };\n    return PDFDocument;\n}());\nexport default PDFDocument;\n/* tslint:disable-next-line only-arrow-functions */\nfunction assertIsLiteralOrHexString(pdfObject) {\n    if (!(pdfObject instanceof PDFHexString) &&\n        !(pdfObject instanceof PDFString)) {\n        throw new UnexpectedObjectTypeError([PDFHexString, PDFString], pdfObject);\n    }\n}\n//# sourceMappingURL=PDFDocument.js.map","export var BlendMode;\n(function (BlendMode) {\n    BlendMode[\"Normal\"] = \"Normal\";\n    BlendMode[\"Multiply\"] = \"Multiply\";\n    BlendMode[\"Screen\"] = \"Screen\";\n    BlendMode[\"Overlay\"] = \"Overlay\";\n    BlendMode[\"Darken\"] = \"Darken\";\n    BlendMode[\"Lighten\"] = \"Lighten\";\n    BlendMode[\"ColorDodge\"] = \"ColorDodge\";\n    BlendMode[\"ColorBurn\"] = \"ColorBurn\";\n    BlendMode[\"HardLight\"] = \"HardLight\";\n    BlendMode[\"SoftLight\"] = \"SoftLight\";\n    BlendMode[\"Difference\"] = \"Difference\";\n    BlendMode[\"Exclusion\"] = \"Exclusion\";\n})(BlendMode || (BlendMode = {}));\n//# sourceMappingURL=PDFPageOptions.js.map","import { __assign } from \"tslib\";\nimport { rgb } from \"./colors\";\nimport { drawImage, drawLine, drawLinesOfText, drawPage, drawRectangle, drawSvgPath, drawEllipse, } from \"./operations\";\nimport { popGraphicsState, pushGraphicsState, translate, LineCapStyle, scale, } from \"./operators\";\nimport PDFDocument from \"./PDFDocument\";\nimport PDFEmbeddedPage from \"./PDFEmbeddedPage\";\nimport PDFFont from \"./PDFFont\";\nimport PDFImage from \"./PDFImage\";\nimport { BlendMode, } from \"./PDFPageOptions\";\nimport { degrees, toDegrees } from \"./rotations\";\nimport { StandardFonts } from \"./StandardFonts\";\nimport { PDFContentStream, PDFName, PDFOperator, PDFPageLeaf, PDFRef, PDFDict, PDFArray, } from \"../core\";\nimport { assertEachIs, assertIs, assertMultiple, assertOrUndefined, breakTextIntoLines, cleanText, rectanglesAreEqual, lineSplit, assertRangeOrUndefined, assertIsOneOfOrUndefined, } from \"../utils\";\n/**\n * Represents a single page of a [[PDFDocument]].\n */\nvar PDFPage = /** @class */ (function () {\n    function PDFPage(leafNode, ref, doc) {\n        this.fontSize = 24;\n        this.fontColor = rgb(0, 0, 0);\n        this.lineHeight = 24;\n        this.x = 0;\n        this.y = 0;\n        assertIs(leafNode, 'leafNode', [[PDFPageLeaf, 'PDFPageLeaf']]);\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        this.node = leafNode;\n        this.ref = ref;\n        this.doc = doc;\n    }\n    /**\n     * Rotate this page by a multiple of 90 degrees. For example:\n     * ```js\n     * import { degrees } from 'pdf-lib'\n     *\n     * page.setRotation(degrees(-90))\n     * page.setRotation(degrees(0))\n     * page.setRotation(degrees(90))\n     * page.setRotation(degrees(180))\n     * page.setRotation(degrees(270))\n     * ```\n     * @param angle The angle to rotate this page.\n     */\n    PDFPage.prototype.setRotation = function (angle) {\n        var degreesAngle = toDegrees(angle);\n        assertMultiple(degreesAngle, 'degreesAngle', 90);\n        this.node.set(PDFName.of('Rotate'), this.doc.context.obj(degreesAngle));\n    };\n    /**\n     * Get this page's rotation angle in degrees. For example:\n     * ```js\n     * const rotationAngle = page.getRotation().angle;\n     * ```\n     * @returns The rotation angle of the page in degrees (always a multiple of\n     *          90 degrees).\n     */\n    PDFPage.prototype.getRotation = function () {\n        var Rotate = this.node.Rotate();\n        return degrees(Rotate ? Rotate.asNumber() : 0);\n    };\n    /**\n     * Resize this page by increasing or decreasing its width and height. For\n     * example:\n     * ```js\n     * page.setSize(250, 500)\n     * page.setSize(page.getWidth() + 50, page.getHeight() + 100)\n     * page.setSize(page.getWidth() - 50, page.getHeight() - 100)\n     * ```\n     *\n     * Note that the PDF specification does not allow for pages to have explicit\n     * widths and heights. Instead it defines the \"size\" of a page in terms of\n     * five rectangles: the MediaBox, CropBox, BleedBox, TrimBox, and ArtBox. As a\n     * result, this method cannot directly change the width and height of a page.\n     * Instead, it works by adjusting these five boxes.\n     *\n     * This method performs the following steps:\n     *   1. Set width & height of MediaBox.\n     *   2. Set width & height of CropBox, if it has same dimensions as MediaBox.\n     *   3. Set width & height of BleedBox, if it has same dimensions as MediaBox.\n     *   4. Set width & height of TrimBox, if it has same dimensions as MediaBox.\n     *   5. Set width & height of ArtBox, if it has same dimensions as MediaBox.\n     *\n     * This approach works well for most PDF documents as all PDF pages must\n     * have a MediaBox, but relatively few have a CropBox, BleedBox, TrimBox, or\n     * ArtBox. And when they do have these additional boxes, they often have the\n     * same dimensions as the MediaBox. However, if you find this method does not\n     * work for your document, consider setting the boxes directly:\n     *   * [[PDFPage.setMediaBox]]\n     *   * [[PDFPage.setCropBox]]\n     *   * [[PDFPage.setBleedBox]]\n     *   * [[PDFPage.setTrimBox]]\n     *   * [[PDFPage.setArtBox]]\n     *\n     * @param width The new width of the page.\n     * @param height The new height of the page.\n     */\n    PDFPage.prototype.setSize = function (width, height) {\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var mediaBox = this.getMediaBox();\n        this.setMediaBox(mediaBox.x, mediaBox.y, width, height);\n        var cropBox = this.getCropBox();\n        var bleedBox = this.getBleedBox();\n        var trimBox = this.getTrimBox();\n        var artBox = this.getArtBox();\n        var hasCropBox = this.node.CropBox();\n        var hasBleedBox = this.node.BleedBox();\n        var hasTrimBox = this.node.TrimBox();\n        var hasArtBox = this.node.ArtBox();\n        if (hasCropBox && rectanglesAreEqual(cropBox, mediaBox)) {\n            this.setCropBox(mediaBox.x, mediaBox.y, width, height);\n        }\n        if (hasBleedBox && rectanglesAreEqual(bleedBox, mediaBox)) {\n            this.setBleedBox(mediaBox.x, mediaBox.y, width, height);\n        }\n        if (hasTrimBox && rectanglesAreEqual(trimBox, mediaBox)) {\n            this.setTrimBox(mediaBox.x, mediaBox.y, width, height);\n        }\n        if (hasArtBox && rectanglesAreEqual(artBox, mediaBox)) {\n            this.setArtBox(mediaBox.x, mediaBox.y, width, height);\n        }\n    };\n    /**\n     * Resize this page by increasing or decreasing its width. For example:\n     * ```js\n     * page.setWidth(250)\n     * page.setWidth(page.getWidth() + 50)\n     * page.setWidth(page.getWidth() - 50)\n     * ```\n     *\n     * This method uses [[PDFPage.setSize]] to set the page's width.\n     *\n     * @param width The new width of the page.\n     */\n    PDFPage.prototype.setWidth = function (width) {\n        assertIs(width, 'width', ['number']);\n        this.setSize(width, this.getSize().height);\n    };\n    /**\n     * Resize this page by increasing or decreasing its height. For example:\n     * ```js\n     * page.setHeight(500)\n     * page.setHeight(page.getWidth() + 100)\n     * page.setHeight(page.getWidth() - 100)\n     * ```\n     *\n     * This method uses [[PDFPage.setSize]] to set the page's height.\n     *\n     * @param height The new height of the page.\n     */\n    PDFPage.prototype.setHeight = function (height) {\n        assertIs(height, 'height', ['number']);\n        this.setSize(this.getSize().width, height);\n    };\n    /**\n     * Set the MediaBox of this page. For example:\n     * ```js\n     * const mediaBox = page.getMediaBox()\n     *\n     * page.setMediaBox(0, 0, 250, 500)\n     * page.setMediaBox(mediaBox.x, mediaBox.y, 50, 100)\n     * page.setMediaBox(15, 5, mediaBox.width - 50, mediaBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getMediaBox]] for details about what the MediaBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new MediaBox.\n     * @param y The y coordinate of the lower left corner of the new MediaBox.\n     * @param width The width of the new MediaBox.\n     * @param height The height of the new MediaBox.\n     */\n    PDFPage.prototype.setMediaBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var mediaBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.MediaBox, mediaBox);\n    };\n    /**\n     * Set the CropBox of this page. For example:\n     * ```js\n     * const cropBox = page.getCropBox()\n     *\n     * page.setCropBox(0, 0, 250, 500)\n     * page.setCropBox(cropBox.x, cropBox.y, 50, 100)\n     * page.setCropBox(15, 5, cropBox.width - 50, cropBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getCropBox]] for details about what the CropBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new CropBox.\n     * @param y The y coordinate of the lower left corner of the new CropBox.\n     * @param width The width of the new CropBox.\n     * @param height The height of the new CropBox.\n     */\n    PDFPage.prototype.setCropBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var cropBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.CropBox, cropBox);\n    };\n    /**\n     * Set the BleedBox of this page. For example:\n     * ```js\n     * const bleedBox = page.getBleedBox()\n     *\n     * page.setBleedBox(0, 0, 250, 500)\n     * page.setBleedBox(bleedBox.x, bleedBox.y, 50, 100)\n     * page.setBleedBox(15, 5, bleedBox.width - 50, bleedBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getBleedBox]] for details about what the BleedBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new BleedBox.\n     * @param y The y coordinate of the lower left corner of the new BleedBox.\n     * @param width The width of the new BleedBox.\n     * @param height The height of the new BleedBox.\n     */\n    PDFPage.prototype.setBleedBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var bleedBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.BleedBox, bleedBox);\n    };\n    /**\n     * Set the TrimBox of this page. For example:\n     * ```js\n     * const trimBox = page.getTrimBox()\n     *\n     * page.setTrimBox(0, 0, 250, 500)\n     * page.setTrimBox(trimBox.x, trimBox.y, 50, 100)\n     * page.setTrimBox(15, 5, trimBox.width - 50, trimBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getTrimBox]] for details about what the TrimBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new TrimBox.\n     * @param y The y coordinate of the lower left corner of the new TrimBox.\n     * @param width The width of the new TrimBox.\n     * @param height The height of the new TrimBox.\n     */\n    PDFPage.prototype.setTrimBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var trimBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.TrimBox, trimBox);\n    };\n    /**\n     * Set the ArtBox of this page. For example:\n     * ```js\n     * const artBox = page.getArtBox()\n     *\n     * page.setArtBox(0, 0, 250, 500)\n     * page.setArtBox(artBox.x, artBox.y, 50, 100)\n     * page.setArtBox(15, 5, artBox.width - 50, artBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getArtBox]] for details about what the ArtBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new ArtBox.\n     * @param y The y coordinate of the lower left corner of the new ArtBox.\n     * @param width The width of the new ArtBox.\n     * @param height The height of the new ArtBox.\n     */\n    PDFPage.prototype.setArtBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var artBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.ArtBox, artBox);\n    };\n    /**\n     * Get this page's width and height. For example:\n     * ```js\n     * const { width, height } = page.getSize()\n     * ```\n     *\n     * This method uses [[PDFPage.getMediaBox]] to obtain the page's\n     * width and height.\n     *\n     * @returns The width and height of the page.\n     */\n    PDFPage.prototype.getSize = function () {\n        var _a = this.getMediaBox(), width = _a.width, height = _a.height;\n        return { width: width, height: height };\n    };\n    /**\n     * Get this page's width. For example:\n     * ```js\n     * const width = page.getWidth()\n     * ```\n     *\n     * This method uses [[PDFPage.getSize]] to obtain the page's size.\n     *\n     * @returns The width of the page.\n     */\n    PDFPage.prototype.getWidth = function () {\n        return this.getSize().width;\n    };\n    /**\n     * Get this page's height. For example:\n     * ```js\n     * const height = page.getHeight()\n     * ```\n     *\n     * This method uses [[PDFPage.getSize]] to obtain the page's size.\n     *\n     * @returns The height of the page.\n     */\n    PDFPage.prototype.getHeight = function () {\n        return this.getSize().height;\n    };\n    /**\n     * Get the rectangle defining this page's MediaBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getMediaBox()\n     * ```\n     *\n     * The MediaBox of a page defines the boundaries of the physical medium on\n     * which the page is to be displayed/printed. It may include extended area\n     * surrounding the page content for bleed marks, printing marks, etc...\n     * It may also include areas close to the edges of the medium that cannot be\n     * marked because of physical limitations of the output device. Content\n     * falling outside this boundary may safely be discarded without affecting\n     * the meaning of the PDF file.\n     *\n     * @returns An object defining the lower left corner of the MediaBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getMediaBox = function () {\n        var mediaBox = this.node.MediaBox();\n        return mediaBox.asRectangle();\n    };\n    /**\n     * Get the rectangle defining this page's CropBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getCropBox()\n     * ```\n     *\n     * The CropBox of a page defines the region to which the contents of the page\n     * shall be clipped when displayed or printed. Unlike the other boxes, the\n     * CropBox does not necessarily represent the physical page geometry. It\n     * merely imposes clipping on the page contents.\n     *\n     * The CropBox's default value is the page's MediaBox.\n     *\n     * @returns An object defining the lower left corner of the CropBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getCropBox = function () {\n        var _a;\n        var cropBox = this.node.CropBox();\n        return (_a = cropBox === null || cropBox === void 0 ? void 0 : cropBox.asRectangle()) !== null && _a !== void 0 ? _a : this.getMediaBox();\n    };\n    /**\n     * Get the rectangle defining this page's BleedBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getBleedBox()\n     * ```\n     *\n     * The BleedBox of a page defines the region to which the contents of the\n     * page shall be clipped when output in a production environment. This may\n     * include any extra bleed area needed to accommodate the physical\n     * limitations of cutting, folding, and trimming equipment. The actual\n     * printed page may include printing marks that fall outside the BleedBox.\n     *\n     * The BleedBox's default value is the page's CropBox.\n     *\n     * @returns An object defining the lower left corner of the BleedBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getBleedBox = function () {\n        var _a;\n        var bleedBox = this.node.BleedBox();\n        return (_a = bleedBox === null || bleedBox === void 0 ? void 0 : bleedBox.asRectangle()) !== null && _a !== void 0 ? _a : this.getCropBox();\n    };\n    /**\n     * Get the rectangle defining this page's TrimBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getTrimBox()\n     * ```\n     *\n     * The TrimBox of a page defines the intended dimensions of the finished\n     * page after trimming. It may be smaller than the MediaBox to allow for\n     * production-related content, such as printing instructions, cut marks, or\n     * color bars.\n     *\n     * The TrimBox's default value is the page's CropBox.\n     *\n     * @returns An object defining the lower left corner of the TrimBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getTrimBox = function () {\n        var _a;\n        var trimBox = this.node.TrimBox();\n        return (_a = trimBox === null || trimBox === void 0 ? void 0 : trimBox.asRectangle()) !== null && _a !== void 0 ? _a : this.getCropBox();\n    };\n    /**\n     * Get the rectangle defining this page's ArtBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getArtBox()\n     * ```\n     *\n     * The ArtBox of a page defines the extent of the page's meaningful content\n     * (including potential white space).\n     *\n     * The ArtBox's default value is the page's CropBox.\n     *\n     * @returns An object defining the lower left corner of the ArtBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getArtBox = function () {\n        var _a;\n        var artBox = this.node.ArtBox();\n        return (_a = artBox === null || artBox === void 0 ? void 0 : artBox.asRectangle()) !== null && _a !== void 0 ? _a : this.getCropBox();\n    };\n    /**\n     * Translate this page's content to a new location on the page. This operation\n     * is often useful after resizing the page with [[setSize]]. For example:\n     * ```js\n     * // Add 50 units of whitespace to the top and right of the page\n     * page.setSize(page.getWidth() + 50, page.getHeight() + 50)\n     *\n     * // Move the page's content from the lower-left corner of the page\n     * // to the top-right corner.\n     * page.translateContent(50, 50)\n     *\n     * // Now there are 50 units of whitespace to the left and bottom of the page\n     * ```\n     * See also: [[resetPosition]]\n     * @param x The new position on the x-axis for this page's content.\n     * @param y The new position on the y-axis for this page's content.\n     */\n    PDFPage.prototype.translateContent = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        this.node.normalize();\n        this.getContentStream();\n        var start = this.createContentStream(pushGraphicsState(), translate(x, y));\n        var startRef = this.doc.context.register(start);\n        var end = this.createContentStream(popGraphicsState());\n        var endRef = this.doc.context.register(end);\n        this.node.wrapContentStreams(startRef, endRef);\n    };\n    /**\n     * Scale the size, content, and annotations of a page.\n     *\n     * For example:\n     * ```js\n     * page.scale(0.5, 0.5);\n     * ```\n     *\n     * @param x The factor by which the width for the page should be scaled\n     *          (e.g. `0.5` is 50%).\n     * @param y The factor by which the height for the page should be scaled\n     *          (e.g. `2.0` is 200%).\n     */\n    PDFPage.prototype.scale = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        this.setSize(this.getWidth() * x, this.getHeight() * y);\n        this.scaleContent(x, y);\n        this.scaleAnnotations(x, y);\n    };\n    /**\n     * Scale the content of a page. This is useful after resizing an existing\n     * page. This scales only the content, not the annotations.\n     *\n     * For example:\n     * ```js\n     * // Bisect the size of the page\n     * page.setSize(page.getWidth() / 2, page.getHeight() / 2);\n     *\n     * // Scale the content of the page down by 50% in x and y\n     * page.scaleContent(0.5, 0.5);\n     * ```\n     * See also: [[scaleAnnotations]]\n     * @param x The factor by which the x-axis for the content should be scaled\n     *          (e.g. `0.5` is 50%).\n     * @param y The factor by which the y-axis for the content should be scaled\n     *          (e.g. `2.0` is 200%).\n     */\n    PDFPage.prototype.scaleContent = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        this.node.normalize();\n        this.getContentStream();\n        var start = this.createContentStream(pushGraphicsState(), scale(x, y));\n        var startRef = this.doc.context.register(start);\n        var end = this.createContentStream(popGraphicsState());\n        var endRef = this.doc.context.register(end);\n        this.node.wrapContentStreams(startRef, endRef);\n    };\n    /**\n     * Scale the annotations of a page. This is useful if you want to scale a\n     * page with comments or other annotations.\n     * ```js\n     * // Scale the content of the page down by 50% in x and y\n     * page.scaleContent(0.5, 0.5);\n     *\n     * // Scale the content of the page down by 50% in x and y\n     * page.scaleAnnotations(0.5, 0.5);\n     * ```\n     * See also: [[scaleContent]]\n     * @param x The factor by which the x-axis for the annotations should be\n     *          scaled (e.g. `0.5` is 50%).\n     * @param y The factor by which the y-axis for the annotations should be\n     *          scaled (e.g. `2.0` is 200%).\n     */\n    PDFPage.prototype.scaleAnnotations = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        var annots = this.node.Annots();\n        if (!annots)\n            return;\n        for (var idx = 0; idx < annots.size(); idx++) {\n            var annot = annots.lookup(idx);\n            if (annot instanceof PDFDict)\n                this.scaleAnnot(annot, x, y);\n        }\n    };\n    /**\n     * Reset the x and y coordinates of this page to `(0, 0)`. This operation is\n     * often useful after calling [[translateContent]]. For example:\n     * ```js\n     * // Shift the page's contents up and to the right by 50 units\n     * page.translateContent(50, 50)\n     *\n     * // This text will shifted - it will be drawn at (50, 50)\n     * page.drawText('I am shifted')\n     *\n     * // Move back to (0, 0)\n     * page.resetPosition()\n     *\n     * // This text will not be shifted - it will be drawn at (0, 0)\n     * page.drawText('I am not shifted')\n     * ```\n     */\n    PDFPage.prototype.resetPosition = function () {\n        this.getContentStream(false);\n        this.x = 0;\n        this.y = 0;\n    };\n    /**\n     * Choose a default font for this page. The default font will be used whenever\n     * text is drawn on this page and no font is specified. For example:\n     * ```js\n     * import { StandardFonts } from 'pdf-lib'\n     *\n     * const timesRomanFont = await pdfDoc.embedFont(StandardFonts.TimesRoman)\n     * const helveticaFont = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const courierFont = await pdfDoc.embedFont(StandardFonts.Courier)\n     *\n     * const page = pdfDoc.addPage()\n     *\n     * page.setFont(helveticaFont)\n     * page.drawText('I will be drawn in Helvetica')\n     *\n     * page.setFont(timesRomanFont)\n     * page.drawText('I will be drawn in Courier', { font: courierFont })\n     * ```\n     * @param font The default font to be used when drawing text on this page.\n     */\n    PDFPage.prototype.setFont = function (font) {\n        // TODO: Reuse image Font name if we've already added this image to Resources.Fonts\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.font = font;\n        this.fontKey = this.node.newFontDictionary(this.font.name, this.font.ref);\n    };\n    /**\n     * Choose a default font size for this page. The default font size will be\n     * used whenever text is drawn on this page and no font size is specified.\n     * For example:\n     * ```js\n     * page.setFontSize(12)\n     * page.drawText('I will be drawn in size 12')\n     *\n     * page.setFontSize(36)\n     * page.drawText('I will be drawn in size 24', { fontSize: 24 })\n     * ```\n     * @param fontSize The default font size to be used when drawing text on this\n     *                 page.\n     */\n    PDFPage.prototype.setFontSize = function (fontSize) {\n        assertIs(fontSize, 'fontSize', ['number']);\n        this.fontSize = fontSize;\n    };\n    /**\n     * Choose a default font color for this page. The default font color will be\n     * used whenever text is drawn on this page and no font color is specified.\n     * For example:\n     * ```js\n     * import { rgb, cmyk, grayscale } from 'pdf-lib'\n     *\n     * page.setFontColor(rgb(0.97, 0.02, 0.97))\n     * page.drawText('I will be drawn in pink')\n     *\n     * page.setFontColor(cmyk(0.4, 0.7, 0.39, 0.15))\n     * page.drawText('I will be drawn in gray', { color: grayscale(0.5) })\n     * ```\n     * @param fontColor The default font color to be used when drawing text on\n     *                  this page.\n     */\n    PDFPage.prototype.setFontColor = function (fontColor) {\n        assertIs(fontColor, 'fontColor', [[Object, 'Color']]);\n        this.fontColor = fontColor;\n    };\n    /**\n     * Choose a default line height for this page. The default line height will be\n     * used whenever text is drawn on this page and no line height is specified.\n     * For example:\n     * ```js\n     * page.setLineHeight(12);\n     * page.drawText('These lines will be vertically \\n separated by 12 units')\n     *\n     * page.setLineHeight(36);\n     * page.drawText('These lines will be vertically \\n separated by 24 units', {\n     *   lineHeight: 24\n     * })\n     * ```\n     * @param lineHeight The default line height to be used when drawing text on\n     *                   this page.\n     */\n    PDFPage.prototype.setLineHeight = function (lineHeight) {\n        assertIs(lineHeight, 'lineHeight', ['number']);\n        this.lineHeight = lineHeight;\n    };\n    /**\n     * Get the default position of this page. For example:\n     * ```js\n     * const { x, y } = page.getPosition()\n     * ```\n     * @returns The default position of the page.\n     */\n    PDFPage.prototype.getPosition = function () {\n        return { x: this.x, y: this.y };\n    };\n    /**\n     * Get the default x coordinate of this page. For example:\n     * ```js\n     * const x = page.getX()\n     * ```\n     * @returns The default x coordinate of the page.\n     */\n    PDFPage.prototype.getX = function () {\n        return this.x;\n    };\n    /**\n     * Get the default y coordinate of this page. For example:\n     * ```js\n     * const y = page.getY()\n     * ```\n     * @returns The default y coordinate of the page.\n     */\n    PDFPage.prototype.getY = function () {\n        return this.y;\n    };\n    /**\n     * Change the default position of this page. For example:\n     * ```js\n     * page.moveTo(0, 0)\n     * page.drawText('I will be drawn at the origin')\n     *\n     * page.moveTo(0, 25)\n     * page.drawText('I will be drawn 25 units up')\n     *\n     * page.moveTo(25, 25)\n     * page.drawText('I will be drawn 25 units up and 25 units to the right')\n     * ```\n     * @param x The new default position on the x-axis for this page.\n     * @param y The new default position on the y-axis for this page.\n     */\n    PDFPage.prototype.moveTo = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        this.x = x;\n        this.y = y;\n    };\n    /**\n     * Change the default position of this page to be further down the y-axis.\n     * For example:\n     * ```js\n     * page.moveTo(50, 50)\n     * page.drawText('I will be drawn at (50, 50)')\n     *\n     * page.moveDown(10)\n     * page.drawText('I will be drawn at (50, 40)')\n     * ```\n     * @param yDecrease The amount by which the page's default position along the\n     *                  y-axis should be decreased.\n     */\n    PDFPage.prototype.moveDown = function (yDecrease) {\n        assertIs(yDecrease, 'yDecrease', ['number']);\n        this.y -= yDecrease;\n    };\n    /**\n     * Change the default position of this page to be further up the y-axis.\n     * For example:\n     * ```js\n     * page.moveTo(50, 50)\n     * page.drawText('I will be drawn at (50, 50)')\n     *\n     * page.moveUp(10)\n     * page.drawText('I will be drawn at (50, 60)')\n     * ```\n     * @param yIncrease The amount by which the page's default position along the\n     *                  y-axis should be increased.\n     */\n    PDFPage.prototype.moveUp = function (yIncrease) {\n        assertIs(yIncrease, 'yIncrease', ['number']);\n        this.y += yIncrease;\n    };\n    /**\n     * Change the default position of this page to be further left on the x-axis.\n     * For example:\n     * ```js\n     * page.moveTo(50, 50)\n     * page.drawText('I will be drawn at (50, 50)')\n     *\n     * page.moveLeft(10)\n     * page.drawText('I will be drawn at (40, 50)')\n     * ```\n     * @param xDecrease The amount by which the page's default position along the\n     *                  x-axis should be decreased.\n     */\n    PDFPage.prototype.moveLeft = function (xDecrease) {\n        assertIs(xDecrease, 'xDecrease', ['number']);\n        this.x -= xDecrease;\n    };\n    /**\n     * Change the default position of this page to be further right on the y-axis.\n     * For example:\n     * ```js\n     * page.moveTo(50, 50)\n     * page.drawText('I will be drawn at (50, 50)')\n     *\n     * page.moveRight(10)\n     * page.drawText('I will be drawn at (60, 50)')\n     * ```\n     * @param xIncrease The amount by which the page's default position along the\n     *                  x-axis should be increased.\n     */\n    PDFPage.prototype.moveRight = function (xIncrease) {\n        assertIs(xIncrease, 'xIncrease', ['number']);\n        this.x += xIncrease;\n    };\n    /**\n     * Push one or more operators to the end of this page's current content\n     * stream. For example:\n     * ```js\n     * import {\n     *   pushGraphicsState,\n     *   moveTo,\n     *   lineTo,\n     *   closePath,\n     *   setFillingColor,\n     *   rgb,\n     *   fill,\n     *   popGraphicsState,\n     * } from 'pdf-lib'\n     *\n     * // Draw a green triangle in the lower-left corner of the page\n     * page.pushOperators(\n     *   pushGraphicsState(),\n     *   moveTo(0, 0),\n     *   lineTo(100, 0),\n     *   lineTo(50, 100),\n     *   closePath(),\n     *   setFillingColor(rgb(0.0, 1.0, 0.0)),\n     *   fill(),\n     *   popGraphicsState(),\n     * )\n     * ```\n     * @param operator The operators to be pushed.\n     */\n    PDFPage.prototype.pushOperators = function () {\n        var operator = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operator[_i] = arguments[_i];\n        }\n        assertEachIs(operator, 'operator', [[PDFOperator, 'PDFOperator']]);\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, operator);\n    };\n    /**\n     * Draw one or more lines of text on this page. For example:\n     * ```js\n     * import { StandardFonts, rgb } from 'pdf-lib'\n     *\n     * const helveticaFont = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const timesRomanFont = await pdfDoc.embedFont(StandardFonts.TimesRoman)\n     *\n     * const page = pdfDoc.addPage()\n     *\n     * page.setFont(helveticaFont)\n     *\n     * page.moveTo(5, 200)\n     * page.drawText('The Life of an Egg', { size: 36 })\n     *\n     * page.moveDown(36)\n     * page.drawText('An Epic Tale of Woe', { size: 30 })\n     *\n     * page.drawText(\n     *   `Humpty Dumpty sat on a wall \\n` +\n     *   `Humpty Dumpty had a great fall; \\n` +\n     *   `All the king's horses and all the king's men \\n` +\n     *   `Couldn't put Humpty together again. \\n`,\n     *   {\n     *     x: 25,\n     *     y: 100,\n     *     font: timesRomanFont,\n     *     size: 24,\n     *     color: rgb(1, 0, 0),\n     *     lineHeight: 24,\n     *     opacity: 0.75,\n     *   },\n     * )\n     * ```\n     * @param text The text to be drawn.\n     * @param options The options to be used when drawing the text.\n     */\n    PDFPage.prototype.drawText = function (text, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (options === void 0) { options = {}; }\n        assertIs(text, 'text', ['string']);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertOrUndefined(options.font, 'options.font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(options.size, 'options.size', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.xSkew, 'options.xSkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.ySkew, 'options.ySkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.lineHeight, 'options.lineHeight', ['number']);\n        assertOrUndefined(options.maxWidth, 'options.maxWidth', ['number']);\n        assertOrUndefined(options.wordBreaks, 'options.wordBreaks', [Array]);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var _h = this.setOrEmbedFont(options.font), oldFont = _h.oldFont, newFont = _h.newFont, newFontKey = _h.newFontKey;\n        var fontSize = options.size || this.fontSize;\n        var wordBreaks = options.wordBreaks || this.doc.defaultWordBreaks;\n        var textWidth = function (t) { return newFont.widthOfTextAtSize(t, fontSize); };\n        var lines = options.maxWidth === undefined\n            ? lineSplit(cleanText(text))\n            : breakTextIntoLines(text, wordBreaks, options.maxWidth, textWidth);\n        var encodedLines = new Array(lines.length);\n        for (var idx = 0, len = lines.length; idx < len; idx++) {\n            encodedLines[idx] = newFont.encodeText(lines[idx]);\n        }\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            blendMode: options.blendMode,\n        });\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawLinesOfText(encodedLines, {\n            color: (_a = options.color) !== null && _a !== void 0 ? _a : this.fontColor,\n            font: newFontKey,\n            size: fontSize,\n            rotate: (_b = options.rotate) !== null && _b !== void 0 ? _b : degrees(0),\n            xSkew: (_c = options.xSkew) !== null && _c !== void 0 ? _c : degrees(0),\n            ySkew: (_d = options.ySkew) !== null && _d !== void 0 ? _d : degrees(0),\n            x: (_e = options.x) !== null && _e !== void 0 ? _e : this.x,\n            y: (_f = options.y) !== null && _f !== void 0 ? _f : this.y,\n            lineHeight: (_g = options.lineHeight) !== null && _g !== void 0 ? _g : this.lineHeight,\n            graphicsState: graphicsStateKey,\n        }));\n        if (options.font) {\n            if (oldFont)\n                this.setFont(oldFont);\n            else\n                this.resetFont();\n        }\n    };\n    /**\n     * Draw an image on this page. For example:\n     * ```js\n     * import { degrees } from 'pdf-lib'\n     *\n     * const jpgUrl = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n     * const jpgImageBytes = await fetch(jpgUrl).then((res) => res.arrayBuffer())\n     *\n     * const jpgImage = await pdfDoc.embedJpg(jpgImageBytes)\n     * const jpgDims = jpgImage.scale(0.5)\n     *\n     * const page = pdfDoc.addPage()\n     *\n     * page.drawImage(jpgImage, {\n     *   x: 25,\n     *   y: 25,\n     *   width: jpgDims.width,\n     *   height: jpgDims.height,\n     *   rotate: degrees(30),\n     *   opacity: 0.75,\n     * })\n     * ```\n     * @param image The image to be drawn.\n     * @param options The options to be used when drawing the image.\n     */\n    PDFPage.prototype.drawImage = function (image, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (options === void 0) { options = {}; }\n        // TODO: Reuse image XObject name if we've already added this image to Resources.XObjects\n        assertIs(image, 'image', [[PDFImage, 'PDFImage']]);\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.width, 'options.width', ['number']);\n        assertOrUndefined(options.height, 'options.height', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.xSkew, 'options.xSkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.ySkew, 'options.ySkew', [[Object, 'Rotation']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var xObjectKey = this.node.newXObject('Image', image.ref);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            blendMode: options.blendMode,\n        });\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawImage(xObjectKey, {\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : image.size().width,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : image.size().height,\n            rotate: (_e = options.rotate) !== null && _e !== void 0 ? _e : degrees(0),\n            xSkew: (_f = options.xSkew) !== null && _f !== void 0 ? _f : degrees(0),\n            ySkew: (_g = options.ySkew) !== null && _g !== void 0 ? _g : degrees(0),\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw an embedded PDF page on this page. For example:\n     * ```js\n     * import { degrees } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const page = pdfDoc.addPage()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourcePdf = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     *\n     * // Embed page 74 from the PDF\n     * const [embeddedPage] = await pdfDoc.embedPdf(sourcePdf, 73)\n     *\n     * page.drawPage(embeddedPage, {\n     *   x: 250,\n     *   y: 200,\n     *   xScale: 0.5,\n     *   yScale: 0.5,\n     *   rotate: degrees(30),\n     *   opacity: 0.75,\n     * })\n     * ```\n     *\n     * The `options` argument accepts both `width`/`height` and `xScale`/`yScale`\n     * as options. Since each of these options defines the size of the drawn page,\n     * if both options are given, `width` and `height` take precedence and the\n     * corresponding scale variants are ignored.\n     *\n     * @param embeddedPage The embedded page to be drawn.\n     * @param options The options to be used when drawing the embedded page.\n     */\n    PDFPage.prototype.drawPage = function (embeddedPage, options) {\n        var _a, _b, _c, _d, _e;\n        if (options === void 0) { options = {}; }\n        // TODO: Reuse embeddedPage XObject name if we've already added this embeddedPage to Resources.XObjects\n        assertIs(embeddedPage, 'embeddedPage', [\n            [PDFEmbeddedPage, 'PDFEmbeddedPage'],\n        ]);\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.xScale, 'options.xScale', ['number']);\n        assertOrUndefined(options.yScale, 'options.yScale', ['number']);\n        assertOrUndefined(options.width, 'options.width', ['number']);\n        assertOrUndefined(options.height, 'options.height', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.xSkew, 'options.xSkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.ySkew, 'options.ySkew', [[Object, 'Rotation']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var xObjectKey = this.node.newXObject('EmbeddedPdfPage', embeddedPage.ref);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            blendMode: options.blendMode,\n        });\n        // prettier-ignore\n        var xScale = (options.width !== undefined ? options.width / embeddedPage.width\n            : options.xScale !== undefined ? options.xScale\n                : 1);\n        // prettier-ignore\n        var yScale = (options.height !== undefined ? options.height / embeddedPage.height\n            : options.yScale !== undefined ? options.yScale\n                : 1);\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawPage(xObjectKey, {\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            xScale: xScale,\n            yScale: yScale,\n            rotate: (_c = options.rotate) !== null && _c !== void 0 ? _c : degrees(0),\n            xSkew: (_d = options.xSkew) !== null && _d !== void 0 ? _d : degrees(0),\n            ySkew: (_e = options.ySkew) !== null && _e !== void 0 ? _e : degrees(0),\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw an SVG path on this page. For example:\n     * ```js\n     * import { rgb } from 'pdf-lib'\n     *\n     * const svgPath = 'M 0,20 L 100,160 Q 130,200 150,120 C 190,-40 200,200 300,150 L 400,90'\n     *\n     * // Draw path as black line\n     * page.drawSvgPath(svgPath, { x: 25, y: 75 })\n     *\n     * // Change border style and opacity\n     * page.drawSvgPath(svgPath, {\n     *   x: 25,\n     *   y: 275,\n     *   borderColor: rgb(0.5, 0.5, 0.5),\n     *   borderWidth: 2,\n     *   borderOpacity: 0.75,\n     * })\n     *\n     * // Set fill color and opacity\n     * page.drawSvgPath(svgPath, {\n     *   x: 25,\n     *   y: 475,\n     *   color: rgb(1.0, 0, 0),\n     *   opacity: 0.75,\n     * })\n     *\n     * // Draw 50% of original size\n     * page.drawSvgPath(svgPath, {\n     *   x: 25,\n     *   y: 675,\n     *   scale: 0.5,\n     * })\n     * ```\n     * @param path The SVG path to be drawn.\n     * @param options The options to be used when drawing the SVG path.\n     */\n    PDFPage.prototype.drawSvgPath = function (path, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (options === void 0) { options = {}; }\n        assertIs(path, 'path', ['string']);\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.scale, 'options.scale', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.borderWidth, 'options.borderWidth', ['number']);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertOrUndefined(options.borderColor, 'options.borderColor', [\n            [Object, 'Color'],\n        ]);\n        assertOrUndefined(options.borderDashArray, 'options.borderDashArray', [\n            Array,\n        ]);\n        assertOrUndefined(options.borderDashPhase, 'options.borderDashPhase', [\n            'number',\n        ]);\n        assertIsOneOfOrUndefined(options.borderLineCap, 'options.borderLineCap', LineCapStyle);\n        assertRangeOrUndefined(options.borderOpacity, 'options.borderOpacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            borderOpacity: options.borderOpacity,\n            blendMode: options.blendMode,\n        });\n        if (!('color' in options) && !('borderColor' in options)) {\n            options.borderColor = rgb(0, 0, 0);\n        }\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawSvgPath(path, {\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            scale: options.scale,\n            rotate: (_c = options.rotate) !== null && _c !== void 0 ? _c : degrees(0),\n            color: (_d = options.color) !== null && _d !== void 0 ? _d : undefined,\n            borderColor: (_e = options.borderColor) !== null && _e !== void 0 ? _e : undefined,\n            borderWidth: (_f = options.borderWidth) !== null && _f !== void 0 ? _f : 0,\n            borderDashArray: (_g = options.borderDashArray) !== null && _g !== void 0 ? _g : undefined,\n            borderDashPhase: (_h = options.borderDashPhase) !== null && _h !== void 0 ? _h : undefined,\n            borderLineCap: (_j = options.borderLineCap) !== null && _j !== void 0 ? _j : undefined,\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw a line on this page. For example:\n     * ```js\n     * import { rgb } from 'pdf-lib'\n     *\n     * page.drawLine({\n     *   start: { x: 25, y: 75 },\n     *   end: { x: 125, y: 175 },\n     *   thickness: 2,\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the line.\n     */\n    PDFPage.prototype.drawLine = function (options) {\n        var _a, _b, _c, _d, _e;\n        assertIs(options.start, 'options.start', [\n            [Object, '{ x: number, y: number }'],\n        ]);\n        assertIs(options.end, 'options.end', [\n            [Object, '{ x: number, y: number }'],\n        ]);\n        assertIs(options.start.x, 'options.start.x', ['number']);\n        assertIs(options.start.y, 'options.start.y', ['number']);\n        assertIs(options.end.x, 'options.end.x', ['number']);\n        assertIs(options.end.y, 'options.end.y', ['number']);\n        assertOrUndefined(options.thickness, 'options.thickness', ['number']);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertOrUndefined(options.dashArray, 'options.dashArray', [Array]);\n        assertOrUndefined(options.dashPhase, 'options.dashPhase', ['number']);\n        assertIsOneOfOrUndefined(options.lineCap, 'options.lineCap', LineCapStyle);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            borderOpacity: options.opacity,\n            blendMode: options.blendMode,\n        });\n        if (!('color' in options)) {\n            options.color = rgb(0, 0, 0);\n        }\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawLine({\n            start: options.start,\n            end: options.end,\n            thickness: (_a = options.thickness) !== null && _a !== void 0 ? _a : 1,\n            color: (_b = options.color) !== null && _b !== void 0 ? _b : undefined,\n            dashArray: (_c = options.dashArray) !== null && _c !== void 0 ? _c : undefined,\n            dashPhase: (_d = options.dashPhase) !== null && _d !== void 0 ? _d : undefined,\n            lineCap: (_e = options.lineCap) !== null && _e !== void 0 ? _e : undefined,\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw a rectangle on this page. For example:\n     * ```js\n     * import { degrees, grayscale, rgb } from 'pdf-lib'\n     *\n     * page.drawRectangle({\n     *   x: 25,\n     *   y: 75,\n     *   width: 250,\n     *   height: 75,\n     *   rotate: degrees(-15),\n     *   borderWidth: 5,\n     *   borderColor: grayscale(0.5),\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.5,\n     *   borderOpacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the rectangle.\n     */\n    PDFPage.prototype.drawRectangle = function (options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        if (options === void 0) { options = {}; }\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.width, 'options.width', ['number']);\n        assertOrUndefined(options.height, 'options.height', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.xSkew, 'options.xSkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.ySkew, 'options.ySkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.borderWidth, 'options.borderWidth', ['number']);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertOrUndefined(options.borderColor, 'options.borderColor', [\n            [Object, 'Color'],\n        ]);\n        assertOrUndefined(options.borderDashArray, 'options.borderDashArray', [\n            Array,\n        ]);\n        assertOrUndefined(options.borderDashPhase, 'options.borderDashPhase', [\n            'number',\n        ]);\n        assertIsOneOfOrUndefined(options.borderLineCap, 'options.borderLineCap', LineCapStyle);\n        assertRangeOrUndefined(options.borderOpacity, 'options.borderOpacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            borderOpacity: options.borderOpacity,\n            blendMode: options.blendMode,\n        });\n        if (!('color' in options) && !('borderColor' in options)) {\n            options.color = rgb(0, 0, 0);\n        }\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawRectangle({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 150,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 100,\n            rotate: (_e = options.rotate) !== null && _e !== void 0 ? _e : degrees(0),\n            xSkew: (_f = options.xSkew) !== null && _f !== void 0 ? _f : degrees(0),\n            ySkew: (_g = options.ySkew) !== null && _g !== void 0 ? _g : degrees(0),\n            borderWidth: (_h = options.borderWidth) !== null && _h !== void 0 ? _h : 0,\n            color: (_j = options.color) !== null && _j !== void 0 ? _j : undefined,\n            borderColor: (_k = options.borderColor) !== null && _k !== void 0 ? _k : undefined,\n            borderDashArray: (_l = options.borderDashArray) !== null && _l !== void 0 ? _l : undefined,\n            borderDashPhase: (_m = options.borderDashPhase) !== null && _m !== void 0 ? _m : undefined,\n            graphicsState: graphicsStateKey,\n            borderLineCap: (_o = options.borderLineCap) !== null && _o !== void 0 ? _o : undefined,\n        }));\n    };\n    /**\n     * Draw a square on this page. For example:\n     * ```js\n     * import { degrees, grayscale, rgb } from 'pdf-lib'\n     *\n     * page.drawSquare({\n     *   x: 25,\n     *   y: 75,\n     *   size: 100,\n     *   rotate: degrees(-15),\n     *   borderWidth: 5,\n     *   borderColor: grayscale(0.5),\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.5,\n     *   borderOpacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the square.\n     */\n    PDFPage.prototype.drawSquare = function (options) {\n        if (options === void 0) { options = {}; }\n        var size = options.size;\n        assertOrUndefined(size, 'size', ['number']);\n        this.drawRectangle(__assign(__assign({}, options), { width: size, height: size }));\n    };\n    /**\n     * Draw an ellipse on this page. For example:\n     * ```js\n     * import { grayscale, rgb } from 'pdf-lib'\n     *\n     * page.drawEllipse({\n     *   x: 200,\n     *   y: 75,\n     *   xScale: 100,\n     *   yScale: 50,\n     *   borderWidth: 5,\n     *   borderColor: grayscale(0.5),\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.5,\n     *   borderOpacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the ellipse.\n     */\n    PDFPage.prototype.drawEllipse = function (options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        if (options === void 0) { options = {}; }\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.xScale, 'options.xScale', ['number']);\n        assertOrUndefined(options.yScale, 'options.yScale', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertOrUndefined(options.borderColor, 'options.borderColor', [\n            [Object, 'Color'],\n        ]);\n        assertRangeOrUndefined(options.borderOpacity, 'options.borderOpacity', 0, 1);\n        assertOrUndefined(options.borderWidth, 'options.borderWidth', ['number']);\n        assertOrUndefined(options.borderDashArray, 'options.borderDashArray', [\n            Array,\n        ]);\n        assertOrUndefined(options.borderDashPhase, 'options.borderDashPhase', [\n            'number',\n        ]);\n        assertIsOneOfOrUndefined(options.borderLineCap, 'options.borderLineCap', LineCapStyle);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            borderOpacity: options.borderOpacity,\n            blendMode: options.blendMode,\n        });\n        if (!('color' in options) && !('borderColor' in options)) {\n            options.color = rgb(0, 0, 0);\n        }\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawEllipse({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            xScale: (_c = options.xScale) !== null && _c !== void 0 ? _c : 100,\n            yScale: (_d = options.yScale) !== null && _d !== void 0 ? _d : 100,\n            rotate: (_e = options.rotate) !== null && _e !== void 0 ? _e : undefined,\n            color: (_f = options.color) !== null && _f !== void 0 ? _f : undefined,\n            borderColor: (_g = options.borderColor) !== null && _g !== void 0 ? _g : undefined,\n            borderWidth: (_h = options.borderWidth) !== null && _h !== void 0 ? _h : 0,\n            borderDashArray: (_j = options.borderDashArray) !== null && _j !== void 0 ? _j : undefined,\n            borderDashPhase: (_k = options.borderDashPhase) !== null && _k !== void 0 ? _k : undefined,\n            borderLineCap: (_l = options.borderLineCap) !== null && _l !== void 0 ? _l : undefined,\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw a circle on this page. For example:\n     * ```js\n     * import { grayscale, rgb } from 'pdf-lib'\n     *\n     * page.drawCircle({\n     *   x: 200,\n     *   y: 150,\n     *   size: 100,\n     *   borderWidth: 5,\n     *   borderColor: grayscale(0.5),\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.5,\n     *   borderOpacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the ellipse.\n     */\n    PDFPage.prototype.drawCircle = function (options) {\n        if (options === void 0) { options = {}; }\n        var _a = options.size, size = _a === void 0 ? 100 : _a;\n        assertOrUndefined(size, 'size', ['number']);\n        this.drawEllipse(__assign(__assign({}, options), { xScale: size, yScale: size }));\n    };\n    PDFPage.prototype.setOrEmbedFont = function (font) {\n        var oldFont = this.font;\n        var oldFontKey = this.fontKey;\n        if (font)\n            this.setFont(font);\n        else\n            this.getFont();\n        var newFont = this.font;\n        var newFontKey = this.fontKey;\n        return { oldFont: oldFont, oldFontKey: oldFontKey, newFont: newFont, newFontKey: newFontKey };\n    };\n    PDFPage.prototype.getFont = function () {\n        if (!this.font || !this.fontKey) {\n            var font = this.doc.embedStandardFont(StandardFonts.Helvetica);\n            this.setFont(font);\n        }\n        return [this.font, this.fontKey];\n    };\n    PDFPage.prototype.resetFont = function () {\n        this.font = undefined;\n        this.fontKey = undefined;\n    };\n    PDFPage.prototype.getContentStream = function (useExisting) {\n        if (useExisting === void 0) { useExisting = true; }\n        if (useExisting && this.contentStream)\n            return this.contentStream;\n        this.contentStream = this.createContentStream();\n        this.contentStreamRef = this.doc.context.register(this.contentStream);\n        this.node.addContentStream(this.contentStreamRef);\n        return this.contentStream;\n    };\n    PDFPage.prototype.createContentStream = function () {\n        var operators = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operators[_i] = arguments[_i];\n        }\n        var dict = this.doc.context.obj({});\n        var contentStream = PDFContentStream.of(dict, operators);\n        return contentStream;\n    };\n    PDFPage.prototype.maybeEmbedGraphicsState = function (options) {\n        var opacity = options.opacity, borderOpacity = options.borderOpacity, blendMode = options.blendMode;\n        if (opacity === undefined &&\n            borderOpacity === undefined &&\n            blendMode === undefined) {\n            return undefined;\n        }\n        var graphicsState = this.doc.context.obj({\n            Type: 'ExtGState',\n            ca: opacity,\n            CA: borderOpacity,\n            BM: blendMode,\n        });\n        var key = this.node.newExtGState('GS', graphicsState);\n        return key;\n    };\n    PDFPage.prototype.scaleAnnot = function (annot, x, y) {\n        var selectors = ['RD', 'CL', 'Vertices', 'QuadPoints', 'L', 'Rect'];\n        for (var idx = 0, len = selectors.length; idx < len; idx++) {\n            var list = annot.lookup(PDFName.of(selectors[idx]));\n            if (list instanceof PDFArray)\n                list.scalePDFNumbers(x, y);\n        }\n        var inkLists = annot.lookup(PDFName.of('InkList'));\n        if (inkLists instanceof PDFArray) {\n            for (var idx = 0, len = inkLists.size(); idx < len; idx++) {\n                var arr = inkLists.lookup(idx);\n                if (arr instanceof PDFArray)\n                    arr.scalePDFNumbers(x, y);\n            }\n        }\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.addPage]] and [[PDFDocument.insertPage]]\n     * > methods, which can create instances of [[PDFPage]] for you.\n     *\n     * Create an instance of [[PDFPage]] from an existing leaf node.\n     *\n     * @param leafNode The leaf node to be wrapped.\n     * @param ref The unique reference for the page.\n     * @param doc The document to which the page will belong.\n     */\n    PDFPage.of = function (leafNode, ref, doc) {\n        return new PDFPage(leafNode, ref, doc);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.addPage]] and [[PDFDocument.insertPage]]\n     * > methods, which can create instances of [[PDFPage]] for you.\n     *\n     * Create an instance of [[PDFPage]].\n     *\n     * @param doc The document to which the page will belong.\n     */\n    PDFPage.create = function (doc) {\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        var dummyRef = PDFRef.of(-1);\n        var pageLeaf = PDFPageLeaf.withContextAndParent(doc.context, dummyRef);\n        var pageRef = doc.context.register(pageLeaf);\n        return new PDFPage(pageLeaf, pageRef, doc);\n    };\n    return PDFPage;\n}());\nexport default PDFPage;\n//# sourceMappingURL=PDFPage.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFFont from \"../PDFFont\";\nimport { ImageAlignment } from \"../image/alignment\";\nimport { normalizeAppearance, defaultButtonAppearanceProvider, } from \"./appearances\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { PDFStream, PDFAcroPushButton, } from \"../../core\";\nimport { assertIs, assertOrUndefined, assertPositive } from \"../../utils\";\n/**\n * Represents a button field of a [[PDFForm]].\n *\n * [[PDFButton]] fields are interactive controls that users can click with their\n * mouse. This type of [[PDFField]] is not stateful. The purpose of a button\n * is to perform an action when the user clicks on it, such as opening a print\n * modal or resetting the form. Buttons are typically rectangular in shape and\n * have a text label describing the action that they perform when clicked.\n */\nvar PDFButton = /** @class */ (function (_super) {\n    __extends(PDFButton, _super);\n    function PDFButton(acroPushButton, ref, doc) {\n        var _this = _super.call(this, acroPushButton, ref, doc) || this;\n        assertIs(acroPushButton, 'acroButton', [\n            [PDFAcroPushButton, 'PDFAcroPushButton'],\n        ]);\n        _this.acroField = acroPushButton;\n        return _this;\n    }\n    /**\n     * Display an image inside the bounds of this button's widgets. For example:\n     * ```js\n     * const pngImage = await pdfDoc.embedPng(...)\n     * const button = form.getButton('some.button.field')\n     * button.setImage(pngImage, ImageAlignment.Center)\n     * ```\n     * This will update the appearances streams for each of this button's widgets.\n     * @param image The image that should be displayed.\n     * @param alignment The alignment of the image.\n     */\n    PDFButton.prototype.setImage = function (image, alignment) {\n        if (alignment === void 0) { alignment = ImageAlignment.Center; }\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var streamRef = this.createImageAppearanceStream(widget, image, alignment);\n            this.updateWidgetAppearances(widget, { normal: streamRef });\n        }\n        this.markAsClean();\n    };\n    /**\n     * Set the font size for this field. Larger font sizes will result in larger\n     * text being displayed when PDF readers render this button. Font sizes may\n     * be integer or floating point numbers. Supplying a negative font size will\n     * cause this method to throw an error.\n     *\n     * For example:\n     * ```js\n     * const button = form.getButton('some.button.field')\n     * button.setFontSize(4)\n     * button.setFontSize(15.7)\n     * ```\n     *\n     * > This method depends upon the existence of a default appearance\n     * > (`/DA`) string. If this field does not have a default appearance string,\n     * > or that string does not contain a font size (via the `Tf` operator),\n     * > then this method will throw an error.\n     *\n     * @param fontSize The font size to be used when rendering text in this field.\n     */\n    PDFButton.prototype.setFontSize = function (fontSize) {\n        assertPositive(fontSize, 'fontSize');\n        this.acroField.setFontSize(fontSize);\n        this.markAsDirty();\n    };\n    /**\n     * Show this button on the specified page with the given text. For example:\n     * ```js\n     * const ubuntuFont = await pdfDoc.embedFont(ubuntuFontBytes)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const button = form.createButton('some.button.field')\n     *\n     * button.addToPage('Do Stuff', page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 200,\n     *   height: 100,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     *   font: ubuntuFont,\n     * })\n     * ```\n     * This will create a new widget for this button field.\n     * @param text The text to be displayed for this button widget.\n     * @param page The page to which this button widget should be added.\n     * @param options The options to be used when adding this button widget.\n     */\n    PDFButton.prototype.addToPage = function (\n    // TODO: This needs to be optional, e.g. for image buttons\n    text, page, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        assertOrUndefined(text, 'text', ['string']);\n        assertOrUndefined(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        // Create a widget for this button\n        var widget = this.createWidget({\n            x: ((_a = options === null || options === void 0 ? void 0 : options.x) !== null && _a !== void 0 ? _a : 0) - ((_b = options === null || options === void 0 ? void 0 : options.borderWidth) !== null && _b !== void 0 ? _b : 0) / 2,\n            y: ((_c = options === null || options === void 0 ? void 0 : options.y) !== null && _c !== void 0 ? _c : 0) - ((_d = options === null || options === void 0 ? void 0 : options.borderWidth) !== null && _d !== void 0 ? _d : 0) / 2,\n            width: (_e = options === null || options === void 0 ? void 0 : options.width) !== null && _e !== void 0 ? _e : 100,\n            height: (_f = options === null || options === void 0 ? void 0 : options.height) !== null && _f !== void 0 ? _f : 50,\n            textColor: (_g = options === null || options === void 0 ? void 0 : options.textColor) !== null && _g !== void 0 ? _g : rgb(0, 0, 0),\n            backgroundColor: (_h = options === null || options === void 0 ? void 0 : options.backgroundColor) !== null && _h !== void 0 ? _h : rgb(0.75, 0.75, 0.75),\n            borderColor: options === null || options === void 0 ? void 0 : options.borderColor,\n            borderWidth: (_j = options === null || options === void 0 ? void 0 : options.borderWidth) !== null && _j !== void 0 ? _j : 0,\n            rotate: (_k = options === null || options === void 0 ? void 0 : options.rotate) !== null && _k !== void 0 ? _k : degrees(0),\n            caption: text,\n            hidden: options === null || options === void 0 ? void 0 : options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        var font = (_l = options === null || options === void 0 ? void 0 : options.font) !== null && _l !== void 0 ? _l : this.doc.getForm().getDefaultFont();\n        this.updateWidgetAppearance(widget, font);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if this button has been marked as dirty, or if any of this\n     * button's widgets do not have an appearance stream. For example:\n     * ```js\n     * const button = form.getButton('some.button.field')\n     * if (button.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this button needs an appearance update.\n     */\n    PDFButton.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        if (this.isDirty())\n            return true;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var hasAppearances = ((_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal) instanceof PDFStream;\n            if (!hasAppearances)\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this button's widgets using\n     * the default appearance provider for buttons. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const button = form.getButton('some.button.field')\n     * button.defaultUpdateAppearances(helvetica)\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     */\n    PDFButton.prototype.defaultUpdateAppearances = function (font) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.updateAppearances(font);\n    };\n    /**\n     * Update the appearance streams for each of this button's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for buttons will be used. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const button = form.getButton('some.button.field')\n     * button.updateAppearances(helvetica, (field, widget, font) => {\n     *   ...\n     *   return {\n     *     normal: drawButton(...),\n     *     down: drawButton(...),\n     *   }\n     * })\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFButton.prototype.updateAppearances = function (font, provider) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            this.updateWidgetAppearance(widget, font, provider);\n        }\n    };\n    PDFButton.prototype.updateWidgetAppearance = function (widget, font, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultButtonAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget, font));\n        this.updateWidgetAppearanceWithFont(widget, font, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getButton]] method, which will create an\n     * > instance of [[PDFButton]] for you.\n     *\n     * Create an instance of [[PDFButton]] from an existing acroPushButton and ref\n     *\n     * @param acroPushButton The underlying `PDFAcroPushButton` for this button.\n     * @param ref The unique reference for this button.\n     * @param doc The document to which this button will belong.\n     */\n    PDFButton.of = function (acroPushButton, ref, doc) { return new PDFButton(acroPushButton, ref, doc); };\n    return PDFButton;\n}(PDFField));\nexport default PDFButton;\n//# sourceMappingURL=PDFButton.js.map"],"names":["chars","lookup","i","encodeToBase64","bytes","base64","len","decodeFromBase64","bufferLength","p","encoded1","encoded2","encoded3","encoded4","DATA_URI_PREFIX_REGEX","decodeFromBase64DataUri","dataUri","trimmedUri","prefix","res","fullMatch","data","toCharCode","character","toCodePoint","toHexStringOfMinLength","num","minLength","padStart","toHexString","charFromCode","code","charFromHexCode","hex","value","length","padChar","padding","idx","copyStringIntoBuffer","str","buffer","offset","escapeRegExp","cleanText","text","escapedNewlineChars","isNewlineChar","lineSplit","mergeLines","charAtIndex","index","cuFirst","cuSecond","nextIndex","charSplit","_a","c","cLen","buildWordBreakRegex","wordBreaks","newlineCharUnion","escapedRules","wordBreak","breakRules","breakTextIntoLines","maxWidth","computeWidthOfText","regex","words","currLine","currWidth","lines","pushCurrLine","word","width","dateRegex","parseDate","dateStr","match","year","month","_b","day","_c","hours","_d","mins","_e","secs","_f","offsetSign","_g","offsetHours","_h","offsetMins","tzOffset","date","findLastMatch","position","lastMatch","last","array","typedArrayFor","typedArray","mergeIntoTypedArray","arrays","_i","arrayCount","typedArrays","element","totalSize","merged","arrIdx","arr","byteIdx","arrLen","mergeUint8Arrays","mergedBuffer","arrayAsString","byAscendingId","a","b","sortedUniq","indexer","uniq","curr","prev","reverseArray","arrayLen","leftIdx","rightIdx","temp","sum","total","range","start","end","pluckIndices","indices","plucked","canBeConvertedToUint8Array","input","toUint8Array","waitForTick","resolve","utf16Encode","byteOrderMark","encoded","codePoint","highSurrogate","lowSurrogate","isWithinBMP","hasSurrogates","ByteOrder","REPLACEMENT","utf16Decode","byteOrder","readBOM","codePoints","first","decodeValues","isHighSurrogate","second","isLowSurrogate","hasUtf16BigEndianBOM","hasUtf16LittleEndianBOM","hasUtf16BOM","numberToString","numStr","negative","sizeInBytes","n","bytesFor","error","msg","values","obj","k","StandardFontValues","FontNames","isStandardFont","rectanglesAreEqual","backtick","val","singleQuote","formatValue","type","createValueErrorMsg","valueName","allowedValues","v","joinedValues","assertIsOneOf","objectValues","assertIsOneOfOrUndefined","assertIsSubset","getType","isType","createTypeErrorMsg","types","allowedTypes","joinedTypes","assertIs","assertOrUndefined","assertEachIs","assertRange","min","max","assertRangeOrUndefined","assertMultiple","multiplier","assertInteger","assertPositive","pdfDocEncodingToUnicode","pdfDocEncodingDecode","Cache","populate","MethodNotImplementedError","_super","__extends","className","methodName","_this","PrivateConstructorError","UnexpectedObjectTypeError","expected","actual","name","t","expectedTypes","UnsupportedEncodingError","encoding","ReparseError","MissingCatalogError","ref","MissingPageContentsEmbeddingError","UnrecognizedStreamTypeError","stream","streamType","PageEmbeddingMismatchedContextError","PDFArrayIsNotRectangleError","size","InvalidPDFDateStringError","InvalidTargetIndexError","targetIndex","Count","CorruptPageTreeError","operation","IndexOutOfBoundsError","InvalidAcroFieldValueError","MultiSelectValueError","MissingDAEntryError","fieldName","MissingTfOperatorError","NumberParsingError","pos","PDFParsingError","details","NextByteAssertionError","expectedByte","actualByte","PDFObjectParsingError","byte","PDFInvalidObjectParsingError","PDFStreamParsingError","UnbalancedParenthesisError","StalledParserError","MissingPDFHeaderError","MissingKeywordError","keyword","CharCodes","CharCodes$1","PDFHeader","major","minor","bc","initialOffset","PDFObject","_context","_buffer","_offset","PDFNumber","PDFArray","context","object","__spreadArrays","lowerLeftX","lowerLeftY","upperRightX","upperRightY","x","y","height","clone","arrayString","el","factor","ENFORCER","PDFBool","enforcer","IsDelimiter","IsWhitespace","IsIrregular","decodeName","_","isRegularChar","charCode","pool","PDFName","encodedName","escaped","pushByte","char","nextChar","decodedValue","instance","PDFNull","PDFNull$1","PDFDict","map","key","preservePDFNull","tag","existingKeys","entries","dictString","PDFStream","dict","contentsSize","streamString","contents","PDFRawStream","PDFRef","objectNumber","generationNumber","PDFOperator","args","arg","PDFOperatorNames","Ops","PDFFlateStream","encode","unencodedContents","pako","PDFContentStream","operators","SimpleRNG","seed","byAscendingObjectNumber","PDFContext","result","pdfObject","literal","keys","__assign","op","suffixLength","PDFPageLeaf","autoNormalizeCTM","dictOrRef","arrayOrRef","numberOrRef","attribute","node","parentRef","contentStreamRef","Contents","startStream","endStream","annotRef","Annots","fontDictRef","Font","xObjectRef","XObject","extGStateRef","ExtGState","visitor","Parent","contentsRef","Resources","parent","PDFObjectCopier","src","dest","originalPage","clonedPage","InheritableEntries","originalDict","clonedDict","originalArray","clonedArray","originalStream","clonedStream","alreadyMapped","newRef","dereferencedValue","cloned","PDFCrossRefSection","firstEntry","nextFreeObjectNumber","section","rangeIdx","rangeLen","entryIdx","entryLen","entry","subsection","subsectionLength","subsections","firstObjectNumber","rangeLength","entryOffset","entryGen","currEntry","chunk","prevEntry","PDFTrailer","lastXRefOffset","PDFTrailerDict","PDFObjectStream","objects","offsetsString","offsets","PDFWriter","objectsPerTick","__awaiter","header","indirectObjects","xref","trailerDict","trailer","__generator","refSize","objectSize","indirectObject","xrefOffset","PDFInvalidObject","EntryType","PDFCrossRefStream","entryTuples","objectStreamRef","widths","third","firstSize","secondSize","thirdSize","byteWidths","entriesLen","firstBytes","secondBytes","thirdBytes","entryWidth","PDFStreamWriter","encodeStreams","objectsPerStream","xrefStream","uncompressedObjects","compressedObjects","objectStreamRefs","shouldNotCompress","objectStream","xrefStreamRef","PDFHexString","hexLength","hexOffset","bytesOffset","StandardFontEmbedder","fontName","customName","Encodings","glyphs","hexCodes","totalWidth","left","right","kernAmount","scale","options","descender","Ascender","Descender","FontBBox","yTop","yBottom","fontDict","glyphName","createCmap","glyphId","bfChars","glyph","id","cmapHexFormat","cmapHexString","unicode","cmapCodePointFormat","fillCmapTemplate","hs","ls","makeFontFlags","flags","flipBit","bit","deriveFontFlags","font","familyClass","PDFString","octal","CustomFontEmbedder","fontData","fontFeatures","g","fontkit","ascent","descent","bbox","cidFontDictRef","unicodeCMapRef","fontDescriptorRef","cidFontDict","fontStreamRef","italicAngle","capHeight","xHeight","minX","minY","maxX","maxY","fontDescriptor","fontStream","cmap","cmapStream","currSection","currGlyph","prevGlyph","currGlyphId","prevGlyphId","CustomFontSubsetEmbedder","customFontName","subsetGlyphId","reject","parts","err","AFRelationship","FileEmbedder","fileData","fileName","mimeType","description","creationDate","modificationDate","afRelationship","embeddedFileStream","embeddedFileStreamRef","fileSpecDict","MARKERS","ColorSpace","ChannelToColorSpace","JpegEmbedder","imageData","bitsPerComponent","colorSpace","dataView","soi","marker","channelByte","channelName","xObject","getImageType","ctype","PngType","splitAlphaChannel","rgbaChannel","pixelCount","rgbChannel","alphaChannel","rgbaOffset","rgbOffset","alphaOffset","PNG","pngData","upng","UPNG","frames","frame","hasAlphaValues","PngEmbedder","png","SMask","Stream","b0","b1","b2","b3","forceClamped","strEnd","subarray","peekedByte","emptyBuffer","DecodeStream","maybeMinBufferLength","bufEnd","requested","buffer2","isSpace","ch","Ascii85Stream","maybeLength","TILDA_CHAR","Z_LOWER_CHAR","EOF","AsciiHexStream","UPSTREAM_BLOCK_SIZE","maxDecodeLength","firstDigit","ii","digit","codeLenCodeMap","lengthDecode","distDecode","fixedLitCodeTab","fixedDistCodeTab","FlateStream","cmf","flg","hdr","blockLen","check","litCodeTable","distCodeTable","numLitCodes","numDistCodes","numCodeLenCodes","codeLenCodeLengths","codeLenCodeTab","codes","codeLengths","bitsLength","bitsOffset","what","repeatLength","limit","code1","code2","dist","bits","codeSize","codeBuf","table","maxLen","codeLen","codeVal","lengths","skip","LZWStream","earlyChange","maxLzwDictionarySize","lzwState","blockSize","estimatedDecodedSize","decodedSizeDelta","j","q","nextCode","dictionaryValues","dictionaryLengths","dictionaryPrevCodes","codeLength","prevCode","currentSequence","currentSequenceLength","decodedLength","currentBufferLength","hasPrev","bitsCached","cachedData","RunLengthStream","repeatHeader","source","decodeStream","params","EarlyChange","decodePDFRawStream","Filter","DecodeParms","fullPageBoundingBox","page","mediaBox","boundingBoxAdjustedMatrix","bb","PDFPageEmbedder","boundingBox","transformationMatrix","decodedContents","bottom","top","newline","content","asEnum","rawValue","enumType","NonFullScreenPageMode","ReadingDirection","PrintScaling","Duplex","ViewerPreferences","returnObj","PrintPageRange","NumCopies","mode","direction","scaling","duplex","rng","pageRanges","hideToolbar","HideToolbar","hideMenubar","HideMenubar","hideWindowUI","HideWindowUI","fitWindow","FitWindow","centerWindow","CenterWindow","displayTitle","DisplayDocTitle","nonFullScreenPageMode","readingDirection","printScaling","dup","pickTrayByPDFSize","PickTrayByPDFSize","printPageRange","flatRange","numCopies","tfRegex","PDFAcroField","valueOrRef","da","kids","parent_1","partialName","appearance","DA","fontSize","daMatch","daStart","daEnd","modifiedDa","flag","enable","BorderStyle","W","PDFAnnotation","Rect","rect","AS","state","appearances","AP","N","R","D","AppearanceCharacteristics","BC","BG","CA","RC","AC","components","component","rotation","color","captions","PDFWidgetAnnotation","MK","BS","P","ac","bs","normal","PDFAcroTerminal","nameOrRef","kidDicts","widgets","Kids","PDFAcroButton","opt","exportValues","Opt","widget","exportVal","useExistingOptIdx","optText","existingIdx","optIdx","apStateValue","PDFAcroCheckBox","onValue","bitIndex","AcroFieldFlags","AcroButtonFlags","AcroTextFlags","AcroChoiceFlags","PDFAcroChoice","_loop_1","o","state_1","_loop_2","newOpt","display","item","PDFAcroComboBox","PDFAcroNonTerminal","field","PDFAcroSignature","PDFAcroText","maxLength","quadding","PDFAcroPushButton","PDFAcroRadioButton","onValues","PDFAcroListBox","createPDFAcroFields","createPDFAcroField","isNonTerminal","isNonTerminalAcroField","createPDFAcroTerminal","kid","kidIsField","ftNameOrRef","getInheritableAttribute","createPDFAcroButton","createPDFAcroChoice","ffNumberOrRef","ffNumber","flagIsSet","startNode","ascend","PDFAcroForm","fields","Fields","allFields","pushFields","fieldModel","PDFCatalog","acroForm","acroFormRef","viewerPrefs","viewerPrefsRef","leafRef","pagesRef","maybeParentRef","pages","PDFPageTree","treeRef","leafsRemainingUntilTarget","kidRef","prune","kidIdx","newCount","IsDigit","IsNumericPrefix","IsNumeric","Newline","CarriageReturn","BaseParser","capNumbers","numberValue","ByteStream","steps","rawStream","Space","endstream","Keywords","PDFObjectParser","byteStream","firstNum","lookaheadStart","secondNum","nestingLvl","isEscaped","pdfArray","Type","startPos","Length","PDFObjectStreamParser","shouldWaitForTick","offsetsAndObjectNumbers","PDFXRefStreamParser","Size","Index","length_1","typeFieldWidth","offsetFieldWidth","genFieldWidth","subsectionIdx","subsectionLen","length_2","objIdx","PDFParser","pdfBytes","throwOnInvalidObject","prevOffset","isValidCatalog","catalog","failed","firstInt","secondInt","isAlphaNumeric","AnnotationFlags","asPDFName","asPDFNumber","asNumber","RotationTypes","degrees","degreeAngle","Radians","Degrees","degreesToRadians","degree","radiansToDegrees","radian","toRadians","toDegrees","reduceRotation","quadrants","adjustDimsForRotation","dims","rotateRectangle","rectangle","borderWidth","w","h","r","clip","cos","sin","tan","concatTransformationMatrix","d","e","f","translate","xPos","yPos","rotateRadians","angle","rotateDegrees","skewRadians","xSkewAngle","ySkewAngle","setDashPattern","dashArray","dashPhase","LineCapStyle","setLineCap","style","LineJoinStyle","setGraphicsState","pushGraphicsState","popGraphicsState","setLineWidth","appendBezierCurve","x1","y1","x2","y2","x3","y3","appendQuadraticCurve","closePath","moveTo","lineTo","stroke","fill","fillAndStroke","endPath","nextLine","showText","beginText","endText","setFontAndSize","setLineHeight","lineHeight","TextRenderingMode","setTextMatrix","rotateAndSkewTextRadiansAndTranslate","rotationAngle","drawObject","setFillingGrayscaleColor","gray","setStrokingGrayscaleColor","setFillingRgbColor","red","green","blue","setStrokingRgbColor","setFillingCmykColor","cyan","magenta","yellow","setStrokingCmykColor","beginMarkedContent","endMarkedContent","ColorTypes","grayscale","rgb","cmyk","Grayscale","RGB","CMYK","setFillingColor","setStrokingColor","componentsToColor","comps","colorToComponents","cx","cy","px","py","sx","sy","parameters","parse","path","cmd","ret","curArg","foundDecimal","path_1","apply","commands","cmds","runners","solveArc","coords","rx","ry","rot","large","sweep","ex","ey","segs","arcToSegments","segs_1","seg","bez","segmentToBezier","rotateX","ox","oy","th","sinTh","cosTh","pl","a00","a01","a10","a11","x0","y0","sfactorSq","sfactor","xc","yc","th0","th1","thArc","segments","th2","th3","cx1","cy1","thHalf","svgPathToOperators","drawLinesOfText","drawImage","drawPage","drawLine","drawRectangle","KAPPA","drawEllipsePath","config","xScale","yScale","xe","ye","xm","ym","drawEllipseCurves","centerX","centerY","drawEllipse","drawSvgPath","drawCheckMark","p2x","p2y","p3y","p3x","p1x","p1y","rotateInPlace","drawCheckBox","outline","checkMarkSize","checkMark","drawRadioButton","outlineScale","dot","drawButton","background","drawTextLines","drawTextField","clipX","clipY","clipWidth","clipHeight","clippingArea","markedContent","drawOptionList","highlights","line","EncryptedPDFError","FontkitNotRegisteredError","ForeignPageError","RemovePageFromEmptyDocumentError","NoSuchFieldError","UnexpectedFieldTypeError","expectedType","actualType","MissingOnValueCheckError","FieldAlreadyExistsError","InvalidFieldNamePartError","namePart","FieldExistsAsNonTerminalError","RichTextFieldReadError","CombedTextLayoutError","lineLength","cellCount","ExceededMaxLengthError","textLength","InvalidMaxLengthError","TextAlignment","MIN_FONT_SIZE","MAX_FONT_SIZE","computeFontSize","bounds","multiline","linesUsed","lineIdx","lineLen","spaceInLineRemaining","isLastWord","widthOfWord","totalHeight","computeCombedFontSize","cellWidth","cellHeight","tooLong","lastIndexOfWhitespace","splitOutLines","lastWhitespaceIdx","remainder","layoutMultilineText","alignment","textLines","prevRemainder","layoutCombedText","cells","cellOffset","charOffset","charLength","cellCenter","layoutSinglelineText","normalizeAppearance","getDefaultFontSize","defaultFontSize","colorRegex","getDefaultColor","c1","c2","c3","c4","updateDefaultAppearance","defaultCheckBoxAppearanceProvider","checkBox","widgetColor","fieldColor","ap","rotate","black","borderColor","normalBackgroundColor","downBackgroundColor","textColor","defaultRadioGroupAppearanceProvider","radioGroup","defaultButtonAppearanceProvider","button","widgetFontSize","fieldFontSize","normalText","downText","normalLayout","downLayout","defaultTextFieldAppearanceProvider","textField","layout","defaultDropdownAppearanceProvider","dropdown","defaultOptionListAppearanceProvider","optionList","selected","selectedLines","PDFEmbeddedPage","doc","embedder","PDFDocument","PDFFont","PDFImage","imgWidthScale","imgHeightScale","ImageAlignment","assertFieldAppearanceOptions","PDFField","acroField","_font","backgroundColor","degreesAngle","caption","hidden","pageRef","newDa","rollover","down","streamRef","image","adj","imageDims","imageName","onStreamRef","offStreamRef","appearanceDict","PDFCheckBox","acroCheckBox","PDFPage","widgetRef","provider","apProvider","PDFDropdown","acroComboBox","rawOptions","optionObjects","optionsArr","existingOptions","newOptions","merge","validOptions","hasCustomOption","option","existingValues","hasAppearances","PDFOptionList","acroListBox","PDFRadioGroup","acroRadioButton","exportOptions","onOptions","_j","PDFSignature","acroSignature","PDFTextField","acroText","fieldAlignment","StandardFonts","PDFForm","convertToPDFField","PDFButton","nameParts","splitFieldName","addFieldToParent","comboBox","listBox","radioButton","lenFields","lenWidgets","xObjectKey","fieldKids","kidsCount","childIndex","child","fieldRef","refOrDict","name_1","partialNames","nonTerminal","nodeRef","fullyQualifiedName","PageSizes","ParseSpeeds","PDFEmbeddedFile","Names","EmbeddedFiles","EFNames","AF","PDFJavaScript","Javascript","JSNames","JavaScriptEmbedder","script","scriptName","jsActionDict","ignoreEncryption","updateMetadata","pdf","parseSpeed","pageTree","pageTreeRef","form","title","assertIsLiteralOrHexString","author","subject","keywords","creator","producer","prefs","language","pageCount","srcDoc","copier","srcPages","copiedPages","srcPage","copiedPage","pdfCopy","contentPages","javaScript","attachment","embeddedFile","subset","features","pdfFont","jpg","pdfImage","embeddedPage","boundingBoxes","transformationMatrices","currPage","nextPage","maybeCopyPage","embeddedPages","box","matrix","useObjectStreams","addDefaultPage","updateFieldAppearances","Writer","otherOptions","__rest","annotations","embeddables","pdfLib","now","info","existingInfo","newInfo","BlendMode","leafNode","Rotate","cropBox","bleedBox","trimBox","artBox","hasCropBox","hasBleedBox","hasTrimBox","hasArtBox","startRef","endRef","annots","annot","fontColor","yDecrease","yIncrease","xDecrease","xIncrease","operator","contentStream","oldFont","newFont","newFontKey","textWidth","encodedLines","graphicsStateKey","_k","_l","_m","_o","oldFontKey","useExisting","opacity","borderOpacity","blendMode","graphicsState","selectors","list","inkLists","dummyRef","pageLeaf","PDFPage$1","acroPushButton","PDFButton$1"],"mappings":"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OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,O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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125]}